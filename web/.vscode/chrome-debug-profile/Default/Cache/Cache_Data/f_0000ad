function debounce(func, delay) {
  let timeoutId = null;
  const debounced = (...args) => {
    if (timeoutId !== null) {
      clearTimeout(timeoutId);
    }
    timeoutId = setTimeout(() => {
      func(...args);
      timeoutId = null;
    }, delay);
  };
  debounced.cancel = () => {
    if (timeoutId !== null) {
      clearTimeout(timeoutId);
      timeoutId = null;
    }
  };
  return debounced;
}
export const resize = (node, callback) => {
  if (typeof callback !== "function") {
    console.warn("Resize action requires a callback function.");
    return {
      destroy() {
      },
      update() {
      }
    };
  }
  if (node) {
    requestAnimationFrame(() => {
      if (node) {
        const { width, height } = node.getBoundingClientRect();
        callback(width, height);
      }
    });
  }
  let resizeObserver;
  let debouncedHandleResize;
  let debouncedCallback;
  if (typeof ResizeObserver !== "undefined") {
    debouncedCallback = debounce(
      (width, height) => {
        if (typeof callback === "function") {
          callback(width, height);
        }
      },
      16
    );
    resizeObserver = new ResizeObserver((entries) => {
      if (!entries.length) return;
      const entry = entries[0];
      if (entry?.contentRect) {
        const { width, height } = entry.contentRect;
        debouncedCallback(width, height);
      }
    });
    resizeObserver.observe(node);
    return {
      update(newCallback) {
        if (typeof newCallback === "function") {
          callback = newCallback;
        } else {
          console.warn("Resize action update requires a function.");
        }
      },
      destroy() {
        if (resizeObserver) {
          resizeObserver.disconnect();
        }
        if (debouncedCallback && typeof debouncedCallback.cancel === "function") {
          debouncedCallback.cancel();
        }
      }
    };
  } else {
    console.warn(
      "ResizeObserver not supported. Using debounced window resize fallback."
    );
    const handleResize = () => {
      if (node) {
        const { width, height } = node.getBoundingClientRect();
        if (typeof callback === "function") {
          callback(width, height);
        }
      }
    };
    debouncedHandleResize = debounce(handleResize, 200);
    window.addEventListener("resize", debouncedHandleResize);
    return {
      update(newCallback) {
        if (typeof newCallback === "function") {
          callback = newCallback;
        } else {
          console.warn("Resize action update requires a function.");
        }
      },
      destroy() {
        if (debouncedHandleResize) {
          debouncedHandleResize.cancel();
          window.removeEventListener("resize", debouncedHandleResize);
        }
      }
    };
  }
};
export function createResizeObserver() {
  let width = $state(0);
  let height = $state(0);
  let isObserving = $state(false);
  let observer = null;
  function observe(element) {
    if (!element) return;
    if (observer) {
      observer.disconnect();
    }
    const rect = element.getBoundingClientRect();
    width = rect.width;
    height = rect.height;
    if (typeof ResizeObserver !== "undefined") {
      observer = new ResizeObserver((entries) => {
        if (!entries.length) return;
        const entry = entries[0];
        if (entry?.contentRect) {
          width = entry.contentRect.width;
          height = entry.contentRect.height;
        }
      });
      observer.observe(element);
      isObserving = true;
    } else {
      console.warn("ResizeObserver not supported");
      isObserving = false;
    }
  }
  function disconnect() {
    if (observer) {
      observer.disconnect();
      observer = null;
    }
    isObserving = false;
  }
  return {
    // Reactive state
    get width() {
      return width;
    },
    get height() {
      return height;
    },
    get isObserving() {
      return isObserving;
    },
    // Actions
    observe,
    disconnect
  };
}
export function createWindowResizeObserver() {
  let windowWidth = $state(
    typeof window !== "undefined" ? window.innerWidth : 0
  );
  let windowHeight = $state(
    typeof window !== "undefined" ? window.innerHeight : 0
  );
  let isListening = $state(false);
  const debouncedResize = debounce(() => {
    if (typeof window !== "undefined") {
      windowWidth = window.innerWidth;
      windowHeight = window.innerHeight;
    }
  }, 100);
  function startListening() {
    if (typeof window === "undefined") return;
    windowWidth = window.innerWidth;
    windowHeight = window.innerHeight;
    window.addEventListener("resize", debouncedResize);
    isListening = true;
  }
  function stopListening() {
    if (typeof window === "undefined") return;
    window.removeEventListener("resize", debouncedResize);
    debouncedResize.cancel();
    isListening = false;
  }
  $effect(() => {
    return () => {
      if (isListening) {
        stopListening();
      }
    };
  });
  return {
    // Reactive state
    get windowWidth() {
      return windowWidth;
    },
    get windowHeight() {
      return windowHeight;
    },
    get isListening() {
      return isListening;
    },
    // Actions
    startListening,
    stopListening
  };
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlc2l6ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFJlc2l6ZSBBY3Rpb24gdXNpbmcgU3ZlbHRlIDUgLSBObyBzdG9yZXMsIHB1cmUgZnVuY3Rpb25hbCBhcHByb2FjaFxuICpcbiAqIEEgU3ZlbHRlIGFjdGlvbiB0aGF0IGRldGVjdHMgZWxlbWVudCByZXNpemluZyBhbmQgY2FsbHMgdGhlIGNhbGxiYWNrXG4gKiB3aXRoIHRoZSBuZXcgd2lkdGggYW5kIGhlaWdodC4gSW5jbHVkZXMgZGVib3VuY2VkIGZhbGxiYWNrIGZvciB3aW5kb3cgcmVzaXplLlxuICovXG5cbmltcG9ydCB0eXBlIHsgQWN0aW9uIH0gZnJvbSBcInN2ZWx0ZS9hY3Rpb25cIjtcblxuLyoqXG4gKiBEZWJvdW5jZSB1dGlsaXR5IGZ1bmN0aW9uIC0gcHVyZSBmdW5jdGlvbmFsIGFwcHJvYWNoXG4gKi9cbmZ1bmN0aW9uIGRlYm91bmNlPFQgZXh0ZW5kcyAoLi4uYXJnczogdW5rbm93bltdKSA9PiB1bmtub3duPihcbiAgZnVuYzogVCxcbiAgZGVsYXk6IG51bWJlclxuKTogVCAmIHsgY2FuY2VsOiAoKSA9PiB2b2lkIH0ge1xuICBsZXQgdGltZW91dElkOiBSZXR1cm5UeXBlPHR5cGVvZiBzZXRUaW1lb3V0PiB8IG51bGwgPSBudWxsO1xuXG4gIGNvbnN0IGRlYm91bmNlZCA9ICguLi5hcmdzOiBQYXJhbWV0ZXJzPFQ+KSA9PiB7XG4gICAgaWYgKHRpbWVvdXRJZCAhPT0gbnVsbCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgfVxuICAgIHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgZnVuYyguLi5hcmdzKTtcbiAgICAgIHRpbWVvdXRJZCA9IG51bGw7XG4gICAgfSwgZGVsYXkpO1xuICB9O1xuXG4gIGRlYm91bmNlZC5jYW5jZWwgPSAoKSA9PiB7XG4gICAgaWYgKHRpbWVvdXRJZCAhPT0gbnVsbCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgICB0aW1lb3V0SWQgPSBudWxsO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gZGVib3VuY2VkIGFzIFQgJiB7IGNhbmNlbDogKCkgPT4gdm9pZCB9O1xufVxuXG4vKipcbiAqIFJlc2l6ZSBhY3Rpb24gZm9yIFN2ZWx0ZSA1IC0gZGV0ZWN0cyBlbGVtZW50IHJlc2l6aW5nXG4gKi9cbmV4cG9ydCBjb25zdCByZXNpemU6IEFjdGlvbjxcbiAgSFRNTEVsZW1lbnQsXG4gICh3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikgPT4gdm9pZFxuPiA9IChub2RlLCBjYWxsYmFjaykgPT4ge1xuICAvLyBFbnN1cmUgY2FsbGJhY2sgaXMgYSBmdW5jdGlvblxuICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBjb25zb2xlLndhcm4oXCJSZXNpemUgYWN0aW9uIHJlcXVpcmVzIGEgY2FsbGJhY2sgZnVuY3Rpb24uXCIpO1xuICAgIHJldHVybiB7XG4gICAgICBkZXN0cm95KCkge30sXG4gICAgICB1cGRhdGUoKSB7fSxcbiAgICB9O1xuICB9XG5cbiAgLy8gSW5pdGlhbCBtZWFzdXJlbWVudCB3aXRoIHByb3BlciB0aW1pbmdcbiAgaWYgKG5vZGUpIHtcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgaWYgKG5vZGUpIHtcbiAgICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSBub2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBjYWxsYmFjayh3aWR0aCwgaGVpZ2h0KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8vIFNldCB1cCBSZXNpemVPYnNlcnZlciBpZiBhdmFpbGFibGUgKG1vZGVybiBhcHByb2FjaClcbiAgbGV0IHJlc2l6ZU9ic2VydmVyOiBSZXNpemVPYnNlcnZlciB8IHVuZGVmaW5lZDtcbiAgbGV0IGRlYm91bmNlZEhhbmRsZVJlc2l6ZTogKCgpID0+IHZvaWQpICYgeyBjYW5jZWw6ICgpID0+IHZvaWQgfTtcbiAgbGV0IGRlYm91bmNlZENhbGxiYWNrOiAoKHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKSA9PiB2b2lkKSAmIHtcbiAgICBjYW5jZWw6ICgpID0+IHZvaWQ7XG4gIH07XG5cbiAgaWYgKHR5cGVvZiBSZXNpemVPYnNlcnZlciAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIC8vIENyZWF0ZSBkZWJvdW5jZWQgY2FsbGJhY2sgdG8gcHJldmVudCBSZXNpemVPYnNlcnZlciBsb29wc1xuICAgIGRlYm91bmNlZENhbGxiYWNrID0gZGVib3VuY2UoXG4gICAgICAoKHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgIGNhbGxiYWNrKHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICB9XG4gICAgICB9KSBhcyAoLi4uYXJnczogdW5rbm93bltdKSA9PiB1bmtub3duLFxuICAgICAgMTZcbiAgICApIGFzICgod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpID0+IHZvaWQpICYgeyBjYW5jZWw6ICgpID0+IHZvaWQgfTsgLy8gMTZtcyA9IH42MGZwcywgcHJldmVudHMgZXhjZXNzaXZlIGNhbGxzXG5cbiAgICByZXNpemVPYnNlcnZlciA9IG5ldyBSZXNpemVPYnNlcnZlcigoZW50cmllcykgPT4ge1xuICAgICAgaWYgKCFlbnRyaWVzLmxlbmd0aCkgcmV0dXJuO1xuXG4gICAgICBjb25zdCBlbnRyeSA9IGVudHJpZXNbMF07XG4gICAgICBpZiAoZW50cnk/LmNvbnRlbnRSZWN0KSB7XG4gICAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gZW50cnkuY29udGVudFJlY3Q7XG4gICAgICAgIC8vIFVzZSBkZWJvdW5jZWQgY2FsbGJhY2sgdG8gcHJldmVudCBpbmZpbml0ZSBsb29wc1xuICAgICAgICBkZWJvdW5jZWRDYWxsYmFjayh3aWR0aCwgaGVpZ2h0KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJlc2l6ZU9ic2VydmVyLm9ic2VydmUobm9kZSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgdXBkYXRlKG5ld0NhbGxiYWNrOiAod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpID0+IHZvaWQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBuZXdDYWxsYmFjayA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgY2FsbGJhY2sgPSBuZXdDYWxsYmFjaztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oXCJSZXNpemUgYWN0aW9uIHVwZGF0ZSByZXF1aXJlcyBhIGZ1bmN0aW9uLlwiKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIGlmIChyZXNpemVPYnNlcnZlcikge1xuICAgICAgICAgIHJlc2l6ZU9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBDYW5jZWwgYW55IHBlbmRpbmcgZGVib3VuY2VkIGNhbGxzXG4gICAgICAgIGlmIChcbiAgICAgICAgICBkZWJvdW5jZWRDYWxsYmFjayAmJlxuICAgICAgICAgIHR5cGVvZiBkZWJvdW5jZWRDYWxsYmFjay5jYW5jZWwgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICApIHtcbiAgICAgICAgICBkZWJvdW5jZWRDYWxsYmFjay5jYW5jZWwoKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIC8vIEZhbGxiYWNrIGZvciBvbGRlciBicm93c2VycyB3aXRob3V0IFJlc2l6ZU9ic2VydmVyXG4gICAgY29uc29sZS53YXJuKFxuICAgICAgXCJSZXNpemVPYnNlcnZlciBub3Qgc3VwcG9ydGVkLiBVc2luZyBkZWJvdW5jZWQgd2luZG93IHJlc2l6ZSBmYWxsYmFjay5cIlxuICAgICk7XG5cbiAgICBjb25zdCBoYW5kbGVSZXNpemUgPSAoKSA9PiB7XG4gICAgICBpZiAobm9kZSkge1xuICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IG5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgIGNhbGxiYWNrKHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8vIENyZWF0ZSBkZWJvdW5jZWQgcmVzaXplIGhhbmRsZXJcbiAgICBkZWJvdW5jZWRIYW5kbGVSZXNpemUgPSBkZWJvdW5jZShoYW5kbGVSZXNpemUsIDIwMCk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgZGVib3VuY2VkSGFuZGxlUmVzaXplKTtcblxuICAgIHJldHVybiB7XG4gICAgICB1cGRhdGUobmV3Q2FsbGJhY2s6ICh3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikgPT4gdm9pZCkge1xuICAgICAgICBpZiAodHlwZW9mIG5ld0NhbGxiYWNrID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICBjYWxsYmFjayA9IG5ld0NhbGxiYWNrO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUud2FybihcIlJlc2l6ZSBhY3Rpb24gdXBkYXRlIHJlcXVpcmVzIGEgZnVuY3Rpb24uXCIpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZGVzdHJveSgpIHtcbiAgICAgICAgaWYgKGRlYm91bmNlZEhhbmRsZVJlc2l6ZSkge1xuICAgICAgICAgIGRlYm91bmNlZEhhbmRsZVJlc2l6ZS5jYW5jZWwoKTtcbiAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBkZWJvdW5jZWRIYW5kbGVSZXNpemUpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgIH07XG4gIH1cbn07XG5cbi8qKlxuICogQ3JlYXRlIGEgcmVzaXplIG9ic2VydmVyIHVzaW5nIHJ1bmVzIGZvciBtYW51YWwgY29udHJvbFxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUmVzaXplT2JzZXJ2ZXIoKSB7XG4gIGxldCB3aWR0aCA9ICRzdGF0ZSgwKTtcbiAgbGV0IGhlaWdodCA9ICRzdGF0ZSgwKTtcbiAgbGV0IGlzT2JzZXJ2aW5nID0gJHN0YXRlKGZhbHNlKTtcbiAgbGV0IG9ic2VydmVyOiBSZXNpemVPYnNlcnZlciB8IG51bGwgPSBudWxsO1xuXG4gIGZ1bmN0aW9uIG9ic2VydmUoZWxlbWVudDogSFRNTEVsZW1lbnQpIHtcbiAgICBpZiAoIWVsZW1lbnQpIHJldHVybjtcblxuICAgIC8vIENsZWFuIHVwIGV4aXN0aW5nIG9ic2VydmVyXG4gICAgaWYgKG9ic2VydmVyKSB7XG4gICAgICBvYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgfVxuXG4gICAgLy8gSW5pdGlhbCBtZWFzdXJlbWVudFxuICAgIGNvbnN0IHJlY3QgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHdpZHRoID0gcmVjdC53aWR0aDtcbiAgICBoZWlnaHQgPSByZWN0LmhlaWdodDtcblxuICAgIC8vIFNldCB1cCBuZXcgb2JzZXJ2ZXJcbiAgICBpZiAodHlwZW9mIFJlc2l6ZU9ic2VydmVyICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBvYnNlcnZlciA9IG5ldyBSZXNpemVPYnNlcnZlcigoZW50cmllcykgPT4ge1xuICAgICAgICBpZiAoIWVudHJpZXMubGVuZ3RoKSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgZW50cnkgPSBlbnRyaWVzWzBdO1xuICAgICAgICBpZiAoZW50cnk/LmNvbnRlbnRSZWN0KSB7XG4gICAgICAgICAgd2lkdGggPSBlbnRyeS5jb250ZW50UmVjdC53aWR0aDtcbiAgICAgICAgICBoZWlnaHQgPSBlbnRyeS5jb250ZW50UmVjdC5oZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBvYnNlcnZlci5vYnNlcnZlKGVsZW1lbnQpO1xuICAgICAgaXNPYnNlcnZpbmcgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJSZXNpemVPYnNlcnZlciBub3Qgc3VwcG9ydGVkXCIpO1xuICAgICAgaXNPYnNlcnZpbmcgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBkaXNjb25uZWN0KCkge1xuICAgIGlmIChvYnNlcnZlcikge1xuICAgICAgb2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgICAgb2JzZXJ2ZXIgPSBudWxsO1xuICAgIH1cbiAgICBpc09ic2VydmluZyA9IGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICAvLyBSZWFjdGl2ZSBzdGF0ZVxuICAgIGdldCB3aWR0aCgpIHtcbiAgICAgIHJldHVybiB3aWR0aDtcbiAgICB9LFxuICAgIGdldCBoZWlnaHQoKSB7XG4gICAgICByZXR1cm4gaGVpZ2h0O1xuICAgIH0sXG4gICAgZ2V0IGlzT2JzZXJ2aW5nKCkge1xuICAgICAgcmV0dXJuIGlzT2JzZXJ2aW5nO1xuICAgIH0sXG5cbiAgICAvLyBBY3Rpb25zXG4gICAgb2JzZXJ2ZSxcbiAgICBkaXNjb25uZWN0LFxuICB9O1xufVxuXG4vKipcbiAqIENyZWF0ZSBhIHdpbmRvdyByZXNpemUgbGlzdGVuZXIgdXNpbmcgcnVuZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVdpbmRvd1Jlc2l6ZU9ic2VydmVyKCkge1xuICBsZXQgd2luZG93V2lkdGggPSAkc3RhdGUoXG4gICAgdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdy5pbm5lcldpZHRoIDogMFxuICApO1xuICBsZXQgd2luZG93SGVpZ2h0ID0gJHN0YXRlKFxuICAgIHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cuaW5uZXJIZWlnaHQgOiAwXG4gICk7XG4gIGxldCBpc0xpc3RlbmluZyA9ICRzdGF0ZShmYWxzZSk7XG5cbiAgY29uc3QgZGVib3VuY2VkUmVzaXplID0gZGVib3VuY2UoKCkgPT4ge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICB3aW5kb3dXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgd2luZG93SGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xuICAgIH1cbiAgfSwgMTAwKTtcblxuICBmdW5jdGlvbiBzdGFydExpc3RlbmluZygpIHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuO1xuXG4gICAgLy8gSW5pdGlhbCB2YWx1ZXNcbiAgICB3aW5kb3dXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgIHdpbmRvd0hlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcblxuICAgIC8vIEFkZCBsaXN0ZW5lclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIGRlYm91bmNlZFJlc2l6ZSk7XG4gICAgaXNMaXN0ZW5pbmcgPSB0cnVlO1xuICB9XG5cbiAgZnVuY3Rpb24gc3RvcExpc3RlbmluZygpIHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuO1xuXG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgZGVib3VuY2VkUmVzaXplKTtcbiAgICBkZWJvdW5jZWRSZXNpemUuY2FuY2VsKCk7XG4gICAgaXNMaXN0ZW5pbmcgPSBmYWxzZTtcbiAgfVxuXG4gIC8vIEF1dG8tY2xlYW51cCBlZmZlY3RcbiAgJGVmZmVjdCgoKSA9PiB7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlmIChpc0xpc3RlbmluZykge1xuICAgICAgICBzdG9wTGlzdGVuaW5nKCk7XG4gICAgICB9XG4gICAgfTtcbiAgfSk7XG5cbiAgcmV0dXJuIHtcbiAgICAvLyBSZWFjdGl2ZSBzdGF0ZVxuICAgIGdldCB3aW5kb3dXaWR0aCgpIHtcbiAgICAgIHJldHVybiB3aW5kb3dXaWR0aDtcbiAgICB9LFxuICAgIGdldCB3aW5kb3dIZWlnaHQoKSB7XG4gICAgICByZXR1cm4gd2luZG93SGVpZ2h0O1xuICAgIH0sXG4gICAgZ2V0IGlzTGlzdGVuaW5nKCkge1xuICAgICAgcmV0dXJuIGlzTGlzdGVuaW5nO1xuICAgIH0sXG5cbiAgICAvLyBBY3Rpb25zXG4gICAgc3RhcnRMaXN0ZW5pbmcsXG4gICAgc3RvcExpc3RlbmluZyxcbiAgfTtcbn1cbiJdLCJtYXBwaW5ncyI6IkFBWUEsU0FBUyxTQUNQLE1BQ0EsT0FDNEI7QUFDNUIsTUFBSSxZQUFrRDtBQUV0RCxRQUFNLFlBQVksSUFBSSxTQUF3QjtBQUM1QyxRQUFJLGNBQWMsTUFBTTtBQUN0QixtQkFBYSxTQUFTO0FBQUEsSUFDeEI7QUFDQSxnQkFBWSxXQUFXLE1BQU07QUFDM0IsV0FBSyxHQUFHLElBQUk7QUFDWixrQkFBWTtBQUFBLElBQ2QsR0FBRyxLQUFLO0FBQUEsRUFDVjtBQUVBLFlBQVUsU0FBUyxNQUFNO0FBQ3ZCLFFBQUksY0FBYyxNQUFNO0FBQ3RCLG1CQUFhLFNBQVM7QUFDdEIsa0JBQVk7QUFBQSxJQUNkO0FBQUEsRUFDRjtBQUVBLFNBQU87QUFDVDtBQUtPLGFBQU0sU0FHVCxDQUFDLE1BQU0sYUFBYTtBQUV0QixNQUFJLE9BQU8sYUFBYSxZQUFZO0FBQ2xDLFlBQVEsS0FBSyw2Q0FBNkM7QUFDMUQsV0FBTztBQUFBLE1BQ0wsVUFBVTtBQUFBLE1BQUM7QUFBQSxNQUNYLFNBQVM7QUFBQSxNQUFDO0FBQUEsSUFDWjtBQUFBLEVBQ0Y7QUFHQSxNQUFJLE1BQU07QUFDUiwwQkFBc0IsTUFBTTtBQUMxQixVQUFJLE1BQU07QUFDUixjQUFNLEVBQUUsT0FBTyxPQUFPLElBQUksS0FBSyxzQkFBc0I7QUFDckQsaUJBQVMsT0FBTyxNQUFNO0FBQUEsTUFDeEI7QUFBQSxJQUNGLENBQUM7QUFBQSxFQUNIO0FBR0EsTUFBSTtBQUNKLE1BQUk7QUFDSixNQUFJO0FBSUosTUFBSSxPQUFPLG1CQUFt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