import {
  IApplicationInitializationServiceInterface,
  IArrowRenderingServiceInterface,
  IConstructTabCoordinationServiceInterface,
  IDeviceDetectionServiceInterface,
  IExportServiceInterface,
  IGridRenderingServiceInterface,
  IMotionGenerationServiceInterface,
  IOrientationCalculationServiceInterface,
  IOverlayRenderingServiceInterface,
  IPanelManagementServiceInterface,
  IPersistenceServiceInterface,
  IPictographRenderingServiceInterface,
  IPictographServiceInterface,
  IPropRenderingServiceInterface,
  ISequenceDomainServiceInterface,
  ISequenceGenerationServiceInterface,
  ISequenceServiceInterface,
  ISettingsServiceInterface,
  IStartPositionServiceInterface,
  ISvgConfigurationInterface,
  ISvgUtilityServiceInterface,
  IPrintablePageLayoutServiceInterface,
  IPageFactoryServiceInterface,
  IPageImageExportServiceInterface,
  ISequenceCardExportIntegrationServiceInterface,
  IDataTransformationServiceInterface
} from "/src/lib/services/di/interfaces/core-interfaces.ts";
import { ILetterQueryServiceInterface } from "/src/lib/services/di/interfaces/codex-interfaces.ts";
import { ApplicationInitializationService } from "/src/lib/services/implementations/application/ApplicationInitializationService.ts";
import { ConstructTabCoordinationService } from "/src/lib/services/implementations/construct/ConstructTabCoordinationService.ts";
import { PictographRenderingService } from "/src/lib/services/implementations/rendering/PictographRenderingService.ts";
import { SequenceService } from "/src/lib/services/implementations/sequence/SequenceService.ts";
import { SequenceGenerationService } from "/src/lib/services/implementations/generation/SequenceGenerationService.ts";
import { IArrowPositioningOrchestratorInterface } from "/src/lib/services/di/interfaces/positioning-interfaces.ts";
export async function registerCoreServices(container) {
  container.registerSingletonClass(ISequenceDomainServiceInterface);
  container.registerSingletonClass(IPersistenceServiceInterface);
  container.registerSingletonClass(ISettingsServiceInterface);
  container.registerSingletonClass(IDeviceDetectionServiceInterface);
  container.registerSingletonClass(IPanelManagementServiceInterface);
  container.registerSingletonClass(IStartPositionServiceInterface);
  container.registerSingletonClass(ISvgConfigurationInterface);
  container.registerSingletonClass(ISvgUtilityServiceInterface);
  container.registerSingletonClass(IDataTransformationServiceInterface);
  container.registerSingletonClass(IGridRenderingServiceInterface);
  container.registerSingletonClass(IArrowRenderingServiceInterface);
  container.registerSingletonClass(IOverlayRenderingServiceInterface);
  container.registerSingletonClass(IPropRenderingServiceInterface);
  container.registerFactory(ISequenceServiceInterface, () => {
    const sequenceDomainService = container.resolve(
      ISequenceDomainServiceInterface
    );
    const persistenceService = container.resolve(IPersistenceServiceInterface);
    return new SequenceService(sequenceDomainService, persistenceService);
  });
  container.registerFactory(IConstructTabCoordinationServiceInterface, () => {
    const sequenceService = container.resolve(ISequenceServiceInterface);
    const startPositionService = container.resolve(
      IStartPositionServiceInterface
    );
    return new ConstructTabCoordinationService(
      sequenceService,
      startPositionService
    );
  });
  container.registerFactory(IPictographRenderingServiceInterface, () => {
    const arrowPositioning = container.resolve(
      IArrowPositioningOrchestratorInterface
    );
    const propRendering = container.resolve(IPropRenderingServiceInterface);
    const svgUtility = container.resolve(ISvgUtilityServiceInterface);
    const gridRendering = container.resolve(IGridRenderingServiceInterface);
    const arrowRendering = container.resolve(IArrowRenderingServiceInterface);
    const overlayRendering = container.resolve(
      IOverlayRenderingServiceInterface
    );
    const dataTransformation = container.resolve(
      IDataTransformationServiceInterface
    );
    return new PictographRenderingService(
      arrowPositioning,
      propRendering,
      svgUtility,
      gridRendering,
      arrowRendering,
      overlayRendering,
      dataTransformation
    );
  });
  container.registerSingletonClass(IPictographServiceInterface);
  container.registerSingletonClass(IExportServiceInterface);
  container.registerSingletonClass(IMotionGenerationServiceInterface);
  container.registerSingletonClass(IOrientationCalculationServiceInterface);
  container.registerFactory(ISequenceGenerationServiceInterface, () => {
    const letterQueryService = container.resolve(ILetterQueryServiceInterface);
    const orientationCalculationService = container.resolve(
      IOrientationCalculationServiceInterface
    );
    return new SequenceGenerationService(
      letterQueryService,
      orientationCalculationService
    );
  });
  container.registerSingletonClass(IPrintablePageLayoutServiceInterface);
  container.registerSingletonClass(IPageImageExportServiceInterface);
  container.registerFactory(IPageFactoryServiceInterface, () => {
    const layoutService = container.resolve(
      IPrintablePageLayoutServiceInterface
    );
    return new IPageFactoryServiceInterface.implementation(layoutService);
  });
  container.registerFactory(
    ISequenceCardExportIntegrationServiceInterface,
    () => {
      const pageImageExportService = container.resolve(
        IPageImageExportServiceInterface
      );
      return new ISequenceCardExportIntegrationServiceInterface.implementation(
        pageImageExportService
      );
    }
  );
  container.registerFactory(IApplicationInitializationServiceInterface, () => {
    const settingsService = container.resolve(ISettingsServiceInterface);
    const persistenceService = container.resolve(IPersistenceServiceInterface);
    return new ApplicationInitializationService(
      settingsService,
      persistenceService
    );
  });
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvcmUtc2VydmljZXMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3JlIFNlcnZpY2VzIFJlZ2lzdHJhdGlvblxuICogSGFuZGxlcyByZWdpc3RyYXRpb24gb2YgY29yZSBidXNpbmVzcyBsb2dpYyBhbmQgaW5mcmFzdHJ1Y3R1cmUgc2VydmljZXNcbiAqL1xuXG5pbXBvcnQgdHlwZSB7IFNlcnZpY2VDb250YWluZXIgfSBmcm9tIFwiLi4vU2VydmljZUNvbnRhaW5lclwiO1xuaW1wb3J0IHtcbiAgSUFwcGxpY2F0aW9uSW5pdGlhbGl6YXRpb25TZXJ2aWNlSW50ZXJmYWNlLFxuICBJQXJyb3dSZW5kZXJpbmdTZXJ2aWNlSW50ZXJmYWNlLFxuICBJQ29uc3RydWN0VGFiQ29vcmRpbmF0aW9uU2VydmljZUludGVyZmFjZSxcbiAgSURldmljZURldGVjdGlvblNlcnZpY2VJbnRlcmZhY2UsXG4gIElFeHBvcnRTZXJ2aWNlSW50ZXJmYWNlLFxuICBJR3JpZFJlbmRlcmluZ1NlcnZpY2VJbnRlcmZhY2UsXG4gIElNb3Rpb25HZW5lcmF0aW9uU2VydmljZUludGVyZmFjZSxcbiAgSU9yaWVudGF0aW9uQ2FsY3VsYXRpb25TZXJ2aWNlSW50ZXJmYWNlLFxuICBJT3ZlcmxheVJlbmRlcmluZ1NlcnZpY2VJbnRlcmZhY2UsXG4gIElQYW5lbE1hbmFnZW1lbnRTZXJ2aWNlSW50ZXJmYWNlLFxuICBJUGVyc2lzdGVuY2VTZXJ2aWNlSW50ZXJmYWNlLFxuICBJUGljdG9ncmFwaFJlbmRlcmluZ1NlcnZpY2VJbnRlcmZhY2UsXG4gIElQaWN0b2dyYXBoU2VydmljZUludGVyZmFjZSxcbiAgSVByb3BSZW5kZXJpbmdTZXJ2aWNlSW50ZXJmYWNlLFxuICBJU2VxdWVuY2VEb21haW5TZXJ2aWNlSW50ZXJmYWNlLFxuICBJU2VxdWVuY2VHZW5lcmF0aW9uU2VydmljZUludGVyZmFjZSxcbiAgSVNlcXVlbmNlU2VydmljZUludGVyZmFjZSxcbiAgSVNldHRpbmdzU2VydmljZUludGVyZmFjZSxcbiAgSVN0YXJ0UG9zaXRpb25TZXJ2aWNlSW50ZXJmYWNlLFxuICBJU3ZnQ29uZmlndXJhdGlvbkludGVyZmFjZSxcbiAgSVN2Z1V0aWxpdHlTZXJ2aWNlSW50ZXJmYWNlLFxuICBJUHJpbnRhYmxlUGFnZUxheW91dFNlcnZpY2VJbnRlcmZhY2UsXG4gIElQYWdlRmFjdG9yeVNlcnZpY2VJbnRlcmZhY2UsXG4gIElQYWdlSW1hZ2VFeHBvcnRTZXJ2aWNlSW50ZXJmYWNlLFxuICBJU2VxdWVuY2VDYXJkRXhwb3J0SW50ZWdyYXRpb25TZXJ2aWNlSW50ZXJmYWNlLFxuICBJRGF0YVRyYW5zZm9ybWF0aW9uU2VydmljZUludGVyZmFjZSxcbn0gZnJvbSBcIi4uL2ludGVyZmFjZXMvY29yZS1pbnRlcmZhY2VzXCI7XG5pbXBvcnQgeyBJTGV0dGVyUXVlcnlTZXJ2aWNlSW50ZXJmYWNlIH0gZnJvbSBcIi4uL2ludGVyZmFjZXMvY29kZXgtaW50ZXJmYWNlc1wiO1xuXG5pbXBvcnQgeyBBcHBsaWNhdGlvbkluaXRpYWxpemF0aW9uU2VydmljZSB9IGZyb20gXCIuLi8uLi9pbXBsZW1lbnRhdGlvbnMvYXBwbGljYXRpb24vQXBwbGljYXRpb25Jbml0aWFsaXphdGlvblNlcnZpY2VcIjtcbmltcG9ydCB7IENvbnN0cnVjdFRhYkNvb3JkaW5hdGlvblNlcnZpY2UgfSBmcm9tIFwiLi4vLi4vaW1wbGVtZW50YXRpb25zL2NvbnN0cnVjdC9Db25zdHJ1Y3RUYWJDb29yZGluYXRpb25TZXJ2aWNlXCI7XG5pbXBvcnQgeyBQaWN0b2dyYXBoUmVuZGVyaW5nU2VydmljZSB9IGZyb20gXCIuLi8uLi9pbXBsZW1lbnRhdGlvbnMvcmVuZGVyaW5nL1BpY3RvZ3JhcGhSZW5kZXJpbmdTZXJ2aWNlXCI7XG5pbXBvcnQgeyBTZXF1ZW5jZVNlcnZpY2UgfSBmcm9tIFwiLi4vLi4vaW1wbGVtZW50YXRpb25zL3NlcXVlbmNlL1NlcXVlbmNlU2VydmljZVwiO1xuaW1wb3J0IHsgU2VxdWVuY2VHZW5lcmF0aW9uU2VydmljZSB9IGZyb20gXCIuLi8uLi9pbXBsZW1lbnRhdGlvbnMvZ2VuZXJhdGlvbi9TZXF1ZW5jZUdlbmVyYXRpb25TZXJ2aWNlXCI7XG5cbmltcG9ydCB7IElBcnJvd1Bvc2l0aW9uaW5nT3JjaGVzdHJhdG9ySW50ZXJmYWNlIH0gZnJvbSBcIi4uL2ludGVyZmFjZXMvcG9zaXRpb25pbmctaW50ZXJmYWNlc1wiO1xuaW1wb3J0IHR5cGUgeyBJQXJyb3dQb3NpdGlvbmluZ09yY2hlc3RyYXRvciB9IGZyb20gXCIuLi8uLi9wb3NpdGlvbmluZy9jb3JlLXNlcnZpY2VzXCI7XG5cbi8qKlxuICogUmVnaXN0ZXIgYWxsIGNvcmUgc2VydmljZXMgd2l0aCB0aGVpciBkZXBlbmRlbmNpZXNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlZ2lzdGVyQ29yZVNlcnZpY2VzKFxuICBjb250YWluZXI6IFNlcnZpY2VDb250YWluZXJcbik6IFByb21pc2U8dm9pZD4ge1xuICAvLyBSZWdpc3RlciBkb21haW4gc2VydmljZXMgKG5vIGRlcGVuZGVuY2llcylcbiAgY29udGFpbmVyLnJlZ2lzdGVyU2luZ2xldG9uQ2xhc3MoSVNlcXVlbmNlRG9tYWluU2VydmljZUludGVyZmFjZSk7XG5cbiAgLy8gUmVnaXN0ZXIgaW5mcmFzdHJ1Y3R1cmUgc2VydmljZXNcbiAgY29udGFpbmVyLnJlZ2lzdGVyU2luZ2xldG9uQ2xhc3MoSVBlcnNpc3RlbmNlU2VydmljZUludGVyZmFjZSk7XG4gIGNvbnRhaW5lci5yZWdpc3RlclNpbmdsZXRvbkNsYXNzKElTZXR0aW5nc1NlcnZpY2VJbnRlcmZhY2UpO1xuICBjb250YWluZXIucmVnaXN0ZXJTaW5nbGV0b25DbGFzcyhJRGV2aWNlRGV0ZWN0aW9uU2VydmljZUludGVyZmFjZSk7XG4gIGNvbnRhaW5lci5yZWdpc3RlclNpbmdsZXRvbkNsYXNzKElQYW5lbE1hbmFnZW1lbnRTZXJ2aWNlSW50ZXJmYWNlKTtcblxuICAvLyBSZWdpc3RlciBjb25zdHJ1Y3QgdGFiIHNlcnZpY2VzXG4gIGNvbnRhaW5lci5yZWdpc3RlclNpbmdsZXRvbkNsYXNzKElTdGFydFBvc2l0aW9uU2VydmljZUludGVyZmFjZSk7XG5cbiAgLy8gUmVnaXN0ZXIgcmVuZGVyaW5nIG1pY3Jvc2VydmljZXMgKGluIGRlcGVuZGVuY3kgb3JkZXIpXG4gIGNvbnRhaW5lci5yZWdpc3RlclNpbmdsZXRvbkNsYXNzKElTdmdDb25maWd1cmF0aW9uSW50ZXJmYWNlKTtcbiAgY29udGFpbmVyLnJlZ2lzdGVyU2luZ2xldG9uQ2xhc3MoSVN2Z1V0aWxpdHlTZXJ2aWNlSW50ZXJmYWNlKTtcbiAgY29udGFpbmVyLnJlZ2lzdGVyU2luZ2xldG9uQ2xhc3MoSURhdGFUcmFuc2Zvcm1hdGlvblNlcnZpY2VJbnRlcmZhY2UpO1xuICBjb250YWluZXIucmVnaXN0ZXJTaW5nbGV0b25DbGFzcyhJR3JpZFJlbmRlcmluZ1NlcnZpY2VJbnRlcmZhY2UpO1xuICBjb250YWluZXIucmVnaXN0ZXJTaW5nbGV0b25DbGFzcyhJQXJyb3dSZW5kZXJpbmdTZXJ2aWNlSW50ZXJmYWNlKTtcbiAgY29udGFpbmVyLnJlZ2lzdGVyU2luZ2xldG9uQ2xhc3MoSU92ZXJsYXlSZW5kZXJpbmdTZXJ2aWNlSW50ZXJmYWNlKTtcblxuICAvLyBSZWdpc3RlciBtYWluIHJlbmRlcmluZyBzZXJ2aWNlc1xuICBjb250YWluZXIucmVnaXN0ZXJTaW5nbGV0b25DbGFzcyhJUHJvcFJlbmRlcmluZ1NlcnZpY2VJbnRlcmZhY2UpO1xuXG4gIC8vIFJlZ2lzdGVyIHNlcnZpY2VzIHdpdGggZGVwZW5kZW5jaWVzIHVzaW5nIGZhY3Rvcmllc1xuICBjb250YWluZXIucmVnaXN0ZXJGYWN0b3J5KElTZXF1ZW5jZVNlcnZpY2VJbnRlcmZhY2UsICgpID0+IHtcbiAgICBjb25zdCBzZXF1ZW5jZURvbWFpblNlcnZpY2UgPSBjb250YWluZXIucmVzb2x2ZShcbiAgICAgIElTZXF1ZW5jZURvbWFpblNlcnZpY2VJbnRlcmZhY2VcbiAgICApO1xuICAgIGNvbnN0IHBlcnNpc3RlbmNlU2VydmljZSA9IGNvbnRhaW5lci5yZXNvbHZlKElQZXJzaXN0ZW5jZVNlcnZpY2VJbnRlcmZhY2UpO1xuICAgIHJldHVybiBuZXcgU2VxdWVuY2VTZXJ2aWNlKHNlcXVlbmNlRG9tYWluU2VydmljZSwgcGVyc2lzdGVuY2VTZXJ2aWNlKTtcbiAgfSk7XG5cbiAgY29udGFpbmVyLnJlZ2lzdGVyRmFjdG9yeShJQ29uc3RydWN0VGFiQ29vcmRpbmF0aW9uU2VydmljZUludGVyZmFjZSwgKCkgPT4ge1xuICAgIGNvbnN0IHNlcXVlbmNlU2VydmljZSA9IGNvbnRhaW5lci5yZXNvbHZlKElTZXF1ZW5jZVNlcnZpY2VJbnRlcmZhY2UpO1xuICAgIGNvbnN0IHN0YXJ0UG9zaXRpb25TZXJ2aWNlID0gY29udGFpbmVyLnJlc29sdmUoXG4gICAgICBJU3RhcnRQb3NpdGlvblNlcnZpY2VJbnRlcmZhY2VcbiAgICApO1xuICAgIHJldHVybiBuZXcgQ29uc3RydWN0VGFiQ29vcmRpbmF0aW9uU2VydmljZShcbiAgICAgIHNlcXVlbmNlU2VydmljZSxcbiAgICAgIHN0YXJ0UG9zaXRpb25TZXJ2aWNlXG4gICAgKTtcbiAgfSk7XG5cbiAgLy8gUmVnaXN0ZXIgcGljdG9ncmFwaCByZW5kZXJpbmcgc2VydmljZSAoZGVwZW5kcyBvbiBwb3NpdGlvbmluZyBhbmQgbWljcm9zZXJ2aWNlcylcbiAgY29udGFpbmVyLnJlZ2lzdGVyRmFjdG9yeShJUGljdG9ncmFwaFJlbmRlcmluZ1NlcnZpY2VJbnRlcmZhY2UsICgpID0+IHtcbiAgICBjb25zdCBhcnJvd1Bvc2l0aW9uaW5nID0gY29udGFpbmVyLnJlc29sdmUoXG4gICAgICBJQXJyb3dQb3NpdGlvbmluZ09yY2hlc3RyYXRvckludGVyZmFjZVxuICAgICkgYXMgSUFycm93UG9zaXRpb25pbmdPcmNoZXN0cmF0b3I7XG4gICAgY29uc3QgcHJvcFJlbmRlcmluZyA9IGNvbnRhaW5lci5yZXNvbHZlKElQcm9wUmVuZGVyaW5nU2VydmljZUludGVyZmFjZSk7XG4gICAgY29uc3Qgc3ZnVXRpbGl0eSA9IGNvbnRhaW5lci5yZXNvbHZlKElTdmdVdGlsaXR5U2VydmljZUludGVyZmFjZSk7XG4gICAgY29uc3QgZ3JpZFJlbmRlcmluZyA9IGNvbnRhaW5lci5yZXNvbHZlKElHcmlkUmVuZGVyaW5nU2VydmljZUludGVyZmFjZSk7XG4gICAgY29uc3QgYXJyb3dSZW5kZXJpbmcgPSBjb250YWluZXIucmVzb2x2ZShJQXJyb3dSZW5kZXJpbmdTZXJ2aWNlSW50ZXJmYWNlKTtcbiAgICBjb25zdCBvdmVybGF5UmVuZGVyaW5nID0gY29udGFpbmVyLnJlc29sdmUoXG4gICAgICBJT3ZlcmxheVJlbmRlcmluZ1NlcnZpY2VJbnRlcmZhY2VcbiAgICApO1xuICAgIGNvbnN0IGRhdGFUcmFuc2Zvcm1hdGlvbiA9IGNvbnRhaW5lci5yZXNvbHZlKFxuICAgICAgSURhdGFUcmFuc2Zvcm1hdGlvblNlcnZpY2VJbnRlcmZhY2VcbiAgICApO1xuICAgIHJldHVybiBuZXcgUGljdG9ncmFwaFJlbmRlcmluZ1NlcnZpY2UoXG4gICAgICBhcnJvd1Bvc2l0aW9uaW5nLFxuICAgICAgcHJvcFJlbmRlcmluZyxcbiAgICAgIHN2Z1V0aWxpdHksXG4gICAgICBncmlkUmVuZGVyaW5nLFxuICAgICAgYXJyb3dSZW5kZXJpbmcsXG4gICAgICBvdmVybGF5UmVuZGVyaW5nLFxuICAgICAgZGF0YVRyYW5zZm9ybWF0aW9uXG4gICAgKTtcbiAgfSk7XG5cbiAgLy8gUmVnaXN0ZXIgcGljdG9ncmFwaCBzZXJ2aWNlIChubyBkZXBlbmRlbmNpZXMgYWZ0ZXIgcmVuZGVyaW5nIGlzIHJlZ2lzdGVyZWQpXG4gIGNvbnRhaW5lci5yZWdpc3RlclNpbmdsZXRvbkNsYXNzKElQaWN0b2dyYXBoU2VydmljZUludGVyZmFjZSk7XG5cbiAgLy8gUmVnaXN0ZXIgZXhwb3J0IHNlcnZpY2VcbiAgY29udGFpbmVyLnJlZ2lzdGVyU2luZ2xldG9uQ2xhc3MoSUV4cG9ydFNlcnZpY2VJbnRlcmZhY2UpO1xuXG4gIC8vIFJlZ2lzdGVyIGdlbmVyYXRpb24gc2VydmljZXNcbiAgY29udGFpbmVyLnJlZ2lzdGVyU2luZ2xldG9uQ2xhc3MoSU1vdGlvbkdlbmVyYXRpb25TZXJ2aWNlSW50ZXJmYWNlKTtcbiAgY29udGFpbmVyLnJlZ2lzdGVyU2luZ2xldG9uQ2xhc3MoSU9yaWVudGF0aW9uQ2FsY3VsYXRpb25TZXJ2aWNlSW50ZXJmYWNlKTtcblxuICAvLyBSZWdpc3RlciBzZXF1ZW5jZSBnZW5lcmF0aW9uIHNlcnZpY2Ugd2l0aCBkZXBlbmRlbmNpZXNcbiAgY29udGFpbmVyLnJlZ2lzdGVyRmFjdG9yeShJU2VxdWVuY2VHZW5lcmF0aW9uU2VydmljZUludGVyZmFjZSwgKCkgPT4ge1xuICAgIGNvbnN0IGxldHRlclF1ZXJ5U2VydmljZSA9IGNvbnRhaW5lci5yZXNvbHZlKElMZXR0ZXJRdWVyeVNlcnZpY2VJbnRlcmZhY2UpO1xuICAgIGNvbnN0IG9yaWVudGF0aW9uQ2FsY3VsYXRpb25TZXJ2aWNlID0gY29udGFpbmVyLnJlc29sdmUoXG4gICAgICBJT3JpZW50YXRpb25DYWxjdWxhdGlvblNlcnZpY2VJbnRlcmZhY2VcbiAgICApO1xuICAgIHJldHVybiBuZXcgU2VxdWVuY2VHZW5lcmF0aW9uU2VydmljZShcbiAgICAgIGxldHRlclF1ZXJ5U2VydmljZSxcbiAgICAgIG9yaWVudGF0aW9uQ2FsY3VsYXRpb25TZXJ2aWNlXG4gICAgKTtcbiAgfSk7XG5cbiAgLy8gUmVnaXN0ZXIgcGFnZSBsYXlvdXQgYW5kIGV4cG9ydCBzZXJ2aWNlc1xuICBjb250YWluZXIucmVnaXN0ZXJTaW5nbGV0b25DbGFzcyhJUHJpbnRhYmxlUGFnZUxheW91dFNlcnZpY2VJbnRlcmZhY2UpO1xuICBjb250YWluZXIucmVnaXN0ZXJTaW5nbGV0b25DbGFzcyhJUGFnZUltYWdlRXhwb3J0U2VydmljZUludGVyZmFjZSk7XG5cbiAgLy8gUmVnaXN0ZXIgcGFnZSBmYWN0b3J5IHNlcnZpY2Ugd2l0aCBkZXBlbmRlbmN5XG4gIGNvbnRhaW5lci5yZWdpc3RlckZhY3RvcnkoSVBhZ2VGYWN0b3J5U2VydmljZUludGVyZmFjZSwgKCkgPT4ge1xuICAgIGNvbnN0IGxheW91dFNlcnZpY2UgPSBjb250YWluZXIucmVzb2x2ZShcbiAgICAgIElQcmludGFibGVQYWdlTGF5b3V0U2VydmljZUludGVyZmFjZVxuICAgICk7XG4gICAgcmV0dXJuIG5ldyBJUGFnZUZhY3RvcnlTZXJ2aWNlSW50ZXJmYWNlLmltcGxlbWVudGF0aW9uKGxheW91dFNlcnZpY2UpO1xuICB9KTtcblxuICAvLyBSZWdpc3RlciBleHBvcnQgaW50ZWdyYXRpb24gc2VydmljZSB3aXRoIGRlcGVuZGVuY3lcbiAgY29udGFpbmVyLnJlZ2lzdGVyRmFjdG9yeShcbiAgICBJU2VxdWVuY2VDYXJkRXhwb3J0SW50ZWdyYXRpb25TZXJ2aWNlSW50ZXJmYWNlLFxuICAgICgpID0+IHtcbiAgICAgIGNvbnN0IHBhZ2VJbWFnZUV4cG9ydFNlcnZpY2UgPSBjb250YWluZXIucmVzb2x2ZShcbiAgICAgICAgSVBhZ2VJbWFnZUV4cG9ydFNlcnZpY2VJbnRlcmZhY2VcbiAgICAgICk7XG4gICAgICByZXR1cm4gbmV3IElTZXF1ZW5jZUNhcmRFeHBvcnRJbnRlZ3JhdGlvblNlcnZpY2VJbnRlcmZhY2UuaW1wbGVtZW50YXRpb24oXG4gICAgICAgIHBhZ2VJbWFnZUV4cG9ydFNlcnZpY2VcbiAgICAgICk7XG4gICAgfVxuICApO1xuXG4gIC8vIFJlZ2lzdGVyIGFwcGxpY2F0aW9uIGluaXRpYWxpemF0aW9uIHNlcnZpY2Ugd2l0aCBmYWN0b3J5XG4gIGNvbnRhaW5lci5yZWdpc3RlckZhY3RvcnkoSUFwcGxpY2F0aW9uSW5pdGlhbGl6YXRpb25TZXJ2aWNlSW50ZXJmYWNlLCAoKSA9PiB7XG4gICAgY29uc3Qgc2V0dGluZ3NTZXJ2aWNlID0gY29udGFpbmVyLnJlc29sdmUoSVNldHRpbmdzU2VydmljZUludGVyZmFjZSk7XG4gICAgY29uc3QgcGVyc2lzdGVuY2VTZXJ2aWNlID0gY29udGFpbmVyLnJlc29sdmUoSVBlcnNpc3RlbmNlU2VydmljZUludGVyZmFjZSk7XG4gICAgcmV0dXJuIG5ldyBBcHBsaWNhdGlvbkluaXRpYWxpemF0aW9uU2VydmljZShcbiAgICAgIHNldHRpbmdzU2VydmljZSxcbiAgICAgIHBlcnNpc3RlbmNlU2VydmljZVxuICAgICk7XG4gIH0pO1xufVxuIl0sIm1hcHBpbmdzIjoiQUFNQTtBQUFBLEVBQ0U7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsT0FDSztBQUNQLFNBQVMsb0NBQW9DO0FBRTdDLFNBQVMsd0NBQXdDO0FBQ2pELFNBQVMsdUNBQXVDO0FBQ2hELFNBQVMsa0NBQWtDO0FBQzNDLFNBQVMsdUJBQXVCO0FBQ2hDLFNBQVMsaUNBQWlDO0FBRTFDLFNBQVMsOENBQThDO0FBTXZELHNCQUFzQixxQkFDcEIsV0FDZTtBQUVmLFlBQVUsdUJBQXVCLCtCQUErQjtBQUdoRSxZQUFVLHVCQUF1Qiw0QkFBNEI7QUFDN0QsWUFBVSx1QkFBdUIseUJBQXlCO0FBQzFELFlBQVUsdUJBQXVCLGdDQUFnQztBQUNqRSxZQUFVLHVCQUF1QixnQ0FBZ0M7QUFHakUsWUFBVSx1QkFBdUIsOEJBQThCO0FBRy9ELFlBQVUsdUJBQXVCLDBCQUEwQjtBQUMzRCxZQUFVLHVCQUF1QiwyQkFBMkI7QUFDNUQsWUFBVSx1QkFBdUIsbUNBQW1DO0FBQ3BFLFlBQVUsdUJBQXVCLDhCQUE4QjtBQUMvRCxZQUFVLHVCQUF1QiwrQkFBK0I7QUFDaEUsWUFBVSx1QkFBdUIsaUNB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