import {
  IApplicationInitializationServiceInterface,
  IArrowRenderingServiceInterface,
  IConstructTabCoordinationServiceInterface,
  IDataTransformationServiceInterface,
  IDeviceDetectionServiceInterface,
  IExportServiceInterface,
  IGridRenderingServiceInterface,
  IMotionGenerationServiceInterface,
  IOptionDataServiceInterface,
  IOrientationCalculationServiceInterface,
  IOverlayRenderingServiceInterface,
  IPanelManagementServiceInterface,
  IPersistenceServiceInterface,
  IPictographRenderingServiceInterface,
  IPictographServiceInterface,
  IPropRenderingServiceInterface,
  ISequenceDomainServiceInterface,
  ISequenceGenerationServiceInterface,
  ISequenceServiceInterface,
  ISettingsServiceInterface,
  IStartPositionServiceInterface,
  ISvgConfigurationInterface,
  ISvgUtilityServiceInterface,
  IPrintablePageLayoutServiceInterface,
  IPageFactoryServiceInterface,
  IPageImageExportServiceInterface,
  ISequenceCardExportIntegrationServiceInterface
} from "/src/lib/services/di/interfaces/core-interfaces.ts";
import { ApplicationInitializationService } from "/src/lib/services/implementations/application/ApplicationInitializationService.ts";
import { ConstructTabCoordinationService } from "/src/lib/services/implementations/construct/ConstructTabCoordinationService.ts";
import { PictographRenderingService } from "/src/lib/services/implementations/rendering/PictographRenderingService.ts";
import { SequenceService } from "/src/lib/services/implementations/sequence/SequenceService.ts";
import { SequenceGenerationService } from "/src/lib/services/implementations/generation/SequenceGenerationService.ts";
import { IArrowPositioningOrchestratorInterface } from "/src/lib/services/di/interfaces/positioning-interfaces.ts";
export async function registerCoreServices(container) {
  container.registerSingletonClass(ISequenceDomainServiceInterface);
  container.registerSingletonClass(IPersistenceServiceInterface);
  container.registerSingletonClass(ISettingsServiceInterface);
  container.registerSingletonClass(IDeviceDetectionServiceInterface);
  container.registerSingletonClass(IPanelManagementServiceInterface);
  container.registerSingletonClass(IStartPositionServiceInterface);
  container.registerSingletonClass(IOptionDataServiceInterface);
  container.registerSingletonClass(ISvgConfigurationInterface);
  container.registerSingletonClass(ISvgUtilityServiceInterface);
  container.registerSingletonClass(IDataTransformationServiceInterface);
  container.registerSingletonClass(IGridRenderingServiceInterface);
  container.registerSingletonClass(IArrowRenderingServiceInterface);
  container.registerSingletonClass(IOverlayRenderingServiceInterface);
  container.registerSingletonClass(IPropRenderingServiceInterface);
  container.registerFactory(ISequenceServiceInterface, () => {
    const sequenceDomainService = container.resolve(
      ISequenceDomainServiceInterface
    );
    const persistenceService = container.resolve(IPersistenceServiceInterface);
    return new SequenceService(sequenceDomainService, persistenceService);
  });
  container.registerFactory(IConstructTabCoordinationServiceInterface, () => {
    const sequenceService = container.resolve(ISequenceServiceInterface);
    const startPositionService = container.resolve(
      IStartPositionServiceInterface
    );
    return new ConstructTabCoordinationService(
      sequenceService,
      startPositionService
    );
  });
  container.registerFactory(IPictographRenderingServiceInterface, () => {
    const arrowPositioning = container.resolve(
      IArrowPositioningOrchestratorInterface
    );
    const propRendering = container.resolve(IPropRenderingServiceInterface);
    const svgUtility = container.resolve(ISvgUtilityServiceInterface);
    const gridRendering = container.resolve(IGridRenderingServiceInterface);
    const arrowRendering = container.resolve(IArrowRenderingServiceInterface);
    const overlayRendering = container.resolve(
      IOverlayRenderingServiceInterface
    );
    const dataTransformation = container.resolve(
      IDataTransformationServiceInterface
    );
    return new PictographRenderingService(
      arrowPositioning,
      propRendering,
      svgUtility,
      gridRendering,
      arrowRendering,
      overlayRendering,
      dataTransformation
    );
  });
  container.registerSingletonClass(IPictographServiceInterface);
  container.registerSingletonClass(IExportServiceInterface);
  container.registerSingletonClass(IMotionGenerationServiceInterface);
  container.registerSingletonClass(IOrientationCalculationServiceInterface);
  container.registerFactory(ISequenceGenerationServiceInterface, () => {
    const optionDataService = container.resolve(IOptionDataServiceInterface);
    const orientationCalculationService = container.resolve(
      IOrientationCalculationServiceInterface
    );
    return new SequenceGenerationService(
      optionDataService,
      orientationCalculationService
    );
  });
  container.registerSingletonClass(IPrintablePageLayoutServiceInterface);
  container.registerSingletonClass(IPageImageExportServiceInterface);
  container.registerFactory(IPageFactoryServiceInterface, () => {
    const layoutService = container.resolve(
      IPrintablePageLayoutServiceInterface
    );
    return new IPageFactoryServiceInterface.implementation(layoutService);
  });
  container.registerFactory(
    ISequenceCardExportIntegrationServiceInterface,
    () => {
      const pageImageExportService = container.resolve(
        IPageImageExportServiceInterface
      );
      return new ISequenceCardExportIntegrationServiceInterface.implementation(
        pageImageExportService
      );
    }
  );
  container.registerFactory(IApplicationInitializationServiceInterface, () => {
    const settingsService = container.resolve(ISettingsServiceInterface);
    const persistenceService = container.resolve(IPersistenceServiceInterface);
    return new ApplicationInitializationService(
      settingsService,
      persistenceService
    );
  });
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvcmUtc2VydmljZXMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3JlIFNlcnZpY2VzIFJlZ2lzdHJhdGlvblxuICogSGFuZGxlcyByZWdpc3RyYXRpb24gb2YgY29yZSBidXNpbmVzcyBsb2dpYyBhbmQgaW5mcmFzdHJ1Y3R1cmUgc2VydmljZXNcbiAqL1xuXG5pbXBvcnQgdHlwZSB7IFNlcnZpY2VDb250YWluZXIgfSBmcm9tIFwiLi4vU2VydmljZUNvbnRhaW5lclwiO1xuaW1wb3J0IHtcbiAgSUFwcGxpY2F0aW9uSW5pdGlhbGl6YXRpb25TZXJ2aWNlSW50ZXJmYWNlLFxuICBJQXJyb3dSZW5kZXJpbmdTZXJ2aWNlSW50ZXJmYWNlLFxuICBJQ29uc3RydWN0VGFiQ29vcmRpbmF0aW9uU2VydmljZUludGVyZmFjZSxcbiAgSURhdGFUcmFuc2Zvcm1hdGlvblNlcnZpY2VJbnRlcmZhY2UsXG4gIElEZXZpY2VEZXRlY3Rpb25TZXJ2aWNlSW50ZXJmYWNlLFxuICBJRXhwb3J0U2VydmljZUludGVyZmFjZSxcbiAgSUdyaWRSZW5kZXJpbmdTZXJ2aWNlSW50ZXJmYWNlLFxuICBJTW90aW9uR2VuZXJhdGlvblNlcnZpY2VJbnRlcmZhY2UsXG4gIElPcHRpb25EYXRhU2VydmljZUludGVyZmFjZSxcbiAgSU9yaWVudGF0aW9uQ2FsY3VsYXRpb25TZXJ2aWNlSW50ZXJmYWNlLFxuICBJT3ZlcmxheVJlbmRlcmluZ1NlcnZpY2VJbnRlcmZhY2UsXG4gIElQYW5lbE1hbmFnZW1lbnRTZXJ2aWNlSW50ZXJmYWNlLFxuICBJUGVyc2lzdGVuY2VTZXJ2aWNlSW50ZXJmYWNlLFxuICBJUGljdG9ncmFwaFJlbmRlcmluZ1NlcnZpY2VJbnRlcmZhY2UsXG4gIElQaWN0b2dyYXBoU2VydmljZUludGVyZmFjZSxcbiAgSVByb3BSZW5kZXJpbmdTZXJ2aWNlSW50ZXJmYWNlLFxuICBJU2VxdWVuY2VEb21haW5TZXJ2aWNlSW50ZXJmYWNlLFxuICBJU2VxdWVuY2VHZW5lcmF0aW9uU2VydmljZUludGVyZmFjZSxcbiAgSVNlcXVlbmNlU2VydmljZUludGVyZmFjZSxcbiAgSVNldHRpbmdzU2VydmljZUludGVyZmFjZSxcbiAgSVN0YXJ0UG9zaXRpb25TZXJ2aWNlSW50ZXJmYWNlLFxuICBJU3ZnQ29uZmlndXJhdGlvbkludGVyZmFjZSxcbiAgSVN2Z1V0aWxpdHlTZXJ2aWNlSW50ZXJmYWNlLFxuICBJUHJpbnRhYmxlUGFnZUxheW91dFNlcnZpY2VJbnRlcmZhY2UsXG4gIElQYWdlRmFjdG9yeVNlcnZpY2VJbnRlcmZhY2UsXG4gIElQYWdlSW1hZ2VFeHBvcnRTZXJ2aWNlSW50ZXJmYWNlLFxuICBJU2VxdWVuY2VDYXJkRXhwb3J0SW50ZWdyYXRpb25TZXJ2aWNlSW50ZXJmYWNlLFxufSBmcm9tIFwiLi4vaW50ZXJmYWNlcy9jb3JlLWludGVyZmFjZXNcIjtcblxuaW1wb3J0IHsgQXBwbGljYXRpb25Jbml0aWFsaXphdGlvblNlcnZpY2UgfSBmcm9tICcuLi8uLi9pbXBsZW1lbnRhdGlvbnMvYXBwbGljYXRpb24vQXBwbGljYXRpb25Jbml0aWFsaXphdGlvblNlcnZpY2UnO1xuaW1wb3J0IHsgQ29uc3RydWN0VGFiQ29vcmRpbmF0aW9uU2VydmljZSB9IGZyb20gJy4uLy4uL2ltcGxlbWVudGF0aW9ucy9jb25zdHJ1Y3QvQ29uc3RydWN0VGFiQ29vcmRpbmF0aW9uU2VydmljZSc7XG5pbXBvcnQgeyBQaWN0b2dyYXBoUmVuZGVyaW5nU2VydmljZSB9IGZyb20gJy4uLy4uL2ltcGxlbWVudGF0aW9ucy9yZW5kZXJpbmcvUGljdG9ncmFwaFJlbmRlcmluZ1NlcnZpY2UnO1xuaW1wb3J0IHsgU2VxdWVuY2VTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vaW1wbGVtZW50YXRpb25zL3NlcXVlbmNlL1NlcXVlbmNlU2VydmljZSc7XG5pbXBvcnQgeyBTZXF1ZW5jZUdlbmVyYXRpb25TZXJ2aWNlIH0gZnJvbSAnLi4vLi4vaW1wbGVtZW50YXRpb25zL2dlbmVyYXRpb24vU2VxdWVuY2VHZW5lcmF0aW9uU2VydmljZSc7XG5cbmltcG9ydCB7IElBcnJvd1Bvc2l0aW9uaW5nT3JjaGVzdHJhdG9ySW50ZXJmYWNlIH0gZnJvbSBcIi4uL2ludGVyZmFjZXMvcG9zaXRpb25pbmctaW50ZXJmYWNlc1wiO1xuaW1wb3J0IHR5cGUgeyBJQXJyb3dQb3NpdGlvbmluZ09yY2hlc3RyYXRvciB9IGZyb20gXCIuLi8uLi9wb3NpdGlvbmluZy9jb3JlLXNlcnZpY2VzXCI7XG5cbi8qKlxuICogUmVnaXN0ZXIgYWxsIGNvcmUgc2VydmljZXMgd2l0aCB0aGVpciBkZXBlbmRlbmNpZXNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlZ2lzdGVyQ29yZVNlcnZpY2VzKFxuICBjb250YWluZXI6IFNlcnZpY2VDb250YWluZXJcbik6IFByb21pc2U8dm9pZD4ge1xuICAvLyBSZWdpc3RlciBkb21haW4gc2VydmljZXMgKG5vIGRlcGVuZGVuY2llcylcbiAgY29udGFpbmVyLnJlZ2lzdGVyU2luZ2xldG9uQ2xhc3MoSVNlcXVlbmNlRG9tYWluU2VydmljZUludGVyZmFjZSk7XG5cbiAgLy8gUmVnaXN0ZXIgaW5mcmFzdHJ1Y3R1cmUgc2VydmljZXNcbiAgY29udGFpbmVyLnJlZ2lzdGVyU2luZ2xldG9uQ2xhc3MoSVBlcnNpc3RlbmNlU2VydmljZUludGVyZmFjZSk7XG4gIGNvbnRhaW5lci5yZWdpc3RlclNpbmdsZXRvbkNsYXNzKElTZXR0aW5nc1NlcnZpY2VJbnRlcmZhY2UpO1xuICBjb250YWluZXIucmVnaXN0ZXJTaW5nbGV0b25DbGFzcyhJRGV2aWNlRGV0ZWN0aW9uU2VydmljZUludGVyZmFjZSk7XG4gIGNvbnRhaW5lci5yZWdpc3RlclNpbmdsZXRvbkNsYXNzKElQYW5lbE1hbmFnZW1lbnRTZXJ2aWNlSW50ZXJmYWNlKTtcblxuICAvLyBSZWdpc3RlciBjb25zdHJ1Y3QgdGFiIHNlcnZpY2VzXG4gIGNvbnRhaW5lci5yZWdpc3RlclNpbmdsZXRvbkNsYXNzKElTdGFydFBvc2l0aW9uU2VydmljZUludGVyZmFjZSk7XG4gIGNvbnRhaW5lci5yZWdpc3RlclNpbmdsZXRvbkNsYXNzKElPcHRpb25EYXRhU2VydmljZUludGVyZmFjZSk7XG5cbiAgLy8gUmVnaXN0ZXIgcmVuZGVyaW5nIG1pY3Jvc2VydmljZXMgKGluIGRlcGVuZGVuY3kgb3JkZXIpXG4gIGNvbnRhaW5lci5yZWdpc3RlclNpbmdsZXRvbkNsYXNzKElTdmdDb25maWd1cmF0aW9uSW50ZXJmYWNlKTtcbiAgY29udGFpbmVyLnJlZ2lzdGVyU2luZ2xldG9uQ2xhc3MoSVN2Z1V0aWxpdHlTZXJ2aWNlSW50ZXJmYWNlKTtcbiAgY29udGFpbmVyLnJlZ2lzdGVyU2luZ2xldG9uQ2xhc3MoSURhdGFUcmFuc2Zvcm1hdGlvblNlcnZpY2VJbnRlcmZhY2UpO1xuICBjb250YWluZXIucmVnaXN0ZXJTaW5nbGV0b25DbGFzcyhJR3JpZFJlbmRlcmluZ1NlcnZpY2VJbnRlcmZhY2UpO1xuICBjb250YWluZXIucmVnaXN0ZXJTaW5nbGV0b25DbGFzcyhJQXJyb3dSZW5kZXJpbmdTZXJ2aWNlSW50ZXJmYWNlKTtcbiAgY29udGFpbmVyLnJlZ2lzdGVyU2luZ2xldG9uQ2xhc3MoSU92ZXJsYXlSZW5kZXJpbmdTZXJ2aWNlSW50ZXJmYWNlKTtcblxuICAvLyBSZWdpc3RlciBtYWluIHJlbmRlcmluZyBzZXJ2aWNlc1xuICBjb250YWluZXIucmVnaXN0ZXJTaW5nbGV0b25DbGFzcyhJUHJvcFJlbmRlcmluZ1NlcnZpY2VJbnRlcmZhY2UpO1xuXG4gIC8vIFJlZ2lzdGVyIHNlcnZpY2VzIHdpdGggZGVwZW5kZW5jaWVzIHVzaW5nIGZhY3Rvcmllc1xuICBjb250YWluZXIucmVnaXN0ZXJGYWN0b3J5KElTZXF1ZW5jZVNlcnZpY2VJbnRlcmZhY2UsICgpID0+IHtcbiAgICBjb25zdCBzZXF1ZW5jZURvbWFpblNlcnZpY2UgPSBjb250YWluZXIucmVzb2x2ZShcbiAgICAgIElTZXF1ZW5jZURvbWFpblNlcnZpY2VJbnRlcmZhY2VcbiAgICApO1xuICAgIGNvbnN0IHBlcnNpc3RlbmNlU2VydmljZSA9IGNvbnRhaW5lci5yZXNvbHZlKElQZXJzaXN0ZW5jZVNlcnZpY2VJbnRlcmZhY2UpO1xuICAgIHJldHVybiBuZXcgU2VxdWVuY2VTZXJ2aWNlKHNlcXVlbmNlRG9tYWluU2VydmljZSwgcGVyc2lzdGVuY2VTZXJ2aWNlKTtcbiAgfSk7XG5cbiAgY29udGFpbmVyLnJlZ2lzdGVyRmFjdG9yeShJQ29uc3RydWN0VGFiQ29vcmRpbmF0aW9uU2VydmljZUludGVyZmFjZSwgKCkgPT4ge1xuICAgIGNvbnN0IHNlcXVlbmNlU2VydmljZSA9IGNvbnRhaW5lci5yZXNvbHZlKElTZXF1ZW5jZVNlcnZpY2VJbnRlcmZhY2UpO1xuICAgIGNvbnN0IHN0YXJ0UG9zaXRpb25TZXJ2aWNlID0gY29udGFpbmVyLnJlc29sdmUoXG4gICAgICBJU3RhcnRQb3NpdGlvblNlcnZpY2VJbnRlcmZhY2VcbiAgICApO1xuICAgIHJldHVybiBuZXcgQ29uc3RydWN0VGFiQ29vcmRpbmF0aW9uU2VydmljZShcbiAgICAgIHNlcXVlbmNlU2VydmljZSxcbiAgICAgIHN0YXJ0UG9zaXRpb25TZXJ2aWNlXG4gICAgKTtcbiAgfSk7XG5cbiAgLy8gUmVnaXN0ZXIgcGljdG9ncmFwaCByZW5kZXJpbmcgc2VydmljZSAoZGVwZW5kcyBvbiBwb3NpdGlvbmluZyBhbmQgbWljcm9zZXJ2aWNlcylcbiAgY29udGFpbmVyLnJlZ2lzdGVyRmFjdG9yeShJUGljdG9ncmFwaFJlbmRlcmluZ1NlcnZpY2VJbnRlcmZhY2UsICgpID0+IHtcbiAgICBjb25zdCBhcnJvd1Bvc2l0aW9uaW5nID0gY29udGFpbmVyLnJlc29sdmUoXG4gICAgICBJQXJyb3dQb3NpdGlvbmluZ09yY2hlc3RyYXRvckludGVyZmFjZVxuICAgICkgYXMgSUFycm93UG9zaXRpb25pbmdPcmNoZXN0cmF0b3I7XG4gICAgY29uc3QgcHJvcFJlbmRlcmluZyA9IGNvbnRhaW5lci5yZXNvbHZlKElQcm9wUmVuZGVyaW5nU2VydmljZUludGVyZmFjZSk7XG4gICAgY29uc3Qgc3ZnVXRpbGl0eSA9IGNvbnRhaW5lci5yZXNvbHZlKElTdmdVdGlsaXR5U2VydmljZUludGVyZmFjZSk7XG4gICAgY29uc3QgZ3JpZFJlbmRlcmluZyA9IGNvbnRhaW5lci5yZXNvbHZlKElHcmlkUmVuZGVyaW5nU2VydmljZUludGVyZmFjZSk7XG4gICAgY29uc3QgYXJyb3dSZW5kZXJpbmcgPSBjb250YWluZXIucmVzb2x2ZShJQXJyb3dSZW5kZXJpbmdTZXJ2aWNlSW50ZXJmYWNlKTtcbiAgICBjb25zdCBvdmVybGF5UmVuZGVyaW5nID0gY29udGFpbmVyLnJlc29sdmUoXG4gICAgICBJT3ZlcmxheVJlbmRlcmluZ1NlcnZpY2VJbnRlcmZhY2VcbiAgICApO1xuICAgIGNvbnN0IGRhdGFUcmFuc2Zvcm1hdGlvbiA9IGNvbnRhaW5lci5yZXNvbHZlKFxuICAgICAgSURhdGFUcmFuc2Zvcm1hdGlvblNlcnZpY2VJbnRlcmZhY2VcbiAgICApO1xuICAgIHJldHVybiBuZXcgUGljdG9ncmFwaFJlbmRlcmluZ1NlcnZpY2UoXG4gICAgICBhcnJvd1Bvc2l0aW9uaW5nLFxuICAgICAgcHJvcFJlbmRlcmluZyxcbiAgICAgIHN2Z1V0aWxpdHksXG4gICAgICBncmlkUmVuZGVyaW5nLFxuICAgICAgYXJyb3dSZW5kZXJpbmcsXG4gICAgICBvdmVybGF5UmVuZGVyaW5nLFxuICAgICAgZGF0YVRyYW5zZm9ybWF0aW9uXG4gICAgKTtcbiAgfSk7XG5cbiAgLy8gUmVnaXN0ZXIgcGljdG9ncmFwaCBzZXJ2aWNlIChubyBkZXBlbmRlbmNpZXMgYWZ0ZXIgcmVuZGVyaW5nIGlzIHJlZ2lzdGVyZWQpXG4gIGNvbnRhaW5lci5yZWdpc3RlclNpbmdsZXRvbkNsYXNzKElQaWN0b2dyYXBoU2VydmljZUludGVyZmFjZSk7XG5cbiAgLy8gUmVnaXN0ZXIgZXhwb3J0IHNlcnZpY2VcbiAgY29udGFpbmVyLnJlZ2lzdGVyU2luZ2xldG9uQ2xhc3MoSUV4cG9ydFNlcnZpY2VJbnRlcmZhY2UpO1xuXG4gIC8vIFJlZ2lzdGVyIGdlbmVyYXRpb24gc2VydmljZXNcbiAgY29udGFpbmVyLnJlZ2lzdGVyU2luZ2xldG9uQ2xhc3MoSU1vdGlvbkdlbmVyYXRpb25TZXJ2aWNlSW50ZXJmYWNlKTtcbiAgY29udGFpbmVyLnJlZ2lzdGVyU2luZ2xldG9uQ2xhc3MoSU9yaWVudGF0aW9uQ2FsY3VsYXRpb25TZXJ2aWNlSW50ZXJmYWNlKTtcblxuICAvLyBSZWdpc3RlciBzZXF1ZW5jZSBnZW5lcmF0aW9uIHNlcnZpY2Ugd2l0aCBkZXBlbmRlbmNpZXNcbiAgY29udGFpbmVyLnJlZ2lzdGVyRmFjdG9yeShJU2VxdWVuY2VHZW5lcmF0aW9uU2VydmljZUludGVyZmFjZSwgKCkgPT4ge1xuICAgIGNvbnN0IG9wdGlvbkRhdGFTZXJ2aWNlID0gY29udGFpbmVyLnJlc29sdmUoSU9wdGlvbkRhdGFTZXJ2aWNlSW50ZXJmYWNlKTtcbiAgICBjb25zdCBvcmllbnRhdGlvbkNhbGN1bGF0aW9uU2VydmljZSA9IGNvbnRhaW5lci5yZXNvbHZlKFxuICAgICAgSU9yaWVudGF0aW9uQ2FsY3VsYXRpb25TZXJ2aWNlSW50ZXJmYWNlXG4gICAgKTtcbiAgICByZXR1cm4gbmV3IFNlcXVlbmNlR2VuZXJhdGlvblNlcnZpY2UoXG4gICAgICBvcHRpb25EYXRhU2VydmljZSxcbiAgICAgIG9yaWVudGF0aW9uQ2FsY3VsYXRpb25TZXJ2aWNlXG4gICAgKTtcbiAgfSk7XG5cbiAgLy8gUmVnaXN0ZXIgcGFnZSBsYXlvdXQgYW5kIGV4cG9ydCBzZXJ2aWNlc1xuICBjb250YWluZXIucmVnaXN0ZXJTaW5nbGV0b25DbGFzcyhJUHJpbnRhYmxlUGFnZUxheW91dFNlcnZpY2VJbnRlcmZhY2UpO1xuICBjb250YWluZXIucmVnaXN0ZXJTaW5nbGV0b25DbGFzcyhJUGFnZUltYWdlRXhwb3J0U2VydmljZUludGVyZmFjZSk7XG5cbiAgLy8gUmVnaXN0ZXIgcGFnZSBmYWN0b3J5IHNlcnZpY2Ugd2l0aCBkZXBlbmRlbmN5XG4gIGNvbnRhaW5lci5yZWdpc3RlckZhY3RvcnkoSVBhZ2VGYWN0b3J5U2VydmljZUludGVyZmFjZSwgKCkgPT4ge1xuICAgIGNvbnN0IGxheW91dFNlcnZpY2UgPSBjb250YWluZXIucmVzb2x2ZShcbiAgICAgIElQcmludGFibGVQYWdlTGF5b3V0U2VydmljZUludGVyZmFjZVxuICAgICk7XG4gICAgcmV0dXJuIG5ldyBJUGFnZUZhY3RvcnlTZXJ2aWNlSW50ZXJmYWNlLmltcGxlbWVudGF0aW9uKGxheW91dFNlcnZpY2UpO1xuICB9KTtcblxuICAvLyBSZWdpc3RlciBleHBvcnQgaW50ZWdyYXRpb24gc2VydmljZSB3aXRoIGRlcGVuZGVuY3lcbiAgY29udGFpbmVyLnJlZ2lzdGVyRmFjdG9yeShcbiAgICBJU2VxdWVuY2VDYXJkRXhwb3J0SW50ZWdyYXRpb25TZXJ2aWNlSW50ZXJmYWNlLFxuICAgICgpID0+IHtcbiAgICAgIGNvbnN0IHBhZ2VJbWFnZUV4cG9ydFNlcnZpY2UgPSBjb250YWluZXIucmVzb2x2ZShcbiAgICAgICAgSVBhZ2VJbWFnZUV4cG9ydFNlcnZpY2VJbnRlcmZhY2VcbiAgICAgICk7XG4gICAgICByZXR1cm4gbmV3IElTZXF1ZW5jZUNhcmRFeHBvcnRJbnRlZ3JhdGlvblNlcnZpY2VJbnRlcmZhY2UuaW1wbGVtZW50YXRpb24oXG4gICAgICAgIHBhZ2VJbWFnZUV4cG9ydFNlcnZpY2VcbiAgICAgICk7XG4gICAgfVxuICApO1xuXG4gIC8vIFJlZ2lzdGVyIGFwcGxpY2F0aW9uIGluaXRpYWxpemF0aW9uIHNlcnZpY2Ugd2l0aCBmYWN0b3J5XG4gIGNvbnRhaW5lci5yZWdpc3RlckZhY3RvcnkoSUFwcGxpY2F0aW9uSW5pdGlhbGl6YXRpb25TZXJ2aWNlSW50ZXJmYWNlLCAoKSA9PiB7XG4gICAgY29uc3Qgc2V0dGluZ3NTZXJ2aWNlID0gY29udGFpbmVyLnJlc29sdmUoSVNldHRpbmdzU2VydmljZUludGVyZmFjZSk7XG4gICAgY29uc3QgcGVyc2lzdGVuY2VTZXJ2aWNlID0gY29udGFpbmVyLnJlc29sdmUoSVBlcnNpc3RlbmNlU2VydmljZUludGVyZmFjZSk7XG4gICAgcmV0dXJuIG5ldyBBcHBsaWNhdGlvbkluaXRpYWxpemF0aW9uU2VydmljZShcbiAgICAgIHNldHRpbmdzU2VydmljZSxcbiAgICAgIHBlcnNpc3RlbmNlU2VydmljZVxuICAgICk7XG4gIH0pO1xufVxuIl0sIm1hcHBpbmdzIjoiQUFNQTtBQUFBLEVBQ0U7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLE9BQ0s7QUFFUCxTQUFTLHdDQUF3QztBQUNqRCxTQUFTLHVDQUF1QztBQUNoRCxTQUFTLGtDQUFrQztBQUMzQyxTQUFTLHVCQUF1QjtBQUNoQyxTQUFTLGlDQUFpQztBQUUxQyxTQUFTLDhDQUE4QztBQU12RCxzQkFBc0IscUJBQ3BCLFdBQ2U7QUFFZixZQUFVLHVCQUF1QiwrQkFBK0I7QUFHaEUsWUFBVSx1QkFBdUIsNEJBQTRCO0FBQzdELFlBQVUsdUJBQXVCLHlCQUF5QjtBQUMxRCxZQUFVLHVCQUF1QixnQ0FBZ0M7QUFDakUsWUFBVSx1QkFBdUIsZ0NBQWdDO0FBR2pFLFlBQVUsdUJBQXVCLDhCQUE4QjtBQUMvRCxZQUFVLHVCQUF1QiwyQkFBMkI7QUFHNUQsWUFBVSx1QkFBdUIsMEJBQTBCO0FBQzNELFlBQVUsdUJBQXVCLDJCQUEyQjtBQUM1RCxZQUFVLHVCQUF1QixtQ0FBbUM7QUFDcEUsWUFBVSx1QkFBdUIsOEJBQThCO0FBQy9ELFlBQVUsdUJBQXVCLCtCQUErQjtB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