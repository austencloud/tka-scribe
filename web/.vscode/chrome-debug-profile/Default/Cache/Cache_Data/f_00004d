import {
  ArrowType,
  createArrowData,
  createBeatData,
  createGridData,
  createMotionData,
  createPictographData,
  createPropData,
  GridMode as DomainGridMode,
  Location,
  MotionColor,
  MotionType as DomainMotionType,
  Orientation,
  PropType,
  RotationDirection
} from "/src/lib/domain/index.ts";
export class StartPositionService {
  DEFAULT_START_POSITIONS = {
    diamond: ["alpha1_alpha1", "beta5_beta5", "gamma11_gamma11"],
    box: ["alpha2_alpha2", "beta4_beta4", "gamma12_gamma12"]
  };
  async getAvailableStartPositions(propType, gridMode) {
    console.log(
      `ðŸ“ Getting available start positions for ${propType} in ${gridMode} mode`
    );
    try {
      const startPositionKeys = this.DEFAULT_START_POSITIONS[gridMode];
      if (!startPositionKeys) {
        console.error(
          `âŒ Unsupported grid mode: ${gridMode}. Supported modes: ${Object.keys(this.DEFAULT_START_POSITIONS).join(", ")}`
        );
        const fallbackKeys = this.DEFAULT_START_POSITIONS.diamond;
        console.log(`ðŸ”„ Falling back to diamond mode`);
        const beatData2 = fallbackKeys.map((key, index) => {
          return createBeatData({
            beatNumber: 0,
            isBlank: false,
            pictographData: this.createStartPositionPictograph(
              key,
              index,
              DomainGridMode.DIAMOND
            )
          });
        });
        console.log(
          `âœ… Generated ${beatData2.length} available start positions (fallback)`
        );
        return beatData2;
      }
      const beatData = startPositionKeys.map((key, index) => {
        return createBeatData({
          beatNumber: 0,
          isBlank: false,
          pictographData: this.createStartPositionPictograph(
            key,
            index,
            gridMode
          )
        });
      });
      console.log(`âœ… Generated ${beatData.length} available start positions`);
      return beatData;
    } catch (error) {
      console.error("âŒ Error getting available start positions:", error);
      return [];
    }
  }
  async setStartPosition(startPosition) {
    try {
      if (typeof window !== "undefined") {
        const existingData = localStorage.getItem("startPosition");
        if (existingData) {
          try {
            const parsed = JSON.parse(existingData);
            if (parsed.endPosition) {
              return;
            }
          } catch {
          }
        }
        const optionPickerFormat = {
          endPosition: startPosition.metadata?.endPosition || "alpha1",
          // Extract from metadata
          pictographData: startPosition.pictographData,
          letter: startPosition.pictographData?.letter,
          gridMode: "diamond",
          // Default
          isStartPosition: true,
          // Include the full beat data for compatibility
          ...startPosition
        };
        localStorage.setItem(
          "startPosition",
          JSON.stringify(optionPickerFormat)
        );
      }
    } catch (error) {
      console.error("Error setting start position:", error);
      throw new Error(
        `Failed to set start position: ${error instanceof Error ? error.message : "Unknown error"}`
      );
    }
  }
  validateStartPosition(position) {
    const errors = [];
    if (!position.pictographData) {
      errors.push({
        code: "MISSING_pictographData",
        message: "Start position must have pictograph data",
        severity: "error"
      });
    }
    if (!position.pictographData?.motions?.blue && !position.pictographData?.motions?.red) {
      errors.push({
        code: "MISSING_MOTIONS",
        message: "Start position must have at least one motion",
        severity: "error"
      });
    }
    if (position.pictographData?.motions?.blue?.motionType !== DomainMotionType.STATIC) {
      errors.push({
        code: "INVALID_BLUE_MOTION",
        message: "Blue motion must be static for start positions",
        severity: "error"
      });
    }
    if (position.pictographData?.motions?.red?.motionType !== DomainMotionType.STATIC) {
      errors.push({
        code: "INVALID_RED_MOTION",
        message: "Red motion must be static for start positions",
        severity: "error"
      });
    }
    return {
      isValid: errors.length === 0,
      errors,
      warnings: []
    };
  }
  async getDefaultStartPositions(gridMode) {
    try {
      const startPositionKeys = this.DEFAULT_START_POSITIONS[gridMode];
      if (!startPositionKeys) {
        console.error(
          `Unsupported grid mode: ${gridMode}. Supported modes: ${Object.keys(this.DEFAULT_START_POSITIONS).join(", ")}`
        );
        const fallbackKeys = this.DEFAULT_START_POSITIONS.diamond;
        const pictographData2 = fallbackKeys.map(
          (key, index) => this.createStartPositionPictograph(
            key,
            index,
            DomainGridMode.DIAMOND
          )
        );
        return pictographData2;
      }
      const pictographData = startPositionKeys.map(
        (key, index) => this.createStartPositionPictograph(key, index, gridMode)
      );
      return pictographData;
    } catch (error) {
      console.error("Error getting default start positions:", error);
      return [];
    }
  }
  createStartPositionPictograph(key, index, gridMode) {
    let letter;
    if (key.includes("alpha")) letter = "Î±";
    else if (key.includes("beta")) letter = "Î²";
    else if (key.includes("gamma")) letter = "Î“";
    else letter = key;
    const positionMappings = {
      alpha1_alpha1: { blue: Location.SOUTH, red: Location.NORTH },
      // Alpha1: Blue=South, Red=North
      beta5_beta5: { blue: Location.SOUTH, red: Location.SOUTH },
      // Beta5: Blue=South, Red=South
      gamma11_gamma11: { blue: Location.SOUTH, red: Location.EAST },
      // Gamma11: Blue=South, Red=East
      // Box mode positions
      alpha2_alpha2: { blue: Location.SOUTHWEST, red: Location.NORTHEAST },
      // Alpha2: Blue=Southwest, Red=Northeast
      beta4_beta4: { blue: Location.SOUTHEAST, red: Location.SOUTHEAST },
      // Beta4: Blue=Southeast, Red=Southeast
      gamma12_gamma12: { blue: Location.NORTHWEST, red: Location.NORTHEAST }
      // Gamma12: Blue=Northwest, Red=Northeast
    };
    const mapping = positionMappings[key];
    if (!mapping) {
      console.warn(`No position mapping found for ${key}, using fallback`);
    }
    const blueLocation = mapping?.blue || Location.SOUTH;
    const redLocation = mapping?.red || Location.NORTH;
    const blueArrow = createArrowData({
      arrowType: ArrowType.BLUE,
      color: MotionColor.BLUE,
      turns: 0,
      location: blueLocation
    });
    const redArrow = createArrowData({
      arrowType: ArrowType.RED,
      color: MotionColor.RED,
      turns: 0,
      location: redLocation
    });
    const blueProp = createPropData({
      propType: PropType.STAFF,
      color: MotionColor.BLUE,
      location: blueLocation
    });
    const redProp = createPropData({
      propType: PropType.STAFF,
      color: MotionColor.RED,
      location: redLocation
    });
    const blueMotion = createMotionData({
      motionType: DomainMotionType.STATIC,
      rotationDirection: RotationDirection.NO_ROTATION,
      startLocation: blueLocation,
      endLocation: blueLocation,
      turns: 0,
      startOrientation: Orientation.IN,
      endOrientation: Orientation.IN
    });
    const redMotion = createMotionData({
      motionType: DomainMotionType.STATIC,
      rotationDirection: RotationDirection.NO_ROTATION,
      startLocation: redLocation,
      endLocation: redLocation,
      turns: 0,
      startOrientation: Orientation.IN,
      endOrientation: Orientation.IN
    });
    const pictograph = createPictographData({
      id: `start-pos-${key}-${index}`,
      gridData: createGridData({
        gridMode: gridMode === "diamond" ? DomainGridMode.DIAMOND : DomainGridMode.BOX
      }),
      arrows: { blue: blueArrow, red: redArrow },
      props: { blue: blueProp, red: redProp },
      motions: { blue: blueMotion, red: redMotion },
      letter,
      beat: index,
      isBlank: false,
      isMirrored: false
    });
    return pictograph;
  }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlN0YXJ0UG9zaXRpb25TZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogU3RhcnQgUG9zaXRpb24gU2VydmljZSAtIEltcGxlbWVudGF0aW9uXG4gKlxuICogUHJvdmlkZXMgc3RhcnQgcG9zaXRpb24gbWFuYWdlbWVudCBmdW5jdGlvbmFsaXR5IGZvciB0aGUgY29uc3RydWN0IHdvcmtmbG93LlxuICogQmFzZWQgb24gdGhlIGRlc2t0b3AgU3RhcnRQb3NpdGlvbk9yY2hlc3RyYXRvciBidXQgc2ltcGxpZmllZCBmb3Igd2ViLlxuICovXG5cbmltcG9ydCB0eXBlIHsgQmVhdERhdGEsIFBpY3RvZ3JhcGhEYXRhIH0gZnJvbSBcIi4uLy4uLy4uL2RvbWFpblwiO1xuaW1wb3J0IHtcbiAgQXJyb3dUeXBlLFxuICBjcmVhdGVBcnJvd0RhdGEsXG4gIGNyZWF0ZUJlYXREYXRhLFxuICBjcmVhdGVHcmlkRGF0YSxcbiAgY3JlYXRlTW90aW9uRGF0YSxcbiAgY3JlYXRlUGljdG9ncmFwaERhdGEsXG4gIGNyZWF0ZVByb3BEYXRhLFxuICBHcmlkTW9kZSBhcyBEb21haW5HcmlkTW9kZSxcbiAgTG9jYXRpb24sXG4gIE1vdGlvbkNvbG9yLFxuICBNb3Rpb25UeXBlIGFzIERvbWFpbk1vdGlvblR5cGUsXG4gIE9yaWVudGF0aW9uLFxuICBQcm9wVHlwZSxcbiAgUm90YXRpb25EaXJlY3Rpb24sXG59IGZyb20gXCIuLi8uLi8uLi9kb21haW5cIjtcbmltcG9ydCB0eXBlIHsgVmFsaWRhdGlvblJlc3VsdCB9IGZyb20gXCIuLi8uLi9pbnRlcmZhY2VzL2RvbWFpbi10eXBlc1wiO1xuaW1wb3J0IHR5cGUgeyBHcmlkTW9kZSB9IGZyb20gXCIuLi8uLi9pbnRlcmZhY2VzL2NvcmUtdHlwZXNcIjtcbmltcG9ydCB0eXBlIHsgSVN0YXJ0UG9zaXRpb25TZXJ2aWNlIH0gZnJvbSBcIi4uLy4uL2ludGVyZmFjZXMvYXBwbGljYXRpb24taW50ZXJmYWNlc1wiO1xuaW1wb3J0IHR5cGUgeyBWYWxpZGF0aW9uRXJyb3IgfSBmcm9tIFwiJGxpYi9kb21haW4vc2VxdWVuY2VDYXJkXCI7XG5cbmV4cG9ydCBjbGFzcyBTdGFydFBvc2l0aW9uU2VydmljZSBpbXBsZW1lbnRzIElTdGFydFBvc2l0aW9uU2VydmljZSB7XG4gIHByaXZhdGUgcmVhZG9ubHkgREVGQVVMVF9TVEFSVF9QT1NJVElPTlMgPSB7XG4gICAgZGlhbW9uZDogW1wiYWxwaGExX2FscGhhMVwiLCBcImJldGE1X2JldGE1XCIsIFwiZ2FtbWExMV9nYW1tYTExXCJdLFxuICAgIGJveDogW1wiYWxwaGEyX2FscGhhMlwiLCBcImJldGE0X2JldGE0XCIsIFwiZ2FtbWExMl9nYW1tYTEyXCJdLFxuICB9O1xuXG4gIGFzeW5jIGdldEF2YWlsYWJsZVN0YXJ0UG9zaXRpb25zKFxuICAgIHByb3BUeXBlOiBzdHJpbmcsXG4gICAgZ3JpZE1vZGU6IEdyaWRNb2RlXG4gICk6IFByb21pc2U8QmVhdERhdGFbXT4ge1xuICAgIGNvbnNvbGUubG9nKFxuICAgICAgYPCfk40gR2V0dGluZyBhdmFpbGFibGUgc3RhcnQgcG9zaXRpb25zIGZvciAke3Byb3BUeXBlfSBpbiAke2dyaWRNb2RlfSBtb2RlYFxuICAgICk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3Qgc3RhcnRQb3NpdGlvbktleXMgPSB0aGlzLkRFRkFVTFRfU1RBUlRfUE9TSVRJT05TW2dyaWRNb2RlXTtcblxuICAgICAgaWYgKCFzdGFydFBvc2l0aW9uS2V5cykge1xuICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgIGDinYwgVW5zdXBwb3J0ZWQgZ3JpZCBtb2RlOiAke2dyaWRNb2RlfS4gU3VwcG9ydGVkIG1vZGVzOiAke09iamVjdC5rZXlzKHRoaXMuREVGQVVMVF9TVEFSVF9QT1NJVElPTlMpLmpvaW4oXCIsIFwiKX1gXG4gICAgICAgICk7XG4gICAgICAgIC8vIEZhbGxiYWNrIHRvIGRpYW1vbmQgbW9kZVxuICAgICAgICBjb25zdCBmYWxsYmFja0tleXMgPSB0aGlzLkRFRkFVTFRfU1RBUlRfUE9TSVRJT05TLmRpYW1vbmQ7XG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5SEIEZhbGxpbmcgYmFjayB0byBkaWFtb25kIG1vZGVgKTtcblxuICAgICAgICBjb25zdCBiZWF0RGF0YTogQmVhdERhdGFbXSA9IGZhbGxiYWNrS2V5cy5tYXAoKGtleSwgaW5kZXgpID0+IHtcbiAgICAgICAgICByZXR1cm4gY3JlYXRlQmVhdERhdGEoe1xuICAgICAgICAgICAgYmVhdE51bWJlcjogMCxcbiAgICAgICAgICAgIGlzQmxhbms6IGZhbHNlLFxuICAgICAgICAgICAgcGljdG9ncmFwaERhdGE6IHRoaXMuY3JlYXRlU3RhcnRQb3NpdGlvblBpY3RvZ3JhcGgoXG4gICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgaW5kZXgsXG4gICAgICAgICAgICAgIERvbWFpbkdyaWRNb2RlLkRJQU1PTkRcbiAgICAgICAgICAgICksXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgIGDinIUgR2VuZXJhdGVkICR7YmVhdERhdGEubGVuZ3RofSBhdmFpbGFibGUgc3RhcnQgcG9zaXRpb25zIChmYWxsYmFjaylgXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiBiZWF0RGF0YTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgYmVhdERhdGE6IEJlYXREYXRhW10gPSBzdGFydFBvc2l0aW9uS2V5cy5tYXAoKGtleSwgaW5kZXgpID0+IHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUJlYXREYXRhKHtcbiAgICAgICAgICBiZWF0TnVtYmVyOiAwLFxuICAgICAgICAgIGlzQmxhbms6IGZhbHNlLFxuICAgICAgICAgIHBpY3RvZ3JhcGhEYXRhOiB0aGlzLmNyZWF0ZVN0YXJ0UG9zaXRpb25QaWN0b2dyYXBoKFxuICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgaW5kZXgsXG4gICAgICAgICAgICBncmlkTW9kZVxuICAgICAgICAgICksXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnNvbGUubG9nKGDinIUgR2VuZXJhdGVkICR7YmVhdERhdGEubGVuZ3RofSBhdmFpbGFibGUgc3RhcnQgcG9zaXRpb25zYCk7XG4gICAgICByZXR1cm4gYmVhdERhdGE7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgRXJyb3IgZ2V0dGluZyBhdmFpbGFibGUgc3RhcnQgcG9zaXRpb25zOlwiLCBlcnJvcik7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgc2V0U3RhcnRQb3NpdGlvbihzdGFydFBvc2l0aW9uOiBCZWF0RGF0YSk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBTdG9yZSBpbiBsb2NhbFN0b3JhZ2UgZm9yIHBlcnNpc3RlbmNlIGluIHRoZSBmb3JtYXQgT3B0aW9uUGlja2VyIGV4cGVjdHNcbiAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIC8vIENoZWNrIGlmIGxvY2FsU3RvcmFnZSBhbHJlYWR5IGhhcyB0aGUgY29ycmVjdCBmb3JtYXQgKGZyb20gU3RhcnRQb3NpdGlvblBpY2tlcilcbiAgICAgICAgY29uc3QgZXhpc3RpbmdEYXRhID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJzdGFydFBvc2l0aW9uXCIpO1xuICAgICAgICBpZiAoZXhpc3RpbmdEYXRhKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2UoZXhpc3RpbmdEYXRhKTtcbiAgICAgICAgICAgIC8vIElmIGl0IGFscmVhZHkgaGFzIHRvcC1sZXZlbCBlbmRQb3NpdGlvbiwgZG9uJ3Qgb3ZlcndyaXRlIGl0XG4gICAgICAgICAgICBpZiAocGFyc2VkLmVuZFBvc2l0aW9uKSB7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAgIC8vIElmIHBhcnNpbmcgZmFpbHMsIGNvbnRpbnVlIHdpdGggc2F2aW5nIG5ldyBmb3JtYXRcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDcmVhdGUgdGhlIGZvcm1hdCB0aGF0IE9wdGlvblBpY2tlciBleHBlY3RzXG4gICAgICAgIGNvbnN0IG9wdGlvblBpY2tlckZvcm1hdCA9IHtcbiAgICAgICAgICBlbmRQb3NpdGlvbjogc3RhcnRQb3NpdGlvbi5tZXRhZGF0YT8uZW5kUG9zaXRpb24gfHwgXCJhbHBoYTFcIiwgLy8gRXh0cmFjdCBmcm9tIG1ldGFkYXRhXG4gICAgICAgICAgcGljdG9ncmFwaERhdGE6IHN0YXJ0UG9zaXRpb24ucGljdG9ncmFwaERhdGEsXG4gICAgICAgICAgbGV0dGVyOiBzdGFydFBvc2l0aW9uLnBpY3RvZ3JhcGhEYXRhPy5sZXR0ZXIsXG4gICAgICAgICAgZ3JpZE1vZGU6IFwiZGlhbW9uZFwiLCAvLyBEZWZhdWx0XG4gICAgICAgICAgaXNTdGFydFBvc2l0aW9uOiB0cnVlLFxuICAgICAgICAgIC8vIEluY2x1ZGUgdGhlIGZ1bGwgYmVhdCBkYXRhIGZvciBjb21wYXRpYmlsaXR5XG4gICAgICAgICAgLi4uc3RhcnRQb3NpdGlvbixcbiAgICAgICAgfTtcblxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcbiAgICAgICAgICBcInN0YXJ0UG9zaXRpb25cIixcbiAgICAgICAgICBKU09OLnN0cmluZ2lmeShvcHRpb25QaWNrZXJGb3JtYXQpXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBzZXR0aW5nIHN0YXJ0IHBvc2l0aW9uOlwiLCBlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBGYWlsZWQgdG8gc2V0IHN0YXJ0IHBvc2l0aW9uOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCJVbmtub3duIGVycm9yXCJ9YFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICB2YWxpZGF0ZVN0YXJ0UG9zaXRpb24ocG9zaXRpb246IEJlYXREYXRhKTogVmFsaWRhdGlvblJlc3VsdCB7XG4gICAgY29uc3QgZXJyb3JzOiBWYWxpZGF0aW9uRXJyb3JbXSA9IFtdO1xuXG4gICAgaWYgKCFwb3NpdGlvbi5waWN0b2dyYXBoRGF0YSkge1xuICAgICAgZXJyb3JzLnB1c2goe1xuICAgICAgICBjb2RlOiBcIk1JU1NJTkdfcGljdG9ncmFwaERhdGFcIixcbiAgICAgICAgbWVzc2FnZTogXCJTdGFydCBwb3NpdGlvbiBtdXN0IGhhdmUgcGljdG9ncmFwaCBkYXRhXCIsXG4gICAgICAgIHNldmVyaXR5OiBcImVycm9yXCIsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICAhcG9zaXRpb24ucGljdG9ncmFwaERhdGE/Lm1vdGlvbnM/LmJsdWUgJiZcbiAgICAgICFwb3NpdGlvbi5waWN0b2dyYXBoRGF0YT8ubW90aW9ucz8ucmVkXG4gICAgKSB7XG4gICAgICBlcnJvcnMucHVzaCh7XG4gICAgICAgIGNvZGU6IFwiTUlTU0lOR19NT1RJT05TXCIsXG4gICAgICAgIG1lc3NhZ2U6IFwiU3RhcnQgcG9zaXRpb24gbXVzdCBoYXZlIGF0IGxlYXN0IG9uZSBtb3Rpb25cIixcbiAgICAgICAgc2V2ZXJpdHk6IFwiZXJyb3JcIixcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFZhbGlkYXRlIG1vdGlvbiB0eXBlcyBhcmUgc3RhdGljIGZvciBzdGFydCBwb3NpdGlvbnNcbiAgICBpZiAoXG4gICAgICBwb3NpdGlvbi5waWN0b2dyYXBoRGF0YT8ubW90aW9ucz8uYmx1ZT8ubW90aW9uVHlwZSAhPT1cbiAgICAgIERvbWFpbk1vdGlvblR5cGUuU1RBVElDXG4gICAgKSB7XG4gICAgICBlcnJvcnMucHVzaCh7XG4gICAgICAgIGNvZGU6IFwiSU5WQUxJRF9CTFVFX01PVElPTlwiLFxuICAgICAgICBtZXNzYWdlOiBcIkJsdWUgbW90aW9uIG11c3QgYmUgc3RhdGljIGZvciBzdGFydCBwb3NpdGlvbnNcIixcbiAgICAgICAgc2V2ZXJpdHk6IFwiZXJyb3JcIixcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChcbiAgICAgIHBvc2l0aW9uLnBpY3RvZ3JhcGhEYXRhPy5tb3Rpb25zPy5yZWQ/Lm1vdGlvblR5cGUgIT09XG4gICAgICBEb21haW5Nb3Rpb25UeXBlLlNUQVRJQ1xuICAgICkge1xuICAgICAgZXJyb3JzLnB1c2goe1xuICAgICAgICBjb2RlOiBcIklOVkFMSURfUkVEX01PVElPTlwiLFxuICAgICAgICBtZXNzYWdlOiBcIlJlZCBtb3Rpb24gbXVzdCBiZSBzdGF0aWMgZm9yIHN0YXJ0IHBvc2l0aW9uc1wiLFxuICAgICAgICBzZXZlcml0eTogXCJlcnJvclwiLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGlzVmFsaWQ6IGVycm9ycy5sZW5ndGggPT09IDAsXG4gICAgICBlcnJvcnMsXG4gICAgICB3YXJuaW5nczogW10sXG4gICAgfTtcbiAgfVxuXG4gIGFzeW5jIGdldERlZmF1bHRTdGFydFBvc2l0aW9ucyhcbiAgICBncmlkTW9kZTogR3JpZE1vZGVcbiAgKTogUHJvbWlzZTxQaWN0b2dyYXBoRGF0YVtdPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN0YXJ0UG9zaXRpb25LZXlzID0gdGhpcy5ERUZBVUxUX1NUQVJUX1BPU0lUSU9OU1tncmlkTW9kZV07XG5cbiAgICAgIGlmICghc3RhcnRQb3NpdGlvbktleXMpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICBgVW5zdXBwb3J0ZWQgZ3JpZCBtb2RlOiAke2dyaWRNb2RlfS4gU3VwcG9ydGVkIG1vZGVzOiAke09iamVjdC5rZXlzKHRoaXMuREVGQVVMVF9TVEFSVF9QT1NJVElPTlMpLmpvaW4oXCIsIFwiKX1gXG4gICAgICAgICk7XG4gICAgICAgIC8vIEZhbGxiYWNrIHRvIGRpYW1vbmQgbW9kZVxuICAgICAgICBjb25zdCBmYWxsYmFja0tleXMgPSB0aGlzLkRFRkFVTFRfU1RBUlRfUE9TSVRJT05TLmRpYW1vbmQ7XG5cbiAgICAgICAgY29uc3QgcGljdG9ncmFwaERhdGE6IFBpY3RvZ3JhcGhEYXRhW10gPSBmYWxsYmFja0tleXMubWFwKFxuICAgICAgICAgIChrZXksIGluZGV4KSA9PlxuICAgICAgICAgICAgdGhpcy5jcmVhdGVTdGFydFBvc2l0aW9uUGljdG9ncmFwaChcbiAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICBpbmRleCxcbiAgICAgICAgICAgICAgRG9tYWluR3JpZE1vZGUuRElBTU9ORFxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiBwaWN0b2dyYXBoRGF0YTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcGljdG9ncmFwaERhdGE6IFBpY3RvZ3JhcGhEYXRhW10gPSBzdGFydFBvc2l0aW9uS2V5cy5tYXAoXG4gICAgICAgIChrZXksIGluZGV4KSA9PiB0aGlzLmNyZWF0ZVN0YXJ0UG9zaXRpb25QaWN0b2dyYXBoKGtleSwgaW5kZXgsIGdyaWRNb2RlKVxuICAgICAgKTtcblxuICAgICAgcmV0dXJuIHBpY3RvZ3JhcGhEYXRhO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZ2V0dGluZyBkZWZhdWx0IHN0YXJ0IHBvc2l0aW9uczpcIiwgZXJyb3IpO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlU3RhcnRQb3NpdGlvblBpY3RvZ3JhcGgoXG4gICAga2V5OiBzdHJpbmcsXG4gICAgaW5kZXg6IG51bWJlcixcbiAgICBncmlkTW9kZTogR3JpZE1vZGVcbiAgKTogUGljdG9ncmFwaERhdGEge1xuICAgIC8vIERldGVybWluZSBsZXR0ZXIgYmFzZWQgb24gcG9zaXRpb24ga2V5XG4gICAgbGV0IGxldHRlcjogc3RyaW5nO1xuICAgIGlmIChrZXkuaW5jbHVkZXMoXCJhbHBoYVwiKSkgbGV0dGVyID0gXCLOsVwiO1xuICAgIGVsc2UgaWYgKGtleS5pbmNsdWRlcyhcImJldGFcIikpIGxldHRlciA9IFwizrJcIjtcbiAgICBlbHNlIGlmIChrZXkuaW5jbHVkZXMoXCJnYW1tYVwiKSkgbGV0dGVyID0gXCLOk1wiO1xuICAgIGVsc2UgbGV0dGVyID0ga2V5O1xuXG4gICAgLy8gVXNlIGNvcnJlY3QgbG9jYXRpb25zIGJhc2VkIG9uIGxlZ2FjeSBwb3NpdGlvbiBtYXBwaW5nc1xuICAgIC8vIEZyb20gUGF0dGVybkdlbmVyYXRvci50cyBhbmQgcG9zaXRpb25zX21hcC5weVxuICAgIGNvbnN0IHBvc2l0aW9uTWFwcGluZ3M6IFJlY29yZDxzdHJpbmcsIHsgYmx1ZTogTG9jYXRpb247IHJlZDogTG9jYXRpb24gfT4gPVxuICAgICAge1xuICAgICAgICBhbHBoYTFfYWxwaGExOiB7IGJsdWU6IExvY2F0aW9uLlNPVVRILCByZWQ6IExvY2F0aW9uLk5PUlRIIH0sIC8vIEFscGhhMTogQmx1ZT1Tb3V0aCwgUmVkPU5vcnRoXG4gICAgICAgIGJldGE1X2JldGE1OiB7IGJsdWU6IExvY2F0aW9uLlNPVVRILCByZWQ6IExvY2F0aW9uLlNPVVRIIH0sIC8vIEJldGE1OiBCbHVlPVNvdXRoLCBSZWQ9U291dGhcbiAgICAgICAgZ2FtbWExMV9nYW1tYTExOiB7IGJsdWU6IExvY2F0aW9uLlNPVVRILCByZWQ6IExvY2F0aW9uLkVBU1QgfSwgLy8gR2FtbWExMTogQmx1ZT1Tb3V0aCwgUmVkPUVhc3RcbiAgICAgICAgLy8gQm94IG1vZGUgcG9zaXRpb25zXG4gICAgICAgIGFscGhhMl9hbHBoYTI6IHsgYmx1ZTogTG9jYXRpb24uU09VVEhXRVNULCByZWQ6IExvY2F0aW9uLk5PUlRIRUFTVCB9LCAvLyBBbHBoYTI6IEJsdWU9U291dGh3ZXN0LCBSZWQ9Tm9ydGhlYXN0XG4gICAgICAgIGJldGE0X2JldGE0OiB7IGJsdWU6IExvY2F0aW9uLlNPVVRIRUFTVCwgcmVkOiBMb2NhdGlvbi5TT1VUSEVBU1QgfSwgLy8gQmV0YTQ6IEJsdWU9U291dGhlYXN0LCBSZWQ9U291dGhlYXN0XG4gICAgICAgIGdhbW1hMTJfZ2FtbWExMjogeyBibHVlOiBMb2NhdGlvbi5OT1JUSFdFU1QsIHJlZDogTG9jYXRpb24uTk9SVEhFQVNUIH0sIC8vIEdhbW1hMTI6IEJsdWU9Tm9ydGh3ZXN0LCBSZWQ9Tm9ydGhlYXN0XG4gICAgICB9O1xuXG4gICAgY29uc3QgbWFwcGluZyA9IHBvc2l0aW9uTWFwcGluZ3Nba2V5XTtcbiAgICBpZiAoIW1hcHBpbmcpIHtcbiAgICAgIGNvbnNvbGUud2FybihgTm8gcG9zaXRpb24gbWFwcGluZyBmb3VuZCBmb3IgJHtrZXl9LCB1c2luZyBmYWxsYmFja2ApO1xuICAgIH1cblxuICAgIGNvbnN0IGJsdWVMb2NhdGlvbiA9IG1hcHBpbmc/LmJsdWUgfHwgTG9jYXRpb24uU09VVEg7XG4gICAgY29uc3QgcmVkTG9jYXRpb24gPSBtYXBwaW5nPy5yZWQgfHwgTG9jYXRpb24uTk9SVEg7XG5cbiAgICAvLyBDcmVhdGUgcHJvcGVyIGFycm93IGRhdGEgd2l0aCBsb2NhdGlvblxuICAgIGNvbnN0IGJsdWVBcnJvdyA9IGNyZWF0ZUFycm93RGF0YSh7XG4gICAgICBhcnJvd1R5cGU6IEFycm93VHlwZS5CTFVFLFxuICAgICAgY29sb3I6IE1vdGlvbkNvbG9yLkJMVUUsXG4gICAgICB0dXJuczogMCxcbiAgICAgIGxvY2F0aW9uOiBibHVlTG9jYXRpb24sXG4gICAgfSk7XG5cbiAgICBjb25zdCByZWRBcnJvdyA9IGNyZWF0ZUFycm93RGF0YSh7XG4gICAgICBhcnJvd1R5cGU6IEFycm93VHlwZS5SRUQsXG4gICAgICBjb2xvcjogTW90aW9uQ29sb3IuUkVELFxuICAgICAgdHVybnM6IDAsXG4gICAgICBsb2NhdGlvbjogcmVkTG9jYXRpb24sXG4gICAgfSk7XG5cbiAgICAvLyBDcmVhdGUgcHJvcGVyIHByb3AgZGF0YSB3aXRoIGxvY2F0aW9uXG4gICAgY29uc3QgYmx1ZVByb3AgPSBjcmVhdGVQcm9wRGF0YSh7XG4gICAgICBwcm9wVHlwZTogUHJvcFR5cGUuU1RBRkYsXG4gICAgICBjb2xvcjogTW90aW9uQ29sb3IuQkxVRSxcbiAgICAgIGxvY2F0aW9uOiBibHVlTG9jYXRpb24sXG4gICAgfSk7XG5cbiAgICBjb25zdCByZWRQcm9wID0gY3JlYXRlUHJvcERhdGEoe1xuICAgICAgcHJvcFR5cGU6IFByb3BUeXBlLlNUQUZGLFxuICAgICAgY29sb3I6IE1vdGlvbkNvbG9yLlJFRCxcbiAgICAgIGxvY2F0aW9uOiByZWRMb2NhdGlvbixcbiAgICB9KTtcblxuICAgIC8vIENyZWF0ZSBwcm9wZXIgbW90aW9uIGRhdGFcbiAgICBjb25zdCBibHVlTW90aW9uID0gY3JlYXRlTW90aW9uRGF0YSh7XG4gICAgICBtb3Rpb25UeXBlOiBEb21haW5Nb3Rpb25UeXBlLlNUQVRJQyxcbiAgICAgIHJvdGF0aW9uRGlyZWN0aW9uOiBSb3RhdGlvbkRpcmVjdGlvbi5OT19ST1RBVElPTixcbiAgICAgIHN0YXJ0TG9jYXRpb246IGJsdWVMb2NhdGlvbixcbiAgICAgIGVuZExvY2F0aW9uOiBibHVlTG9jYXRpb24sXG4gICAgICB0dXJuczogMCxcbiAgICAgIHN0YXJ0T3JpZW50YXRpb246IE9yaWVudGF0aW9uLklOLFxuICAgICAgZW5kT3JpZW50YXRpb246IE9yaWVudGF0aW9uLklOLFxuICAgIH0pO1xuXG4gICAgY29uc3QgcmVkTW90aW9uID0gY3JlYXRlTW90aW9uRGF0YSh7XG4gICAgICBtb3Rpb25UeXBlOiBEb21haW5Nb3Rpb25UeXBlLlNUQVRJQyxcbiAgICAgIHJvdGF0aW9uRGlyZWN0aW9uOiBSb3RhdGlvbkRpcmVjdGlvbi5OT19ST1RBVElPTixcbiAgICAgIHN0YXJ0TG9jYXRpb246IHJlZExvY2F0aW9uLFxuICAgICAgZW5kTG9jYXRpb246IHJlZExvY2F0aW9uLFxuICAgICAgdHVybnM6IDAsXG4gICAgICBzdGFydE9yaWVudGF0aW9uOiBPcmllbnRhdGlvbi5JTixcbiAgICAgIGVuZE9yaWVudGF0aW9uOiBPcmllbnRhdGlvbi5JTixcbiAgICB9KTtcblxuICAgIGNvbnN0IHBpY3RvZ3JhcGggPSBjcmVhdGVQaWN0b2dyYXBoRGF0YSh7XG4gICAgICBpZDogYHN0YXJ0LXBvcy0ke2tleX0tJHtpbmRleH1gLFxuICAgICAgZ3JpZERhdGE6IGNyZWF0ZUdyaWREYXRhKHtcbiAgICAgICAgZ3JpZE1vZGU6XG4gICAgICAgICAgZ3JpZE1vZGUgPT09IFwiZGlhbW9uZFwiID8gRG9tYWluR3JpZE1vZGUuRElBTU9ORCA6IERvbWFpbkdyaWRNb2RlLkJPWCxcbiAgICAgIH0pLFxuICAgICAgYXJyb3dzOiB7IGJsdWU6IGJsdWVBcnJvdywgcmVkOiByZWRBcnJvdyB9LFxuICAgICAgcHJvcHM6IHsgYmx1ZTogYmx1ZVByb3AsIHJlZDogcmVkUHJvcCB9LFxuICAgICAgbW90aW9uczogeyBibHVlOiBibHVlTW90aW9uLCByZWQ6IHJlZE1vdGlvbiB9LFxuICAgICAgbGV0dGVyLFxuICAgICAgYmVhdDogaW5kZXgsXG4gICAgICBpc0JsYW5rOiBmYWxzZSxcbiAgICAgIGlzTWlycm9yZWQ6IGZhbHNlLFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHBpY3RvZ3JhcGg7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6IkFBUUE7QUFBQSxFQUNFO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQSxZQUFZO0FBQUEsRUFDWjtBQUFBLEVBQ0E7QUFBQSxFQUNBLGNBQWM7QUFBQSxFQUNkO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxPQUNLO0FBTUEsYUFBTSxxQkFBc0Q7QUFBQSxFQUNoRCwwQkFBMEI7QUFBQSxJQUN6QyxTQUFTLENBQUMsaUJBQWlCLGVBQWUsaUJBQWlCO0FBQUEsSUFDM0QsS0FBSyxDQUFDLGlCQUFpQixl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