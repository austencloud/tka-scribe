/* appState.svelte.ts generated by Svelte v5.38.1 */
import * as $ from "/node_modules/.vite/deps/svelte_internal_client.js?v=cc8aba6c";
import { applicationStateService } from "/src/lib/state/services/ApplicationStateService.svelte.ts";
import { settingsService } from "/src/lib/state/services/SettingsService.svelte.ts";
import { tabStateService } from "/src/lib/state/services/TabStateService.svelte.ts";
import { initializationService } from "/src/lib/state/services/InitializationService.svelte.ts";
import { performanceMetricsService } from "/src/lib/state/services/PerformanceMetricsService.svelte.ts";

export function getIsInitialized() {
	return initializationService.isInitialized;
}

export function getIsInitializing() {
	return initializationService.isInitializing;
}

export function getInitializationError() {
	return initializationService.initializationError;
}

export function getInitializationProgress() {
	return initializationService.initializationProgress;
}

export function setInitializationState(initialized, initializing, error = null, progress = 0) {
	initializationService.setInitializationState(initialized, initializing, error, progress);
}

export function setInitializationError(error) {
	initializationService.setInitializationError(error);
}

export function setInitializationProgress(progress) {
	initializationService.setInitializationProgress(progress);
}

export function getInitializationComplete() {
	return initializationService.initializationComplete;
}

export function getActiveTab() {
	return tabStateService.activeTab;
}

export function getShowSettings() {
	return applicationStateService.showSettings;
}

export function getTheme() {
	return applicationStateService.theme;
}

export function getIsFullScreen() {
	return applicationStateService.isFullScreen;
}

export function getIsTransitioning() {
	return applicationStateService.isTransitioning;
}

export function getSettings() {
	return settingsService.settings;
}

export function getPerformanceMetrics() {
	return performanceMetricsService.performanceMetrics;
}

export function getIsReady() {
	return initializationService.isInitialized && !initializationService.isInitializing && !initializationService.initializationError;
}

export function getCanUseApp() {
	return getIsReady() && !applicationStateService.showSettings;
}

export async function switchTab(tab) {
	if ($.strict_equals(tabStateService.activeTab, tab)) return;

	applicationStateService.setTransitioning(true);
	(await $.track_reactivity_loss(tabStateService.switchTab(tab)))();

	setTimeout(
		() => {
			applicationStateService.setTransitioning(false);
		},
		300
	);
}

export function isTabActive(tab) {
	return tabStateService.isTabActive(tab);
}

export function setFullScreen(fullScreen) {
	applicationStateService.setFullScreen(fullScreen);
}

export function showSettingsDialog() {
	applicationStateService.showSettingsDialog();
}

export function hideSettingsDialog() {
	applicationStateService.hideSettingsDialog();
}

export function toggleSettingsDialog() {
	applicationStateService.toggleSettingsDialog();
}

export function updateSettings(newSettings) {
	settingsService.updateSettings(newSettings);

	if (newSettings.theme) {
		applicationStateService.setTheme(newSettings.theme);
	}
}

export function setTheme(theme) {
	applicationStateService.setTheme(theme);
	settingsService.updateSettings({ theme });
}

export function updateInitializationTime(time) {
	performanceMetricsService.updateInitializationTime(time);
}

export function updateLastRenderTime(time) {
	performanceMetricsService.updateLastRenderTime(time);
}

export function updateMemoryUsage() {
	performanceMetricsService.updateMemoryUsage();
}

export async function restoreApplicationState() {
	(await $.track_reactivity_loss(tabStateService.restoreApplicationState()))();
}

export function getAppStateSnapshot() {
	return {
		// Application state
		...applicationStateService.getStateSnapshot(),

		// Tab state
		activeTab: tabStateService.activeTab,

		// Initialization state
		isInitialized: initializationService.isInitialized,

		isInitializing: initializationService.isInitializing,
		initializationError: initializationService.initializationError,
		initializationProgress: initializationService.initializationProgress,

		// Performance metrics
		performanceMetrics: { ...performanceMetricsService.performanceMetrics },

		// Settings
		settings: { ...settingsService.settings }
	};
}

export function resetAppState() {
	applicationStateService.resetState();
	initializationService.resetInitializationState();
	performanceMetricsService.resetMetrics();
	settingsService.resetToDefaults();
}

export function clearStoredSettings() {
	settingsService.clearStoredSettings();
}

export function debugSettings() {
	settingsService.debugSettings();
}

export function getBrowseStatePersistence() {
	return tabStateService.browseStatePersistence;
}

if ($.strict_equals(typeof window, "undefined", false)) {
	window.debugSettings = debugSettings;
	window.resetAppState = resetAppState;
	window.clearStoredSettings = clearStoredSettings;
}
//# sourceMappingURL=data:application/json;base64,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QjtRQUlsQyxnQkFBd0I7QUFDbEM7OzJCQWNXLFFBQVcscUJBQWE7Q0FDakMsT0FBTyxnQkFBZ0I7Q0FDdkIsT0FBTyxnQkFBZ0I7Q0FDdkIsT0FBTyxzQkFBc0I7QUFDL0IiLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VzIjpbImFwcFN0YXRlLnN2ZWx0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFJlZmFjdG9yZWQgQXBwbGljYXRpb24gU3RhdGUgLSBDbGVhbiBBcmNoaXRlY3R1cmVcbiAqXG4gKiBPcmNoZXN0cmF0ZXMgZm9jdXNlZCBzdGF0ZSBzZXJ2aWNlcyBmb2xsb3dpbmcgU2luZ2xlIFJlc3BvbnNpYmlsaXR5IFByaW5jaXBsZS5cbiAqIEVhY2ggc2VydmljZSBoYW5kbGVzIG9uZSBzcGVjaWZpYyBjb25jZXJuLCBtYWtpbmcgdGhlIGNvZGUgbWFpbnRhaW5hYmxlIGFuZCB0ZXN0YWJsZS5cbiAqXG4gKiBUaGlzIHJlcGxhY2VzIHRoZSA0NjAtbGluZSBtb25vbGl0aCB3aXRoIGEgY2xlYW4sIGZvY3VzZWQgYXJjaGl0ZWN0dXJlLlxuICovXG5cbmltcG9ydCB7IGFwcGxpY2F0aW9uU3RhdGVTZXJ2aWNlIH0gZnJvbSBcIi4vc2VydmljZXMvQXBwbGljYXRpb25TdGF0ZVNlcnZpY2Uuc3ZlbHRlXCI7XG5pbXBvcnQgeyBzZXR0aW5nc1NlcnZpY2UgfSBmcm9tIFwiLi9zZXJ2aWNlcy9TZXR0aW5nc1NlcnZpY2Uuc3ZlbHRlXCI7XG5pbXBvcnQgeyB0YWJTdGF0ZVNlcnZpY2UgfSBmcm9tIFwiLi9zZXJ2aWNlcy9UYWJTdGF0ZVNlcnZpY2Uuc3ZlbHRlXCI7XG5pbXBvcnQgeyBpbml0aWFsaXphdGlvblNlcnZpY2UgfSBmcm9tIFwiLi9zZXJ2aWNlcy9Jbml0aWFsaXphdGlvblNlcnZpY2Uuc3ZlbHRlXCI7XG5pbXBvcnQgeyBwZXJmb3JtYW5jZU1ldHJpY3NTZXJ2aWNlIH0gZnJvbSBcIi4vc2VydmljZXMvUGVyZm9ybWFuY2VNZXRyaWNzU2VydmljZS5zdmVsdGVcIjtcbmltcG9ydCB0eXBlIHsgQXBwU2V0dGluZ3MgfSBmcm9tIFwiJHNlcnZpY2VzL2ludGVyZmFjZXMvYXBwbGljYXRpb24taW50ZXJmYWNlc1wiO1xuaW1wb3J0IHR5cGUgeyBUYWJJZCwgVGhlbWUgfSBmcm9tIFwiLi9zZXJ2aWNlcy9zdGF0ZS1zZXJ2aWNlLWludGVyZmFjZXNcIjtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gQ0xFQU4gQVBJIC0gRGVsZWdhdGVzIHRvIGZvY3VzZWQgc2VydmljZXNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gSU5JVElBTElaQVRJT04gU1RBVEVcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldElzSW5pdGlhbGl6ZWQoKSB7XG4gIHJldHVybiBpbml0aWFsaXphdGlvblNlcnZpY2UuaXNJbml0aWFsaXplZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldElzSW5pdGlhbGl6aW5nKCkge1xuICByZXR1cm4gaW5pdGlhbGl6YXRpb25TZXJ2aWNlLmlzSW5pdGlhbGl6aW5nO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0SW5pdGlhbGl6YXRpb25FcnJvcigpIHtcbiAgcmV0dXJuIGluaXRpYWxpemF0aW9uU2VydmljZS5pbml0aWFsaXphdGlvbkVycm9yO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0SW5pdGlhbGl6YXRpb25Qcm9ncmVzcygpIHtcbiAgcmV0dXJuIGluaXRpYWxpemF0aW9uU2VydmljZS5pbml0aWFsaXphdGlvblByb2dyZXNzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0SW5pdGlhbGl6YXRpb25TdGF0ZShcbiAgaW5pdGlhbGl6ZWQ6IGJvb2xlYW4sXG4gIGluaXRpYWxpemluZzogYm9vbGVhbixcbiAgZXJyb3I6IHN0cmluZyB8IG51bGwgPSBudWxsLFxuICBwcm9ncmVzczogbnVtYmVyID0gMFxuKTogdm9pZCB7XG4gIGluaXRpYWxpemF0aW9uU2VydmljZS5zZXRJbml0aWFsaXphdGlvblN0YXRlKFxuICAgIGluaXRpYWxpemVkLFxuICAgIGluaXRpYWxpemluZyxcbiAgICBlcnJvcixcbiAgICBwcm9ncmVzc1xuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0SW5pdGlhbGl6YXRpb25FcnJvcihlcnJvcjogc3RyaW5nKTogdm9pZCB7XG4gIGluaXRpYWxpemF0aW9uU2VydmljZS5zZXRJbml0aWFsaXphdGlvbkVycm9yKGVycm9yKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldEluaXRpYWxpemF0aW9uUHJvZ3Jlc3MocHJvZ3Jlc3M6IG51bWJlcik6IHZvaWQge1xuICBpbml0aWFsaXphdGlvblNlcnZpY2Uuc2V0SW5pdGlhbGl6YXRpb25Qcm9ncmVzcyhwcm9ncmVzcyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRJbml0aWFsaXphdGlvbkNvbXBsZXRlKCkge1xuICByZXR1cm4gaW5pdGlhbGl6YXRpb25TZXJ2aWNlLmluaXRpYWxpemF0aW9uQ29tcGxldGU7XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFVJIFNUQVRFXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRBY3RpdmVUYWIoKSB7XG4gIHJldHVybiB0YWJTdGF0ZVNlcnZpY2UuYWN0aXZlVGFiO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2hvd1NldHRpbmdzKCkge1xuICByZXR1cm4gYXBwbGljYXRpb25TdGF0ZVNlcnZpY2Uuc2hvd1NldHRpbmdzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGhlbWUoKSB7XG4gIHJldHVybiBhcHBsaWNhdGlvblN0YXRlU2VydmljZS50aGVtZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldElzRnVsbFNjcmVlbigpIHtcbiAgcmV0dXJuIGFwcGxpY2F0aW9uU3RhdGVTZXJ2aWNlLmlzRnVsbFNjcmVlbjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldElzVHJhbnNpdGlvbmluZygpIHtcbiAgcmV0dXJuIGFwcGxpY2F0aW9uU3RhdGVTZXJ2aWNlLmlzVHJhbnNpdGlvbmluZztcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gU0VUVElOR1Ncbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFNldHRpbmdzKCkge1xuICByZXR1cm4gc2V0dGluZ3NTZXJ2aWNlLnNldHRpbmdzO1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBQRVJGT1JNQU5DRVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UGVyZm9ybWFuY2VNZXRyaWNzKCkge1xuICByZXR1cm4gcGVyZm9ybWFuY2VNZXRyaWNzU2VydmljZS5wZXJmb3JtYW5jZU1ldHJpY3M7XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIERFUklWRUQgU1RBVEVcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldElzUmVhZHkoKSB7XG4gIHJldHVybiAoXG4gICAgaW5pdGlhbGl6YXRpb25TZXJ2aWNlLmlzSW5pdGlhbGl6ZWQgJiZcbiAgICAhaW5pdGlhbGl6YXRpb25TZXJ2aWNlLmlzSW5pdGlhbGl6aW5nICYmXG4gICAgIWluaXRpYWxpemF0aW9uU2VydmljZS5pbml0aWFsaXphdGlvbkVycm9yXG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDYW5Vc2VBcHAoKSB7XG4gIHJldHVybiBnZXRJc1JlYWR5KCkgJiYgIWFwcGxpY2F0aW9uU3RhdGVTZXJ2aWNlLnNob3dTZXR0aW5ncztcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gQUNUSU9OU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vLyBUYWIgbWFuYWdlbWVudFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHN3aXRjaFRhYih0YWI6IFRhYklkKTogUHJvbWlzZTx2b2lkPiB7XG4gIGlmICh0YWJTdGF0ZVNlcnZpY2UuYWN0aXZlVGFiID09PSB0YWIpIHJldHVybjtcblxuICAvLyBIYW5kbGUgdHJhbnNpdGlvbiBVSVxuICBhcHBsaWNhdGlvblN0YXRlU2VydmljZS5zZXRUcmFuc2l0aW9uaW5nKHRydWUpO1xuXG4gIGF3YWl0IHRhYlN0YXRlU2VydmljZS5zd2l0Y2hUYWIodGFiKTtcblxuICAvLyBCcmllZiBkZWxheSB0byBhbGxvdyB0cmFuc2l0aW9uIHRvIGNvbXBsZXRlXG4gIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgIGFwcGxpY2F0aW9uU3RhdGVTZXJ2aWNlLnNldFRyYW5zaXRpb25pbmcoZmFsc2UpO1xuICB9LCAzMDApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNUYWJBY3RpdmUodGFiOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgcmV0dXJuIHRhYlN0YXRlU2VydmljZS5pc1RhYkFjdGl2ZSh0YWIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0RnVsbFNjcmVlbihmdWxsU2NyZWVuOiBib29sZWFuKTogdm9pZCB7XG4gIGFwcGxpY2F0aW9uU3RhdGVTZXJ2aWNlLnNldEZ1bGxTY3JlZW4oZnVsbFNjcmVlbik7XG59XG5cbi8vIFNldHRpbmdzIG1hbmFnZW1lbnRcbmV4cG9ydCBmdW5jdGlvbiBzaG93U2V0dGluZ3NEaWFsb2coKTogdm9pZCB7XG4gIGFwcGxpY2F0aW9uU3RhdGVTZXJ2aWNlLnNob3dTZXR0aW5nc0RpYWxvZygpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaGlkZVNldHRpbmdzRGlhbG9nKCk6IHZvaWQge1xuICBhcHBsaWNhdGlvblN0YXRlU2VydmljZS5oaWRlU2V0dGluZ3NEaWFsb2coKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRvZ2dsZVNldHRpbmdzRGlhbG9nKCk6IHZvaWQge1xuICBhcHBsaWNhdGlvblN0YXRlU2VydmljZS50b2dnbGVTZXR0aW5nc0RpYWxvZygpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlU2V0dGluZ3MobmV3U2V0dGluZ3M6IFBhcnRpYWw8QXBwU2V0dGluZ3M+KTogdm9pZCB7XG4gIHNldHRpbmdzU2VydmljZS51cGRhdGVTZXR0aW5ncyhuZXdTZXR0aW5ncyk7XG5cbiAgLy8gVXBkYXRlIHRoZW1lIGluIFVJIHN0YXRlIGlmIHRoZW1lIGNoYW5nZWRcbiAgaWYgKG5ld1NldHRpbmdzLnRoZW1lKSB7XG4gICAgYXBwbGljYXRpb25TdGF0ZVNlcnZpY2Uuc2V0VGhlbWUobmV3U2V0dGluZ3MudGhlbWUpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRUaGVtZSh0aGVtZTogVGhlbWUpOiB2b2lkIHtcbiAgYXBwbGljYXRpb25TdGF0ZVNlcnZpY2Uuc2V0VGhlbWUodGhlbWUpO1xuICBzZXR0aW5nc1NlcnZpY2UudXBkYXRlU2V0dGluZ3MoeyB0aGVtZSB9KTtcbn1cblxuLy8gUGVyZm9ybWFuY2UgdHJhY2tpbmdcbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVJbml0aWFsaXphdGlvblRpbWUodGltZTogbnVtYmVyKTogdm9pZCB7XG4gIHBlcmZvcm1hbmNlTWV0cmljc1NlcnZpY2UudXBkYXRlSW5pdGlhbGl6YXRpb25UaW1lKHRpbWUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlTGFzdFJlbmRlclRpbWUodGltZTogbnVtYmVyKTogdm9pZCB7XG4gIHBlcmZvcm1hbmNlTWV0cmljc1NlcnZpY2UudXBkYXRlTGFzdFJlbmRlclRpbWUodGltZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVNZW1vcnlVc2FnZSgpOiB2b2lkIHtcbiAgcGVyZm9ybWFuY2VNZXRyaWNzU2VydmljZS51cGRhdGVNZW1vcnlVc2FnZSgpO1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBBUFBMSUNBVElPTiBMSUZFQ1lDTEVcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlc3RvcmVBcHBsaWNhdGlvblN0YXRlKCk6IFByb21pc2U8dm9pZD4ge1xuICBhd2FpdCB0YWJTdGF0ZVNlcnZpY2UucmVzdG9yZUFwcGxpY2F0aW9uU3RhdGUoKTtcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gVVRJTElUSUVTICYgREVCVUdcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEFwcFN0YXRlU25hcHNob3QoKSB7XG4gIHJldHVybiB7XG4gICAgLy8gQXBwbGljYXRpb24gc3RhdGVcbiAgICAuLi5hcHBsaWNhdGlvblN0YXRlU2VydmljZS5nZXRTdGF0ZVNuYXBzaG90KCksXG5cbiAgICAvLyBUYWIgc3RhdGVcbiAgICBhY3RpdmVUYWI6IHRhYlN0YXRlU2VydmljZS5hY3RpdmVUYWIsXG5cbiAgICAvLyBJbml0aWFsaXphdGlvbiBzdGF0ZVxuICAgIGlzSW5pdGlhbGl6ZWQ6IGluaXRpYWxpemF0aW9uU2VydmljZS5pc0luaXRpYWxpemVkLFxuICAgIGlzSW5pdGlhbGl6aW5nOiBpbml0aWFsaXphdGlvblNlcnZpY2UuaXNJbml0aWFsaXppbmcsXG4gICAgaW5pdGlhbGl6YXRpb25FcnJvcjogaW5pdGlhbGl6YXRpb25TZXJ2aWNlLmluaXRpYWxpemF0aW9uRXJyb3IsXG4gICAgaW5pdGlhbGl6YXRpb25Qcm9ncmVzczogaW5pdGlhbGl6YXRpb25TZXJ2aWNlLmluaXRpYWxpemF0aW9uUHJvZ3Jlc3MsXG5cbiAgICAvLyBQZXJmb3JtYW5jZSBtZXRyaWNzXG4gICAgcGVyZm9ybWFuY2VNZXRyaWNzOiB7IC4uLnBlcmZvcm1hbmNlTWV0cmljc1NlcnZpY2UucGVyZm9ybWFuY2VNZXRyaWNzIH0sXG5cbiAgICAvLyBTZXR0aW5nc1xuICAgIHNldHRpbmdzOiB7IC4uLnNldHRpbmdzU2VydmljZS5zZXR0aW5ncyB9LFxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVzZXRBcHBTdGF0ZSgpOiB2b2lkIHtcbiAgYXBwbGljYXRpb25TdGF0ZVNlcnZpY2UucmVzZXRTdGF0ZSgpO1xuICBpbml0aWFsaXphdGlvblNlcnZpY2UucmVzZXRJbml0aWFsaXphdGlvblN0YXRlKCk7XG4gIHBlcmZvcm1hbmNlTWV0cmljc1NlcnZpY2UucmVzZXRNZXRyaWNzKCk7XG4gIHNldHRpbmdzU2VydmljZS5yZXNldFRvRGVmYXVsdHMoKTtcbiAgLy8gTm90ZTogV2UgZG9uJ3QgcmVzZXQgdGFiIHN0YXRlIGFzIHRoYXQgc2hvdWxkIHBlcnNpc3Rcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyU3RvcmVkU2V0dGluZ3MoKTogdm9pZCB7XG4gIHNldHRpbmdzU2VydmljZS5jbGVhclN0b3JlZFNldHRpbmdzKCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWJ1Z1NldHRpbmdzKCk6IHZvaWQge1xuICBzZXR0aW5nc1NlcnZpY2UuZGVidWdTZXR0aW5ncygpO1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBMRUdBQ1kgQ09NUEFUSUJJTElUWSAoZm9yIHNtb290aCBtaWdyYXRpb24pXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRCcm93c2VTdGF0ZVBlcnNpc3RlbmNlKCkge1xuICAvLyBUaGlzIGZ1bmN0aW9uIGV4aXN0cyBpbiB0aGUgb3JpZ2luYWwgYnV0IHVzZXMgaW50ZXJuYWwgcGVyc2lzdGVuY2Ugc2VydmljZVxuICAvLyBGb3Igbm93LCB3ZSdsbCBrZWVwIHRoaXMgYXMgYSBjb21wYXRpYmlsaXR5IGxheWVyXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gIHJldHVybiAodGFiU3RhdGVTZXJ2aWNlIGFzIGFueSkuYnJvd3NlU3RhdGVQZXJzaXN0ZW5jZTtcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gREVWRUxPUE1FTlQgSEVMUEVSU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBXaW5kb3cge1xuICAgIGRlYnVnU2V0dGluZ3M/OiB0eXBlb2YgZGVidWdTZXR0aW5ncztcbiAgICByZXNldEFwcFN0YXRlPzogdHlwZW9mIHJlc2V0QXBwU3RhdGU7XG4gICAgY2xlYXJTdG9yZWRTZXR0aW5ncz86IHR5cGVvZiBjbGVhclN0b3JlZFNldHRpbmdzO1xuICB9XG59XG5cbmlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gIHdpbmRvdy5kZWJ1Z1NldHRpbmdzID0gZGVidWdTZXR0aW5ncztcbiAgd2luZG93LnJlc2V0QXBwU3RhdGUgPSByZXNldEFwcFN0YXRlO1xuICB3aW5kb3cuY2xlYXJTdG9yZWRTZXR0aW5ncyA9IGNsZWFyU3RvcmVkU2V0dGluZ3M7XG59XG4iXSwiZmlsZSI6IkY6L0NPREUvVEtBL3dlYi9zcmMvbGliL3N0YXRlL2FwcFN0YXRlLnN2ZWx0ZS50cyJ9