import.meta.env = {"BASE_URL": "/", "DEV": true, "MODE": "development", "PROD": false, "SSR": false};/* optionPickerScrollState.svelte.ts generated by Svelte v5.38.1 */
import * as $ from "/node_modules/.vite/deps/svelte_internal_client.js?v=de368f3a";
import { createPictographOrganizer } from "/src/lib/components/construct/option-picker/services/PictographOrganizerService.ts";
import { createLayoutMetricsCalculator } from "/src/lib/components/construct/option-picker/utils/scrollLayoutMetrics.ts";

export function createOptionPickerScrollState(initialProps) {
	let pictographs = $.tag($.state($.proxy(initialProps.pictographs)), 'pictographs');
	let containerWidth = $.tag($.state($.proxy(initialProps.containerWidth)), 'containerWidth');
	let containerHeight = $.tag($.state($.proxy(initialProps.containerHeight)), 'containerHeight');
	let layoutConfig = $.tag($.state($.proxy(initialProps.layoutConfig)), 'layoutConfig');
	let deviceInfo = $.tag($.state($.proxy(initialProps.deviceInfo)), 'deviceInfo');
	let foldableInfo = $.tag($.state($.proxy(initialProps.foldableInfo)), 'foldableInfo');
	const pictographOrganizer = createPictographOrganizer();

	const organizedPictographs = $.tag(
		$.derived(() => {
			return pictographOrganizer.organizePictographs($.get(pictographs));
		}),
		'organizedPictographs'
	);

	const layoutCalculator = createLayoutMetricsCalculator(() => $.get(containerWidth), () => $.get(containerHeight), () => $.get(deviceInfo), () => $.get(layoutConfig));
	const layoutMetrics = $.tag($.derived(() => () => layoutCalculator.metrics), 'layoutMetrics');
	const scrollBehavior = $.tag($.derived(() => () => layoutCalculator.scrollBehavior), 'scrollBehavior');
	const cssProperties = $.tag($.derived(() => () => layoutCalculator.cssProperties), 'cssProperties');
	const cssClasses = $.tag($.derived(() => () => layoutCalculator.cssClasses), 'cssClasses');
	const isEmpty = $.tag($.derived(() => () => $.strict_equals($.get(pictographs).length, 0)), 'isEmpty');
	const hasIndividualSections = $.tag($.derived(() => () => $.get(organizedPictographs).hasIndividual), 'hasIndividualSections');
	const hasGroupedSections = $.tag($.derived(() => () => $.get(organizedPictographs).hasGrouped), 'hasGroupedSections');

	const debugInfo = $.tag(
		$.derived(() => () => {
			if (import.meta.env.DEV) {
				return {
					pictographCount: $.get(pictographs).length,
					containerDimensions: { width: $.get(containerWidth), height: $.get(containerHeight) },
					deviceType: $.get(deviceInfo).deviceType,
					isFoldable: $.get(foldableInfo).isFoldable,

					organizedSections: {
						individual: Object.keys($.get(organizedPictographs).individual).filter((key) => ($.get(organizedPictographs).individual?.[key]?.length ?? 0) > 0),
						grouped: Object.keys($.get(organizedPictographs).grouped).filter((key) => ($.get(organizedPictographs).grouped?.[key]?.length ?? 0) > 0)
					},

					layoutMetrics: {
						aspectRatio: $.get(layoutMetrics)().aspectRatio.toFixed(3),
						isLandscape: $.get(layoutMetrics)().isLandscape,
						shouldUseMobileLayout: $.get(layoutMetrics)().shouldUseMobileLayout,
						contentPadding: $.get(layoutMetrics)().contentPadding
					}
				};
			}

			return null;
		}),
		'debugInfo'
	);

	function updatePictographs(newPictographs) {
		$.set(pictographs, newPictographs, true);
	}

	function updateContainerDimensions(width, height) {
		$.set(containerWidth, width, true);
		$.set(containerHeight, height, true);
	}

	function updateLayoutConfig(newConfig) {
		$.set(layoutConfig, newConfig, true);
	}

	function updateDeviceInfo(newDeviceInfo) {
		$.set(deviceInfo, newDeviceInfo, true);
	}

	function updateFoldableInfo(newFoldableInfo) {
		$.set(foldableInfo, newFoldableInfo, true);
	}

	function updateProps(newProps) {
		if ($.strict_equals(newProps.pictographs, void 0, false)) {
			$.set(pictographs, newProps.pictographs, true);
		}

		if ($.strict_equals(newProps.containerWidth, void 0, false)) {
			$.set(containerWidth, newProps.containerWidth, true);
		}

		if ($.strict_equals(newProps.containerHeight, void 0, false)) {
			$.set(containerHeight, newProps.containerHeight, true);
		}

		if ($.strict_equals(newProps.layoutConfig, void 0, false)) {
			$.set(layoutConfig, newProps.layoutConfig, true);
		}

		if ($.strict_equals(newProps.deviceInfo, void 0, false)) {
			$.set(deviceInfo, newProps.deviceInfo, true);
		}

		if ($.strict_equals(newProps.foldableInfo, void 0, false)) {
			$.set(foldableInfo, newProps.foldableInfo, true);
		}
	}

	function getStateSnapshot() {
		return {
			pictographs: $.get(pictographs),
			organizedPictographs: $.get(organizedPictographs),
			layoutMetrics: $.get(layoutMetrics)(),
			scrollBehavior: $.get(scrollBehavior)(),
			cssProperties: $.get(cssProperties)(),
			cssClasses: $.get(cssClasses)(),
			isEmpty: $.get(isEmpty)(),
			hasIndividualSections: $.get(hasIndividualSections)(),
			hasGroupedSections: $.get(hasGroupedSections)(),
			debugInfo: $.get(debugInfo)
		};
	}

	return {
		// Reactive getters
		get pictographs() {
			return $.get(pictographs);
		},

		get organizedPictographs() {
			return $.get(organizedPictographs);
		},

		get layoutMetrics() {
			return $.get(layoutMetrics);
		},

		get scrollBehavior() {
			return $.get(scrollBehavior);
		},

		get cssProperties() {
			return $.get(cssProperties);
		},

		get cssClasses() {
			return $.get(cssClasses);
		},

		get isEmpty() {
			return $.get(isEmpty);
		},

		get hasIndividualSections() {
			return $.get(hasIndividualSections);
		},

		get hasGroupedSections() {
			return $.get(hasGroupedSections);
		},

		get debugInfo() {
			return $.get(debugInfo);
		},

		// Container dimensions
		get containerWidth() {
			return $.get(containerWidth);
		},

		get containerHeight() {
			return $.get(containerHeight);
		},

		get layoutConfig() {
			return $.get(layoutConfig);
		},

		get deviceInfo() {
			return $.get(deviceInfo);
		},

		get foldableInfo() {
			return $.get(foldableInfo);
		},

		// Actions
		updatePictographs,

		updateContainerDimensions,
		updateLayoutConfig,
		updateDeviceInfo,
		updateFoldableInfo,
		updateProps,
		getStateSnapshot,

		// Direct access to services (for advanced usage)
		pictographOrganizer
	};
}

export function createDefaultScrollState() {
	const defaultProps = {
		pictographs: [],
		onPictographSelected: () => {},
		containerWidth: 800,
		containerHeight: 600,

		layoutConfig: {
			gridColumns: "repeat(4, minmax(0, 1fr))",
			optionSize: "100px",
			gridGap: "8px",
			gridClass: "",
			aspectClass: "",
			scaleFactor: 1
		},

		deviceInfo: {
			deviceType: "desktop",
			isFoldable: false,

			foldableInfo: {
				isFoldable: false,
				isUnfolded: false,
				foldableType: "unknown",
				confidence: 0
			}
		},

		foldableInfo: {
			isFoldable: false,
			isUnfolded: false,
			foldableType: "unknown",
			confidence: 0
		}
	};

	return createOptionPickerScrollState(defaultProps);
}

export function validateScrollStateProps(props) {
	const errors = [];
	const warnings = [];

	if ($.strict_equals(props.containerWidth, void 0, false) && props.containerWidth <= 0) {
		errors.push("Container width must be positive");
	}

	if ($.strict_equals(props.containerHeight, void 0, false) && props.containerHeight <= 0) {
		errors.push("Container height must be positive");
	}

	if (props.pictographs && !Array.isArray(props.pictographs)) {
		errors.push("Pictographs must be an array");
	}

	if ($.strict_equals(props.containerWidth, void 0, false) && props.containerWidth < 200) {
		warnings.push("Container width is very narrow, consider minimum 200px");
	}

	if ($.strict_equals(props.containerHeight, void 0, false) && props.containerHeight < 300) {
		warnings.push("Container height is very short, consider minimum 300px");
	}

	return { isValid: $.strict_equals(errors.length, 0), errors, warnings };
}
//# sourceMappingURL=data:application/json;base64,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QUNJLGVBQWU7Z0JBQ1Y7RUFDVDs7TUFDSSxhQUFhO2dCQUNSO0VBQ1Q7O01BQ0ksZUFBZTtnQkFDVjtFQUNUOzs7RUFHQTs7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7OztFQUdBOztBQUVKOztnQkFZZ0IsMkJBQW9EO09BQzVEO0VBQ0o7RUFDQSw0QkFBNEIsQ0FBQztFQUM3QixnQkFBZ0I7RUFDaEIsaUJBQWlCOztFQUNqQjtHQUNFLGFBQWE7R0FDYixZQUFZO0dBQ1osU0FBUztHQUNULFdBQVc7R0FDWCxhQUFhO0dBQ2IsYUFBYTs7O0VBRWY7R0FDRSxZQUFZO0dBQ1osWUFBWTs7R0FDWjtJQUNFLFlBQVk7SUFDWixZQUFZO0lBQ1osY0FBYztJQUNkLFlBQVk7Ozs7RUFHaEI7R0FDRSxZQUFZO0dBQ1osWUFBWTtHQUNaLGNBQWM7R0FDZCxZQUFZOzs7O1FBSVQsOEJBQThCLFlBQVk7QUFDbkQ7O2dCQUtnQix5QkFDZCxPQUtBO09BQ007T0FDQTs7cUJBRUYsTUFBTSxxQkFBbUIsYUFBYSxNQUFNLGtCQUFrQixHQUFHO0VBQ25FLE9BQU8sS0FBSyxrQ0FBa0M7Q0FDaEQ7O3FCQUVJLE1BQU0sc0JBQW9CLGFBQWEsTUFBTSxtQkFBbUIsR0FBRztFQUNyRSxPQUFPLEtBQUssbUNBQW1DO0NBQ2pEOztLQUVJLE1BQU0sZ0JBQWdCLE1BQU0sUUFBUSxNQUFNLFdBQVcsR0FBRztFQUMxRCxPQUFPLEtBQUssOEJBQThCO0NBQzVDOztxQkFFSSxNQUFNLHFCQUFtQixhQUFhLE1BQU0saUJBQWlCLEtBQUs7RUFDcEUsU0FBUyxLQUFLLHdEQUF3RDtDQUN4RTs7cUJBRUksTUFBTSxzQkFBb0IsYUFBYSxNQUFNLGtCQUFrQixLQUFLO0VBQ3RFLFNBQVMsS0FBSyx3REFBd0Q7Q0FDeEU7O1VBR0UseUJBQVMsT0FBTyxRQUFXLElBQzNCLFFBQ0E7QUFFSiIsIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZXMiOlsib3B0aW9uUGlja2VyU2Nyb2xsU3RhdGUuc3ZlbHRlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogT3B0aW9uUGlja2VyU2Nyb2xsU3RhdGUgLSBTdmVsdGUgNSBydW5lcy1iYXNlZCBzdGF0ZSBtYW5hZ2VtZW50IGZvciBzY3JvbGwgY29udGFpbmVyXG4gKlxuICogRXh0cmFjdGVkIGZyb20gT3B0aW9uUGlja2VyU2Nyb2xsLnN2ZWx0ZSB0byBwcm92aWRlIGNsZWFuIHN0YXRlIG1hbmFnZW1lbnQgdXNpbmcgcnVuZXMuXG4gKiBGb2xsb3dzIHRoZSBlc3RhYmxpc2hlZCBwYXR0ZXJucyBmcm9tIG9wdGlvblBpY2tlclJ1bmVzLnN2ZWx0ZS50cy5cbiAqL1xuXG5pbXBvcnQgdHlwZSB7IFBpY3RvZ3JhcGhEYXRhIH0gZnJvbSBcIiRsaWIvZG9tYWluL1BpY3RvZ3JhcGhEYXRhXCI7XG5pbXBvcnQgdHlwZSB7IFJlc3BvbnNpdmVMYXlvdXRDb25maWcgfSBmcm9tIFwiLi9jb25maWdcIjtcbmltcG9ydCB7XG4gIGNyZWF0ZVBpY3RvZ3JhcGhPcmdhbml6ZXIsXG4gIHR5cGUgT3JnYW5pemVkUGljdG9ncmFwaHMsXG59IGZyb20gXCIuL3NlcnZpY2VzL1BpY3RvZ3JhcGhPcmdhbml6ZXJTZXJ2aWNlXCI7XG5pbXBvcnQgdHlwZSB7IEZvbGRhYmxlRGV0ZWN0aW9uUmVzdWx0IH0gZnJvbSBcIi4vdXRpbHMvZGV2aWNlRGV0ZWN0aW9uXCI7XG5pbXBvcnQge1xuICBjcmVhdGVMYXlvdXRNZXRyaWNzQ2FsY3VsYXRvcixcbiAgdHlwZSBEZXZpY2VJbmZvLFxuICB0eXBlIExheW91dE1ldHJpY3MsXG4gIHR5cGUgU2Nyb2xsQmVoYXZpb3JDb25maWcsXG59IGZyb20gXCIuL3V0aWxzL3Njcm9sbExheW91dE1ldHJpY3NcIjtcblxuLy8gPT09PT0gVHlwZXMgPT09PT1cbmV4cG9ydCBpbnRlcmZhY2UgU2Nyb2xsQ29udGFpbmVyUHJvcHMge1xuICBwaWN0b2dyYXBoczogUGljdG9ncmFwaERhdGFbXTtcbiAgb25QaWN0b2dyYXBoU2VsZWN0ZWQ6IChwaWN0b2dyYXBoOiBQaWN0b2dyYXBoRGF0YSkgPT4gdm9pZDtcbiAgY29udGFpbmVyV2lkdGg6IG51bWJlcjtcbiAgY29udGFpbmVySGVpZ2h0OiBudW1iZXI7XG4gIGxheW91dENvbmZpZzogUmVzcG9uc2l2ZUxheW91dENvbmZpZztcbiAgZGV2aWNlSW5mbzogRGV2aWNlSW5mbztcbiAgZm9sZGFibGVJbmZvOiBGb2xkYWJsZURldGVjdGlvblJlc3VsdDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTY3JvbGxDb250YWluZXJTdGF0ZSB7XG4gIC8vIENvcmUgZGF0YVxuICBwaWN0b2dyYXBoczogUGljdG9ncmFwaERhdGFbXTtcbiAgb3JnYW5pemVkUGljdG9ncmFwaHM6IE9yZ2FuaXplZFBpY3RvZ3JhcGhzO1xuXG4gIC8vIExheW91dCBzdGF0ZVxuICBsYXlvdXRNZXRyaWNzOiBMYXlvdXRNZXRyaWNzO1xuICBzY3JvbGxCZWhhdmlvcjogU2Nyb2xsQmVoYXZpb3JDb25maWc7XG4gIGNzc1Byb3BlcnRpZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IG51bWJlcj47XG4gIGNzc0NsYXNzZXM6IHN0cmluZ1tdO1xuXG4gIC8vIFVJIHN0YXRlXG4gIGlzRW1wdHk6IGJvb2xlYW47XG4gIGhhc0luZGl2aWR1YWxTZWN0aW9uczogYm9vbGVhbjtcbiAgaGFzR3JvdXBlZFNlY3Rpb25zOiBib29sZWFuO1xuICBkZWJ1Z0luZm8/OiAoKSA9PiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB8IG51bGw7IC8vIEZvciBkZXZlbG9wbWVudCBkZWJ1Z2dpbmdcbn1cblxuLy8gPT09PT0gTWFpbiBTdGF0ZSBDcmVhdG9yID09PT09XG4vKipcbiAqIENyZWF0ZXMgcmVhY3RpdmUgc3RhdGUgZm9yIHRoZSBvcHRpb24gcGlja2VyIHNjcm9sbCBjb250YWluZXIgdXNpbmcgU3ZlbHRlIDUgcnVuZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU9wdGlvblBpY2tlclNjcm9sbFN0YXRlKFxuICBpbml0aWFsUHJvcHM6IFNjcm9sbENvbnRhaW5lclByb3BzXG4pIHtcbiAgLy8gPT09PT0gQ29yZSBTdGF0ZSBVc2luZyBSdW5lcyA9PT09PVxuICBsZXQgcGljdG9ncmFwaHMgPSAkc3RhdGU8UGljdG9ncmFwaERhdGFbXT4oaW5pdGlhbFByb3BzLnBpY3RvZ3JhcGhzKTtcbiAgbGV0IGNvbnRhaW5lcldpZHRoID0gJHN0YXRlKGluaXRpYWxQcm9wcy5jb250YWluZXJXaWR0aCk7XG4gIGxldCBjb250YWluZXJIZWlnaHQgPSAkc3RhdGUoaW5pdGlhbFByb3BzLmNvbnRhaW5lckhlaWdodCk7XG4gIGxldCBsYXlvdXRDb25maWcgPSAkc3RhdGU8UmVzcG9uc2l2ZUxheW91dENvbmZpZz4oaW5pdGlhbFByb3BzLmxheW91dENvbmZpZyk7XG4gIGxldCBkZXZpY2VJbmZvID0gJHN0YXRlPERldmljZUluZm8+KGluaXRpYWxQcm9wcy5kZXZpY2VJbmZvKTtcbiAgbGV0IGZvbGRhYmxlSW5mbyA9ICRzdGF0ZTxGb2xkYWJsZURldGVjdGlvblJlc3VsdD4oaW5pdGlhbFByb3BzLmZvbGRhYmxlSW5mbyk7XG5cbiAgLy8gPT09PT0gU2VydmljZXMgPT09PT1cbiAgY29uc3QgcGljdG9ncmFwaE9yZ2FuaXplciA9IGNyZWF0ZVBpY3RvZ3JhcGhPcmdhbml6ZXIoKTtcblxuICAvLyA9PT09PSBEZXJpdmVkIFN0YXRlIFVzaW5nIFJ1bmVzID09PT09XG5cbiAgLy8gT3JnYW5pemVkIHBpY3RvZ3JhcGhzXG4gIGNvbnN0IG9yZ2FuaXplZFBpY3RvZ3JhcGhzID0gJGRlcml2ZWQuYnkoKCkgPT4ge1xuICAgIHJldHVybiBwaWN0b2dyYXBoT3JnYW5pemVyLm9yZ2FuaXplUGljdG9ncmFwaHMocGljdG9ncmFwaHMpO1xuICB9KTtcblxuICAvLyBMYXlvdXQgbWV0cmljcyBjYWxjdWxhdG9yXG4gIGNvbnN0IGxheW91dENhbGN1bGF0b3IgPSBjcmVhdGVMYXlvdXRNZXRyaWNzQ2FsY3VsYXRvcihcbiAgICAoKSA9PiBjb250YWluZXJXaWR0aCxcbiAgICAoKSA9PiBjb250YWluZXJIZWlnaHQsXG4gICAgKCkgPT4gZGV2aWNlSW5mbyxcbiAgICAoKSA9PiBsYXlvdXRDb25maWdcbiAgKTtcblxuICAvLyBMYXlvdXQgbWV0cmljc1xuICBjb25zdCBsYXlvdXRNZXRyaWNzID0gJGRlcml2ZWQoKCkgPT4gbGF5b3V0Q2FsY3VsYXRvci5tZXRyaWNzKTtcbiAgY29uc3Qgc2Nyb2xsQmVoYXZpb3IgPSAkZGVyaXZlZCgoKSA9PiBsYXlvdXRDYWxjdWxhdG9yLnNjcm9sbEJlaGF2aW9yKTtcbiAgY29uc3QgY3NzUHJvcGVydGllcyA9ICRkZXJpdmVkKCgpID0+IGxheW91dENhbGN1bGF0b3IuY3NzUHJvcGVydGllcyk7XG4gIGNvbnN0IGNzc0NsYXNzZXMgPSAkZGVyaXZlZCgoKSA9PiBsYXlvdXRDYWxjdWxhdG9yLmNzc0NsYXNzZXMpO1xuXG4gIC8vIFVJIHN0YXRlIGRlcml2ZWQgdmFsdWVzXG4gIGNvbnN0IGlzRW1wdHkgPSAkZGVyaXZlZCgoKSA9PiBwaWN0b2dyYXBocy5sZW5ndGggPT09IDApO1xuICBjb25zdCBoYXNJbmRpdmlkdWFsU2VjdGlvbnMgPSAkZGVyaXZlZChcbiAgICAoKSA9PiBvcmdhbml6ZWRQaWN0b2dyYXBocy5oYXNJbmRpdmlkdWFsXG4gICk7XG4gIGNvbnN0IGhhc0dyb3VwZWRTZWN0aW9ucyA9ICRkZXJpdmVkKCgpID0+IG9yZ2FuaXplZFBpY3RvZ3JhcGhzLmhhc0dyb3VwZWQpO1xuXG4gIC8vIERlYnVnIGluZm8gZm9yIGRldmVsb3BtZW50XG4gIGNvbnN0IGRlYnVnSW5mbyA9ICRkZXJpdmVkKCgpID0+IHtcbiAgICBpZiAoaW1wb3J0Lm1ldGEuZW52LkRFVikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcGljdG9ncmFwaENvdW50OiBwaWN0b2dyYXBocy5sZW5ndGgsXG4gICAgICAgIGNvbnRhaW5lckRpbWVuc2lvbnM6IHsgd2lkdGg6IGNvbnRhaW5lcldpZHRoLCBoZWlnaHQ6IGNvbnRhaW5lckhlaWdodCB9LFxuICAgICAgICBkZXZpY2VUeXBlOiBkZXZpY2VJbmZvLmRldmljZVR5cGUsXG4gICAgICAgIGlzRm9sZGFibGU6IGZvbGRhYmxlSW5mby5pc0ZvbGRhYmxlLFxuICAgICAgICBvcmdhbml6ZWRTZWN0aW9uczoge1xuICAgICAgICAgIGluZGl2aWR1YWw6IE9iamVjdC5rZXlzKG9yZ2FuaXplZFBpY3RvZ3JhcGhzLmluZGl2aWR1YWwpLmZpbHRlcihcbiAgICAgICAgICAgIChrZXkpID0+IChvcmdhbml6ZWRQaWN0b2dyYXBocy5pbmRpdmlkdWFsPy5ba2V5XT8ubGVuZ3RoID8/IDApID4gMFxuICAgICAgICAgICksXG4gICAgICAgICAgZ3JvdXBlZDogT2JqZWN0LmtleXMob3JnYW5pemVkUGljdG9ncmFwaHMuZ3JvdXBlZCkuZmlsdGVyKFxuICAgICAgICAgICAgKGtleSkgPT4gKG9yZ2FuaXplZFBpY3RvZ3JhcGhzLmdyb3VwZWQ/LltrZXldPy5sZW5ndGggPz8gMCkgPiAwXG4gICAgICAgICAgKSxcbiAgICAgICAgfSxcbiAgICAgICAgbGF5b3V0TWV0cmljczoge1xuICAgICAgICAgIGFzcGVjdFJhdGlvOiBsYXlvdXRNZXRyaWNzKCkuYXNwZWN0UmF0aW8udG9GaXhlZCgzKSxcbiAgICAgICAgICBpc0xhbmRzY2FwZTogbGF5b3V0TWV0cmljcygpLmlzTGFuZHNjYXBlLFxuICAgICAgICAgIHNob3VsZFVzZU1vYmlsZUxheW91dDogbGF5b3V0TWV0cmljcygpLnNob3VsZFVzZU1vYmlsZUxheW91dCxcbiAgICAgICAgICBjb250ZW50UGFkZGluZzogbGF5b3V0TWV0cmljcygpLmNvbnRlbnRQYWRkaW5nLFxuICAgICAgICB9LFxuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH0pO1xuXG4gIC8vID09PT09IEFjdGlvbnMgPT09PT1cblxuICAvKipcbiAgICogVXBkYXRlcyB0aGUgcGljdG9ncmFwaHMgZGF0YVxuICAgKi9cbiAgZnVuY3Rpb24gdXBkYXRlUGljdG9ncmFwaHMobmV3UGljdG9ncmFwaHM6IFBpY3RvZ3JhcGhEYXRhW10pIHtcbiAgICBwaWN0b2dyYXBocyA9IG5ld1BpY3RvZ3JhcGhzO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgY29udGFpbmVyIGRpbWVuc2lvbnNcbiAgICovXG4gIGZ1bmN0aW9uIHVwZGF0ZUNvbnRhaW5lckRpbWVuc2lvbnMod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpIHtcbiAgICBjb250YWluZXJXaWR0aCA9IHdpZHRoO1xuICAgIGNvbnRhaW5lckhlaWdodCA9IGhlaWdodDtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGVzIGxheW91dCBjb25maWd1cmF0aW9uXG4gICAqL1xuICBmdW5jdGlvbiB1cGRhdGVMYXlvdXRDb25maWcobmV3Q29uZmlnOiBSZXNwb25zaXZlTGF5b3V0Q29uZmlnKSB7XG4gICAgbGF5b3V0Q29uZmlnID0gbmV3Q29uZmlnO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgZGV2aWNlIGluZm9ybWF0aW9uXG4gICAqL1xuICBmdW5jdGlvbiB1cGRhdGVEZXZpY2VJbmZvKG5ld0RldmljZUluZm86IERldmljZUluZm8pIHtcbiAgICBkZXZpY2VJbmZvID0gbmV3RGV2aWNlSW5mbztcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGVzIGZvbGRhYmxlIGRldmljZSBpbmZvcm1hdGlvblxuICAgKi9cbiAgZnVuY3Rpb24gdXBkYXRlRm9sZGFibGVJbmZvKG5ld0ZvbGRhYmxlSW5mbzogRm9sZGFibGVEZXRlY3Rpb25SZXN1bHQpIHtcbiAgICBmb2xkYWJsZUluZm8gPSBuZXdGb2xkYWJsZUluZm87XG4gIH1cblxuICAvKipcbiAgICogQnVsayB1cGRhdGUgb2YgYWxsIHByb3BzICh1c2VmdWwgZm9yIHByb3AgY2hhbmdlcylcbiAgICovXG4gIGZ1bmN0aW9uIHVwZGF0ZVByb3BzKG5ld1Byb3BzOiBQYXJ0aWFsPFNjcm9sbENvbnRhaW5lclByb3BzPikge1xuICAgIGlmIChuZXdQcm9wcy5waWN0b2dyYXBocyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBwaWN0b2dyYXBocyA9IG5ld1Byb3BzLnBpY3RvZ3JhcGhzO1xuICAgIH1cbiAgICBpZiAobmV3UHJvcHMuY29udGFpbmVyV2lkdGggIT09IHVuZGVmaW5lZCkge1xuICAgICAgY29udGFpbmVyV2lkdGggPSBuZXdQcm9wcy5jb250YWluZXJXaWR0aDtcbiAgICB9XG4gICAgaWYgKG5ld1Byb3BzLmNvbnRhaW5lckhlaWdodCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjb250YWluZXJIZWlnaHQgPSBuZXdQcm9wcy5jb250YWluZXJIZWlnaHQ7XG4gICAgfVxuICAgIGlmIChuZXdQcm9wcy5sYXlvdXRDb25maWcgIT09IHVuZGVmaW5lZCkge1xuICAgICAgbGF5b3V0Q29uZmlnID0gbmV3UHJvcHMubGF5b3V0Q29uZmlnO1xuICAgIH1cbiAgICBpZiAobmV3UHJvcHMuZGV2aWNlSW5mbyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBkZXZpY2VJbmZvID0gbmV3UHJvcHMuZGV2aWNlSW5mbztcbiAgICB9XG4gICAgaWYgKG5ld1Byb3BzLmZvbGRhYmxlSW5mbyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBmb2xkYWJsZUluZm8gPSBuZXdQcm9wcy5mb2xkYWJsZUluZm87XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgY3VycmVudCBzdGF0ZSBzbmFwc2hvdFxuICAgKi9cbiAgZnVuY3Rpb24gZ2V0U3RhdGVTbmFwc2hvdCgpOiBTY3JvbGxDb250YWluZXJTdGF0ZSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHBpY3RvZ3JhcGhzLFxuICAgICAgb3JnYW5pemVkUGljdG9ncmFwaHMsXG4gICAgICBsYXlvdXRNZXRyaWNzOiBsYXlvdXRNZXRyaWNzKCksXG4gICAgICBzY3JvbGxCZWhhdmlvcjogc2Nyb2xsQmVoYXZpb3IoKSxcbiAgICAgIGNzc1Byb3BlcnRpZXM6IGNzc1Byb3BlcnRpZXMoKSxcbiAgICAgIGNzc0NsYXNzZXM6IGNzc0NsYXNzZXMoKSxcbiAgICAgIGlzRW1wdHk6IGlzRW1wdHkoKSxcbiAgICAgIGhhc0luZGl2aWR1YWxTZWN0aW9uczogaGFzSW5kaXZpZHVhbFNlY3Rpb25zKCksXG4gICAgICBoYXNHcm91cGVkU2VjdGlvbnM6IGhhc0dyb3VwZWRTZWN0aW9ucygpLFxuICAgICAgZGVidWdJbmZvLFxuICAgIH07XG4gIH1cblxuICAvLyA9PT09PSBFZmZlY3RzIGZvciBEZXZlbG9wbWVudCBEZWJ1Z2dpbmcgPT09PT1cbiAgLy8gRElTQUJMRUQ6IFRoaXMgd2FzIGNhdXNpbmcgUmVzaXplT2JzZXJ2ZXIgbG9vcCBlcnJvcnMgYW5kIHBlcmZvcm1hbmNlIGlzc3Vlc1xuICAvLyBUaGUgY29uc3RhbnQgbG9nZ2luZyBkdXJpbmcgbGF5b3V0IGNoYW5nZXMgd2FzIHRyaWdnZXJpbmcgaW5maW5pdGUgcmVzaXplIGxvb3BzXG4gIC8qXG5cdGlmIChpbXBvcnQubWV0YS5lbnYuREVWKSB7XG5cdFx0JGVmZmVjdCgoKSA9PiB7XG5cdFx0XHQvLyBMb2cgc2lnbmlmaWNhbnQgc3RhdGUgY2hhbmdlcyBpbiBkZXZlbG9wbWVudFxuXHRcdFx0aWYgKHBpY3RvZ3JhcGhzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0Y29uc29sZS5sb2coJ/CflIQgT3B0aW9uUGlja2VyU2Nyb2xsU3RhdGU6IFN0YXRlIHVwZGF0ZWQnLCB7XG5cdFx0XHRcdFx0cGljdG9ncmFwaENvdW50OiBwaWN0b2dyYXBocy5sZW5ndGgsXG5cdFx0XHRcdFx0aGFzSW5kaXZpZHVhbDogaGFzSW5kaXZpZHVhbFNlY3Rpb25zLFxuXHRcdFx0XHRcdGhhc0dyb3VwZWQ6IGhhc0dyb3VwZWRTZWN0aW9ucyxcblx0XHRcdFx0XHRsYXlvdXRNZXRyaWNzOiB7XG5cdFx0XHRcdFx0XHRtb2JpbGU6IGxheW91dE1ldHJpY3MoKS5zaG91bGRVc2VNb2JpbGVMYXlvdXQsXG5cdFx0XHRcdFx0XHRmb2xkYWJsZTogbGF5b3V0TWV0cmljcygpLmlzRm9sZGFibGVEZXZpY2UsXG5cdFx0XHRcdFx0XHRhc3BlY3RSYXRpbzogbGF5b3V0TWV0cmljcygpLmFzcGVjdFJhdGlvLnRvRml4ZWQoMyksXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblx0Ki9cblxuICAvLyA9PT09PSBSZXR1cm4gUmVhY3RpdmUgSW50ZXJmYWNlID09PT09XG4gIHJldHVybiB7XG4gICAgLy8gUmVhY3RpdmUgZ2V0dGVyc1xuICAgIGdldCBwaWN0b2dyYXBocygpIHtcbiAgICAgIHJldHVybiBwaWN0b2dyYXBocztcbiAgICB9LFxuICAgIGdldCBvcmdhbml6ZWRQaWN0b2dyYXBocygpIHtcbiAgICAgIHJldHVybiBvcmdhbml6ZWRQaWN0b2dyYXBocztcbiAgICB9LFxuICAgIGdldCBsYXlvdXRNZXRyaWNzKCkge1xuICAgICAgcmV0dXJuIGxheW91dE1ldHJpY3M7XG4gICAgfSxcbiAgICBnZXQgc2Nyb2xsQmVoYXZpb3IoKSB7XG4gICAgICByZXR1cm4gc2Nyb2xsQmVoYXZpb3I7XG4gICAgfSxcbiAgICBnZXQgY3NzUHJvcGVydGllcygpIHtcbiAgICAgIHJldHVybiBjc3NQcm9wZXJ0aWVzO1xuICAgIH0sXG4gICAgZ2V0IGNzc0NsYXNzZXMoKSB7XG4gICAgICByZXR1cm4gY3NzQ2xhc3NlcztcbiAgICB9LFxuICAgIGdldCBpc0VtcHR5KCkge1xuICAgICAgcmV0dXJuIGlzRW1wdHk7XG4gICAgfSxcbiAgICBnZXQgaGFzSW5kaXZpZHVhbFNlY3Rpb25zKCkge1xuICAgICAgcmV0dXJuIGhhc0luZGl2aWR1YWxTZWN0aW9ucztcbiAgICB9LFxuICAgIGdldCBoYXNHcm91cGVkU2VjdGlvbnMoKSB7XG4gICAgICByZXR1cm4gaGFzR3JvdXBlZFNlY3Rpb25zO1xuICAgIH0sXG4gICAgZ2V0IGRlYnVnSW5mbygpIHtcbiAgICAgIHJldHVybiBkZWJ1Z0luZm87XG4gICAgfSxcblxuICAgIC8vIENvbnRhaW5lciBkaW1lbnNpb25zXG4gICAgZ2V0IGNvbnRhaW5lcldpZHRoKCkge1xuICAgICAgcmV0dXJuIGNvbnRhaW5lcldpZHRoO1xuICAgIH0sXG4gICAgZ2V0IGNvbnRhaW5lckhlaWdodCgpIHtcbiAgICAgIHJldHVybiBjb250YWluZXJIZWlnaHQ7XG4gICAgfSxcbiAgICBnZXQgbGF5b3V0Q29uZmlnKCkge1xuICAgICAgcmV0dXJuIGxheW91dENvbmZpZztcbiAgICB9LFxuICAgIGdldCBkZXZpY2VJbmZvKCkge1xuICAgICAgcmV0dXJuIGRldmljZUluZm87XG4gICAgfSxcbiAgICBnZXQgZm9sZGFibGVJbmZvKCkge1xuICAgICAgcmV0dXJuIGZvbGRhYmxlSW5mbztcbiAgICB9LFxuXG4gICAgLy8gQWN0aW9uc1xuICAgIHVwZGF0ZVBpY3RvZ3JhcGhzLFxuICAgIHVwZGF0ZUNvbnRhaW5lckRpbWVuc2lvbnMsXG4gICAgdXBkYXRlTGF5b3V0Q29uZmlnLFxuICAgIHVwZGF0ZURldmljZUluZm8sXG4gICAgdXBkYXRlRm9sZGFibGVJbmZvLFxuICAgIHVwZGF0ZVByb3BzLFxuICAgIGdldFN0YXRlU25hcHNob3QsXG5cbiAgICAvLyBEaXJlY3QgYWNjZXNzIHRvIHNlcnZpY2VzIChmb3IgYWR2YW5jZWQgdXNhZ2UpXG4gICAgcGljdG9ncmFwaE9yZ2FuaXplcixcbiAgfTtcbn1cblxuLy8gPT09PT0gVHlwZSBFeHBvcnQgPT09PT1cbmV4cG9ydCB0eXBlIE9wdGlvblBpY2tlclNjcm9sbFN0YXRlID0gUmV0dXJuVHlwZTxcbiAgdHlwZW9mIGNyZWF0ZU9wdGlvblBpY2tlclNjcm9sbFN0YXRlXG4+O1xuXG4vLyA9PT09PSBVdGlsaXR5IEZ1bmN0aW9ucyA9PT09PVxuXG4vKipcbiAqIENyZWF0ZXMgc3RhdGUgd2l0aCBkZWZhdWx0IHZhbHVlcyBmb3IgdGVzdGluZyBvciBmYWxsYmFjayBzY2VuYXJpb3NcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZURlZmF1bHRTY3JvbGxTdGF0ZSgpOiBPcHRpb25QaWNrZXJTY3JvbGxTdGF0ZSB7XG4gIGNvbnN0IGRlZmF1bHRQcm9wczogU2Nyb2xsQ29udGFpbmVyUHJvcHMgPSB7XG4gICAgcGljdG9ncmFwaHM6IFtdLFxuICAgIG9uUGljdG9ncmFwaFNlbGVjdGVkOiAoKSA9PiB7fSxcbiAgICBjb250YWluZXJXaWR0aDogODAwLFxuICAgIGNvbnRhaW5lckhlaWdodDogNjAwLFxuICAgIGxheW91dENvbmZpZzoge1xuICAgICAgZ3JpZENvbHVtbnM6IFwicmVwZWF0KDQsIG1pbm1heCgwLCAxZnIpKVwiLFxuICAgICAgb3B0aW9uU2l6ZTogXCIxMDBweFwiLFxuICAgICAgZ3JpZEdhcDogXCI4cHhcIixcbiAgICAgIGdyaWRDbGFzczogXCJcIixcbiAgICAgIGFzcGVjdENsYXNzOiBcIlwiLFxuICAgICAgc2NhbGVGYWN0b3I6IDEuMCxcbiAgICB9LFxuICAgIGRldmljZUluZm86IHtcbiAgICAgIGRldmljZVR5cGU6IFwiZGVza3RvcFwiLFxuICAgICAgaXNGb2xkYWJsZTogZmFsc2UsXG4gICAgICBmb2xkYWJsZUluZm86IHtcbiAgICAgICAgaXNGb2xkYWJsZTogZmFsc2UsXG4gICAgICAgIGlzVW5mb2xkZWQ6IGZhbHNlLFxuICAgICAgICBmb2xkYWJsZVR5cGU6IFwidW5rbm93blwiLFxuICAgICAgICBjb25maWRlbmNlOiAwLFxuICAgICAgfSxcbiAgICB9LFxuICAgIGZvbGRhYmxlSW5mbzoge1xuICAgICAgaXNGb2xkYWJsZTogZmFsc2UsXG4gICAgICBpc1VuZm9sZGVkOiBmYWxzZSxcbiAgICAgIGZvbGRhYmxlVHlwZTogXCJ1bmtub3duXCIsXG4gICAgICBjb25maWRlbmNlOiAwLFxuICAgIH0sXG4gIH07XG5cbiAgcmV0dXJuIGNyZWF0ZU9wdGlvblBpY2tlclNjcm9sbFN0YXRlKGRlZmF1bHRQcm9wcyk7XG59XG5cbi8qKlxuICogVmFsaWRhdGVzIHNjcm9sbCBzdGF0ZSBwcm9wc1xuICovXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVTY3JvbGxTdGF0ZVByb3BzKFxuICBwcm9wczogUGFydGlhbDxTY3JvbGxDb250YWluZXJQcm9wcz5cbik6IHtcbiAgaXNWYWxpZDogYm9vbGVhbjtcbiAgZXJyb3JzOiBzdHJpbmdbXTtcbiAgd2FybmluZ3M6IHN0cmluZ1tdO1xufSB7XG4gIGNvbnN0IGVycm9yczogc3RyaW5nW10gPSBbXTtcbiAgY29uc3Qgd2FybmluZ3M6IHN0cmluZ1tdID0gW107XG5cbiAgaWYgKHByb3BzLmNvbnRhaW5lcldpZHRoICE9PSB1bmRlZmluZWQgJiYgcHJvcHMuY29udGFpbmVyV2lkdGggPD0gMCkge1xuICAgIGVycm9ycy5wdXNoKFwiQ29udGFpbmVyIHdpZHRoIG11c3QgYmUgcG9zaXRpdmVcIik7XG4gIH1cblxuICBpZiAocHJvcHMuY29udGFpbmVySGVpZ2h0ICE9PSB1bmRlZmluZWQgJiYgcHJvcHMuY29udGFpbmVySGVpZ2h0IDw9IDApIHtcbiAgICBlcnJvcnMucHVzaChcIkNvbnRhaW5lciBoZWlnaHQgbXVzdCBiZSBwb3NpdGl2ZVwiKTtcbiAgfVxuXG4gIGlmIChwcm9wcy5waWN0b2dyYXBocyAmJiAhQXJyYXkuaXNBcnJheShwcm9wcy5waWN0b2dyYXBocykpIHtcbiAgICBlcnJvcnMucHVzaChcIlBpY3RvZ3JhcGhzIG11c3QgYmUgYW4gYXJyYXlcIik7XG4gIH1cblxuICBpZiAocHJvcHMuY29udGFpbmVyV2lkdGggIT09IHVuZGVmaW5lZCAmJiBwcm9wcy5jb250YWluZXJXaWR0aCA8IDIwMCkge1xuICAgIHdhcm5pbmdzLnB1c2goXCJDb250YWluZXIgd2lkdGggaXMgdmVyeSBuYXJyb3csIGNvbnNpZGVyIG1pbmltdW0gMjAwcHhcIik7XG4gIH1cblxuICBpZiAocHJvcHMuY29udGFpbmVySGVpZ2h0ICE9PSB1bmRlZmluZWQgJiYgcHJvcHMuY29udGFpbmVySGVpZ2h0IDwgMzAwKSB7XG4gICAgd2FybmluZ3MucHVzaChcIkNvbnRhaW5lciBoZWlnaHQgaXMgdmVyeSBzaG9ydCwgY29uc2lkZXIgbWluaW11bSAzMDBweFwiKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgaXNWYWxpZDogZXJyb3JzLmxlbmd0aCA9PT0gMCxcbiAgICBlcnJvcnMsXG4gICAgd2FybmluZ3MsXG4gIH07XG59XG4iXSwiZmlsZSI6IkY6L0NPREUvVEtBL3dlYi9zcmMvbGliL2NvbXBvbmVudHMvY29uc3RydWN0L29wdGlvbi1waWNrZXIvb3B0aW9uUGlja2VyU2Nyb2xsU3RhdGUuc3ZlbHRlLnRzIn0=