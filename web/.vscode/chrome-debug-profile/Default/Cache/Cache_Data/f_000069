import { createPictographData } from "/src/lib/domain/PictographData.ts";
import { createArrowData } from "/src/lib/domain/ArrowData.ts";
import { createPropData } from "/src/lib/domain/PropData.ts";
import { createMotionData } from "/src/lib/domain/MotionData.ts";
import { createGridData } from "/src/lib/domain/GridData.ts";
import {
  GridPosition,
  Timing,
  Direction,
  MotionType,
  RotationDirection,
  Location,
  MotionColor,
  ArrowType,
  GridMode,
  LetterType
} from "/src/lib/domain/enums.ts";
export class FlexiblePictographGenerator {
  // Universal position to hand location mapping
  positionMappings = {
    // Alpha positions (diamond grid)
    [GridPosition.ALPHA1]: [Location.SOUTH, Location.NORTH],
    [GridPosition.ALPHA2]: [Location.SOUTHWEST, Location.NORTHEAST],
    [GridPosition.ALPHA3]: [Location.WEST, Location.EAST],
    [GridPosition.ALPHA4]: [Location.NORTHWEST, Location.SOUTHEAST],
    [GridPosition.ALPHA5]: [Location.NORTH, Location.SOUTH],
    [GridPosition.ALPHA6]: [Location.NORTHEAST, Location.SOUTHWEST],
    [GridPosition.ALPHA7]: [Location.EAST, Location.WEST],
    [GridPosition.ALPHA8]: [Location.SOUTHEAST, Location.NORTHWEST],
    // Beta positions (box grid)
    [GridPosition.BETA1]: [Location.NORTH, Location.NORTH],
    [GridPosition.BETA2]: [Location.NORTHEAST, Location.NORTHEAST],
    [GridPosition.BETA3]: [Location.EAST, Location.EAST],
    [GridPosition.BETA4]: [Location.SOUTHEAST, Location.SOUTHEAST],
    [GridPosition.BETA5]: [Location.SOUTH, Location.SOUTH],
    [GridPosition.BETA6]: [Location.SOUTHWEST, Location.SOUTHWEST],
    [GridPosition.BETA7]: [Location.WEST, Location.WEST],
    [GridPosition.BETA8]: [Location.NORTHWEST, Location.NORTHWEST]
  };
  // Pattern Definitions for A-F
  LETTER_PATTERNS = {
    A: {
      letter: "A",
      sequences: [
        {
          name: "alpha_cycle",
          positions: [
            GridPosition.ALPHA3,
            GridPosition.ALPHA5,
            GridPosition.ALPHA7,
            GridPosition.ALPHA1
          ],
          timingPattern: [Timing.SPLIT],
          direction: Direction.SAME
        }
      ],
      variations: [
        {
          name: "cw",
          blueMotion: MotionType.PRO,
          redMotion: MotionType.PRO,
          blueRotation: RotationDirection.CLOCKWISE,
          redRotation: RotationDirection.CLOCKWISE,
          sequenceModifier: "forward"
        },
        {
          name: "ccw",
          blueMotion: MotionType.PRO,
          redMotion: MotionType.PRO,
          blueRotation: RotationDirection.COUNTER_CLOCKWISE,
          redRotation: RotationDirection.COUNTER_CLOCKWISE,
          sequenceModifier: "reverse"
        }
      ],
      baseParams: { letter: "A" }
    },
    B: {
      letter: "B",
      sequences: [
        {
          name: "alpha_cycle",
          positions: [
            GridPosition.ALPHA3,
            GridPosition.ALPHA5,
            GridPosition.ALPHA7,
            GridPosition.ALPHA1
          ],
          timingPattern: [Timing.SPLIT],
          direction: Direction.SAME
        }
      ],
      variations: [
        {
          name: "ccw",
          blueMotion: MotionType.ANTI,
          redMotion: MotionType.ANTI,
          blueRotation: RotationDirection.COUNTER_CLOCKWISE,
          redRotation: RotationDirection.COUNTER_CLOCKWISE,
          sequenceModifier: "forward"
        },
        {
          name: "cw",
          blueMotion: MotionType.ANTI,
          redMotion: MotionType.ANTI,
          blueRotation: RotationDirection.CLOCKWISE,
          redRotation: RotationDirection.CLOCKWISE,
          sequenceModifier: "reverse"
        }
      ],
      baseParams: { letter: "B" }
    },
    C: {
      letter: "C",
      sequences: [
        {
          name: "alpha_cycle",
          positions: [
            GridPosition.ALPHA3,
            GridPosition.ALPHA5,
            GridPosition.ALPHA7,
            GridPosition.ALPHA1
          ],
          timingPattern: [Timing.SPLIT],
          direction: Direction.SAME
        }
      ],
      variations: [
        // First 8: anti/pro combinations
        {
          name: "anti_pro_ccw_cw",
          blueMotion: MotionType.ANTI,
          redMotion: MotionType.PRO,
          blueRotation: RotationDirection.COUNTER_CLOCKWISE,
          redRotation: RotationDirection.CLOCKWISE,
          sequenceModifier: "forward"
        },
        {
          name: "anti_pro_cw_ccw",
          blueMotion: MotionType.ANTI,
          redMotion: MotionType.PRO,
          blueRotation: RotationDirection.CLOCKWISE,
          redRotation: RotationDirection.COUNTER_CLOCKWISE,
          sequenceModifier: "reverse"
        },
        // Second 8: pro/anti combinations
        {
          name: "pro_anti_cw_ccw",
          blueMotion: MotionType.PRO,
          redMotion: MotionType.ANTI,
          blueRotation: RotationDirection.CLOCKWISE,
          redRotation: RotationDirection.COUNTER_CLOCKWISE,
          sequenceModifier: "forward"
        },
        {
          name: "pro_anti_ccw_cw",
          blueMotion: MotionType.PRO,
          redMotion: MotionType.ANTI,
          blueRotation: RotationDirection.COUNTER_CLOCKWISE,
          redRotation: RotationDirection.CLOCKWISE,
          sequenceModifier: "reverse"
        }
      ],
      baseParams: { letter: "C" }
    },
    D: {
      letter: "D",
      sequences: [
        {
          name: "beta_alpha_cross",
          positions: [
            GridPosition.BETA3,
            GridPosition.ALPHA5,
            GridPosition.BETA5,
            GridPosition.ALPHA7,
            GridPosition.BETA7,
            GridPosition.ALPHA1,
            GridPosition.BETA1,
            GridPosition.ALPHA3
          ],
          timingPattern: [Timing.SPLIT, Timing.TOG],
          // Alternating
          direction: Direction.OPP
        }
      ],
      variations: [
        {
          name: "ccw_cw",
          blueMotion: MotionType.PRO,
          redMotion: MotionType.PRO,
          blueRotation: RotationDirection.COUNTER_CLOCKWISE,
          redRotation: RotationDirection.CLOCKWISE,
          sequenceModifier: "forward"
        },
        {
          name: "cw_ccw",
          blueMotion: MotionType.PRO,
          redMotion: MotionType.PRO,
          blueRotation: RotationDirection.CLOCKWISE,
          redRotation: RotationDirection.COUNTER_CLOCKWISE,
          sequenceModifier: "reverse"
        }
      ],
      baseParams: { letter: "D" }
    },
    E: {
      letter: "E",
      sequences: [
        {
          name: "beta_alpha_cross",
          positions: [
            GridPosition.BETA3,
            GridPosition.ALPHA5,
            GridPosition.BETA5,
            GridPosition.ALPHA7,
            GridPosition.BETA7,
            GridPosition.ALPHA1,
            GridPosition.BETA1,
            GridPosition.ALPHA3
          ],
          timingPattern: [Timing.SPLIT, Timing.TOG],
          direction: Direction.OPP
        }
      ],
      variations: [
        {
          name: "cw_ccw",
          blueMotion: MotionType.ANTI,
          redMotion: MotionType.ANTI,
          blueRotation: RotationDirection.CLOCKWISE,
          redRotation: RotationDirection.COUNTER_CLOCKWISE,
          sequenceModifier: "forward"
        },
        {
          name: "ccw_cw",
          blueMotion: MotionType.ANTI,
          redMotion: MotionType.ANTI,
          blueRotation: RotationDirection.COUNTER_CLOCKWISE,
          redRotation: RotationDirection.CLOCKWISE,
          sequenceModifier: "reverse"
        }
      ],
      baseParams: { letter: "E" }
    },
    F: {
      letter: "F",
      sequences: [
        {
          name: "beta_alpha_cross",
          positions: [
            GridPosition.BETA3,
            GridPosition.ALPHA5,
            GridPosition.BETA5,
            GridPosition.ALPHA7,
            GridPosition.BETA7,
            GridPosition.ALPHA1,
            GridPosition.BETA1,
            GridPosition.ALPHA3
          ],
          timingPattern: [Timing.SPLIT, Timing.TOG],
          direction: Direction.OPP
        }
      ],
      variations: [
        // First 8: anti/pro combinations
        {
          name: "anti_pro_cw_cw",
          blueMotion: MotionType.ANTI,
          redMotion: MotionType.PRO,
          blueRotation: RotationDirection.CLOCKWISE,
          redRotation: RotationDirection.CLOCKWISE,
          sequenceModifier: "forward"
        },
        // Second 8: pro/anti combinations
        {
          name: "pro_anti_ccw_ccw",
          blueMotion: MotionType.PRO,
          redMotion: MotionType.ANTI,
          blueRotation: RotationDirection.COUNTER_CLOCKWISE,
          redRotation: RotationDirection.COUNTER_CLOCKWISE,
          sequenceModifier: "forward"
        }
      ],
      baseParams: { letter: "F" }
    }
  };
  // ===== PUBLIC API =====
  generateA() {
    return this.generateLetter("A");
  }
  generateB() {
    return this.generateLetter("B");
  }
  generateC() {
    return this.generateLetter("C");
  }
  generateD() {
    return this.generateLetter("D");
  }
  generateE() {
    return this.generateLetter("E");
  }
  generateF() {
    return this.generateLetter("F");
  }
  /**
   * Get movement counts for validation
   */
  getMovementCounts() {
    const counts = {};
    ["A", "B", "C", "D", "E", "F"].forEach((letter) => {
      counts[letter] = this.generateLetter(letter).length;
    });
    return counts;
  }
  // ===== CORE ENGINE =====
  /**
   * Generate any letter from pattern definition
   */
  generateLetter(letter) {
    const pattern = this.LETTER_PATTERNS[letter];
    if (!pattern) {
      throw new Error(`No pattern defined for letter: ${letter}`);
    }
    const allMovements = [];
    for (const sequence of pattern.sequences) {
      for (const variation of pattern.variations) {
        const movements = this.generateSequenceVariation(
          sequence,
          variation,
          pattern.baseParams
        );
        allMovements.push(...movements);
      }
    }
    return allMovements;
  }
  /**
   * Generate movements for a specific sequence + variation combination
   */
  generateSequenceVariation(sequence, variation, baseParams) {
    const movements = [];
    let positions = [...sequence.positions];
    if (variation.sequenceModifier === "reverse") {
      if (sequence.name === "alpha_cycle") {
        positions = [
          GridPosition.ALPHA7,
          GridPosition.ALPHA5,
          GridPosition.ALPHA3,
          GridPosition.ALPHA1
        ];
      } else if (sequence.name === "beta_alpha_cross") {
        positions = [
          GridPosition.BETA7,
          GridPosition.ALPHA5,
          GridPosition.BETA1,
          GridPosition.ALPHA7,
          GridPosition.BETA5,
          GridPosition.ALPHA3,
          GridPosition.BETA3,
          GridPosition.ALPHA1
        ];
      }
    }
    for (let i = 0; i < positions.length; i++) {
      const startPos = positions[i];
      const endPos = positions[(i + 1) % positions.length];
      const timing = sequence.timingPattern[i % sequence.timingPattern.length];
      const movementParams = this.createMovementParams(
        baseParams.letter,
        startPos,
        endPos,
        timing,
        sequence.direction,
        variation
      );
      movements.push(this.createPictographFromMovement(movementParams));
    }
    return movements;
  }
  /**
   * Create movement parameters with calculated locations
   */
  createMovementParams(letter, startPos, endPos, timing, direction, variation) {
    const startMapping = this.positionMappings[startPos];
    const endMapping = this.positionMappings[endPos];
    if (!startMapping || !endMapping) {
      throw new Error(
        `Position mapping not found for ${startPos} or ${endPos}`
      );
    }
    const [blueStart, redStart] = startMapping;
    const [blueEnd, redEnd] = endMapping;
    return {
      letter,
      startPosition: startPos,
      endPosition: endPos,
      timing,
      direction,
      blueMotion: variation.blueMotion,
      redMotion: variation.redMotion,
      blueRotation: variation.blueRotation,
      redRotation: variation.redRotation,
      blueStartLocation: blueStart,
      blueEndLocation: blueEnd,
      redStartLocation: redStart,
      redEndLocation: redEnd
    };
  }
  /**
   * Create complete PictographData from movement parameters
   */
  createPictographFromMovement(params) {
    return createPictographData({
      id: crypto.randomUUID(),
      letter: params.letter,
      startPosition: params.startPosition,
      endPosition: params.endPosition,
      timing: params.timing,
      direction: params.direction,
      letterType: LetterType.TYPE1,
      gridData: createGridData({ gridMode: GridMode.DIAMOND }),
      arrows: {
        blue: createArrowData({
          arrowType: ArrowType.BLUE,
          color: MotionColor.BLUE,
          motionType: params.blueMotion,
          rotationDirection: params.blueRotation,
          isVisible: true
        }),
        red: createArrowData({
          arrowType: ArrowType.RED,
          color: MotionColor.RED,
          motionType: params.redMotion,
          rotationDirection: params.redRotation,
          isVisible: true
        })
      },
      props: {
        blue: createPropData({
          color: MotionColor.BLUE,
          rotationDirection: params.blueRotation
        }),
        red: createPropData({
          color: MotionColor.RED,
          rotationDirection: params.redRotation
        })
      },
      motions: {
        blue: createMotionData({
          motionType: params.blueMotion,
          rotationDirection: params.blueRotation,
          startLocation: params.blueStartLocation,
          endLocation: params.blueEndLocation
        }),
        red: createMotionData({
          motionType: params.redMotion,
          rotationDirection: params.redRotation,
          startLocation: params.redStartLocation,
          endLocation: params.redEndLocation
        })
      },
      isBlank: false,
      isMirrored: false,
      metadata: {}
    });
  }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkZsZXhpYmxlUGljdG9ncmFwaEdlbmVyYXRvci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEZsZXhpYmxlIFBhdHRlcm4gRW5naW5lIGZvciBUS0EgUGljdG9ncmFwaCBHZW5lcmF0aW9uXG4gKiBIYW5kbGVzIEEtRiB3aXRoIGRhdGEtZHJpdmVuIHBhdHRlcm4gZGVmaW5pdGlvbnNcbiAqL1xuXG5pbXBvcnQgdHlwZSB7IFBpY3RvZ3JhcGhEYXRhIH0gZnJvbSBcIiRsaWIvZG9tYWluL1BpY3RvZ3JhcGhEYXRhXCI7XG5pbXBvcnQgeyBjcmVhdGVQaWN0b2dyYXBoRGF0YSB9IGZyb20gXCIkbGliL2RvbWFpbi9QaWN0b2dyYXBoRGF0YVwiO1xuaW1wb3J0IHsgY3JlYXRlQXJyb3dEYXRhIH0gZnJvbSBcIiRsaWIvZG9tYWluL0Fycm93RGF0YVwiO1xuaW1wb3J0IHsgY3JlYXRlUHJvcERhdGEgfSBmcm9tIFwiJGxpYi9kb21haW4vUHJvcERhdGFcIjtcbmltcG9ydCB7IGNyZWF0ZU1vdGlvbkRhdGEgfSBmcm9tIFwiJGxpYi9kb21haW4vTW90aW9uRGF0YVwiO1xuaW1wb3J0IHsgY3JlYXRlR3JpZERhdGEgfSBmcm9tIFwiJGxpYi9kb21haW4vR3JpZERhdGFcIjtcbmltcG9ydCB7XG4gIEdyaWRQb3NpdGlvbixcbiAgVGltaW5nLFxuICBEaXJlY3Rpb24sXG4gIE1vdGlvblR5cGUsXG4gIFJvdGF0aW9uRGlyZWN0aW9uLFxuICBMb2NhdGlvbixcbiAgTW90aW9uQ29sb3IsXG4gIEFycm93VHlwZSxcbiAgR3JpZE1vZGUsXG4gIExldHRlclR5cGUsXG59IGZyb20gXCIkbGliL2RvbWFpbi9lbnVtc1wiO1xuXG4vLyBQYXR0ZXJuIERlZmluaXRpb24gU3lzdGVtXG5pbnRlcmZhY2UgTGV0dGVyUGF0dGVybiB7XG4gIGxldHRlcjogc3RyaW5nO1xuICBzZXF1ZW5jZXM6IFBvc2l0aW9uU2VxdWVuY2VbXTtcbiAgdmFyaWF0aW9uczogVmFyaWF0aW9uUnVsZVtdO1xuICBiYXNlUGFyYW1zOiBCYXNlUGFyYW1ldGVycztcbn1cblxuaW50ZXJmYWNlIFBvc2l0aW9uU2VxdWVuY2Uge1xuICBuYW1lOiBzdHJpbmc7XG4gIHBvc2l0aW9uczogR3JpZFBvc2l0aW9uW107XG4gIHRpbWluZ1BhdHRlcm46IFRpbWluZ1tdO1xuICBkaXJlY3Rpb246IERpcmVjdGlvbjtcbn1cblxuaW50ZXJmYWNlIFZhcmlhdGlvblJ1bGUge1xuICBuYW1lOiBzdHJpbmc7XG4gIGJsdWVNb3Rpb246IE1vdGlvblR5cGU7XG4gIHJlZE1vdGlvbjogTW90aW9uVHlwZTtcbiAgYmx1ZVJvdGF0aW9uOiBSb3RhdGlvbkRpcmVjdGlvbjtcbiAgcmVkUm90YXRpb246IFJvdGF0aW9uRGlyZWN0aW9uO1xuICBzZXF1ZW5jZU1vZGlmaWVyPzogXCJmb3J3YXJkXCIgfCBcInJldmVyc2VcIjtcbn1cblxuaW50ZXJmYWNlIEJhc2VQYXJhbWV0ZXJzIHtcbiAgbGV0dGVyOiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBNb3ZlbWVudFBhcmFtcyB7XG4gIGxldHRlcjogc3RyaW5nO1xuICBzdGFydFBvc2l0aW9uOiBHcmlkUG9zaXRpb247XG4gIGVuZFBvc2l0aW9uOiBHcmlkUG9zaXRpb247XG4gIHRpbWluZzogVGltaW5nO1xuICBkaXJlY3Rpb246IERpcmVjdGlvbjtcbiAgYmx1ZU1vdGlvbjogTW90aW9uVHlwZTtcbiAgcmVkTW90aW9uOiBNb3Rpb25UeXBlO1xuICBibHVlUm90YXRpb246IFJvdGF0aW9uRGlyZWN0aW9uO1xuICByZWRSb3RhdGlvbjogUm90YXRpb25EaXJlY3Rpb247XG4gIGJsdWVTdGFydExvY2F0aW9uOiBMb2NhdGlvbjtcbiAgYmx1ZUVuZExvY2F0aW9uOiBMb2NhdGlvbjtcbiAgcmVkU3RhcnRMb2NhdGlvbjogTG9jYXRpb247XG4gIHJlZEVuZExvY2F0aW9uOiBMb2NhdGlvbjtcbn1cblxuZXhwb3J0IGNsYXNzIEZsZXhpYmxlUGljdG9ncmFwaEdlbmVyYXRvciB7XG4gIC8vIFVuaXZlcnNhbCBwb3NpdGlvbiB0byBoYW5kIGxvY2F0aW9uIG1hcHBpbmdcbiAgcHJpdmF0ZSByZWFkb25seSBwb3NpdGlvbk1hcHBpbmdzID0ge1xuICAgIC8vIEFscGhhIHBvc2l0aW9ucyAoZGlhbW9uZCBncmlkKVxuICAgIFtHcmlkUG9zaXRpb24uQUxQSEExXTogW0xvY2F0aW9uLlNPVVRILCBMb2NhdGlvbi5OT1JUSF0sXG4gICAgW0dyaWRQb3NpdGlvbi5BTFBIQTJdOiBbTG9jYXRpb24uU09VVEhXRVNULCBMb2NhdGlvbi5OT1JUSEVBU1RdLFxuICAgIFtHcmlkUG9zaXRpb24uQUxQSEEzXTogW0xvY2F0aW9uLldFU1QsIExvY2F0aW9uLkVBU1RdLFxuICAgIFtHcmlkUG9zaXRpb24uQUxQSEE0XTogW0xvY2F0aW9uLk5PUlRIV0VTVCwgTG9jYXRpb24uU09VVEhFQVNUXSxcbiAgICBbR3JpZFBvc2l0aW9uLkFMUEhBNV06IFtMb2NhdGlvbi5OT1JUSCwgTG9jYXRpb24uU09VVEhdLFxuICAgIFtHcmlkUG9zaXRpb24uQUxQSEE2XTogW0xvY2F0aW9uLk5PUlRIRUFTVCwgTG9jYXRpb24uU09VVEhXRVNUXSxcbiAgICBbR3JpZFBvc2l0aW9uLkFMUEhBN106IFtMb2NhdGlvbi5FQVNULCBMb2NhdGlvbi5XRVNUXSxcbiAgICBbR3JpZFBvc2l0aW9uLkFMUEhBOF06IFtMb2NhdGlvbi5TT1VUSEVBU1QsIExvY2F0aW9uLk5PUlRIV0VTVF0sXG5cbiAgICAvLyBCZXRhIHBvc2l0aW9ucyAoYm94IGdyaWQpXG4gICAgW0dyaWRQb3NpdGlvbi5CRVRBMV06IFtMb2NhdGlvbi5OT1JUSCwgTG9jYXRpb24uTk9SVEhdLFxuICAgIFtHcmlkUG9zaXRpb24uQkVUQTJdOiBbTG9jYXRpb24uTk9SVEhFQVNULCBMb2NhdGlvbi5OT1JUSEVBU1RdLFxuICAgIFtHcmlkUG9zaXRpb24uQkVUQTNdOiBbTG9jYXRpb24uRUFTVCwgTG9jYXRpb24uRUFTVF0sXG4gICAgW0dyaWRQb3NpdGlvbi5CRVRBNF06IFtMb2NhdGlvbi5TT1VUSEVBU1QsIExvY2F0aW9uLlNPVVRIRUFTVF0sXG4gICAgW0dyaWRQb3NpdGlvbi5CRVRBNV06IFtMb2NhdGlvbi5TT1VUSCwgTG9jYXRpb24uU09VVEhdLFxuICAgIFtHcmlkUG9zaXRpb24uQkVUQTZdOiBbTG9jYXRpb24uU09VVEhXRVNULCBMb2NhdGlvbi5TT1VUSFdFU1RdLFxuICAgIFtHcmlkUG9zaXRpb24uQkVUQTddOiBbTG9jYXRpb24uV0VTVCwgTG9jYXRpb24uV0VTVF0sXG4gICAgW0dyaWRQb3NpdGlvbi5CRVRBOF06IFtMb2NhdGlvbi5OT1JUSFdFU1QsIExvY2F0aW9uLk5PUlRIV0VTVF0sXG4gIH07XG5cbiAgLy8gUGF0dGVybiBEZWZpbml0aW9ucyBmb3IgQS1GXG4gIHByaXZhdGUgcmVhZG9ubHkgTEVUVEVSX1BBVFRFUk5TOiBSZWNvcmQ8c3RyaW5nLCBMZXR0ZXJQYXR0ZXJuPiA9IHtcbiAgICBBOiB7XG4gICAgICBsZXR0ZXI6IFwiQVwiLFxuICAgICAgc2VxdWVuY2VzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiBcImFscGhhX2N5Y2xlXCIsXG4gICAgICAgICAgcG9zaXRpb25zOiBbXG4gICAgICAgICAgICBHcmlkUG9zaXRpb24uQUxQSEEzLFxuICAgICAgICAgICAgR3JpZFBvc2l0aW9uLkFMUEhBNSxcbiAgICAgICAgICAgIEdyaWRQb3NpdGlvbi5BTFBIQTcsXG4gICAgICAgICAgICBHcmlkUG9zaXRpb24uQUxQSEExLFxuICAgICAgICAgIF0sXG4gICAgICAgICAgdGltaW5nUGF0dGVybjogW1RpbWluZy5TUExJVF0sXG4gICAgICAgICAgZGlyZWN0aW9uOiBEaXJlY3Rpb24uU0FNRSxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICB2YXJpYXRpb25zOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiBcImN3XCIsXG4gICAgICAgICAgYmx1ZU1vdGlvbjogTW90aW9uVHlwZS5QUk8sXG4gICAgICAgICAgcmVkTW90aW9uOiBNb3Rpb25UeXBlLlBSTyxcbiAgICAgICAgICBibHVlUm90YXRpb246IFJvdGF0aW9uRGlyZWN0aW9uLkNMT0NLV0lTRSxcbiAgICAgICAgICByZWRSb3RhdGlvbjogUm90YXRpb25EaXJlY3Rpb24uQ0xPQ0tXSVNFLFxuICAgICAgICAgIHNlcXVlbmNlTW9kaWZpZXI6IFwiZm9yd2FyZFwiLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogXCJjY3dcIixcbiAgICAgICAgICBibHVlTW90aW9uOiBNb3Rpb25UeXBlLlBSTyxcbiAgICAgICAgICByZWRNb3Rpb246IE1vdGlvblR5cGUuUFJPLFxuICAgICAgICAgIGJsdWVSb3RhdGlvbjogUm90YXRpb25EaXJlY3Rpb24uQ09VTlRFUl9DTE9DS1dJU0UsXG4gICAgICAgICAgcmVkUm90YXRpb246IFJvdGF0aW9uRGlyZWN0aW9uLkNPVU5URVJfQ0xPQ0tXSVNFLFxuICAgICAgICAgIHNlcXVlbmNlTW9kaWZpZXI6IFwicmV2ZXJzZVwiLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICAgIGJhc2VQYXJhbXM6IHsgbGV0dGVyOiBcIkFcIiB9LFxuICAgIH0sXG5cbiAgICBCOiB7XG4gICAgICBsZXR0ZXI6IFwiQlwiLFxuICAgICAgc2VxdWVuY2VzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiBcImFscGhhX2N5Y2xlXCIsXG4gICAgICAgICAgcG9zaXRpb25zOiBbXG4gICAgICAgICAgICBHcmlkUG9zaXRpb24uQUxQSEEzLFxuICAgICAgICAgICAgR3JpZFBvc2l0aW9uLkFMUEhBNSxcbiAgICAgICAgICAgIEdyaWRQb3NpdGlvbi5BTFBIQTcsXG4gICAgICAgICAgICBHcmlkUG9zaXRpb24uQUxQSEExLFxuICAgICAgICAgIF0sXG4gICAgICAgICAgdGltaW5nUGF0dGVybjogW1RpbWluZy5TUExJVF0sXG4gICAgICAgICAgZGlyZWN0aW9uOiBEaXJlY3Rpb24uU0FNRSxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICB2YXJpYXRpb25zOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiBcImNjd1wiLFxuICAgICAgICAgIGJsdWVNb3Rpb246IE1vdGlvblR5cGUuQU5USSxcbiAgICAgICAgICByZWRNb3Rpb246IE1vdGlvblR5cGUuQU5USSxcbiAgICAgICAgICBibHVlUm90YXRpb246IFJvdGF0aW9uRGlyZWN0aW9uLkNPVU5URVJfQ0xPQ0tXSVNFLFxuICAgICAgICAgIHJlZFJvdGF0aW9uOiBSb3RhdGlvbkRpcmVjdGlvbi5DT1VOVEVSX0NMT0NLV0lTRSxcbiAgICAgICAgICBzZXF1ZW5jZU1vZGlmaWVyOiBcImZvcndhcmRcIixcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6IFwiY3dcIixcbiAgICAgICAgICBibHVlTW90aW9uOiBNb3Rpb25UeXBlLkFOVEksXG4gICAgICAgICAgcmVkTW90aW9uOiBNb3Rpb25UeXBlLkFOVEksXG4gICAgICAgICAgYmx1ZVJvdGF0aW9uOiBSb3RhdGlvbkRpcmVjdGlvbi5DTE9DS1dJU0UsXG4gICAgICAgICAgcmVkUm90YXRpb246IFJvdGF0aW9uRGlyZWN0aW9uLkNMT0NLV0lTRSxcbiAgICAgICAgICBzZXF1ZW5jZU1vZGlmaWVyOiBcInJldmVyc2VcIixcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICBiYXNlUGFyYW1zOiB7IGxldHRlcjogXCJCXCIgfSxcbiAgICB9LFxuXG4gICAgQzoge1xuICAgICAgbGV0dGVyOiBcIkNcIixcbiAgICAgIHNlcXVlbmNlczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogXCJhbHBoYV9jeWNsZVwiLFxuICAgICAgICAgIHBvc2l0aW9uczogW1xuICAgICAgICAgICAgR3JpZFBvc2l0aW9uLkFMUEhBMyxcbiAgICAgICAgICAgIEdyaWRQb3NpdGlvbi5BTFBIQTUsXG4gICAgICAgICAgICBHcmlkUG9zaXRpb24uQUxQSEE3LFxuICAgICAgICAgICAgR3JpZFBvc2l0aW9uLkFMUEhBMSxcbiAgICAgICAgICBdLFxuICAgICAgICAgIHRpbWluZ1BhdHRlcm46IFtUaW1pbmcuU1BMSVRdLFxuICAgICAgICAgIGRpcmVjdGlvbjogRGlyZWN0aW9uLlNBTUUsXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgICAgdmFyaWF0aW9uczogW1xuICAgICAgICAvLyBGaXJzdCA4OiBhbnRpL3BybyBjb21iaW5hdGlvbnNcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6IFwiYW50aV9wcm9fY2N3X2N3XCIsXG4gICAgICAgICAgYmx1ZU1vdGlvbjogTW90aW9uVHlwZS5BTlRJLFxuICAgICAgICAgIHJlZE1vdGlvbjogTW90aW9uVHlwZS5QUk8sXG4gICAgICAgICAgYmx1ZVJvdGF0aW9uOiBSb3RhdGlvbkRpcmVjdGlvbi5DT1VOVEVSX0NMT0NLV0lTRSxcbiAgICAgICAgICByZWRSb3RhdGlvbjogUm90YXRpb25EaXJlY3Rpb24uQ0xPQ0tXSVNFLFxuICAgICAgICAgIHNlcXVlbmNlTW9kaWZpZXI6IFwiZm9yd2FyZFwiLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogXCJhbnRpX3Byb19jd19jY3dcIixcbiAgICAgICAgICBibHVlTW90aW9uOiBNb3Rpb25UeXBlLkFOVEksXG4gICAgICAgICAgcmVkTW90aW9uOiBNb3Rpb25UeXBlLlBSTyxcbiAgICAgICAgICBibHVlUm90YXRpb246IFJvdGF0aW9uRGlyZWN0aW9uLkNMT0NLV0lTRSxcbiAgICAgICAgICByZWRSb3RhdGlvbjogUm90YXRpb25EaXJlY3Rpb24uQ09VTlRFUl9DTE9DS1dJU0UsXG4gICAgICAgICAgc2VxdWVuY2VNb2RpZmllcjogXCJyZXZlcnNlXCIsXG4gICAgICAgIH0sXG4gICAgICAgIC8vIFNlY29uZCA4OiBwcm8vYW50aSBjb21iaW5hdGlvbnNcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6IFwicHJvX2FudGlfY3dfY2N3XCIsXG4gICAgICAgICAgYmx1ZU1vdGlvbjogTW90aW9uVHlwZS5QUk8sXG4gICAgICAgICAgcmVkTW90aW9uOiBNb3Rpb25UeXBlLkFOVEksXG4gICAgICAgICAgYmx1ZVJvdGF0aW9uOiBSb3RhdGlvbkRpcmVjdGlvbi5DTE9DS1dJU0UsXG4gICAgICAgICAgcmVkUm90YXRpb246IFJvdGF0aW9uRGlyZWN0aW9uLkNPVU5URVJfQ0xPQ0tXSVNFLFxuICAgICAgICAgIHNlcXVlbmNlTW9kaWZpZXI6IFwiZm9yd2FyZFwiLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogXCJwcm9fYW50aV9jY3dfY3dcIixcbiAgICAgICAgICBibHVlTW90aW9uOiBNb3Rpb25UeXBlLlBSTyxcbiAgICAgICAgICByZWRNb3Rpb246IE1vdGlvblR5cGUuQU5USSxcbiAgICAgICAgICBibHVlUm90YXRpb246IFJvdGF0aW9uRGlyZWN0aW9uLkNPVU5URVJfQ0xPQ0tXSVNFLFxuICAgICAgICAgIHJlZFJvdGF0aW9uOiBSb3RhdGlvbkRpcmVjdGlvbi5DTE9DS1dJU0UsXG4gICAgICAgICAgc2VxdWVuY2VNb2RpZmllcjogXCJyZXZlcnNlXCIsXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgICAgYmFzZVBhcmFtczogeyBsZXR0ZXI6IFwiQ1wiIH0sXG4gICAgfSxcblxuICAgIEQ6IHtcbiAgICAgIGxldHRlcjogXCJEXCIsXG4gICAgICBzZXF1ZW5jZXM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6IFwiYmV0YV9hbHBoYV9jcm9zc1wiLFxuICAgICAgICAgIHBvc2l0aW9uczogW1xuICAgICAgICAgICAgR3JpZFBvc2l0aW9uLkJFVEEzLFxuICAgICAgICAgICAgR3JpZFBvc2l0aW9uLkFMUEhBNSxcbiAgICAgICAgICAgIEdyaWRQb3NpdGlvbi5CRVRBNSxcbiAgICAgICAgICAgIEdyaWRQb3NpdGlvbi5BTFBIQTcsXG4gICAgICAgICAgICBHcmlkUG9zaXRpb24uQkVUQTcsXG4gICAgICAgICAgICBHcmlkUG9zaXRpb24uQUxQSEExLFxuICAgICAgICAgICAgR3JpZFBvc2l0aW9uLkJFVEExLFxuICAgICAgICAgICAgR3JpZFBvc2l0aW9uLkFMUEhBMyxcbiAgICAgICAgICBdLFxuICAgICAgICAgIHRpbWluZ1BhdHRlcm46IFtUaW1pbmcuU1BMSVQsIFRpbWluZy5UT0ddLCAvLyBBbHRlcm5hdGluZ1xuICAgICAgICAgIGRpcmVjdGlvbjogRGlyZWN0aW9uLk9QUCxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICB2YXJpYXRpb25zOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiBcImNjd19jd1wiLFxuICAgICAgICAgIGJsdWVNb3Rpb246IE1vdGlvblR5cGUuUFJPLFxuICAgICAgICAgIHJlZE1vdGlvbjogTW90aW9uVHlwZS5QUk8sXG4gICAgICAgICAgYmx1ZVJvdGF0aW9uOiBSb3RhdGlvbkRpcmVjdGlvbi5DT1VOVEVSX0NMT0NLV0lTRSxcbiAgICAgICAgICByZWRSb3RhdGlvbjogUm90YXRpb25EaXJlY3Rpb24uQ0xPQ0tXSVNFLFxuICAgICAgICAgIHNlcXVlbmNlTW9kaWZpZXI6IFwiZm9yd2FyZFwiLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogXCJjd19jY3dcIixcbiAgICAgICAgICBibHVlTW90aW9uOiBNb3Rpb25UeXBlLlBSTyxcbiAgICAgICAgICByZWRNb3Rpb246IE1vdGlvblR5cGUuUFJPLFxuICAgICAgICAgIGJsdWVSb3RhdGlvbjogUm90YXRpb25EaXJlY3Rpb24uQ0xPQ0tXSVNFLFxuICAgICAgICAgIHJlZFJvdGF0aW9uOiBSb3RhdGlvbkRpcmVjdGlvbi5DT1VOVEVSX0NMT0NLV0lTRSxcbiAgICAgICAgICBzZXF1ZW5jZU1vZGlmaWVyOiBcInJldmVyc2VcIixcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICBiYXNlUGFyYW1zOiB7IGxldHRlcjogXCJEXCIgfSxcbiAgICB9LFxuXG4gICAgRToge1xuICAgICAgbGV0dGVyOiBcIkVcIixcbiAgICAgIHNlcXVlbmNlczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogXCJiZXRhX2FscGhhX2Nyb3NzXCIsXG4gICAgICAgICAgcG9zaXRpb25zOiBbXG4gICAgICAgICAgICBHcmlkUG9zaXRpb24uQkVUQTMsXG4gICAgICAgICAgICBHcmlkUG9zaXRpb24uQUxQSEE1LFxuICAgICAgICAgICAgR3JpZFBvc2l0aW9uLkJFVEE1LFxuICAgICAgICAgICAgR3JpZFBvc2l0aW9uLkFMUEhBNyxcbiAgICAgICAgICAgIEdyaWRQb3NpdGlvbi5CRVRBNyxcbiAgICAgICAgICAgIEdyaWRQb3NpdGlvbi5BTFBIQTEsXG4gICAgICAgICAgICBHcmlkUG9zaXRpb24uQkVUQTEsXG4gICAgICAgICAgICBHcmlkUG9zaXRpb24uQUxQSEEzLFxuICAgICAgICAgIF0sXG4gICAgICAgICAgdGltaW5nUGF0dGVybjogW1RpbWluZy5TUExJVCwgVGltaW5nLlRPR10sXG4gICAgICAgICAgZGlyZWN0aW9uOiBEaXJlY3Rpb24uT1BQLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICAgIHZhcmlhdGlvbnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6IFwiY3dfY2N3XCIsXG4gICAgICAgICAgYmx1ZU1vdGlvbjogTW90aW9uVHlwZS5BTlRJLFxuICAgICAgICAgIHJlZE1vdGlvbjogTW90aW9uVHlwZS5BTlRJLFxuICAgICAgICAgIGJsdWVSb3RhdGlvbjogUm90YXRpb25EaXJlY3Rpb24uQ0xPQ0tXSVNFLFxuICAgICAgICAgIHJlZFJvdGF0aW9uOiBSb3RhdGlvbkRpcmVjdGlvbi5DT1VOVEVSX0NMT0NLV0lTRSxcbiAgICAgICAgICBzZXF1ZW5jZU1vZGlmaWVyOiBcImZvcndhcmRcIixcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6IFwiY2N3X2N3XCIsXG4gICAgICAgICAgYmx1ZU1vdGlvbjogTW90aW9uVHlwZS5BTlRJLFxuICAgICAgICAgIHJlZE1vdGlvbjogTW90aW9uVHlwZS5BTlRJLFxuICAgICAgICAgIGJsdWVSb3RhdGlvbjogUm90YXRpb25EaXJlY3Rpb24uQ09VTlRFUl9DTE9DS1dJU0UsXG4gICAgICAgICAgcmVkUm90YXRpb246IFJvdGF0aW9uRGlyZWN0aW9uLkNMT0NLV0lTRSxcbiAgICAgICAgICBzZXF1ZW5jZU1vZGlmaWVyOiBcInJldmVyc2VcIixcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICBiYXNlUGFyYW1zOiB7IGxldHRlcjogXCJFXCIgfSxcbiAgICB9LFxuXG4gICAgRjoge1xuICAgICAgbGV0dGVyOiBcIkZcIixcbiAgICAgIHNlcXVlbmNlczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogXCJiZXRhX2FscGhhX2Nyb3NzXCIsXG4gICAgICAgICAgcG9zaXRpb25zOiBbXG4gICAgICAgICAgICBHcmlkUG9zaXRpb24uQkVUQTMsXG4gICAgICAgICAgICBHcmlkUG9zaXRpb24uQUxQSEE1LFxuICAgICAgICAgICAgR3JpZFBvc2l0aW9uLkJFVEE1LFxuICAgICAgICAgICAgR3JpZFBvc2l0aW9uLkFMUEhBNyxcbiAgICAgICAgICAgIEdyaWRQb3NpdGlvbi5CRVRBNyxcbiAgICAgICAgICAgIEdyaWRQb3NpdGlvbi5BTFBIQTEsXG4gICAgICAgICAgICBHcmlkUG9zaXRpb24uQkVUQTEsXG4gICAgICAgICAgICBHcmlkUG9zaXRpb24uQUxQSEEzLFxuICAgICAgICAgIF0sXG4gICAgICAgICAgdGltaW5nUGF0dGVybjogW1RpbWluZy5TUExJVCwgVGltaW5nLlRPR10sXG4gICAgICAgICAgZGlyZWN0aW9uOiBEaXJlY3Rpb24uT1BQLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICAgIHZhcmlhdGlvbnM6IFtcbiAgICAgICAgLy8gRmlyc3QgODogYW50aS9wcm8gY29tYmluYXRpb25zXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiBcImFudGlfcHJvX2N3X2N3XCIsXG4gICAgICAgICAgYmx1ZU1vdGlvbjogTW90aW9uVHlwZS5BTlRJLFxuICAgICAgICAgIHJlZE1vdGlvbjogTW90aW9uVHlwZS5QUk8sXG4gICAgICAgICAgYmx1ZVJvdGF0aW9uOiBSb3RhdGlvbkRpcmVjdGlvbi5DTE9DS1dJU0UsXG4gICAgICAgICAgcmVkUm90YXRpb246IFJvdGF0aW9uRGlyZWN0aW9uLkNMT0NLV0lTRSxcbiAgICAgICAgICBzZXF1ZW5jZU1vZGlmaWVyOiBcImZvcndhcmRcIixcbiAgICAgICAgfSxcbiAgICAgICAgLy8gU2Vjb25kIDg6IHByby9hbnRpIGNvbWJpbmF0aW9uc1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogXCJwcm9fYW50aV9jY3dfY2N3XCIsXG4gICAgICAgICAgYmx1ZU1vdGlvbjogTW90aW9uVHlwZS5QUk8sXG4gICAgICAgICAgcmVkTW90aW9uOiBNb3Rpb25UeXBlLkFOVEksXG4gICAgICAgICAgYmx1ZVJvdGF0aW9uOiBSb3RhdGlvbkRpcmVjdGlvbi5DT1VOVEVSX0NMT0NLV0lTRSxcbiAgICAgICAgICByZWRSb3RhdGlvbjogUm90YXRpb25EaXJlY3Rpb24uQ09VTlRFUl9DTE9DS1dJU0UsXG4gICAgICAgICAgc2VxdWVuY2VNb2RpZmllcjogXCJmb3J3YXJkXCIsXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgICAgYmFzZVBhcmFtczogeyBsZXR0ZXI6IFwiRlwiIH0sXG4gICAgfSxcbiAgfTtcblxuICAvLyA9PT09PSBQVUJMSUMgQVBJID09PT09XG5cbiAgZ2VuZXJhdGVBKCk6IFBpY3RvZ3JhcGhEYXRhW10ge1xuICAgIHJldHVybiB0aGlzLmdlbmVyYXRlTGV0dGVyKFwiQVwiKTtcbiAgfVxuICBnZW5lcmF0ZUIoKTogUGljdG9ncmFwaERhdGFbXSB7XG4gICAgcmV0dXJuIHRoaXMuZ2VuZXJhdGVMZXR0ZXIoXCJCXCIpO1xuICB9XG4gIGdlbmVyYXRlQygpOiBQaWN0b2dyYXBoRGF0YVtdIHtcbiAgICByZXR1cm4gdGhpcy5nZW5lcmF0ZUxldHRlcihcIkNcIik7XG4gIH1cbiAgZ2VuZXJhdGVEKCk6IFBpY3RvZ3JhcGhEYXRhW10ge1xuICAgIHJldHVybiB0aGlzLmdlbmVyYXRlTGV0dGVyKFwiRFwiKTtcbiAgfVxuICBnZW5lcmF0ZUUoKTogUGljdG9ncmFwaERhdGFbXSB7XG4gICAgcmV0dXJuIHRoaXMuZ2VuZXJhdGVMZXR0ZXIoXCJFXCIpO1xuICB9XG4gIGdlbmVyYXRlRigpOiBQaWN0b2dyYXBoRGF0YVtdIHtcbiAgICByZXR1cm4gdGhpcy5nZW5lcmF0ZUxldHRlcihcIkZcIik7XG4gIH1cblxuICAvKipcbiAgICogR2V0IG1vdmVtZW50IGNvdW50cyBmb3IgdmFsaWRhdGlvblxuICAgKi9cbiAgZ2V0TW92ZW1lbnRDb3VudHMoKTogUmVjb3JkPHN0cmluZywgbnVtYmVyPiB7XG4gICAgY29uc3QgY291bnRzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge307XG4gICAgW1wiQVwiLCBcIkJcIiwgXCJDXCIsIFwiRFwiLCBcIkVcIiwgXCJGXCJdLmZvckVhY2goKGxldHRlcikgPT4ge1xuICAgICAgY291bnRzW2xldHRlcl0gPSB0aGlzLmdlbmVyYXRlTGV0dGVyKGxldHRlcikubGVuZ3RoO1xuICAgIH0pO1xuICAgIHJldHVybiBjb3VudHM7XG4gIH1cblxuICAvLyA9PT09PSBDT1JFIEVOR0lORSA9PT09PVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBhbnkgbGV0dGVyIGZyb20gcGF0dGVybiBkZWZpbml0aW9uXG4gICAqL1xuICBwcml2YXRlIGdlbmVyYXRlTGV0dGVyKGxldHRlcjogc3RyaW5nKTogUGljdG9ncmFwaERhdGFbXSB7XG4gICAgY29uc3QgcGF0dGVybiA9IHRoaXMuTEVUVEVSX1BBVFRFUk5TW2xldHRlcl07XG4gICAgaWYgKCFwYXR0ZXJuKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYE5vIHBhdHRlcm4gZGVmaW5lZCBmb3IgbGV0dGVyOiAke2xldHRlcn1gKTtcbiAgICB9XG5cbiAgICBjb25zdCBhbGxNb3ZlbWVudHM6IFBpY3RvZ3JhcGhEYXRhW10gPSBbXTtcblxuICAgIC8vIEZvciBlYWNoIHNlcXVlbmNlIGluIHRoZSBwYXR0ZXJuXG4gICAgZm9yIChjb25zdCBzZXF1ZW5jZSBvZiBwYXR0ZXJuLnNlcXVlbmNlcykge1xuICAgICAgLy8gRm9yIGVhY2ggdmFyaWF0aW9uIHJ1bGVcbiAgICAgIGZvciAoY29uc3QgdmFyaWF0aW9uIG9mIHBhdHRlcm4udmFyaWF0aW9ucykge1xuICAgICAgICAvLyBHZW5lcmF0ZSBtb3ZlbWVudHMgZm9yIHRoaXMgc2VxdWVuY2UgKyB2YXJpYXRpb24gY29tYm9cbiAgICAgICAgY29uc3QgbW92ZW1lbnRzID0gdGhpcy5nZW5lcmF0ZVNlcXVlbmNlVmFyaWF0aW9uKFxuICAgICAgICAgIHNlcXVlbmNlLFxuICAgICAgICAgIHZhcmlhdGlvbixcbiAgICAgICAgICBwYXR0ZXJuLmJhc2VQYXJhbXNcbiAgICAgICAgKTtcbiAgICAgICAgYWxsTW92ZW1lbnRzLnB1c2goLi4ubW92ZW1lbnRzKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gYWxsTW92ZW1lbnRzO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIG1vdmVtZW50cyBmb3IgYSBzcGVjaWZpYyBzZXF1ZW5jZSArIHZhcmlhdGlvbiBjb21iaW5hdGlvblxuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZVNlcXVlbmNlVmFyaWF0aW9uKFxuICAgIHNlcXVlbmNlOiBQb3NpdGlvblNlcXVlbmNlLFxuICAgIHZhcmlhdGlvbjogVmFyaWF0aW9uUnVsZSxcbiAgICBiYXNlUGFyYW1zOiBCYXNlUGFyYW1ldGVyc1xuICApOiBQaWN0b2dyYXBoRGF0YVtdIHtcbiAgICBjb25zdCBtb3ZlbWVudHM6IFBpY3RvZ3JhcGhEYXRhW10gPSBbXTtcbiAgICBsZXQgcG9zaXRpb25zID0gWy4uLnNlcXVlbmNlLnBvc2l0aW9uc107XG5cbiAgICAvLyBBcHBseSBzZXF1ZW5jZSBtb2RpZmllclxuICAgIGlmICh2YXJpYXRpb24uc2VxdWVuY2VNb2RpZmllciA9PT0gXCJyZXZlcnNlXCIpIHtcbiAgICAgIC8vIEZvciByZXZlcnNlLCB3ZSBuZWVkIHRoZSByZXZlcnNlIHRyYXZlcnNhbCBvcmRlclxuICAgICAgLy8gQWxwaGE6IFs3LDUsMywxXSBvciBCZXRhLUFscGhhIGNyb3NzOiByZXZlcnNlIHBhaXJzXG4gICAgICBpZiAoc2VxdWVuY2UubmFtZSA9PT0gXCJhbHBoYV9jeWNsZVwiKSB7XG4gICAgICAgIC8vIEZvciBjb3VudGVyLWNsb2Nrd2lzZSwgd2Ugd2FudDogN+KGkjUsIDXihpIzLCAz4oaSMSwgMeKGkjdcbiAgICAgICAgLy8gU28gdGhlIHN0YXJ0aW5nIHBvc2l0aW9ucyBzaG91bGQgYmU6IFs3LDUsMywxXVxuICAgICAgICBwb3NpdGlvbnMgPSBbXG4gICAgICAgICAgR3JpZFBvc2l0aW9uLkFMUEhBNyxcbiAgICAgICAgICBHcmlkUG9zaXRpb24uQUxQSEE1LFxuICAgICAgICAgIEdyaWRQb3NpdGlvbi5BTFBIQTMsXG4gICAgICAgICAgR3JpZFBvc2l0aW9uLkFMUEhBMSxcbiAgICAgICAgXTtcbiAgICAgIH0gZWxzZSBpZiAoc2VxdWVuY2UubmFtZSA9PT0gXCJiZXRhX2FscGhhX2Nyb3NzXCIpIHtcbiAgICAgICAgcG9zaXRpb25zID0gW1xuICAgICAgICAgIEdyaWRQb3NpdGlvbi5CRVRBNyxcbiAgICAgICAgICBHcmlkUG9zaXRpb24uQUxQSEE1LFxuICAgICAgICAgIEdyaWRQb3NpdGlvbi5CRVRBMSxcbiAgICAgICAgICBHcmlkUG9zaXRpb24uQUxQSEE3LFxuICAgICAgICAgIEdyaWRQb3NpdGlvbi5CRVRBNSxcbiAgICAgICAgICBHcmlkUG9zaXRpb24uQUxQSEEzLFxuICAgICAgICAgIEdyaWRQb3NpdGlvbi5CRVRBMyxcbiAgICAgICAgICBHcmlkUG9zaXRpb24uQUxQSEExLFxuICAgICAgICBdO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEdlbmVyYXRlIG1vdmVtZW50IHBhaXJzIC0gZm9yIGN5Y2xlcywgd2UgbmVlZCB0byBjb21wbGV0ZSB0aGUgbG9vcCBiYWNrIHRvIHN0YXJ0XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwb3NpdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHN0YXJ0UG9zID0gcG9zaXRpb25zW2ldO1xuICAgICAgY29uc3QgZW5kUG9zID0gcG9zaXRpb25zWyhpICsgMSkgJSBwb3NpdGlvbnMubGVuZ3RoXTsgLy8gVXNlIG1vZHVsbyB0byB3cmFwIGJhY2sgdG8gc3RhcnRcbiAgICAgIGNvbnN0IHRpbWluZyA9IHNlcXVlbmNlLnRpbWluZ1BhdHRlcm5baSAlIHNlcXVlbmNlLnRpbWluZ1BhdHRlcm4ubGVuZ3RoXTtcblxuICAgICAgY29uc3QgbW92ZW1lbnRQYXJhbXMgPSB0aGlzLmNyZWF0ZU1vdmVtZW50UGFyYW1zKFxuICAgICAgICBiYXNlUGFyYW1zLmxldHRlcixcbiAgICAgICAgc3RhcnRQb3MsXG4gICAgICAgIGVuZFBvcyxcbiAgICAgICAgdGltaW5nLFxuICAgICAgICBzZXF1ZW5jZS5kaXJlY3Rpb24sXG4gICAgICAgIHZhcmlhdGlvblxuICAgICAgKTtcblxuICAgICAgbW92ZW1lbnRzLnB1c2godGhpcy5jcmVhdGVQaWN0b2dyYXBoRnJvbU1vdmVtZW50KG1vdmVtZW50UGFyYW1zKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1vdmVtZW50cztcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgbW92ZW1lbnQgcGFyYW1ldGVycyB3aXRoIGNhbGN1bGF0ZWQgbG9jYXRpb25zXG4gICAqL1xuICBwcml2YXRlIGNyZWF0ZU1vdmVtZW50UGFyYW1zKFxuICAgIGxldHRlcjogc3RyaW5nLFxuICAgIHN0YXJ0UG9zOiBHcmlkUG9zaXRpb24sXG4gICAgZW5kUG9zOiBHcmlkUG9zaXRpb24sXG4gICAgdGltaW5nOiBUaW1pbmcsXG4gICAgZGlyZWN0aW9uOiBEaXJlY3Rpb24sXG4gICAgdmFyaWF0aW9uOiBWYXJpYXRpb25SdWxlXG4gICk6IE1vdmVtZW50UGFyYW1zIHtcbiAgICBjb25zdCBzdGFydE1hcHBpbmcgPSB0aGlzLnBvc2l0aW9uTWFwcGluZ3Nbc3RhcnRQb3NdO1xuICAgIGNvbnN0IGVuZE1hcHBpbmcgPSB0aGlzLnBvc2l0aW9uTWFwcGluZ3NbZW5kUG9zXTtcblxuICAgIGlmICghc3RhcnRNYXBwaW5nIHx8ICFlbmRNYXBwaW5nKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBQb3NpdGlvbiBtYXBwaW5nIG5vdCBmb3VuZCBmb3IgJHtzdGFydFBvc30gb3IgJHtlbmRQb3N9YFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCBbYmx1ZVN0YXJ0LCByZWRTdGFydF0gPSBzdGFydE1hcHBpbmc7XG4gICAgY29uc3QgW2JsdWVFbmQsIHJlZEVuZF0gPSBlbmRNYXBwaW5nO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGxldHRlcixcbiAgICAgIHN0YXJ0UG9zaXRpb246IHN0YXJ0UG9zLFxuICAgICAgZW5kUG9zaXRpb246IGVuZFBvcyxcbiAgICAgIHRpbWluZyxcbiAgICAgIGRpcmVjdGlvbixcbiAgICAgIGJsdWVNb3Rpb246IHZhcmlhdGlvbi5ibHVlTW90aW9uLFxuICAgICAgcmVkTW90aW9uOiB2YXJpYXRpb24ucmVkTW90aW9uLFxuICAgICAgYmx1ZVJvdGF0aW9uOiB2YXJpYXRpb24uYmx1ZVJvdGF0aW9uLFxuICAgICAgcmVkUm90YXRpb246IHZhcmlhdGlvbi5yZWRSb3RhdGlvbixcbiAgICAgIGJsdWVTdGFydExvY2F0aW9uOiBibHVlU3RhcnQsXG4gICAgICBibHVlRW5kTG9jYXRpb246IGJsdWVFbmQsXG4gICAgICByZWRTdGFydExvY2F0aW9uOiByZWRTdGFydCxcbiAgICAgIHJlZEVuZExvY2F0aW9uOiByZWRFbmQsXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgY29tcGxldGUgUGljdG9ncmFwaERhdGEgZnJvbSBtb3ZlbWVudCBwYXJhbWV0ZXJzXG4gICAqL1xuICBwcml2YXRlIGNyZWF0ZVBpY3RvZ3JhcGhGcm9tTW92ZW1lbnQocGFyYW1zOiBNb3ZlbWVudFBhcmFtcyk6IFBpY3RvZ3JhcGhEYXRhIHtcbiAgICByZXR1cm4gY3JlYXRlUGljdG9ncmFwaERhdGEoe1xuICAgICAgaWQ6IGNyeXB0by5yYW5kb21VVUlEKCksXG4gICAgICBsZXR0ZXI6IHBhcmFtcy5sZXR0ZXIsXG4gICAgICBzdGFydFBvc2l0aW9uOiBwYXJhbXMuc3RhcnRQb3NpdGlvbixcbiAgICAgIGVuZFBvc2l0aW9uOiBwYXJhbXMuZW5kUG9zaXRpb24sXG4gICAgICB0aW1pbmc6IHBhcmFtcy50aW1pbmcsXG4gICAgICBkaXJlY3Rpb246IHBhcmFtcy5kaXJlY3Rpb24sXG4gICAgICBsZXR0ZXJUeXBlOiBMZXR0ZXJUeXBlLlRZUEUxLFxuICAgICAgZ3JpZERhdGE6IGNyZWF0ZUdyaWREYXRhKHsgZ3JpZE1vZGU6IEdyaWRNb2RlLkRJQU1PTkQgfSksXG4gICAgICBhcnJvd3M6IHtcbiAgICAgICAgYmx1ZTogY3JlYXRlQXJyb3dEYXRhKHtcbiAgICAgICAgICBhcnJvd1R5cGU6IEFycm93VHlwZS5CTFVFLFxuICAgICAgICAgIGNvbG9yOiBNb3Rpb25Db2xvci5CTFVFLFxuICAgICAgICAgIG1vdGlvblR5cGU6IHBhcmFtcy5ibHVlTW90aW9uLFxuICAgICAgICAgIHJvdGF0aW9uRGlyZWN0aW9uOiBwYXJhbXMuYmx1ZVJvdGF0aW9uLFxuICAgICAgICAgIGlzVmlzaWJsZTogdHJ1ZSxcbiAgICAgICAgfSksXG4gICAgICAgIHJlZDogY3JlYXRlQXJyb3dEYXRhKHtcbiAgICAgICAgICBhcnJvd1R5cGU6IEFycm93VHlwZS5SRUQsXG4gICAgICAgICAgY29sb3I6IE1vdGlvbkNvbG9yLlJFRCxcbiAgICAgICAgICBtb3Rpb25UeXBlOiBwYXJhbXMucmVkTW90aW9uLFxuICAgICAgICAgIHJvdGF0aW9uRGlyZWN0aW9uOiBwYXJhbXMucmVkUm90YXRpb24sXG4gICAgICAgICAgaXNWaXNpYmxlOiB0cnVlLFxuICAgICAgICB9KSxcbiAgICAgIH0sXG4gICAgICBwcm9wczoge1xuICAgICAgICBibHVlOiBjcmVhdGVQcm9wRGF0YSh7XG4gICAgICAgICAgY29sb3I6IE1vdGlvbkNvbG9yLkJMVUUsXG4gICAgICAgICAgcm90YXRpb25EaXJlY3Rpb246IHBhcmFtcy5ibHVlUm90YXRpb24sXG4gICAgICAgIH0pLFxuICAgICAgICByZWQ6IGNyZWF0ZVByb3BEYXRhKHtcbiAgICAgICAgICBjb2xvcjogTW90aW9uQ29sb3IuUkVELFxuICAgICAgICAgIHJvdGF0aW9uRGlyZWN0aW9uOiBwYXJhbXMucmVkUm90YXRpb24sXG4gICAgICAgIH0pLFxuICAgICAgfSxcbiAgICAgIG1vdGlvbnM6IHtcbiAgICAgICAgYmx1ZTogY3JlYXRlTW90aW9uRGF0YSh7XG4gICAgICAgICAgbW90aW9uVHlwZTogcGFyYW1zLmJsdWVNb3Rpb24sXG4gICAgICAgICAgcm90YXRpb25EaXJlY3Rpb246IHBhcmFtcy5ibHVlUm90YXRpb24sXG4gICAgICAgICAgc3RhcnRMb2NhdGlvbjogcGFyYW1zLmJsdWVTdGFydExvY2F0aW9uLFxuICAgICAgICAgIGVuZExvY2F0aW9uOiBwYXJhbXMuYmx1ZUVuZExvY2F0aW9uLFxuICAgICAgICB9KSxcbiAgICAgICAgcmVkOiBjcmVhdGVNb3Rpb25EYXRhKHtcbiAgICAgICAgICBtb3Rpb25UeXBlOiBwYXJhbXMucmVkTW90aW9uLFxuICAgICAgICAgIHJvdGF0aW9uRGlyZWN0aW9uOiBwYXJhbXMucmVkUm90YXRpb24sXG4gICAgICAgICAgc3RhcnRMb2NhdGlvbjogcGFyYW1zLnJlZFN0YXJ0TG9jYXRpb24sXG4gICAgICAgICAgZW5kTG9jYXRpb246IHBhcmFtcy5yZWRFbmRMb2NhdGlvbixcbiAgICAgICAgfSksXG4gICAgICB9LFxuICAgICAgaXNCbGFuazogZmFsc2UsXG4gICAgICBpc01pcnJvcmVkOiBmYWxzZSxcbiAgICAgIG1ldGFkYXRhOiB7fSxcbiAgICB9KTtcbiAgfVxufVxuIl0s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