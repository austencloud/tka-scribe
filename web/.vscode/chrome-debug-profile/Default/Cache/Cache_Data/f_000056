import { Location, MotionType } from "/src/lib/domain/index.ts";
export class ArrowRotationCalculator {
  /**
   * Pure algorithmic service for calculating arrow rotation angles.
   *
   * Implements rotation calculation algorithms without any UI dependencies.
   * Each motion type has its own rotation strategy based on proven algorithms.
   */
  staticRotationMap = {
    [Location.NORTH]: 180,
    [Location.NORTHEAST]: 225,
    [Location.EAST]: 270,
    [Location.SOUTHEAST]: 315,
    [Location.SOUTH]: 0,
    [Location.SOUTHWEST]: 45,
    [Location.WEST]: 90,
    [Location.NORTHWEST]: 135
  };
  proClockwiseMap = {
    [Location.NORTH]: 225,
    [Location.EAST]: 315,
    [Location.SOUTH]: 45,
    [Location.WEST]: 135,
    [Location.NORTHEAST]: 0,
    [Location.SOUTHEAST]: 90,
    [Location.SOUTHWEST]: 180,
    [Location.NORTHWEST]: 270
  };
  proCounterClockwiseMap = {
    [Location.NORTH]: 225,
    [Location.EAST]: 135,
    [Location.SOUTH]: 45,
    [Location.WEST]: 315,
    [Location.NORTHEAST]: 90,
    [Location.SOUTHEAST]: 180,
    [Location.SOUTHWEST]: 270,
    [Location.NORTHWEST]: 0
  };
  antiClockwiseMap = {
    [Location.NORTH]: 315,
    [Location.EAST]: 225,
    [Location.SOUTH]: 135,
    [Location.WEST]: 45,
    [Location.NORTHEAST]: 90,
    [Location.SOUTHEAST]: 180,
    [Location.SOUTHWEST]: 270,
    [Location.NORTHWEST]: 0
  };
  antiCounterClockwiseMap = {
    [Location.NORTH]: 315,
    [Location.EAST]: 45,
    [Location.SOUTH]: 135,
    [Location.WEST]: 225,
    [Location.NORTHEAST]: 0,
    [Location.SOUTHEAST]: 90,
    [Location.SOUTHWEST]: 180,
    [Location.NORTHWEST]: 270
  };
  dashClockwiseMap = {
    [Location.NORTH]: 270,
    [Location.EAST]: 0,
    [Location.SOUTH]: 90,
    [Location.WEST]: 180,
    [Location.NORTHEAST]: 315,
    [Location.SOUTHEAST]: 45,
    [Location.SOUTHWEST]: 135,
    [Location.NORTHWEST]: 225
  };
  dashCounterClockwiseMap = {
    [Location.NORTH]: 270,
    [Location.EAST]: 180,
    [Location.SOUTH]: 90,
    [Location.WEST]: 0,
    [Location.NORTHEAST]: 225,
    [Location.SOUTHEAST]: 135,
    [Location.SOUTHWEST]: 45,
    [Location.NORTHWEST]: 315
  };
  dashNoRotationMap = {
    [`${Location.NORTH},${Location.SOUTH}`]: 90,
    [`${Location.EAST},${Location.WEST}`]: 180,
    [`${Location.SOUTH},${Location.NORTH}`]: 270,
    [`${Location.WEST},${Location.EAST}`]: 0,
    [`${Location.SOUTHEAST},${Location.NORTHWEST}`]: 225,
    [`${Location.SOUTHWEST},${Location.NORTHEAST}`]: 315,
    [`${Location.NORTHWEST},${Location.SOUTHEAST}`]: 45,
    [`${Location.NORTHEAST},${Location.SOUTHWEST}`]: 135
  };
  calculateRotation(motion, location) {
    const motionType = motion.motionType?.toLowerCase();
    switch (motionType) {
      case "static":
        return this.calculateStaticRotation(location);
      case "pro":
        return this.calculateProRotation(motion, location);
      case "anti":
        return this.calculateAntiRotation(motion, location);
      case "dash":
        return this.calculateDashRotation(motion, location);
      case "float":
        return this.calculateFloatRotation(motion, location);
      default:
        console.warn(`Unknown motion type: ${motionType}, returning 0.0`);
        return 0;
    }
  }
  calculateStaticRotation(location) {
    return this.staticRotationMap[location] || 0;
  }
  calculateProRotation(motion, location) {
    const rotationDirection = motion.rotationDirection?.toLowerCase();
    if (rotationDirection === "clockwise" || rotationDirection === "cw") {
      return this.proClockwiseMap[location] || 0;
    } else {
      return this.proCounterClockwiseMap[location] || 0;
    }
  }
  calculateAntiRotation(motion, location) {
    const rotationDirection = motion.rotationDirection?.toLowerCase();
    if (rotationDirection === "clockwise" || rotationDirection === "cw") {
      return this.antiClockwiseMap[location] || 0;
    } else {
      return this.antiCounterClockwiseMap[location] || 0;
    }
  }
  calculateDashRotation(motion, location) {
    const rotationDirection = motion.rotationDirection?.toLowerCase();
    if (rotationDirection === "noRotation" || rotationDirection === "none") {
      const key = `${motion.startLocation},${motion.endLocation}`;
      return this.dashNoRotationMap[key] || 0;
    }
    if (rotationDirection === "clockwise" || rotationDirection === "cw") {
      return this.dashClockwiseMap[location] || 0;
    } else {
      return this.dashCounterClockwiseMap[location] || 0;
    }
  }
  calculateFloatRotation(motion, location) {
    return this.calculateProRotation(motion, location);
  }
  getSupportedMotionTypes() {
    return [
      MotionType.STATIC,
      MotionType.PRO,
      MotionType.ANTI,
      MotionType.DASH,
      MotionType.FLOAT
    ];
  }
  validateMotionData(motion) {
    if (!motion) {
      return false;
    }
    const motionType = motion.motionType?.toLowerCase();
    if (!this.getSupportedMotionTypes().includes(motionType)) {
      return false;
    }
    if (!motion.rotationDirection) {
      return false;
    }
    return true;
  }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkFycm93Um90YXRpb25DYWxjdWxhdG9yLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgTW90aW9uRGF0YSB9IGZyb20gXCIkbGliL2RvbWFpblwiO1xuaW1wb3J0IHsgTG9jYXRpb24sIE1vdGlvblR5cGUgfSBmcm9tIFwiJGxpYi9kb21haW5cIjtcblxuZXhwb3J0IGludGVyZmFjZSBJQXJyb3dSb3RhdGlvbkNhbGN1bGF0b3Ige1xuICBjYWxjdWxhdGVSb3RhdGlvbihtb3Rpb246IE1vdGlvbkRhdGEsIGxvY2F0aW9uOiBMb2NhdGlvbik6IG51bWJlcjtcbiAgZ2V0U3VwcG9ydGVkTW90aW9uVHlwZXMoKTogTW90aW9uVHlwZVtdO1xuICB2YWxpZGF0ZU1vdGlvbkRhdGEobW90aW9uOiBNb3Rpb25EYXRhKTogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNsYXNzIEFycm93Um90YXRpb25DYWxjdWxhdG9yIGltcGxlbWVudHMgSUFycm93Um90YXRpb25DYWxjdWxhdG9yIHtcbiAgLyoqXG4gICAqIFB1cmUgYWxnb3JpdGhtaWMgc2VydmljZSBmb3IgY2FsY3VsYXRpbmcgYXJyb3cgcm90YXRpb24gYW5nbGVzLlxuICAgKlxuICAgKiBJbXBsZW1lbnRzIHJvdGF0aW9uIGNhbGN1bGF0aW9uIGFsZ29yaXRobXMgd2l0aG91dCBhbnkgVUkgZGVwZW5kZW5jaWVzLlxuICAgKiBFYWNoIG1vdGlvbiB0eXBlIGhhcyBpdHMgb3duIHJvdGF0aW9uIHN0cmF0ZWd5IGJhc2VkIG9uIHByb3ZlbiBhbGdvcml0aG1zLlxuICAgKi9cblxuICBwcml2YXRlIHJlYWRvbmx5IHN0YXRpY1JvdGF0aW9uTWFwOiBSZWNvcmQ8TG9jYXRpb24sIG51bWJlcj4gPSB7XG4gICAgW0xvY2F0aW9uLk5PUlRIXTogMTgwLjAsXG4gICAgW0xvY2F0aW9uLk5PUlRIRUFTVF06IDIyNS4wLFxuICAgIFtMb2NhdGlvbi5FQVNUXTogMjcwLjAsXG4gICAgW0xvY2F0aW9uLlNPVVRIRUFTVF06IDMxNS4wLFxuICAgIFtMb2NhdGlvbi5TT1VUSF06IDAuMCxcbiAgICBbTG9jYXRpb24uU09VVEhXRVNUXTogNDUuMCxcbiAgICBbTG9jYXRpb24uV0VTVF06IDkwLjAsXG4gICAgW0xvY2F0aW9uLk5PUlRIV0VTVF06IDEzNS4wLFxuICB9O1xuXG4gIHByaXZhdGUgcmVhZG9ubHkgcHJvQ2xvY2t3aXNlTWFwOiBSZWNvcmQ8TG9jYXRpb24sIG51bWJlcj4gPSB7XG4gICAgW0xvY2F0aW9uLk5PUlRIXTogMjI1LFxuICAgIFtMb2NhdGlvbi5FQVNUXTogMzE1LFxuICAgIFtMb2NhdGlvbi5TT1VUSF06IDQ1LFxuICAgIFtMb2NhdGlvbi5XRVNUXTogMTM1LFxuICAgIFtMb2NhdGlvbi5OT1JUSEVBU1RdOiAwLFxuICAgIFtMb2NhdGlvbi5TT1VUSEVBU1RdOiA5MCxcbiAgICBbTG9jYXRpb24uU09VVEhXRVNUXTogMTgwLFxuICAgIFtMb2NhdGlvbi5OT1JUSFdFU1RdOiAyNzAsXG4gIH07XG5cbiAgcHJpdmF0ZSByZWFkb25seSBwcm9Db3VudGVyQ2xvY2t3aXNlTWFwOiBSZWNvcmQ8TG9jYXRpb24sIG51bWJlcj4gPSB7XG4gICAgW0xvY2F0aW9uLk5PUlRIXTogMjI1LFxuICAgIFtMb2NhdGlvbi5FQVNUXTogMTM1LFxuICAgIFtMb2NhdGlvbi5TT1VUSF06IDQ1LFxuICAgIFtMb2NhdGlvbi5XRVNUXTogMzE1LFxuICAgIFtMb2NhdGlvbi5OT1JUSEVBU1RdOiA5MCxcbiAgICBbTG9jYXRpb24uU09VVEhFQVNUXTogMTgwLFxuICAgIFtMb2NhdGlvbi5TT1VUSFdFU1RdOiAyNzAsXG4gICAgW0xvY2F0aW9uLk5PUlRIV0VTVF06IDAsXG4gIH07XG5cbiAgcHJpdmF0ZSByZWFkb25seSBhbnRpQ2xvY2t3aXNlTWFwOiBSZWNvcmQ8TG9jYXRpb24sIG51bWJlcj4gPSB7XG4gICAgW0xvY2F0aW9uLk5PUlRIXTogMzE1LFxuICAgIFtMb2NhdGlvbi5FQVNUXTogMjI1LFxuICAgIFtMb2NhdGlvbi5TT1VUSF06IDEzNSxcbiAgICBbTG9jYXRpb24uV0VTVF06IDQ1LFxuICAgIFtMb2NhdGlvbi5OT1JUSEVBU1RdOiA5MCxcbiAgICBbTG9jYXRpb24uU09VVEhFQVNUXTogMTgwLFxuICAgIFtMb2NhdGlvbi5TT1VUSFdFU1RdOiAyNzAsXG4gICAgW0xvY2F0aW9uLk5PUlRIV0VTVF06IDAsXG4gIH07XG5cbiAgcHJpdmF0ZSByZWFkb25seSBhbnRpQ291bnRlckNsb2Nrd2lzZU1hcDogUmVjb3JkPExvY2F0aW9uLCBudW1iZXI+ID0ge1xuICAgIFtMb2NhdGlvbi5OT1JUSF06IDMxNSxcbiAgICBbTG9jYXRpb24uRUFTVF06IDQ1LFxuICAgIFtMb2NhdGlvbi5TT1VUSF06IDEzNSxcbiAgICBbTG9jYXRpb24uV0VTVF06IDIyNSxcbiAgICBbTG9jYXRpb24uTk9SVEhFQVNUXTogMCxcbiAgICBbTG9jYXRpb24uU09VVEhFQVNUXTogOTAsXG4gICAgW0xvY2F0aW9uLlNPVVRIV0VTVF06IDE4MCxcbiAgICBbTG9jYXRpb24uTk9SVEhXRVNUXTogMjcwLFxuICB9O1xuXG4gIHByaXZhdGUgcmVhZG9ubHkgZGFzaENsb2Nrd2lzZU1hcDogUmVjb3JkPExvY2F0aW9uLCBudW1iZXI+ID0ge1xuICAgIFtMb2NhdGlvbi5OT1JUSF06IDI3MCxcbiAgICBbTG9jYXRpb24uRUFTVF06IDAsXG4gICAgW0xvY2F0aW9uLlNPVVRIXTogOTAsXG4gICAgW0xvY2F0aW9uLldFU1RdOiAxODAsXG4gICAgW0xvY2F0aW9uLk5PUlRIRUFTVF06IDMxNSxcbiAgICBbTG9jYXRpb24uU09VVEhFQVNUXTogNDUsXG4gICAgW0xvY2F0aW9uLlNPVVRIV0VTVF06IDEzNSxcbiAgICBbTG9jYXRpb24uTk9SVEhXRVNUXTogMjI1LFxuICB9O1xuXG4gIHByaXZhdGUgcmVhZG9ubHkgZGFzaENvdW50ZXJDbG9ja3dpc2VNYXA6IFJlY29yZDxMb2NhdGlvbiwgbnVtYmVyPiA9IHtcbiAgICBbTG9jYXRpb24uTk9SVEhdOiAyNzAsXG4gICAgW0xvY2F0aW9uLkVBU1RdOiAxODAsXG4gICAgW0xvY2F0aW9uLlNPVVRIXTogOTAsXG4gICAgW0xvY2F0aW9uLldFU1RdOiAwLFxuICAgIFtMb2NhdGlvbi5OT1JUSEVBU1RdOiAyMjUsXG4gICAgW0xvY2F0aW9uLlNPVVRIRUFTVF06IDEzNSxcbiAgICBbTG9jYXRpb24uU09VVEhXRVNUXTogNDUsXG4gICAgW0xvY2F0aW9uLk5PUlRIV0VTVF06IDMxNSxcbiAgfTtcblxuICBwcml2YXRlIHJlYWRvbmx5IGRhc2hOb1JvdGF0aW9uTWFwOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge1xuICAgIFtgJHtMb2NhdGlvbi5OT1JUSH0sJHtMb2NhdGlvbi5TT1VUSH1gXTogOTAsXG4gICAgW2Ake0xvY2F0aW9uLkVBU1R9LCR7TG9jYXRpb24uV0VTVH1gXTogMTgwLFxuICAgIFtgJHtMb2NhdGlvbi5TT1VUSH0sJHtMb2NhdGlvbi5OT1JUSH1gXTogMjcwLFxuICAgIFtgJHtMb2NhdGlvbi5XRVNUfSwke0xvY2F0aW9uLkVBU1R9YF06IDAsXG4gICAgW2Ake0xvY2F0aW9uLlNPVVRIRUFTVH0sJHtMb2NhdGlvbi5OT1JUSFdFU1R9YF06IDIyNSxcbiAgICBbYCR7TG9jYXRpb24uU09VVEhXRVNUfSwke0xvY2F0aW9uLk5PUlRIRUFTVH1gXTogMzE1LFxuICAgIFtgJHtMb2NhdGlvbi5OT1JUSFdFU1R9LCR7TG9jYXRpb24uU09VVEhFQVNUfWBdOiA0NSxcbiAgICBbYCR7TG9jYXRpb24uTk9SVEhFQVNUfSwke0xvY2F0aW9uLlNPVVRIV0VTVH1gXTogMTM1LFxuICB9O1xuXG4gIGNhbGN1bGF0ZVJvdGF0aW9uKG1vdGlvbjogTW90aW9uRGF0YSwgbG9jYXRpb246IExvY2F0aW9uKTogbnVtYmVyIHtcbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGUgYXJyb3cgcm90YXRpb24gYW5nbGUgYmFzZWQgb24gbW90aW9uIHR5cGUgYW5kIGxvY2F0aW9uLlxuICAgICAqXG4gICAgICogQXJnczpcbiAgICAgKiAgICAgbW90aW9uOiBNb3Rpb24gZGF0YSBjb250YWluaW5nIHR5cGUgYW5kIHJvdGF0aW9uIGRpcmVjdGlvblxuICAgICAqICAgICBsb2NhdGlvbjogQ2FsY3VsYXRlZCBhcnJvdyBsb2NhdGlvblxuICAgICAqXG4gICAgICogUmV0dXJuczpcbiAgICAgKiAgICAgUm90YXRpb24gYW5nbGUgaW4gZGVncmVlcyAoMC0zNjApXG4gICAgICovXG4gICAgY29uc3QgbW90aW9uVHlwZSA9IG1vdGlvbi5tb3Rpb25UeXBlPy50b0xvd2VyQ2FzZSgpO1xuXG4gICAgc3dpdGNoIChtb3Rpb25UeXBlKSB7XG4gICAgICBjYXNlIFwic3RhdGljXCI6XG4gICAgICAgIHJldHVybiB0aGlzLmNhbGN1bGF0ZVN0YXRpY1JvdGF0aW9uKGxvY2F0aW9uKTtcbiAgICAgIGNhc2UgXCJwcm9cIjpcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FsY3VsYXRlUHJvUm90YXRpb24obW90aW9uLCBsb2NhdGlvbik7XG4gICAgICBjYXNlIFwiYW50aVwiOlxuICAgICAgICByZXR1cm4gdGhpcy5jYWxjdWxhdGVBbnRpUm90YXRpb24obW90aW9uLCBsb2NhdGlvbik7XG4gICAgICBjYXNlIFwiZGFzaFwiOlxuICAgICAgICByZXR1cm4gdGhpcy5jYWxjdWxhdGVEYXNoUm90YXRpb24obW90aW9uLCBsb2NhdGlvbik7XG4gICAgICBjYXNlIFwiZmxvYXRcIjpcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FsY3VsYXRlRmxvYXRSb3RhdGlvbihtb3Rpb24sIGxvY2F0aW9uKTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGNvbnNvbGUud2FybihgVW5rbm93biBtb3Rpb24gdHlwZTogJHttb3Rpb25UeXBlfSwgcmV0dXJuaW5nIDAuMGApO1xuICAgICAgICByZXR1cm4gMC4wO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgY2FsY3VsYXRlU3RhdGljUm90YXRpb24obG9jYXRpb246IExvY2F0aW9uKTogbnVtYmVyIHtcbiAgICAvKipDYWxjdWxhdGUgcm90YXRpb24gZm9yIHN0YXRpYyBhcnJvd3MgKHBvaW50IGlud2FyZCkuKi9cbiAgICByZXR1cm4gdGhpcy5zdGF0aWNSb3RhdGlvbk1hcFtsb2NhdGlvbl0gfHwgMC4wO1xuICB9XG5cbiAgcHJpdmF0ZSBjYWxjdWxhdGVQcm9Sb3RhdGlvbihtb3Rpb246IE1vdGlvbkRhdGEsIGxvY2F0aW9uOiBMb2NhdGlvbik6IG51bWJlciB7XG4gICAgLyoqQ2FsY3VsYXRlIHJvdGF0aW9uIGZvciBQUk8gYXJyb3dzIGJhc2VkIG9uIHJvdGF0aW9uIGRpcmVjdGlvbi4qL1xuICAgIGNvbnN0IHJvdGF0aW9uRGlyZWN0aW9uID0gbW90aW9uLnJvdGF0aW9uRGlyZWN0aW9uPy50b0xvd2VyQ2FzZSgpO1xuICAgIGlmIChyb3RhdGlvbkRpcmVjdGlvbiA9PT0gXCJjbG9ja3dpc2VcIiB8fCByb3RhdGlvbkRpcmVjdGlvbiA9PT0gXCJjd1wiKSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm9DbG9ja3dpc2VNYXBbbG9jYXRpb25dIHx8IDAuMDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMucHJvQ291bnRlckNsb2Nrd2lzZU1hcFtsb2NhdGlvbl0gfHwgMC4wO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgY2FsY3VsYXRlQW50aVJvdGF0aW9uKFxuICAgIG1vdGlvbjogTW90aW9uRGF0YSxcbiAgICBsb2NhdGlvbjogTG9jYXRpb25cbiAgKTogbnVtYmVyIHtcbiAgICAvKipDYWxjdWxhdGUgcm90YXRpb24gZm9yIEFOVEkgYXJyb3dzIGJhc2VkIG9uIHJvdGF0aW9uIGRpcmVjdGlvbi4qL1xuICAgIGNvbnN0IHJvdGF0aW9uRGlyZWN0aW9uID0gbW90aW9uLnJvdGF0aW9uRGlyZWN0aW9uPy50b0xvd2VyQ2FzZSgpO1xuICAgIGlmIChyb3RhdGlvbkRpcmVjdGlvbiA9PT0gXCJjbG9ja3dpc2VcIiB8fCByb3RhdGlvbkRpcmVjdGlvbiA9PT0gXCJjd1wiKSB7XG4gICAgICByZXR1cm4gdGhpcy5hbnRpQ2xvY2t3aXNlTWFwW2xvY2F0aW9uXSB8fCAwLjA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLmFudGlDb3VudGVyQ2xvY2t3aXNlTWFwW2xvY2F0aW9uXSB8fCAwLjA7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjYWxjdWxhdGVEYXNoUm90YXRpb24oXG4gICAgbW90aW9uOiBNb3Rpb25EYXRhLFxuICAgIGxvY2F0aW9uOiBMb2NhdGlvblxuICApOiBudW1iZXIge1xuICAgIC8qKkNhbGN1bGF0ZSByb3RhdGlvbiBmb3IgREFTSCBhcnJvd3Mgd2l0aCBzcGVjaWFsIE5PX1JPVEFUSU9OIGhhbmRsaW5nLiovXG4gICAgY29uc3Qgcm90YXRpb25EaXJlY3Rpb24gPSBtb3Rpb24ucm90YXRpb25EaXJlY3Rpb24/LnRvTG93ZXJDYXNlKCk7XG5cbiAgICBpZiAocm90YXRpb25EaXJlY3Rpb24gPT09IFwibm9Sb3RhdGlvblwiIHx8IHJvdGF0aW9uRGlyZWN0aW9uID09PSBcIm5vbmVcIikge1xuICAgICAgY29uc3Qga2V5ID0gYCR7bW90aW9uLnN0YXJ0TG9jYXRpb259LCR7bW90aW9uLmVuZExvY2F0aW9ufWA7XG4gICAgICByZXR1cm4gdGhpcy5kYXNoTm9Sb3RhdGlvbk1hcFtrZXldIHx8IDAuMDtcbiAgICB9XG5cbiAgICBpZiAocm90YXRpb25EaXJlY3Rpb24gPT09IFwiY2xvY2t3aXNlXCIgfHwgcm90YXRpb25EaXJlY3Rpb24gPT09IFwiY3dcIikge1xuICAgICAgcmV0dXJuIHRoaXMuZGFzaENsb2Nrd2lzZU1hcFtsb2NhdGlvbl0gfHwgMC4wO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5kYXNoQ291bnRlckNsb2Nrd2lzZU1hcFtsb2NhdGlvbl0gfHwgMC4wO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgY2FsY3VsYXRlRmxvYXRSb3RhdGlvbihcbiAgICBtb3Rpb246IE1vdGlvbkRhdGEsXG4gICAgbG9jYXRpb246IExvY2F0aW9uXG4gICk6IG51bWJlciB7XG4gICAgLyoqQ2FsY3VsYXRlIHJvdGF0aW9uIGZvciBGTE9BVCBhcnJvd3MgKHNpbWlsYXIgdG8gUFJPKS4qL1xuICAgIHJldHVybiB0aGlzLmNhbGN1bGF0ZVByb1JvdGF0aW9uKG1vdGlvbiwgbG9jYXRpb24pO1xuICB9XG5cbiAgZ2V0U3VwcG9ydGVkTW90aW9uVHlwZXMoKTogTW90aW9uVHlwZVtdIHtcbiAgICAvKipHZXQgbGlzdCBvZiBtb3Rpb24gdHlwZXMgc3VwcG9ydGVkIGJ5IHRoaXMgY2FsY3VsYXRvci4qL1xuICAgIHJldHVybiBbXG4gICAgICBNb3Rpb25UeXBlLlNUQVRJQyxcbiAgICAgIE1vdGlvblR5cGUuUFJPLFxuICAgICAgTW90aW9uVHlwZS5BTlRJLFxuICAgICAgTW90aW9uVHlwZS5EQVNILFxuICAgICAgTW90aW9uVHlwZS5GTE9BVCxcbiAgICBdO1xuICB9XG5cbiAgdmFsaWRhdGVNb3Rpb25EYXRhKG1vdGlvbjogTW90aW9uRGF0YSk6IGJvb2xlYW4ge1xuICAgIC8qKlZhbGlkYXRlIHRoYXQgbW90aW9uIGRhdGEgaXMgc3VpdGFibGUgZm9yIHJvdGF0aW9uIGNhbGN1bGF0aW9uLiovXG4gICAgaWYgKCFtb3Rpb24pIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBtb3Rpb25UeXBlID0gbW90aW9uLm1vdGlvblR5cGU/LnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKCF0aGlzLmdldFN1cHBvcnRlZE1vdGlvblR5cGVzKCkuaW5jbHVkZXMobW90aW9uVHlwZSBhcyBNb3Rpb25UeXBlKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmICghbW90aW9uLnJvdGF0aW9uRGlyZWN0aW9uKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6IkFBQ0EsU0FBUyxVQUFVLGtCQUFrQjtBQVE5QixhQUFNLHdCQUE0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