export class LayoutCalculationService {
  // Base constants matching desktop application
  static BASE_BEAT_SIZE = 144;
  // Match desktop beat.width()
  /**
   * Layout table for sequences WITH start position
   * Copied exactly from desktop get_layout_options_with_start()
   * Format: beatCount -> [columns, rows]
   */
  LAYOUT_WITH_START_POSITION = {
    0: [1, 1],
    1: [2, 1],
    2: [3, 1],
    3: [4, 1],
    4: [5, 1],
    5: [4, 2],
    6: [4, 2],
    7: [5, 2],
    8: [5, 2],
    9: [4, 3],
    10: [6, 2],
    11: [5, 3],
    12: [4, 4],
    13: [5, 4],
    14: [5, 4],
    15: [5, 4],
    16: [5, 4],
    17: [5, 5],
    18: [5, 5],
    19: [5, 5],
    20: [6, 4],
    21: [5, 6],
    22: [5, 6],
    23: [5, 6],
    24: [7, 4],
    25: [5, 7],
    26: [5, 7],
    27: [5, 7],
    28: [5, 7],
    29: [5, 8],
    30: [8, 4],
    31: [5, 8],
    32: [9, 4],
    33: [5, 9],
    34: [5, 9],
    35: [5, 9],
    36: [10, 4],
    37: [5, 10],
    38: [5, 10],
    39: [5, 10],
    40: [11, 4],
    41: [5, 11],
    42: [5, 11],
    43: [5, 11],
    44: [5, 11],
    45: [5, 12],
    46: [5, 12],
    47: [5, 12],
    48: [5, 12],
    49: [5, 13],
    50: [5, 13],
    51: [5, 13],
    52: [5, 13],
    53: [5, 14],
    54: [5, 14],
    55: [5, 14],
    56: [5, 14],
    57: [5, 15],
    58: [5, 15],
    59: [5, 15],
    60: [5, 15],
    61: [5, 16],
    62: [5, 16],
    63: [5, 16],
    64: [5, 16]
  };
  /**
   * Layout table for sequences WITHOUT start position
   * Copied exactly from desktop get_layout_options_without_start()
   * Format: beatCount -> [columns, rows]
   */
  LAYOUT_WITHOUT_START_POSITION = {
    0: [1, 1],
    1: [1, 1],
    2: [2, 1],
    3: [3, 1],
    4: [4, 1],
    5: [3, 2],
    6: [3, 2],
    7: [4, 2],
    8: [4, 2],
    9: [3, 3],
    10: [5, 2],
    11: [4, 3],
    12: [3, 4],
    13: [4, 4],
    14: [4, 4],
    15: [4, 4],
    16: [4, 4],
    17: [4, 5],
    18: [9, 2],
    19: [4, 5],
    20: [5, 4],
    21: [4, 6],
    22: [4, 6],
    23: [4, 6],
    24: [6, 4],
    25: [4, 7],
    26: [4, 7],
    27: [4, 7],
    28: [7, 4],
    29: [4, 8],
    30: [4, 8],
    31: [4, 8],
    32: [8, 4],
    33: [4, 9],
    34: [4, 9],
    35: [4, 9],
    36: [9, 4],
    37: [4, 10],
    38: [4, 10],
    39: [4, 10],
    40: [10, 4],
    41: [4, 11],
    42: [4, 11],
    43: [4, 11],
    44: [11, 4],
    45: [4, 12],
    46: [4, 12],
    47: [4, 12],
    48: [12, 4],
    49: [4, 13],
    50: [4, 13],
    51: [4, 13],
    52: [13, 4],
    53: [4, 14],
    54: [4, 14],
    55: [4, 14],
    56: [14, 4],
    57: [4, 15],
    58: [4, 15],
    59: [4, 15],
    60: [15, 4],
    61: [4, 16],
    62: [4, 16],
    63: [4, 16],
    64: [16, 4]
  };
  /**
   * Calculate optimal layout for given beat count
   * Matches desktop calculate_layout() method exactly
   */
  calculateLayout(beatCount, includeStartPosition) {
    if (!this.validateLayout(beatCount, includeStartPosition)) {
      throw new Error(
        `Invalid layout parameters: beatCount=${beatCount}, includeStartPosition=${includeStartPosition}`
      );
    }
    const layoutTable = includeStartPosition ? this.LAYOUT_WITH_START_POSITION : this.LAYOUT_WITHOUT_START_POSITION;
    if (beatCount in layoutTable) {
      return layoutTable[beatCount];
    }
    return this.getFallbackLayout(beatCount, includeStartPosition);
  }
  /**
   * Calculate image dimensions for layout
   * Matches desktop _create_image() method
   */
  calculateImageDimensions(layout, additionalHeight, beatScale = 1) {
    const [columns, rows] = layout;
    const beatSize = LayoutCalculationService.BASE_BEAT_SIZE * beatScale;
    const width = Math.floor(columns * beatSize);
    const height = Math.floor(rows * beatSize + additionalHeight);
    return [width, height];
  }
  /**
   * Get layout for current beat frame (compatibility method)
   * Matches desktop get_current_beat_frame_layout()
   */
  getCurrentBeatFrameLayout(beatCount) {
    return this.calculateLayout(beatCount, false);
  }
  /**
   * Validate layout parameters
   */
  validateLayout(beatCount, includeStartPosition) {
    if (beatCount < 0) {
      return false;
    }
    if (beatCount > 1e3) {
      return false;
    }
    if (typeof includeStartPosition !== "boolean") {
      return false;
    }
    return true;
  }
  /**
   * Generate fallback layout for beat counts beyond predefined tables
   * Matches desktop fallback behavior
   */
  getFallbackLayout(beatCount, includeStartPosition) {
    if (beatCount === 0) {
      return [1, 1];
    }
    const totalCells = includeStartPosition ? beatCount + 1 : beatCount;
    const aspectRatio = 1.2;
    const idealHeight = Math.sqrt(totalCells / aspectRatio);
    const rows = Math.max(1, Math.round(idealHeight));
    const columns = Math.max(1, Math.ceil(totalCells / rows));
    return [columns, rows];
  }
  /**
   * Get base beat size constant
   */
  static getBaseBeatSize() {
    return LayoutCalculationService.BASE_BEAT_SIZE;
  }
  /**
   * Calculate total image area for layout
   */
  calculateImageArea(beatCount, includeStartPosition, additionalHeight, beatScale = 1) {
    const layout = this.calculateLayout(beatCount, includeStartPosition);
    const [width, height] = this.calculateImageDimensions(
      layout,
      additionalHeight,
      beatScale
    );
    return width * height;
  }
  /**
   * Get layout efficiency (how well beats fill the grid)
   */
  getLayoutEfficiency(beatCount, includeStartPosition) {
    if (beatCount === 0) return 1;
    const layout = this.calculateLayout(beatCount, includeStartPosition);
    const [columns, rows] = layout;
    const totalCells = columns * rows;
    const usedCells = includeStartPosition ? beatCount + 1 : beatCount;
    return usedCells / totalCells;
  }
  /**
   * Get all available layouts within a beat count range
   */
  getLayoutsInRange(minBeats, maxBeats, includeStartPosition) {
    const results = [];
    for (let beatCount = minBeats; beatCount <= maxBeats; beatCount++) {
      if (this.validateLayout(beatCount, includeStartPosition)) {
        const layout = this.calculateLayout(beatCount, includeStartPosition);
        const efficiency = this.getLayoutEfficiency(
          beatCount,
          includeStartPosition
        );
        results.push({
          beatCount,
          layout,
          efficiency
        });
      }
    }
    return results;
  }
  /**
   * Debug method to verify layout table integrity
   */
  validateLayoutTables() {
    const errors = [];
    for (const [beatCount, layout] of Object.entries(
      this.LAYOUT_WITH_START_POSITION
    )) {
      const [columns, rows] = layout;
      const totalCells = columns * rows;
      const requiredCells = parseInt(beatCount) + 1;
      if (totalCells < requiredCells) {
        errors.push(
          `WITH_START[${beatCount}]: ${columns}×${rows} = ${totalCells} cells < ${requiredCells} required`
        );
      }
    }
    for (const [beatCount, layout] of Object.entries(
      this.LAYOUT_WITHOUT_START_POSITION
    )) {
      const [columns, rows] = layout;
      const totalCells = columns * rows;
      const requiredCells = parseInt(beatCount);
      if (totalCells < requiredCells) {
        errors.push(
          `WITHOUT_START[${beatCount}]: ${columns}×${rows} = ${totalCells} cells < ${requiredCells} required`
        );
      }
    }
    return {
      valid: errors.length === 0,
      errors
    };
  }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkxheW91dENhbGN1bGF0aW9uU2VydmljZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIExheW91dCBDYWxjdWxhdGlvbiBTZXJ2aWNlXG4gKlxuICogUHJvdmlkZXMgcGl4ZWwtcGVyZmVjdCBsYXlvdXQgY2FsY3VsYXRpb25zIG1hdGNoaW5nIHRoZSBkZXNrdG9wIGFwcGxpY2F0aW9uLlxuICogVGhpcyBzZXJ2aWNlIGltcGxlbWVudHMgdGhlIGV4YWN0IHNhbWUgbGF5b3V0IHRhYmxlcyBhbmQgYWxnb3JpdGhtcyB1c2VkIGluXG4gKiB0aGUgZGVza3RvcCBJbWFnZUV4cG9ydExheW91dEhhbmRsZXIuXG4gKlxuICogQ3JpdGljYWw6IEFsbCBsYXlvdXQgdGFibGVzIGFyZSBjb3BpZWQgZXhhY3RseSBmcm9tIHRoZSBkZXNrdG9wIHZlcnNpb24gdG9cbiAqIGVuc3VyZSBpZGVudGljYWwgaW1hZ2UgZGltZW5zaW9ucyBhbmQgYmVhdCBwb3NpdGlvbmluZy5cbiAqL1xuXG5pbXBvcnQgdHlwZSB7IElMYXlvdXRDYWxjdWxhdGlvblNlcnZpY2UgfSBmcm9tIFwiLi4vLi4vaW50ZXJmYWNlcy9pbWFnZS1leHBvcnQtaW50ZXJmYWNlc1wiO1xuXG5leHBvcnQgY2xhc3MgTGF5b3V0Q2FsY3VsYXRpb25TZXJ2aWNlIGltcGxlbWVudHMgSUxheW91dENhbGN1bGF0aW9uU2VydmljZSB7XG4gIC8vIEJhc2UgY29uc3RhbnRzIG1hdGNoaW5nIGRlc2t0b3AgYXBwbGljYXRpb25cbiAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgQkFTRV9CRUFUX1NJWkUgPSAxNDQ7IC8vIE1hdGNoIGRlc2t0b3AgYmVhdC53aWR0aCgpXG5cbiAgLyoqXG4gICAqIExheW91dCB0YWJsZSBmb3Igc2VxdWVuY2VzIFdJVEggc3RhcnQgcG9zaXRpb25cbiAgICogQ29waWVkIGV4YWN0bHkgZnJvbSBkZXNrdG9wIGdldF9sYXlvdXRfb3B0aW9uc193aXRoX3N0YXJ0KClcbiAgICogRm9ybWF0OiBiZWF0Q291bnQgLT4gW2NvbHVtbnMsIHJvd3NdXG4gICAqL1xuICBwcml2YXRlIHJlYWRvbmx5IExBWU9VVF9XSVRIX1NUQVJUX1BPU0lUSU9OOiBSZWNvcmQ8XG4gICAgbnVtYmVyLFxuICAgIFtudW1iZXIsIG51bWJlcl1cbiAgPiA9IHtcbiAgICAwOiBbMSwgMV0sXG4gICAgMTogWzIsIDFdLFxuICAgIDI6IFszLCAxXSxcbiAgICAzOiBbNCwgMV0sXG4gICAgNDogWzUsIDFdLFxuICAgIDU6IFs0LCAyXSxcbiAgICA2OiBbNCwgMl0sXG4gICAgNzogWzUsIDJdLFxuICAgIDg6IFs1LCAyXSxcbiAgICA5OiBbNCwgM10sXG4gICAgMTA6IFs2LCAyXSxcbiAgICAxMTogWzUsIDNdLFxuICAgIDEyOiBbNCwgNF0sXG4gICAgMTM6IFs1LCA0XSxcbiAgICAxNDogWzUsIDRdLFxuICAgIDE1OiBbNSwgNF0sXG4gICAgMTY6IFs1LCA0XSxcbiAgICAxNzogWzUsIDVdLFxuICAgIDE4OiBbNSwgNV0sXG4gICAgMTk6IFs1LCA1XSxcbiAgICAyMDogWzYsIDRdLFxuICAgIDIxOiBbNSwgNl0sXG4gICAgMjI6IFs1LCA2XSxcbiAgICAyMzogWzUsIDZdLFxuICAgIDI0OiBbNywgNF0sXG4gICAgMjU6IFs1LCA3XSxcbiAgICAyNjogWzUsIDddLFxuICAgIDI3OiBbNSwgN10sXG4gICAgMjg6IFs1LCA3XSxcbiAgICAyOTogWzUsIDhdLFxuICAgIDMwOiBbOCwgNF0sXG4gICAgMzE6IFs1LCA4XSxcbiAgICAzMjogWzksIDRdLFxuICAgIDMzOiBbNSwgOV0sXG4gICAgMzQ6IFs1LCA5XSxcbiAgICAzNTogWzUsIDldLFxuICAgIDM2OiBbMTAsIDRdLFxuICAgIDM3OiBbNSwgMTBdLFxuICAgIDM4OiBbNSwgMTBdLFxuICAgIDM5OiBbNSwgMTBdLFxuICAgIDQwOiBbMTEsIDRdLFxuICAgIDQxOiBbNSwgMTFdLFxuICAgIDQyOiBbNSwgMTFdLFxuICAgIDQzOiBbNSwgMTFdLFxuICAgIDQ0OiBbNSwgMTFdLFxuICAgIDQ1OiBbNSwgMTJdLFxuICAgIDQ2OiBbNSwgMTJdLFxuICAgIDQ3OiBbNSwgMTJdLFxuICAgIDQ4OiBbNSwgMTJdLFxuICAgIDQ5OiBbNSwgMTNdLFxuICAgIDUwOiBbNSwgMTNdLFxuICAgIDUxOiBbNSwgMTNdLFxuICAgIDUyOiBbNSwgMTNdLFxuICAgIDUzOiBbNSwgMTRdLFxuICAgIDU0OiBbNSwgMTRdLFxuICAgIDU1OiBbNSwgMTRdLFxuICAgIDU2OiBbNSwgMTRdLFxuICAgIDU3OiBbNSwgMTVdLFxuICAgIDU4OiBbNSwgMTVdLFxuICAgIDU5OiBbNSwgMTVdLFxuICAgIDYwOiBbNSwgMTVdLFxuICAgIDYxOiBbNSwgMTZdLFxuICAgIDYyOiBbNSwgMTZdLFxuICAgIDYzOiBbNSwgMTZdLFxuICAgIDY0OiBbNSwgMTZdLFxuICB9O1xuXG4gIC8qKlxuICAgKiBMYXlvdXQgdGFibGUgZm9yIHNlcXVlbmNlcyBXSVRIT1VUIHN0YXJ0IHBvc2l0aW9uXG4gICAqIENvcGllZCBleGFjdGx5IGZyb20gZGVza3RvcCBnZXRfbGF5b3V0X29wdGlvbnNfd2l0aG91dF9zdGFydCgpXG4gICAqIEZvcm1hdDogYmVhdENvdW50IC0+IFtjb2x1bW5zLCByb3dzXVxuICAgKi9cbiAgcHJpdmF0ZSByZWFkb25seSBMQVlPVVRfV0lUSE9VVF9TVEFSVF9QT1NJVElPTjogUmVjb3JkPFxuICAgIG51bWJlcixcbiAgICBbbnVtYmVyLCBudW1iZXJdXG4gID4gPSB7XG4gICAgMDogWzEsIDFdLFxuICAgIDE6IFsxLCAxXSxcbiAgICAyOiBbMiwgMV0sXG4gICAgMzogWzMsIDFdLFxuICAgIDQ6IFs0LCAxXSxcbiAgICA1OiBbMywgMl0sXG4gICAgNjogWzMsIDJdLFxuICAgIDc6IFs0LCAyXSxcbiAgICA4OiBbNCwgMl0sXG4gICAgOTogWzMsIDNdLFxuICAgIDEwOiBbNSwgMl0sXG4gICAgMTE6IFs0LCAzXSxcbiAgICAxMjogWzMsIDRdLFxuICAgIDEzOiBbNCwgNF0sXG4gICAgMTQ6IFs0LCA0XSxcbiAgICAxNTogWzQsIDRdLFxuICAgIDE2OiBbNCwgNF0sXG4gICAgMTc6IFs0LCA1XSxcbiAgICAxODogWzksIDJdLFxuICAgIDE5OiBbNCwgNV0sXG4gICAgMjA6IFs1LCA0XSxcbiAgICAyMTogWzQsIDZdLFxuICAgIDIyOiBbNCwgNl0sXG4gICAgMjM6IFs0LCA2XSxcbiAgICAyNDogWzYsIDRdLFxuICAgIDI1OiBbNCwgN10sXG4gICAgMjY6IFs0LCA3XSxcbiAgICAyNzogWzQsIDddLFxuICAgIDI4OiBbNywgNF0sXG4gICAgMjk6IFs0LCA4XSxcbiAgICAzMDogWzQsIDhdLFxuICAgIDMxOiBbNCwgOF0sXG4gICAgMzI6IFs4LCA0XSxcbiAgICAzMzogWzQsIDldLFxuICAgIDM0OiBbNCwgOV0sXG4gICAgMzU6IFs0LCA5XSxcbiAgICAzNjogWzksIDRdLFxuICAgIDM3OiBbNCwgMTBdLFxuICAgIDM4OiBbNCwgMTBdLFxuICAgIDM5OiBbNCwgMTBdLFxuICAgIDQwOiBbMTAsIDRdLFxuICAgIDQxOiBbNCwgMTFdLFxuICAgIDQyOiBbNCwgMTFdLFxuICAgIDQzOiBbNCwgMTFdLFxuICAgIDQ0OiBbMTEsIDRdLFxuICAgIDQ1OiBbNCwgMTJdLFxuICAgIDQ2OiBbNCwgMTJdLFxuICAgIDQ3OiBbNCwgMTJdLFxuICAgIDQ4OiBbMTIsIDRdLFxuICAgIDQ5OiBbNCwgMTNdLFxuICAgIDUwOiBbNCwgMTNdLFxuICAgIDUxOiBbNCwgMTNdLFxuICAgIDUyOiBbMTMsIDRdLFxuICAgIDUzOiBbNCwgMTRdLFxuICAgIDU0OiBbNCwgMTRdLFxuICAgIDU1OiBbNCwgMTRdLFxuICAgIDU2OiBbMTQsIDRdLFxuICAgIDU3OiBbNCwgMTVdLFxuICAgIDU4OiBbNCwgMTVdLFxuICAgIDU5OiBbNCwgMTVdLFxuICAgIDYwOiBbMTUsIDRdLFxuICAgIDYxOiBbNCwgMTZdLFxuICAgIDYyOiBbNCwgMTZdLFxuICAgIDYzOiBbNCwgMTZdLFxuICAgIDY0OiBbMTYsIDRdLFxuICB9O1xuXG4gIC8qKlxuICAgKiBDYWxjdWxhdGUgb3B0aW1hbCBsYXlvdXQgZm9yIGdpdmVuIGJlYXQgY291bnRcbiAgICogTWF0Y2hlcyBkZXNrdG9wIGNhbGN1bGF0ZV9sYXlvdXQoKSBtZXRob2QgZXhhY3RseVxuICAgKi9cbiAgY2FsY3VsYXRlTGF5b3V0KFxuICAgIGJlYXRDb3VudDogbnVtYmVyLFxuICAgIGluY2x1ZGVTdGFydFBvc2l0aW9uOiBib29sZWFuXG4gICk6IFtudW1iZXIsIG51bWJlcl0ge1xuICAgIGlmICghdGhpcy52YWxpZGF0ZUxheW91dChiZWF0Q291bnQsIGluY2x1ZGVTdGFydFBvc2l0aW9uKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgSW52YWxpZCBsYXlvdXQgcGFyYW1ldGVyczogYmVhdENvdW50PSR7YmVhdENvdW50fSwgaW5jbHVkZVN0YXJ0UG9zaXRpb249JHtpbmNsdWRlU3RhcnRQb3NpdGlvbn1gXG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnN0IGxheW91dFRhYmxlID0gaW5jbHVkZVN0YXJ0UG9zaXRpb25cbiAgICAgID8gdGhpcy5MQVlPVVRfV0lUSF9TVEFSVF9QT1NJVElPTlxuICAgICAgOiB0aGlzLkxBWU9VVF9XSVRIT1VUX1NUQVJUX1BPU0lUSU9OO1xuXG4gICAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSBhIHByZWRlZmluZWQgbGF5b3V0IGZvciB0aGlzIGJlYXQgY291bnRcbiAgICBpZiAoYmVhdENvdW50IGluIGxheW91dFRhYmxlKSB7XG4gICAgICByZXR1cm4gbGF5b3V0VGFibGVbYmVhdENvdW50XTtcbiAgICB9XG5cbiAgICAvLyBGYWxsYmFjayBmb3IgYmVhdCBjb3VudHMgYmV5b25kIG91ciB0YWJsZXNcbiAgICByZXR1cm4gdGhpcy5nZXRGYWxsYmFja0xheW91dChiZWF0Q291bnQsIGluY2x1ZGVTdGFydFBvc2l0aW9uKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxjdWxhdGUgaW1hZ2UgZGltZW5zaW9ucyBmb3IgbGF5b3V0XG4gICAqIE1hdGNoZXMgZGVza3RvcCBfY3JlYXRlX2ltYWdlKCkgbWV0aG9kXG4gICAqL1xuICBjYWxjdWxhdGVJbWFnZURpbWVuc2lvbnMoXG4gICAgbGF5b3V0OiBbbnVtYmVyLCBudW1iZXJdLFxuICAgIGFkZGl0aW9uYWxIZWlnaHQ6IG51bWJlcixcbiAgICBiZWF0U2NhbGU6IG51bWJlciA9IDFcbiAgKTogW251bWJlciwgbnVtYmVyXSB7XG4gICAgY29uc3QgW2NvbHVtbnMsIHJvd3NdID0gbGF5b3V0O1xuICAgIGNvbnN0IGJlYXRTaXplID0gTGF5b3V0Q2FsY3VsYXRpb25TZXJ2aWNlLkJBU0VfQkVBVF9TSVpFICogYmVhdFNjYWxlO1xuXG4gICAgY29uc3Qgd2lkdGggPSBNYXRoLmZsb29yKGNvbHVtbnMgKiBiZWF0U2l6ZSk7XG4gICAgY29uc3QgaGVpZ2h0ID0gTWF0aC5mbG9vcihyb3dzICogYmVhdFNpemUgKyBhZGRpdGlvbmFsSGVpZ2h0KTtcblxuICAgIHJldHVybiBbd2lkdGgsIGhlaWdodF07XG4gIH1cblxuICAvKipcbiAgICogR2V0IGxheW91dCBmb3IgY3VycmVudCBiZWF0IGZyYW1lIChjb21wYXRpYmlsaXR5IG1ldGhvZClcbiAgICogTWF0Y2hlcyBkZXNrdG9wIGdldF9jdXJyZW50X2JlYXRfZnJhbWVfbGF5b3V0KClcbiAgICovXG4gIGdldEN1cnJlbnRCZWF0RnJhbWVMYXlvdXQoYmVhdENvdW50OiBudW1iZXIpOiBbbnVtYmVyLCBudW1iZXJdIHtcbiAgICAvLyBGb3Igd2ViIGltcGxlbWVudGF0aW9uLCB3ZSB1c2UgdGhlIHNhbWUgbG9naWMgYXMgY2FsY3VsYXRlTGF5b3V0XG4gICAgLy8gVGhpcyBtZXRob2QgZXhpc3RzIGZvciBjb21wYXRpYmlsaXR5IHdpdGggZGVza3RvcCBwYXR0ZXJuc1xuICAgIHJldHVybiB0aGlzLmNhbGN1bGF0ZUxheW91dChiZWF0Q291bnQsIGZhbHNlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBWYWxpZGF0ZSBsYXlvdXQgcGFyYW1ldGVyc1xuICAgKi9cbiAgdmFsaWRhdGVMYXlvdXQoYmVhdENvdW50OiBudW1iZXIsIGluY2x1ZGVTdGFydFBvc2l0aW9uOiBib29sZWFuKTogYm9vbGVhbiB7XG4gICAgLy8gQmVhdCBjb3VudCBtdXN0IGJlIG5vbi1uZWdhdGl2ZVxuICAgIGlmIChiZWF0Q291bnQgPCAwKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gQmVhdCBjb3VudCBtdXN0IGJlIHJlYXNvbmFibGUgKHByZXZlbnQgbWVtb3J5IGlzc3VlcylcbiAgICBpZiAoYmVhdENvdW50ID4gMTAwMCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIGluY2x1ZGVTdGFydFBvc2l0aW9uIG11c3QgYmUgYm9vbGVhblxuICAgIGlmICh0eXBlb2YgaW5jbHVkZVN0YXJ0UG9zaXRpb24gIT09IFwiYm9vbGVhblwiKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgZmFsbGJhY2sgbGF5b3V0IGZvciBiZWF0IGNvdW50cyBiZXlvbmQgcHJlZGVmaW5lZCB0YWJsZXNcbiAgICogTWF0Y2hlcyBkZXNrdG9wIGZhbGxiYWNrIGJlaGF2aW9yXG4gICAqL1xuICBwcml2YXRlIGdldEZhbGxiYWNrTGF5b3V0KFxuICAgIGJlYXRDb3VudDogbnVtYmVyLFxuICAgIGluY2x1ZGVTdGFydFBvc2l0aW9uOiBib29sZWFuXG4gICk6IFtudW1iZXIsIG51bWJlcl0ge1xuICAgIGlmIChiZWF0Q291bnQgPT09IDApIHtcbiAgICAgIHJldHVybiBbMSwgMV07XG4gICAgfVxuXG4gICAgLy8gRm9yIGxhcmdlIGJlYXQgY291bnRzLCBwcmVmZXIgcm91Z2hseSBzcXVhcmUgbGF5b3V0c1xuICAgIGNvbnN0IHRvdGFsQ2VsbHMgPSBpbmNsdWRlU3RhcnRQb3NpdGlvbiA/IGJlYXRDb3VudCArIDEgOiBiZWF0Q291bnQ7XG4gICAgY29uc3QgYXNwZWN0UmF0aW8gPSAxLjI7IC8vIFNsaWdodGx5IHdpZGVyIHRoYW4gc3F1YXJlXG5cbiAgICAvLyBDYWxjdWxhdGUgaWRlYWwgZGltZW5zaW9uc1xuICAgIGNvbnN0IGlkZWFsSGVpZ2h0ID0gTWF0aC5zcXJ0KHRvdGFsQ2VsbHMgLyBhc3BlY3RSYXRpbyk7XG4gICAgY29uc3Qgcm93cyA9IE1hdGgubWF4KDEsIE1hdGgucm91bmQoaWRlYWxIZWlnaHQpKTtcbiAgICBjb25zdCBjb2x1bW5zID0gTWF0aC5tYXgoMSwgTWF0aC5jZWlsKHRvdGFsQ2VsbHMgLyByb3dzKSk7XG5cbiAgICByZXR1cm4gW2NvbHVtbnMsIHJvd3NdO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBiYXNlIGJlYXQgc2l6ZSBjb25zdGFudFxuICAgKi9cbiAgc3RhdGljIGdldEJhc2VCZWF0U2l6ZSgpOiBudW1iZXIge1xuICAgIHJldHVybiBMYXlvdXRDYWxjdWxhdGlvblNlcnZpY2UuQkFTRV9CRUFUX1NJWkU7XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlIHRvdGFsIGltYWdlIGFyZWEgZm9yIGxheW91dFxuICAgKi9cbiAgY2FsY3VsYXRlSW1hZ2VBcmVhKFxuICAgIGJlYXRDb3VudDogbnVtYmVyLFxuICAgIGluY2x1ZGVTdGFydFBvc2l0aW9uOiBib29sZWFuLFxuICAgIGFkZGl0aW9uYWxIZWlnaHQ6IG51bWJlcixcbiAgICBiZWF0U2NhbGU6IG51bWJlciA9IDFcbiAgKTogbnVtYmVyIHtcbiAgICBjb25zdCBsYXlvdXQgPSB0aGlzLmNhbGN1bGF0ZUxheW91dChiZWF0Q291bnQsIGluY2x1ZGVTdGFydFBvc2l0aW9uKTtcbiAgICBjb25zdCBbd2lkdGgsIGhlaWdodF0gPSB0aGlzLmNhbGN1bGF0ZUltYWdlRGltZW5zaW9ucyhcbiAgICAgIGxheW91dCxcbiAgICAgIGFkZGl0aW9uYWxIZWlnaHQsXG4gICAgICBiZWF0U2NhbGVcbiAgICApO1xuICAgIHJldHVybiB3aWR0aCAqIGhlaWdodDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgbGF5b3V0IGVmZmljaWVuY3kgKGhvdyB3ZWxsIGJlYXRzIGZpbGwgdGhlIGdyaWQpXG4gICAqL1xuICBnZXRMYXlvdXRFZmZpY2llbmN5KFxuICAgIGJlYXRDb3VudDogbnVtYmVyLFxuICAgIGluY2x1ZGVTdGFydFBvc2l0aW9uOiBib29sZWFuXG4gICk6IG51bWJlciB7XG4gICAgaWYgKGJlYXRDb3VudCA9PT0gMCkgcmV0dXJuIDEuMDtcblxuICAgIGNvbnN0IGxheW91dCA9IHRoaXMuY2FsY3VsYXRlTGF5b3V0KGJlYXRDb3VudCwgaW5jbHVkZVN0YXJ0UG9zaXRpb24pO1xuICAgIGNvbnN0IFtjb2x1bW5zLCByb3dzXSA9IGxheW91dDtcbiAgICBjb25zdCB0b3RhbENlbGxzID0gY29sdW1ucyAqIHJvd3M7XG4gICAgY29uc3QgdXNlZENlbGxzID0gaW5jbHVkZVN0YXJ0UG9zaXRpb24gPyBiZWF0Q291bnQgKyAxIDogYmVhdENvdW50O1xuXG4gICAgcmV0dXJuIHVzZWRDZWxscyAvIHRvdGFsQ2VsbHM7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGFsbCBhdmFpbGFibGUgbGF5b3V0cyB3aXRoaW4gYSBiZWF0IGNvdW50IHJhbmdlXG4gICAqL1xuICBnZXRMYXlvdXRzSW5SYW5nZShcbiAgICBtaW5CZWF0czogbnVtYmVyLFxuICAgIG1heEJlYXRzOiBudW1iZXIsXG4gICAgaW5jbHVkZVN0YXJ0UG9zaXRpb246IGJvb2xlYW5cbiAgKTogQXJyYXk8e1xuICAgIGJlYXRDb3VudDogbnVtYmVyO1xuICAgIGxheW91dDogW251bWJlciwgbnVtYmVyXTtcbiAgICBlZmZpY2llbmN5OiBudW1iZXI7XG4gIH0+IHtcbiAgICBjb25zdCByZXN1bHRzID0gW107XG5cbiAgICBmb3IgKGxldCBiZWF0Q291bnQgPSBtaW5CZWF0czsgYmVhdENvdW50IDw9IG1heEJlYXRzOyBiZWF0Q291bnQrKykge1xuICAgICAgaWYgKHRoaXMudmFsaWRhdGVMYXlvdXQoYmVhdENvdW50LCBpbmNsdWRlU3RhcnRQb3NpdGlvbikpIHtcbiAgICAgICAgY29uc3QgbGF5b3V0ID0gdGhpcy5jYWxjdWxhdGVMYXlvdXQoYmVhdENvdW50LCBpbmNsdWRlU3RhcnRQb3NpdGlvbik7XG4gICAgICAgIGNvbnN0IGVmZmljaWVuY3kgPSB0aGlzLmdldExheW91dEVmZmljaWVuY3koXG4gICAgICAgICAgYmVhdENvdW50LFxuICAgICAgICAgIGluY2x1ZGVTdGFydFBvc2l0aW9uXG4gICAgICAgICk7XG5cbiAgICAgICAgcmVzdWx0cy5wdXNoKHtcbiAgICAgICAgICBiZWF0Q291bnQsXG4gICAgICAgICAgbGF5b3V0LFxuICAgICAgICAgIGVmZmljaWVuY3ksXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZXN1bHRzO1xuICB9XG5cbiAgLyoqXG4gICAqIERlYnVnIG1ldGhvZCB0byB2ZXJpZnkgbGF5b3V0IHRhYmxlIGludGVncml0eVxuICAgKi9cbiAgdmFsaWRhdGVMYXlvdXRUYWJsZXMoKTogeyB2YWxpZDogYm9vbGVhbjsgZXJyb3JzOiBzdHJpbmdbXSB9IHtcbiAgICBjb25zdCBlcnJvcnM6IHN0cmluZ1tdID0gW107XG5cbiAgICAvLyBDaGVjayB0aGF0IGFsbCBlbnRyaWVzIGluIFdJVEhfU1RBUlQgdGFibGUgYXJlIHZhbGlkXG4gICAgZm9yIChjb25zdCBbYmVhdENvdW50LCBsYXlvdXRdIG9mIE9iamVjdC5lbnRyaWVzKFxuICAgICAgdGhpcy5MQVlPVVRfV0lUSF9TVEFSVF9QT1NJVElPTlxuICAgICkpIHtcbiAgICAgIGNvbnN0IFtjb2x1bW5zLCByb3dzXSA9IGxheW91dDtcbiAgICAgIGNvbnN0IHRvdGFsQ2VsbHMgPSBjb2x1bW5zICogcm93cztcbiAgICAgIGNvbnN0IHJlcXVpcmVkQ2VsbHMgPSBwYXJzZUludChiZWF0Q291bnQpICsgMTsgLy8gKzEgZm9yIHN0YXJ0IHBvc2l0aW9uXG5cbiAgICAgIGlmICh0b3RhbENlbGxzIDwgcmVxdWlyZWRDZWxscykge1xuICAgICAgICBlcnJvcnMucHVzaChcbiAgICAgICAgICBgV0lUSF9TVEFSVFske2JlYXRDb3VudH1dOiAke2NvbHVtbnN9w5cke3Jvd3N9ID0gJHt0b3RhbENlbGxzfSBjZWxscyA8ICR7cmVxdWlyZWRDZWxsc30gcmVxdWlyZWRgXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgdGhhdCBhbGwgZW50cmllcyBpbiBXSVRIT1VUX1NUQVJUIHRhYmxlIGFyZSB2YWxpZFxuICAgIGZvciAoY29uc3QgW2JlYXRDb3VudCwgbGF5b3V0XSBvZiBPYmplY3QuZW50cmllcyhcbiAgICAgIHRoaXMuTEFZT1VUX1dJVEhPVVRfU1RBUlRfUE9TSVRJT05cbiAgICApKSB7XG4gICAgICBjb25zdCBbY29sdW1ucywgcm93c10gPSBsYXlvdXQ7XG4gICAgICBjb25zdCB0b3RhbENlbGxzID0gY29sdW1ucyAqIHJvd3M7XG4gICAgICBjb25zdCByZXF1aXJlZENlbGxzID0gcGFyc2VJbnQoYmVhdENvdW50KTtcblxuICAgICAgaWYgKHRvdGFsQ2VsbHMgPCByZXF1aXJlZENlbGxzKSB7XG4gICAgICAgIGVycm9ycy5wdXNoKFxuICAgICAgICAgIGBXSVRIT1VUX1NUQVJUWyR7YmVhdENvdW50fV06ICR7Y29sdW1uc33DlyR7cm93c30gPSAke3RvdGFsQ2VsbHN9IGNlbGxzIDwgJHtyZXF1aXJlZENlbGxzfSByZXF1aXJlZGBcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgdmFsaWQ6IGVycm9ycy5sZW5ndGggPT09IDAsXG4gICAgICBlcnJvcnMsXG4gICAgfTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiQUFhTyxhQUFNLHlCQUE4RDtBQUFBO0FBQUEsRUFFekUsT0FBd0IsaUJBQWlCO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFPeEIsNkJBR2I7QUFBQSxJQUNGLEdBQUcsQ0FBQyxHQUFHLENBQUM7QUFBQSxJQUNSLEdBQUcsQ0FBQyxHQUFHLENBQUM7QUFBQSxJQUNSLEdBQUcsQ0FBQyxHQUFHLENBQUM7QUFBQSxJQUNSLEdBQUcsQ0FBQyxHQUFHLENBQUM7QUFBQSxJQUNSLEdBQUcsQ0FBQyxHQUFHLENBQUM7QUFBQSxJQUNSLEdBQUcsQ0FBQyxHQUFHLENBQUM7QUFBQSxJQUNSLEdBQUcsQ0FBQyxHQUFHLENBQUM7QUFBQSxJQUNSLEdBQUcsQ0FBQyxHQUFHLENBQUM7QUFBQSxJQUNSLEdBQUcsQ0FBQyxHQUFHLENBQUM7QUFBQSxJQUNSLEdBQUcsQ0FBQyxHQUFHLENBQUM7QUFBQSxJQUNSLElBQUksQ0FBQyxHQUFHLENBQUM7QUFBQSxJQUNULElBQUksQ0FBQyxHQUFHLENBQUM7QUFBQSxJQUNULElBQUksQ0FBQyxHQUFHLENBQUM7QUFBQSxJQUNULElBQUksQ0FBQyxHQUFHLENBQUM7QUFBQSxJQUNULElBQUksQ0FBQyxHQUFHLENBQUM7QUFBQSxJQUNULElBQUksQ0FBQyxHQUFHLENBQUM7QUFBQSxJQUNULElBQUksQ0FBQyxHQUFHLENBQUM7QUFBQSxJQUNULElBQUksQ0FBQyxHQUFHLENBQUM7QUFBQSxJQUNULElBQUksQ0FBQyxHQUFHLENBQUM7QUFBQSxJQUNULElBQUksQ0FBQyxHQUFHLENBQUM7QUFBQSxJQUNULElBQUksQ0FBQyxHQUFHLENBQUM7QUFBQSxJQUNULElBQUksQ0FBQyxHQUFHLENBQUM7QUFBQSxJQUNULElBQUksQ0FBQyxHQUFHLENBQUM7QUFBQSxJQUNULElBQUksQ0FBQyxHQUFHLENBQUM7QUFBQSxJQUNULElBQUksQ0FBQyxHQUFHLENBQUM7QUFBQSxJQUNULElBQUksQ0FBQyxHQUFHLENBQUM7QUFBQSxJQUNULElBQUksQ0FBQyxHQUFHLENBQUM7QUFBQSxJQUNULElBQUksQ0FBQyxHQUFHLENBQUM7QUFBQSxJQUNULElBQUksQ0FBQyxHQUFHLENBQUM7QUFBQSxJQUNULElBQUksQ0FBQyxHQUFHLENBQUM7QUFBQSxJQUNULElBQUksQ0FBQyxHQUFHLENBQUM7QUFBQSxJQUNULElBQUksQ0FBQyxHQUFHLENBQUM7QUFBQSxJQUNULElBQUksQ0FBQyxHQUFHLENBQUM7QUFBQSxJQUNULElBQUksQ0FBQyxHQUFHLENBQUM7QUFBQSxJQUNULElBQUksQ0FBQyxHQUFHLENBQUM7QUFBQSxJQUNULElBQUksQ0FBQyxHQUFHLENBQUM7QUFBQSxJQUNULElBQUksQ0FBQyxJQUFJLENBQUM7QUFBQSxJQUNWLElBQUksQ0FBQyxHQUFHLEVBQUU7QUFBQSxJQUNWLElBQUksQ0FBQyxHQUFHLEVBQUU7QUFBQSxJQUNWLElBQUksQ0FBQyxHQUFHLEVBQUU7QUFBQSxJQUNWLElBQUksQ0FBQyxJQUFJLENBQUM7QUFBQSxJQUNWLElBQUksQ0FBQyxHQUFHLEVBQUU7QUFBQSxJQUNWLElBQUksQ0FBQyxHQUFHLEVBQUU7QUFBQSxJQUNWLElBQUksQ0FBQyxHQUFHLEVBQUU7QUFBQSxJQUNWLElBQUksQ0FBQyxHQUFHLEVBQUU7QUFBQSxJQUNWLElBQUksQ0FBQyxHQUFHLEVBQUU7QUFBQSxJQUNWLElBQUksQ0FBQyxHQUFHLEVBQUU7QUFBQSxJQUNWLElBQUksQ0FBQyxHQUFHLEVBQUU7QUFBQSxJQUNWLElBQUksQ0FBQyxHQUFHLEVBQUU7QUFBQSxJQUNWLElBQUksQ0FBQyxHQUFHLEVBQUU7QUFBQSxJQUNWLElBQUksQ0FBQyxHQUFHLEVBQUU7QUFBQSxJQUNWLElBQUksQ0FBQyxHQUFHLEVBQUU7QUFBQSxJQUNWLElBQUksQ0FBQyxHQUFHLEVBQUU7QUFBQSxJQUNWLElBQUksQ0FBQyxHQUFHLEVBQUU7QUFBQSxJQUNWLElBQUksQ0FBQyxHQUFHLEVBQUU7QUFBQSxJQUNWLElBQUksQ0FBQyxHQUFHLEVBQUU7QUFBQSxJQUNWLElBQUksQ0FBQyxHQUFHLEVBQUU7QUFBQSxJQUNWLElBQUksQ0FBQyxHQUFHLEVBQUU7QUFBQSxJQUNWLElBQUksQ0FBQyxHQUFHLEVBQUU7QUFBQSxJQUNWLElBQUksQ0FBQyxHQUFHLEVBQUU7QUFBQSxJQUNWLElBQUksQ0FBQyxHQUFHLEVBQUU7QUFBQSxJQUNWLElBQUksQ0FBQyxHQUFHLEVBQUU7QUFBQSxJQUNWLElBQUksQ0FBQyxHQUFHLEVBQUU7QUFBQSxJQUNWLElBQUksQ0FBQyxHQUFHLEVBQUU7QUFBQSxJQUNWLElBQUksQ0FBQyxHQUFHLEVBQUU7QUFBQSxFQUNaO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBT2lCLGdDQUdiO0FBQUEsSUFDRixHQUFHLENBQUMsR0FBRyxDQUFDO0FBQUEsSUFDUixHQUFHLENBQUMsR0FBRyxDQUFDO0FBQUEsSUFDUixHQUFHLENBQUMsR0FBRyxDQUFDO0FBQUEsSUFDUixHQUFHLENBQUMsR0FBRyxDQUFDO0FBQUEsSUFDUixHQUFHLENBQUMsR0FBRyxDQUFDO0FBQUEsSUFDUixHQUFHLENBQUMsR0FBRyxDQUFDO0FBQUEsSUFDUixHQUFHLENBQUMsR0FBRyxDQUFDO0FBQUEsSUFDUixHQUFHLENBQUMsR0FBRyxDQUFDO0FBQUEsSUFDUixHQUFHLENBQUMsR0FBRyxDQUFDO0FBQUEsSUFDUixHQUFHLENBQUMsR0FBRyxDQUFDO0FBQUEsSUFDUixJQUFJLENBQUMsR0FBRyxDQUFDO0FBQUEsSUFDVCxJQUFJLENBQUMsR0FBRyxDQUFDO0FBQUEsSUFDVCxJQUFJLENBQUMsR0FBRyxDQUFDO0FBQUEsSUFDVCxJQUFJLENBQUMsR0FBRyxDQUFDO0FBQUEsSUFDVCxJQUFJLENBQUMsR0FBRyxDQUFDO0FBQUEsSUFDVCxJQUFJLENBQUMsR0FBRyxDQUFDO0FBQUEsSUFDVCxJQUFJLENBQUMsR0FBRyxDQUFDO0FBQUEsSUFDVCxJQUFJLENBQUMsR0FBRyxDQUFDO0FBQUEsSUFDVCxJQUFJLENBQUMsR0FBRyxDQUFDO0FBQUEsSUFDVCxJQUFJLENBQUMsR0FBRyxDQUFDO0FBQUEsSUFDVCxJQUFJLENBQUMsR0FBRyxDQUFDO0FBQUEsSUFDVCxJQUFJLENBQUMsR0FBRyxDQUFDO0FBQUEsSUFDVCxJQUFJLENBQUMsR0FBRyxDQUFDO0FBQUEsSUFDVCxJQUFJLENBQUMsR0FBRyxDQUFDO0FBQUEsSUFDVCxJQUFJLENBQUMsR0FBRyxDQUFDO0FBQUEsSUFDVCxJQUFJLENBQUMsR0FBRyxDQUFDO0FBQUEsSUFDVCxJQUFJLENBQUMsR0FBRyxDQUFDO0FBQUEsSUFDVCxJQUFJLENBQUMsR0FBRyxDQUFDO0FBQUEsSUFDVCxJQUFJLENBQUMsR0FBRyxDQUFDO0FBQUEsSUFDVCxJQUFJLENBQUMsR0FBRyxDQUFDO0FBQUEsSUFDVCxJQUFJLENBQUMsR0FBRyxDQUFDO0FBQUEsSUFDVCxJQUFJLENBQUMsR0FBRyxDQUFDO0FBQUEsSUFDVCxJQUFJLENBQUMsR0FBRyxDQUFDO0FBQUEsSUFDVCxJQUFJLENBQUMsR0FBRyxDQUFDO0FBQUEsSUFDVCxJQUFJLENBQUMsR0FBRyxDQUFDO0FBQUEsSUFDVCxJQUFJLENBQUMsR0FBRyxDQUFDO0FBQUEsSUFDVCxJQUFJLENBQUMsR0FBRyxDQUFDO0FBQUEsSUFDVCxJQUFJLENBQUMsR0FBRyxFQUFFO0FBQUEsSUFDVixJQUFJLENBQUMsR0FBRyxFQUFFO0FBQUEsSUFDVixJQUFJLENBQUMsR0FBRyxFQUFFO0FBQUEsSUFDVixJQUFJLENBQUMsSUFBSSxDQUFDO0FBQUEsSUFDVixJQUFJLENBQUMsR0FBRyxFQUFFO0FBQUEsSUFDVixJQUFJLENBQUMsR0FBRyxFQUFFO0FBQUEsSUFDVixJQUFJLENBQUMsR0FBRyxFQUFFO0FBQUEsSUFDVixJQUFJLENBQUMsSUFBSSxDQUFDO0FBQUEsSUFDVixJQUFJLENBQUMsR0FBRyxFQUFFO0FBQUEsSUFDVixJQUFJLENBQUMsR0FBRyxFQUFFO0FBQUEsSUFDVixJQUFJLENBQUMsR0FBRyxFQUFFO0FBQUEsSUFDVixJQUFJLENBQUMsSUFBSSxDQUFDO0FBQUEsSUFDVixJQUFJLENBQUMsR0FBRyxFQUFFO0FBQUEsSUFDVixJQUFJLENBQUMsR0FBRyxFQUFFO0FBQUEsSUFDVixJQUFJLENBQUMsR0FBRyxFQUFFO0FBQUEsSUFDVixJQUFJLENBQUMsSUFBSSxDQUFDO0FBQUEsSUFDVixJQUFJLENBQUMsR0FBRyxFQUFFO0FB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