import { createHotContext as __vite__createHotContext } from "/@vite/client";import.meta.hot = __vite__createHotContext("/src/lib/components/learn/LessonWorkspaceView.svelte");import "/node_modules/.vite/deps/svelte_internal_disclose-version.js?v=de368f3a";

LessonWorkspaceView[$.FILENAME] = 'src/lib/components/learn/LessonWorkspaceView.svelte';

import * as $ from "/node_modules/.vite/deps/svelte_internal_client.js?v=de368f3a";
import { LessonConfigService } from "/src/lib/services/learn/LessonConfigService.ts";
import { QuestionGeneratorService } from "/src/lib/services/learn/QuestionGeneratorService.ts";
import { QuizSessionService } from "/src/lib/services/learn/QuizSessionService.ts";
import { QuizMode as QuizModeEnum } from "/src/lib/types/learn.ts";
import { onDestroy, onMount } from "/node_modules/.vite/deps/svelte.js?v=de368f3a";
import ProgressTracker from "/src/lib/components/learn/ProgressTracker.svelte";
import QuestionGenerator from "/src/lib/components/learn/QuestionGenerator.svelte";
import QuizTimer from "/src/lib/components/learn/QuizTimer.svelte";
import LessonControls from "/src/lib/components/learn/LessonControls.svelte";

var root_1 = $.add_locations($.from_html(`<div class="loading-screen s-amBt6o9YGY_V"><div class="loading-spinner s-amBt6o9YGY_V"></div> <p class="s-amBt6o9YGY_V">Starting lesson...</p></div>`), LessonWorkspaceView[$.FILENAME], [[166, 4, [[167, 6], [168, 6]]]]);
var root_3 = $.add_locations($.from_html(`<div class="timer-container s-amBt6o9YGY_V"><!></div>`), LessonWorkspaceView[$.FILENAME], [[181, 8]]);
var root_4 = $.add_locations($.from_html(`<div class="controls-container s-amBt6o9YGY_V"><!></div>`), LessonWorkspaceView[$.FILENAME], [[198, 8]]);
var root_5 = $.add_locations($.from_html(`<div class="progress-container s-amBt6o9YGY_V"><!></div>`), LessonWorkspaceView[$.FILENAME], [[214, 6]]);
var root_7 = $.add_locations($.from_html(`<div class="no-question s-amBt6o9YGY_V"><p class="s-amBt6o9YGY_V">No question available</p></div>`), LessonWorkspaceView[$.FILENAME], [[236, 8, [[237, 10]]]]);

var root_2 = $.add_locations($.from_html(`<div class="workspace-header s-amBt6o9YGY_V"><button class="back-button s-amBt6o9YGY_V">‚Üê Back to Lessons</button> <div class="lesson-info s-amBt6o9YGY_V"><h2 class="lesson-title s-amBt6o9YGY_V"> </h2> <p class="quiz-mode s-amBt6o9YGY_V"> </p></div> <!> <!></div> <!> <div class="workspace-content s-amBt6o9YGY_V"><!></div>`, 1), LessonWorkspaceView[$.FILENAME], [
	[172, 4, [[173, 6], [176, 6, [[177, 8], [178, 8]]]]],
	[224, 4]
]);

var root = $.add_locations($.from_html(`<div class="lesson-workspace s-amBt6o9YGY_V"><!></div>`), LessonWorkspaceView[$.FILENAME], [[164, 0]]);

function LessonWorkspaceView($$anchor, $$props) {
	$.check_target(new.target);
	$.push($$props, true, LessonWorkspaceView);

	let lessonType = $.prop($$props, 'lessonType', 3, null),
		quizMode = $.prop($$props, 'quizMode', 3, null);

	let sessionId = null;
	let currentQuestion = $.tag($.state(null), 'currentQuestion');
	let progress = $.tag($.state(null), 'progress');
	let isAnswered = $.tag($.state(false), 'isAnswered');
	let showFeedback = $.tag($.state(false), 'showFeedback');
	let selectedAnswerId = $.tag($.state(null), 'selectedAnswerId');
	let timeRemaining = $.tag($.state(0), 'timeRemaining');
	let isLoading = $.tag($.state(false), 'isLoading');
	let questionStartTime = 0;
	let isPaused = $.tag($.state(false), 'isPaused');
	let hasStarted = $.tag($.state(false), 'hasStarted');
	let timerComponent = $.tag($.state(void 0), 'timerComponent');
	const isCountdownMode = $.tag($.derived(() => $.strict_equals(quizMode(), QuizModeEnum.COUNTDOWN)), 'isCountdownMode');
	const isFixedQuestionMode = $.tag($.derived(() => $.strict_equals(quizMode(), QuizModeEnum.FIXED_QUESTION)), 'isFixedQuestionMode');

	onMount(() => {
		if (lessonType() && quizMode()) {
			startLesson();
		}
	});

	onDestroy(() => {
		if (sessionId) {
			QuizSessionService.abandonSession(sessionId);
		}
	});

	function startLesson() {
		if (!lessonType() || !quizMode()) return;

		$.set(isLoading, true);
		sessionId = QuizSessionService.createSession(lessonType(), quizMode());

		if ($.get(isCountdownMode)) {
			$.set(timeRemaining, LessonConfigService.getQuizTime(quizMode()), true);

			if ($.get(timerComponent)) {
				$.get(timerComponent).start();
			}
		}

		generateNewQuestion();
		updateProgress();
		$.set(hasStarted, true);
		$.set(isLoading, false);
	}

	function generateNewQuestion() {
		if (!lessonType()) return;

		try {
			$.set(currentQuestion, QuestionGeneratorService.generateQuestion(lessonType()), true);
			questionStartTime = Date.now();
			resetQuestionState();
		} catch(error) {
			console.error(...$.log_if_contains_state('error', "Failed to generate question:", error));
		}
	}

	function resetQuestionState() {
		$.set(isAnswered, false);
		$.set(showFeedback, false);
		$.set(selectedAnswerId, null);
	}

	function handleAnswerSelected(data) {
		if ($.get(isAnswered) || !$.get(currentQuestion) || !sessionId) return;

		const { answerId, isCorrect } = data;
		const timeToAnswer = Date.now() - questionStartTime;

		$.set(isAnswered, true);
		$.set(selectedAnswerId, answerId, true);
		$.set(showFeedback, true);
		QuizSessionService.updateSessionProgress(sessionId, isCorrect, timeToAnswer / 1e3);
		updateProgress();

		setTimeout(
			() => {
				if (shouldContinueQuiz()) {
					handleNextQuestion();
				} else {
					completeLesson();
				}
			},
			2e3
		);
	}

	function handleNextQuestion() {
		if (!sessionId) return;

		if (shouldContinueQuiz()) {
			generateNewQuestion();
		} else {
			completeLesson();
		}
	}

	function shouldContinueQuiz() {
		if (!sessionId) return false;

		const session = QuizSessionService.getSession(sessionId);

		if (!session || !session.isActive) return false;

		if ($.get(isFixedQuestionMode)) {
			return session.questionsAnswered < session.totalQuestions;
		} else if ($.get(isCountdownMode)) {
			return $.get(timeRemaining) > 0;
		}

		return false;
	}

	function updateProgress() {
		if (!sessionId) return;

		$.set(progress, QuizSessionService.getLessonProgress(sessionId), true);
	}

	function handleTimerTick(event) {
		$.set(timeRemaining, event.detail.timeRemaining, true);
	}

	function handleTimeUp() {
		completeLesson();
	}

	function completeLesson() {
		if (!sessionId) return;

		const results = QuizSessionService.completeSession(sessionId);

		if (results) {
			$$props.onLessonComplete?.(results);
		}
	}

	function handleBackClick() {
		if (sessionId) {
			QuizSessionService.abandonSession(sessionId);
		}

		$$props.onBackToSelector?.();
	}

	function handlePauseClicked() {
		$.set(isPaused, true);

		if ($.get(timerComponent)) {
			$.get(timerComponent).pause();
		}
	}

	function handleResumeClicked() {
		$.set(isPaused, false);

		if ($.get(timerComponent)) {
			$.get(timerComponent).resume();
		}
	}

	function handleRestartClicked() {
		if (sessionId) {
			QuizSessionService.abandonSession(sessionId);
		}

		startLesson();
	}

	function formatLessonTitle() {
		if (!lessonType()) return "Unknown Lesson";

		return LessonConfigService.getFormattedLessonTitle(lessonType());
	}

	function getQuizModeDisplay() {
		if (!quizMode()) return "Unknown Mode";

		return LessonConfigService.getQuizModeName(quizMode());
	}

	var div = root();
	var node = $.child(div);

	{
		var consequent = ($$anchor) => {
			var div_1 = root_1();

			$.append($$anchor, div_1);
		};

		var alternate_1 = ($$anchor) => {
			var fragment = root_2();
			var div_2 = $.first_child(fragment);
			var button = $.child(div_2);

			button.__click = handleBackClick;

			var div_3 = $.sibling(button, 2);
			var h2 = $.child(div_3);
			var text = $.child(h2, true);

			$.reset(h2);

			var p = $.sibling(h2, 2);
			var text_1 = $.child(p);

			$.reset(p);
			$.reset(div_3);

			var node_1 = $.sibling(div_3, 2);

			{
				var consequent_1 = ($$anchor) => {
					var div_4 = root_3();
					var node_2 = $.child(div_4);

					{
						let $0 = $.derived(() => LessonConfigService.getQuizTime(quizMode() || QuizModeEnum.FIXED_QUESTION));
						let $1 = $.derived(() => !$.get(isPaused));

						$.add_svelte_meta(
							() => $.bind_this(
								QuizTimer(node_2, {
									get timeRemaining() {
										return $.get(timeRemaining);
									},

									get totalTime() {
										return $.get($0);
									},

									get isRunning() {
										return $.get($1);
									},

									size: 'small',
									$$events: { tick: handleTimerTick, timeUp: handleTimeUp }
								}),
								($$value) => $.set(timerComponent, $$value, true),
								() => $.get(timerComponent)
							),
							'component',
							LessonWorkspaceView,
							182,
							10,
							{ componentTag: 'QuizTimer' }
						);
					}

					$.reset(div_4);
					$.append($$anchor, div_4);
				};

				$.add_svelte_meta(
					() => $.if(node_1, ($$render) => {
						if ($.get(isCountdownMode) && $.get(timeRemaining) > 0) $$render(consequent_1);
					}),
					'if',
					LessonWorkspaceView,
					180,
					6
				);
			}

			var node_3 = $.sibling(node_1, 2);

			{
				var consequent_2 = ($$anchor) => {
					var div_5 = root_4();
					var node_4 = $.child(div_5);

					$.add_svelte_meta(
						() => LessonControls(node_4, {
							get showPauseButton() {
								return $.get(isCountdownMode);
							},

							showRestartButton: true,

							get isPaused() {
								return $.get(isPaused);
							},

							get isDisabled() {
								return $.get(isLoading);
							},

							onPauseClicked: handlePauseClicked,
							onResumeClicked: handleResumeClicked,
							onRestartClicked: handleRestartClicked
						}),
						'component',
						LessonWorkspaceView,
						199,
						10,
						{ componentTag: 'LessonControls' }
					);

					$.reset(div_5);
					$.append($$anchor, div_5);
				};

				$.add_svelte_meta(
					() => $.if(node_3, ($$render) => {
						if ($.get(hasStarted)) $$render(consequent_2);
					}),
					'if',
					LessonWorkspaceView,
					197,
					6
				);
			}

			$.reset(div_2);

			var node_5 = $.sibling(div_2, 2);

			{
				var consequent_3 = ($$anchor) => {
					var div_6 = root_5();
					var node_6 = $.child(div_6);

					{
						let $0 = $.derived(() => quizMode() || QuizModeEnum.FIXED_QUESTION);

						$.add_svelte_meta(
							() => ProgressTracker(node_6, {
								get progress() {
									return $.get(progress);
								},

								get quizMode() {
									return $.get($0);
								},

								compact: true
							}),
							'component',
							LessonWorkspaceView,
							215,
							8,
							{ componentTag: 'ProgressTracker' }
						);
					}

					$.reset(div_6);
					$.append($$anchor, div_6);
				};

				$.add_svelte_meta(
					() => $.if(node_5, ($$render) => {
						if ($.get(progress)) $$render(consequent_3);
					}),
					'if',
					LessonWorkspaceView,
					213,
					4
				);
			}

			var div_7 = $.sibling(node_5, 2);
			var node_7 = $.child(div_7);

			{
				var consequent_4 = ($$anchor) => {
					var fragment_1 = $.comment();
					var node_8 = $.first_child(fragment_1);

					$.add_svelte_meta(
						() => QuestionGenerator(node_8, {
							get lessonType() {
								return lessonType();
							},

							get questionData() {
								return $.get(currentQuestion);
							},

							get showFeedback() {
								return $.get(showFeedback);
							},

							get selectedAnswerId() {
								return $.get(selectedAnswerId);
							},

							get isAnswered() {
								return $.get(isAnswered);
							},

							onAnswerSelected: handleAnswerSelected,
							onNextQuestion: handleNextQuestion
						}),
						'component',
						LessonWorkspaceView,
						226,
						8,
						{ componentTag: 'QuestionGenerator' }
					);

					$.append($$anchor, fragment_1);
				};

				var alternate = ($$anchor) => {
					var div_8 = root_7();

					$.append($$anchor, div_8);
				};

				$.add_svelte_meta(
					() => $.if(node_7, ($$render) => {
						if ($.get(currentQuestion) && lessonType()) $$render(consequent_4); else $$render(alternate, false);
					}),
					'if',
					LessonWorkspaceView,
					225,
					6
				);
			}

			$.reset(div_7);

			$.template_effect(
				($0, $1) => {
					$.set_text(text, $0);
					$.set_text(text_1, `Mode: ${$1 ?? ''}`);
				},
				[formatLessonTitle, getQuizModeDisplay]
			);

			$.append($$anchor, fragment);
		};

		$.add_svelte_meta(
			() => $.if(node, ($$render) => {
				if ($.get(isLoading)) $$render(consequent); else $$render(alternate_1, false);
			}),
			'if',
			LessonWorkspaceView,
			165,
			2
		);
	}

	$.reset(div);
	$.append($$anchor, div);

	return $.pop({ ...$.legacy_api() });
}

if (import.meta.hot) {
	LessonWorkspaceView = $.hmr(LessonWorkspaceView, () => LessonWorkspaceView[$.HMR].source);

	import.meta.hot.acceptExports(["default"],(module) => {
		$.cleanup_styles('s-amBt6o9YGY_V');
		module.default[$.HMR].source = LessonWorkspaceView[$.HMR].source;
		$.set(LessonWorkspaceView[$.HMR].source, module.default[$.HMR].original);
	});
}

export default LessonWorkspaceView;

$.delegate(['click']);
import "/src/lib/components/learn/LessonWorkspaceView.svelte?svelte&type=style&lang.css";

//# sourceMappingURL=data:application/json;base64,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Ozs7Ozs7Ozs7O3lCQUlxQjt1QkFDRyxrQkFBa0I7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O2dCQVJqQyxlQUFNOzs7Ozs7Ozs7Ozs7Ozs7O0tBaERhLG1CQUM1Qjs7Ozs7Ozs7Y0FiSyxTQUFHOzs7Ozs7Ozs7Ozs7O0NBSFYiLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VzIjpbIkxlc3NvbldvcmtzcGFjZVZpZXcuc3ZlbHRlIl0sInNvdXJjZXNDb250ZW50IjpbIjwhLS0gTGVzc29uV29ya3NwYWNlVmlldy5zdmVsdGUgLSBFbmhhbmNlZCBsZXNzb24gd29ya3NwYWNlIHdpdGggZnVsbCBmdW5jdGlvbmFsaXR5IC0tPlxuPHNjcmlwdCBsYW5nPVwidHNcIj5cbiAgaW1wb3J0IHR5cGUgeyBQaWN0b2dyYXBoRGF0YSB9IGZyb20gXCIkbGliL2RvbWFpbi9QaWN0b2dyYXBoRGF0YVwiO1xuICBpbXBvcnQgeyBMZXNzb25Db25maWdTZXJ2aWNlIH0gZnJvbSBcIiRsaWIvc2VydmljZXMvbGVhcm4vTGVzc29uQ29uZmlnU2VydmljZVwiO1xuICBpbXBvcnQgeyBRdWVzdGlvbkdlbmVyYXRvclNlcnZpY2UgfSBmcm9tIFwiJGxpYi9zZXJ2aWNlcy9sZWFybi9RdWVzdGlvbkdlbmVyYXRvclNlcnZpY2VcIjtcbiAgaW1wb3J0IHsgUXVpelNlc3Npb25TZXJ2aWNlIH0gZnJvbSBcIiRsaWIvc2VydmljZXMvbGVhcm4vUXVpelNlc3Npb25TZXJ2aWNlXCI7XG4gIGltcG9ydCB0eXBlIHtcbiAgICBMYXlvdXRNb2RlLFxuICAgIExlc3NvblByb2dyZXNzLFxuICAgIExlc3NvblJlc3VsdHMsXG4gICAgTGVzc29uVHlwZSxcbiAgICBRdWVzdGlvbkRhdGEsXG4gICAgUXVpek1vZGUsXG4gIH0gZnJvbSBcIiRsaWIvdHlwZXMvbGVhcm5cIjtcbiAgaW1wb3J0IHsgUXVpek1vZGUgYXMgUXVpek1vZGVFbnVtIH0gZnJvbSBcIiRsaWIvdHlwZXMvbGVhcm5cIjtcbiAgaW1wb3J0IHsgb25EZXN0cm95LCBvbk1vdW50IH0gZnJvbSBcInN2ZWx0ZVwiO1xuXG4gIGltcG9ydCBQcm9ncmVzc1RyYWNrZXIgZnJvbSBcIi4vUHJvZ3Jlc3NUcmFja2VyLnN2ZWx0ZVwiO1xuICBpbXBvcnQgUXVlc3Rpb25HZW5lcmF0b3IgZnJvbSBcIi4vUXVlc3Rpb25HZW5lcmF0b3Iuc3ZlbHRlXCI7XG4gIGltcG9ydCBRdWl6VGltZXIgZnJvbSBcIi4vUXVpelRpbWVyLnN2ZWx0ZVwiO1xuICBpbXBvcnQgTGVzc29uQ29udHJvbHMgZnJvbSBcIi4vTGVzc29uQ29udHJvbHMuc3ZlbHRlXCI7XG5cbiAgLy8gUHJvcHNcbiAgaW50ZXJmYWNlIFByb3BzIHtcbiAgICBsZXNzb25UeXBlPzogTGVzc29uVHlwZSB8IG51bGw7XG4gICAgcXVpek1vZGU/OiBRdWl6TW9kZSB8IG51bGw7XG4gICAgbGF5b3V0TW9kZT86IExheW91dE1vZGU7XG4gICAgb25CYWNrVG9TZWxlY3Rvcj86ICgpID0+IHZvaWQ7XG4gICAgb25MZXNzb25Db21wbGV0ZT86IChyZXN1bHRzOiBMZXNzb25SZXN1bHRzKSA9PiB2b2lkO1xuICB9XG5cbiAgbGV0IHtcbiAgICBsZXNzb25UeXBlID0gbnVsbCxcbiAgICBxdWl6TW9kZSA9IG51bGwsXG4gICAgb25CYWNrVG9TZWxlY3RvcixcbiAgICBvbkxlc3NvbkNvbXBsZXRlLFxuICB9OiBQcm9wcyA9ICRwcm9wcygpO1xuXG4gIC8vIFN0YXRlXG4gIGxldCBzZXNzaW9uSWQ6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBsZXQgY3VycmVudFF1ZXN0aW9uOiBRdWVzdGlvbkRhdGEgfCBudWxsID0gJHN0YXRlKG51bGwpO1xuICBsZXQgcHJvZ3Jlc3M6IExlc3NvblByb2dyZXNzIHwgbnVsbCA9ICRzdGF0ZShudWxsKTtcbiAgbGV0IGlzQW5zd2VyZWQgPSAkc3RhdGUoZmFsc2UpO1xuICBsZXQgc2hvd0ZlZWRiYWNrID0gJHN0YXRlKGZhbHNlKTtcbiAgbGV0IHNlbGVjdGVkQW5zd2VySWQ6IHN0cmluZyB8IG51bGwgPSAkc3RhdGUobnVsbCk7XG4gIGxldCB0aW1lUmVtYWluaW5nID0gJHN0YXRlKDApO1xuICBsZXQgaXNMb2FkaW5nID0gJHN0YXRlKGZhbHNlKTtcbiAgbGV0IHF1ZXN0aW9uU3RhcnRUaW1lID0gMDtcbiAgbGV0IGlzUGF1c2VkID0gJHN0YXRlKGZhbHNlKTtcbiAgbGV0IGhhc1N0YXJ0ZWQgPSAkc3RhdGUoZmFsc2UpO1xuXG4gIC8vIENvbXBvbmVudCByZWZlcmVuY2VzXG4gIGxldCB0aW1lckNvbXBvbmVudCA9ICRzdGF0ZTxRdWl6VGltZXI+KCk7XG5cbiAgLy8gRGVyaXZlZCBzdGF0ZVxuICBjb25zdCBpc0NvdW50ZG93bk1vZGUgPSAkZGVyaXZlZChxdWl6TW9kZSA9PT0gUXVpek1vZGVFbnVtLkNPVU5URE9XTik7XG4gIGNvbnN0IGlzRml4ZWRRdWVzdGlvbk1vZGUgPSAkZGVyaXZlZChcbiAgICBxdWl6TW9kZSA9PT0gUXVpek1vZGVFbnVtLkZJWEVEX1FVRVNUSU9OXG4gICk7XG5cbiAgLy8gTGlmZWN5Y2xlXG4gIG9uTW91bnQoKCkgPT4ge1xuICAgIGlmIChsZXNzb25UeXBlICYmIHF1aXpNb2RlKSB7XG4gICAgICBzdGFydExlc3NvbigpO1xuICAgIH1cbiAgfSk7XG5cbiAgb25EZXN0cm95KCgpID0+IHtcbiAgICBpZiAoc2Vzc2lvbklkKSB7XG4gICAgICBRdWl6U2Vzc2lvblNlcnZpY2UuYWJhbmRvblNlc3Npb24oc2Vzc2lvbklkKTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIE1ldGhvZHNcbiAgZnVuY3Rpb24gc3RhcnRMZXNzb24oKSB7XG4gICAgaWYgKCFsZXNzb25UeXBlIHx8ICFxdWl6TW9kZSkgcmV0dXJuO1xuXG4gICAgaXNMb2FkaW5nID0gdHJ1ZTtcblxuICAgIC8vIENyZWF0ZSBxdWl6IHNlc3Npb25cbiAgICBzZXNzaW9uSWQgPSBRdWl6U2Vzc2lvblNlcnZpY2UuY3JlYXRlU2Vzc2lvbihsZXNzb25UeXBlLCBxdWl6TW9kZSk7XG5cbiAgICAvLyBTZXQgdXAgdGltZXIgZm9yIGNvdW50ZG93biBtb2RlXG4gICAgaWYgKGlzQ291bnRkb3duTW9kZSkge1xuICAgICAgdGltZVJlbWFpbmluZyA9IExlc3NvbkNvbmZpZ1NlcnZpY2UuZ2V0UXVpelRpbWUocXVpek1vZGUpO1xuICAgICAgaWYgKHRpbWVyQ29tcG9uZW50KSB7XG4gICAgICAgIHRpbWVyQ29tcG9uZW50LnN0YXJ0KCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gR2VuZXJhdGUgZmlyc3QgcXVlc3Rpb25cbiAgICBnZW5lcmF0ZU5ld1F1ZXN0aW9uKCk7XG4gICAgdXBkYXRlUHJvZ3Jlc3MoKTtcbiAgICBoYXNTdGFydGVkID0gdHJ1ZTtcblxuICAgIGlzTG9hZGluZyA9IGZhbHNlO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2VuZXJhdGVOZXdRdWVzdGlvbigpIHtcbiAgICBpZiAoIWxlc3NvblR5cGUpIHJldHVybjtcblxuICAgIHRyeSB7XG4gICAgICBjdXJyZW50UXVlc3Rpb24gPSBRdWVzdGlvbkdlbmVyYXRvclNlcnZpY2UuZ2VuZXJhdGVRdWVzdGlvbihsZXNzb25UeXBlKTtcbiAgICAgIHF1ZXN0aW9uU3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgIHJlc2V0UXVlc3Rpb25TdGF0ZSgpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGdlbmVyYXRlIHF1ZXN0aW9uOlwiLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcmVzZXRRdWVzdGlvblN0YXRlKCkge1xuICAgIGlzQW5zd2VyZWQgPSBmYWxzZTtcbiAgICBzaG93RmVlZGJhY2sgPSBmYWxzZTtcbiAgICBzZWxlY3RlZEFuc3dlcklkID0gbnVsbDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZUFuc3dlclNlbGVjdGVkKGRhdGE6IHtcbiAgICBhbnN3ZXJJZDogc3RyaW5nO1xuICAgIGFuc3dlckNvbnRlbnQ6IFBpY3RvZ3JhcGhEYXRhO1xuICAgIGlzQ29ycmVjdDogYm9vbGVhbjtcbiAgfSkge1xuICAgIGlmIChpc0Fuc3dlcmVkIHx8ICFjdXJyZW50UXVlc3Rpb24gfHwgIXNlc3Npb25JZCkgcmV0dXJuO1xuXG4gICAgY29uc3QgeyBhbnN3ZXJJZCwgaXNDb3JyZWN0IH0gPSBkYXRhO1xuICAgIGNvbnN0IHRpbWVUb0Fuc3dlciA9IERhdGUubm93KCkgLSBxdWVzdGlvblN0YXJ0VGltZTtcblxuICAgIC8vIE1hcmsgYXMgYW5zd2VyZWRcbiAgICBpc0Fuc3dlcmVkID0gdHJ1ZTtcbiAgICBzZWxlY3RlZEFuc3dlcklkID0gYW5zd2VySWQ7XG4gICAgc2hvd0ZlZWRiYWNrID0gdHJ1ZTtcblxuICAgIC8vIFVwZGF0ZSBzZXNzaW9uIHByb2dyZXNzXG4gICAgUXVpelNlc3Npb25TZXJ2aWNlLnVwZGF0ZVNlc3Npb25Qcm9ncmVzcyhcbiAgICAgIHNlc3Npb25JZCxcbiAgICAgIGlzQ29ycmVjdCxcbiAgICAgIHRpbWVUb0Fuc3dlciAvIDEwMDBcbiAgICApO1xuICAgIHVwZGF0ZVByb2dyZXNzKCk7XG5cbiAgICAvLyBBdXRvLWFkdmFuY2UgYWZ0ZXIgZmVlZGJhY2sgZGVsYXlcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGlmIChzaG91bGRDb250aW51ZVF1aXooKSkge1xuICAgICAgICBoYW5kbGVOZXh0UXVlc3Rpb24oKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbXBsZXRlTGVzc29uKCk7XG4gICAgICB9XG4gICAgfSwgMjAwMCk7XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVOZXh0UXVlc3Rpb24oKSB7XG4gICAgaWYgKCFzZXNzaW9uSWQpIHJldHVybjtcblxuICAgIGlmIChzaG91bGRDb250aW51ZVF1aXooKSkge1xuICAgICAgZ2VuZXJhdGVOZXdRdWVzdGlvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb21wbGV0ZUxlc3NvbigpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNob3VsZENvbnRpbnVlUXVpeigpOiBib29sZWFuIHtcbiAgICBpZiAoIXNlc3Npb25JZCkgcmV0dXJuIGZhbHNlO1xuXG4gICAgY29uc3Qgc2Vzc2lvbiA9IFF1aXpTZXNzaW9uU2VydmljZS5nZXRTZXNzaW9uKHNlc3Npb25JZCk7XG4gICAgaWYgKCFzZXNzaW9uIHx8ICFzZXNzaW9uLmlzQWN0aXZlKSByZXR1cm4gZmFsc2U7XG5cbiAgICBpZiAoaXNGaXhlZFF1ZXN0aW9uTW9kZSkge1xuICAgICAgcmV0dXJuIHNlc3Npb24ucXVlc3Rpb25zQW5zd2VyZWQgPCBzZXNzaW9uLnRvdGFsUXVlc3Rpb25zO1xuICAgIH0gZWxzZSBpZiAoaXNDb3VudGRvd25Nb2RlKSB7XG4gICAgICByZXR1cm4gdGltZVJlbWFpbmluZyA+IDA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlUHJvZ3Jlc3MoKSB7XG4gICAgaWYgKCFzZXNzaW9uSWQpIHJldHVybjtcbiAgICBwcm9ncmVzcyA9IFF1aXpTZXNzaW9uU2VydmljZS5nZXRMZXNzb25Qcm9ncmVzcyhzZXNzaW9uSWQpO1xuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlVGltZXJUaWNrKGV2ZW50OiBDdXN0b21FdmVudCkge1xuICAgIHRpbWVSZW1haW5pbmcgPSBldmVudC5kZXRhaWwudGltZVJlbWFpbmluZztcbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZVRpbWVVcCgpIHtcbiAgICBjb21wbGV0ZUxlc3NvbigpO1xuICB9XG5cbiAgZnVuY3Rpb24gY29tcGxldGVMZXNzb24oKSB7XG4gICAgaWYgKCFzZXNzaW9uSWQpIHJldHVybjtcblxuICAgIGNvbnN0IHJlc3VsdHMgPSBRdWl6U2Vzc2lvblNlcnZpY2UuY29tcGxldGVTZXNzaW9uKHNlc3Npb25JZCk7XG4gICAgaWYgKHJlc3VsdHMpIHtcbiAgICAgIG9uTGVzc29uQ29tcGxldGU/LihyZXN1bHRzKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVCYWNrQ2xpY2soKSB7XG4gICAgaWYgKHNlc3Npb25JZCkge1xuICAgICAgUXVpelNlc3Npb25TZXJ2aWNlLmFiYW5kb25TZXNzaW9uKHNlc3Npb25JZCk7XG4gICAgfVxuICAgIG9uQmFja1RvU2VsZWN0b3I/LigpO1xuICB9XG5cbiAgLy8gTGVzc29uIGNvbnRyb2wgaGFuZGxlcnNcbiAgZnVuY3Rpb24gaGFuZGxlUGF1c2VDbGlja2VkKCkge1xuICAgIGlzUGF1c2VkID0gdHJ1ZTtcbiAgICBpZiAodGltZXJDb21wb25lbnQpIHtcbiAgICAgIHRpbWVyQ29tcG9uZW50LnBhdXNlKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlUmVzdW1lQ2xpY2tlZCgpIHtcbiAgICBpc1BhdXNlZCA9IGZhbHNlO1xuICAgIGlmICh0aW1lckNvbXBvbmVudCkge1xuICAgICAgdGltZXJDb21wb25lbnQucmVzdW1lKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlUmVzdGFydENsaWNrZWQoKSB7XG4gICAgaWYgKHNlc3Npb25JZCkge1xuICAgICAgUXVpelNlc3Npb25TZXJ2aWNlLmFiYW5kb25TZXNzaW9uKHNlc3Npb25JZCk7XG4gICAgfVxuICAgIC8vIFJlc3RhcnQgdGhlIGxlc3NvblxuICAgIHN0YXJ0TGVzc29uKCk7XG4gIH1cblxuICBmdW5jdGlvbiBmb3JtYXRMZXNzb25UaXRsZSgpOiBzdHJpbmcge1xuICAgIGlmICghbGVzc29uVHlwZSkgcmV0dXJuIFwiVW5rbm93biBMZXNzb25cIjtcbiAgICByZXR1cm4gTGVzc29uQ29uZmlnU2VydmljZS5nZXRGb3JtYXR0ZWRMZXNzb25UaXRsZShsZXNzb25UeXBlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFF1aXpNb2RlRGlzcGxheSgpOiBzdHJpbmcge1xuICAgIGlmICghcXVpek1vZGUpIHJldHVybiBcIlVua25vd24gTW9kZVwiO1xuICAgIHJldHVybiBMZXNzb25Db25maWdTZXJ2aWNlLmdldFF1aXpNb2RlTmFtZShxdWl6TW9kZSk7XG4gIH1cbjwvc2NyaXB0PlxuXG48ZGl2IGNsYXNzPVwibGVzc29uLXdvcmtzcGFjZVwiPlxuICB7I2lmIGlzTG9hZGluZ31cbiAgICA8ZGl2IGNsYXNzPVwibG9hZGluZy1zY3JlZW5cIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJsb2FkaW5nLXNwaW5uZXJcIj48L2Rpdj5cbiAgICAgIDxwPlN0YXJ0aW5nIGxlc3Nvbi4uLjwvcD5cbiAgICA8L2Rpdj5cbiAgezplbHNlfVxuICAgIDwhLS0gSGVhZGVyIC0tPlxuICAgIDxkaXYgY2xhc3M9XCJ3b3Jrc3BhY2UtaGVhZGVyXCI+XG4gICAgICA8YnV0dG9uIGNsYXNzPVwiYmFjay1idXR0b25cIiBvbmNsaWNrPXtoYW5kbGVCYWNrQ2xpY2t9PlxuICAgICAgICDihpAgQmFjayB0byBMZXNzb25zXG4gICAgICA8L2J1dHRvbj5cbiAgICAgIDxkaXYgY2xhc3M9XCJsZXNzb24taW5mb1wiPlxuICAgICAgICA8aDIgY2xhc3M9XCJsZXNzb24tdGl0bGVcIj57Zm9ybWF0TGVzc29uVGl0bGUoKX08L2gyPlxuICAgICAgICA8cCBjbGFzcz1cInF1aXotbW9kZVwiPk1vZGU6IHtnZXRRdWl6TW9kZURpc3BsYXkoKX08L3A+XG4gICAgICA8L2Rpdj5cbiAgICAgIHsjaWYgaXNDb3VudGRvd25Nb2RlICYmIHRpbWVSZW1haW5pbmcgPiAwfVxuICAgICAgICA8ZGl2IGNsYXNzPVwidGltZXItY29udGFpbmVyXCI+XG4gICAgICAgICAgPFF1aXpUaW1lclxuICAgICAgICAgICAgYmluZDp0aGlzPXt0aW1lckNvbXBvbmVudH1cbiAgICAgICAgICAgIHt0aW1lUmVtYWluaW5nfVxuICAgICAgICAgICAgdG90YWxUaW1lPXtMZXNzb25Db25maWdTZXJ2aWNlLmdldFF1aXpUaW1lKFxuICAgICAgICAgICAgICBxdWl6TW9kZSB8fCBRdWl6TW9kZUVudW0uRklYRURfUVVFU1RJT05cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICBpc1J1bm5pbmc9eyFpc1BhdXNlZH1cbiAgICAgICAgICAgIHNpemU9XCJzbWFsbFwiXG4gICAgICAgICAgICBvbjp0aWNrPXtoYW5kbGVUaW1lclRpY2t9XG4gICAgICAgICAgICBvbjp0aW1lVXA9e2hhbmRsZVRpbWVVcH1cbiAgICAgICAgICAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIHsvaWZ9XG5cbiAgICAgIDwhLS0gTGVzc29uIENvbnRyb2xzIC0tPlxuICAgICAgeyNpZiBoYXNTdGFydGVkfVxuICAgICAgICA8ZGl2IGNsYXNzPVwiY29udHJvbHMtY29udGFpbmVyXCI+XG4gICAgICAgICAgPExlc3NvbkNvbnRyb2xzXG4gICAgICAgICAgICBzaG93UGF1c2VCdXR0b249e2lzQ291bnRkb3duTW9kZX1cbiAgICAgICAgICAgIHNob3dSZXN0YXJ0QnV0dG9uPXt0cnVlfVxuICAgICAgICAgICAge2lzUGF1c2VkfVxuICAgICAgICAgICAgaXNEaXNhYmxlZD17aXNMb2FkaW5nfVxuICAgICAgICAgICAgb25QYXVzZUNsaWNrZWQ9e2hhbmRsZVBhdXNlQ2xpY2tlZH1cbiAgICAgICAgICAgIG9uUmVzdW1lQ2xpY2tlZD17aGFuZGxlUmVzdW1lQ2xpY2tlZH1cbiAgICAgICAgICAgIG9uUmVzdGFydENsaWNrZWQ9e2hhbmRsZVJlc3RhcnRDbGlja2VkfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgey9pZn1cbiAgICA8L2Rpdj5cblxuICAgIDwhLS0gUHJvZ3Jlc3MgVHJhY2tlciAtLT5cbiAgICB7I2lmIHByb2dyZXNzfVxuICAgICAgPGRpdiBjbGFzcz1cInByb2dyZXNzLWNvbnRhaW5lclwiPlxuICAgICAgICA8UHJvZ3Jlc3NUcmFja2VyXG4gICAgICAgICAge3Byb2dyZXNzfVxuICAgICAgICAgIHF1aXpNb2RlPXtxdWl6TW9kZSB8fCBRdWl6TW9kZUVudW0uRklYRURfUVVFU1RJT059XG4gICAgICAgICAgY29tcGFjdD17dHJ1ZX1cbiAgICAgICAgLz5cbiAgICAgIDwvZGl2PlxuICAgIHsvaWZ9XG5cbiAgICA8IS0tIE1haW4gQ29udGVudCAtLT5cbiAgICA8ZGl2IGNsYXNzPVwid29ya3NwYWNlLWNvbnRlbnRcIj5cbiAgICAgIHsjaWYgY3VycmVudFF1ZXN0aW9uICYmIGxlc3NvblR5cGV9XG4gICAgICAgIDxRdWVzdGlvbkdlbmVyYXRvclxuICAgICAgICAgIHtsZXNzb25UeXBlfVxuICAgICAgICAgIHF1ZXN0aW9uRGF0YT17Y3VycmVudFF1ZXN0aW9ufVxuICAgICAgICAgIHtzaG93RmVlZGJhY2t9XG4gICAgICAgICAge3NlbGVjdGVkQW5zd2VySWR9XG4gICAgICAgICAge2lzQW5zd2VyZWR9XG4gICAgICAgICAgb25BbnN3ZXJTZWxlY3RlZD17aGFuZGxlQW5zd2VyU2VsZWN0ZWR9XG4gICAgICAgICAgb25OZXh0UXVlc3Rpb249e2hhbmRsZU5leHRRdWVzdGlvbn1cbiAgICAgICAgLz5cbiAgICAgIHs6ZWxzZX1cbiAgICAgICAgPGRpdiBjbGFzcz1cIm5vLXF1ZXN0aW9uXCI+XG4gICAgICAgICAgPHA+Tm8gcXVlc3Rpb24gYXZhaWxhYmxlPC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIHsvaWZ9XG4gICAgPC9kaXY+XG4gIHsvaWZ9XG48L2Rpdj5cblxuPHN0eWxlPlxuICAubGVzc29uLXdvcmtzcGFjZSB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIGhlaWdodDogMTAwJTtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBnYXA6IHZhcigtLXNwYWNpbmctbGcpO1xuICAgIHBhZGRpbmc6IHZhcigtLXNwYWNpbmctbGcpO1xuICB9XG5cbiAgLndvcmtzcGFjZS1oZWFkZXIge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBnYXA6IHZhcigtLXNwYWNpbmctbGcpO1xuICAgIHBhZGRpbmc6IHZhcigtLXNwYWNpbmctbWQpIHZhcigtLXNwYWNpbmctbGcpO1xuICAgIGJvcmRlci1yYWRpdXM6IDEycHg7XG4gIH1cblxuICAuYmFjay1idXR0b24ge1xuICAgIHBhZGRpbmc6IHZhcigtLXNwYWNpbmctc20pIHZhcigtLXNwYWNpbmctbWQpO1xuICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICBmb250LXNpemU6IHZhcigtLWZvbnQtc2l6ZS1zbSk7XG4gICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICB0cmFuc2l0aW9uOiBhbGwgdmFyKC0tdHJhbnNpdGlvbi1ub3JtYWwpO1xuICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gIH1cblxuICAuYmFjay1idXR0b246aG92ZXIge1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtMnB4KTtcbiAgfVxuXG4gIC5sZXNzb24taW5mbyB7XG4gICAgZmxleDogMTtcbiAgfVxuXG4gIC5sZXNzb24tdGl0bGUge1xuICAgIGNvbG9yOiB2YXIoLS1mb3JlZ3JvdW5kKTtcbiAgICBmb250LWZhbWlseTogR2VvcmdpYSwgc2VyaWY7XG4gICAgZm9udC1zaXplOiB2YXIoLS1mb250LXNpemUteGwpO1xuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgIG1hcmdpbjogMCAwIHZhcigtLXNwYWNpbmcteHMpIDA7XG4gIH1cblxuICAucXVpei1tb2RlIHtcbiAgICBjb2xvcjogdmFyKC0tbXV0ZWQtZm9yZWdyb3VuZCk7XG4gICAgZm9udC1zaXplOiB2YXIoLS1mb250LXNpemUtc20pO1xuICAgIG1hcmdpbjogMDtcbiAgfVxuXG4gIC50aW1lci1jb250YWluZXIge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgfVxuXG4gIC5jb250cm9scy1jb250YWluZXIge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBtYXJnaW4tbGVmdDogYXV0bztcbiAgfVxuXG4gIC5wcm9ncmVzcy1jb250YWluZXIge1xuICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4wNSk7XG4gICAgYm9yZGVyLXJhZGl1czogMTJweDtcbiAgICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMSk7XG4gICAgYmFja2Ryb3AtZmlsdGVyOiBibHVyKDEwcHgpO1xuICB9XG5cbiAgLndvcmtzcGFjZS1jb250ZW50IHtcbiAgICBmbGV4OiAxO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICBtaW4taGVpZ2h0OiA0MDBweDtcbiAgfVxuXG4gIC5uby1xdWVzdGlvbiB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIHBhZGRpbmc6IDJyZW07XG4gICAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjA1KTtcbiAgICBib3JkZXItcmFkaXVzOiAxMnB4O1xuICAgIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xKTtcbiAgICBiYWNrZHJvcC1maWx0ZXI6IGJsdXIoMTBweCk7XG4gICAgY29sb3I6ICM5NGEzYjg7XG4gICAgZm9udC1zaXplOiAxLjEyNXJlbTtcbiAgfVxuXG4gIC5sb2FkaW5nLXNjcmVlbiB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIGdhcDogMXJlbTtcbiAgICBjb2xvcjogI2ZmZmZmZjtcbiAgfVxuXG4gIC5sb2FkaW5nLXNwaW5uZXIge1xuICAgIHdpZHRoOiA0MHB4O1xuICAgIGhlaWdodDogNDBweDtcbiAgICBib3JkZXI6IDRweCBzb2xpZCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMSk7XG4gICAgYm9yZGVyLWxlZnQ6IDRweCBzb2xpZCAjNjY3ZWVhO1xuICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgICBhbmltYXRpb246IHNwaW4gMXMgbGluZWFyIGluZmluaXRlO1xuICB9XG5cbiAgQGtleWZyYW1lcyBzcGluIHtcbiAgICAwJSB7XG4gICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTtcbiAgICB9XG4gICAgMTAwJSB7XG4gICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpO1xuICAgIH1cbiAgfVxuXG4gIC8qIFJlc3BvbnNpdmUgYWRqdXN0bWVudHMgKi9cbiAgQG1lZGlhIChtYXgtd2lkdGg6IDc2OHB4KSB7XG4gICAgLmxlc3Nvbi13b3Jrc3BhY2Uge1xuICAgICAgcGFkZGluZzogMXJlbTtcbiAgICAgIGdhcDogMXJlbTtcbiAgICB9XG5cbiAgICAud29ya3NwYWNlLWhlYWRlciB7XG4gICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgYWxpZ24taXRlbXM6IGZsZXgtc3RhcnQ7XG4gICAgICBnYXA6IDFyZW07XG4gICAgfVxuXG4gICAgLmxlc3Nvbi10aXRsZSB7XG4gICAgICBmb250LXNpemU6IDEuMjVyZW07XG4gICAgfVxuXG4gICAgLndvcmtzcGFjZS1jb250ZW50IHtcbiAgICAgIG1pbi1oZWlnaHQ6IDMwMHB4O1xuICAgIH1cbiAgfVxuXG4gIEBtZWRpYSAobWF4LXdpZHRoOiA0ODBweCkge1xuICAgIC5sZXNzb24td29ya3NwYWNlIHtcbiAgICAgIHBhZGRpbmc6IDAuNzVyZW07XG4gICAgfVxuXG4gICAgLndvcmtzcGFjZS1oZWFkZXIge1xuICAgICAgcGFkZGluZzogMC43NXJlbSAxcmVtO1xuICAgIH1cblxuICAgIC5iYWNrLWJ1dHRvbiB7XG4gICAgICBwYWRkaW5nOiAwLjVyZW0gMXJlbTtcbiAgICAgIGZvbnQtc2l6ZTogMC43NXJlbTtcbiAgICB9XG5cbiAgICAubGVzc29uLXRpdGxlIHtcbiAgICAgIGZvbnQtc2l6ZTogMS4xMjVyZW07XG4gICAgfVxuXG4gICAgLndvcmtzcGFjZS1jb250ZW50IHtcbiAgICAgIG1pbi1oZWlnaHQ6IDI1MHB4O1xuICAgIH1cbiAgfVxuPC9zdHlsZT5cbiJdLCJmaWxlIjoiRjovQ09ERS9US0Evd2ViL3NyYy9saWIvY29tcG9uZW50cy9sZWFybi9MZXNzb25Xb3Jrc3BhY2VWaWV3LnN2ZWx0ZSJ9