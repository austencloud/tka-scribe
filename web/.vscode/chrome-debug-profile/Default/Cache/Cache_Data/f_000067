import { createMovementPattern } from "/src/lib/domain/MovementData.ts";
import {
  GridPosition,
  Timing,
  Direction,
  MotionType,
  RotationDirection
} from "/src/lib/domain/enums.ts";
export class MovementPatternService {
  createPattern(letter, config) {
    return createMovementPattern({
      letter,
      ...config
    });
  }
  getAlphaSequence() {
    return [
      GridPosition.ALPHA3,
      GridPosition.ALPHA5,
      GridPosition.ALPHA7,
      GridPosition.ALPHA1
    ];
  }
  getBetaSequence() {
    return [
      GridPosition.BETA3,
      GridPosition.BETA5,
      GridPosition.BETA7,
      GridPosition.BETA1
    ];
  }
  getGammaSequence() {
    return [
      GridPosition.GAMMA3,
      GridPosition.GAMMA5,
      GridPosition.GAMMA7,
      GridPosition.GAMMA1,
      GridPosition.GAMMA11,
      GridPosition.GAMMA13,
      GridPosition.GAMMA15,
      GridPosition.GAMMA9
    ];
  }
  getCustomSequence(positions) {
    return [...positions];
  }
  createVariations(basePattern, variations) {
    return variations.map((variation, index) => {
      const [blueMotion, redMotion] = variation.motionCombination;
      const [blueRotation, redRotation] = variation.rotationCombination;
      return createMovementPattern({
        ...basePattern,
        letter: `${basePattern.letter}_${index + 1}`,
        baseBlueMotion: blueMotion,
        baseRedMotion: redMotion,
        baseBlueRotation: blueRotation,
        baseRedRotation: redRotation
      });
    });
  }
  /**
   * Get predefined pattern templates for standard letters
   */
  getPatternA() {
    return this.createPattern("A", {
      timing: Timing.SPLIT,
      direction: Direction.SAME,
      positionSystem: "alpha",
      baseBlueMotion: MotionType.PRO,
      baseRedMotion: MotionType.PRO,
      baseBlueRotation: RotationDirection.CLOCKWISE,
      baseRedRotation: RotationDirection.CLOCKWISE
    });
  }
  getPatternB() {
    return this.createPattern("B", {
      timing: Timing.SPLIT,
      direction: Direction.SAME,
      positionSystem: "alpha",
      baseBlueMotion: MotionType.ANTI,
      baseRedMotion: MotionType.ANTI,
      baseBlueRotation: RotationDirection.COUNTER_CLOCKWISE,
      baseRedRotation: RotationDirection.COUNTER_CLOCKWISE
    });
  }
  getPatternC() {
    return this.createPattern("C", {
      timing: Timing.SPLIT,
      direction: Direction.SAME,
      positionSystem: "alpha",
      baseBlueMotion: MotionType.ANTI,
      baseRedMotion: MotionType.PRO,
      baseBlueRotation: RotationDirection.COUNTER_CLOCKWISE,
      baseRedRotation: RotationDirection.CLOCKWISE,
      variations: [
        {
          name: "reversed",
          blueMotionType: MotionType.PRO,
          redMotionType: MotionType.ANTI,
          blueRotation: RotationDirection.CLOCKWISE,
          redRotation: RotationDirection.COUNTER_CLOCKWISE
        }
      ]
    });
  }
  getPatternG() {
    return this.createPattern("G", {
      timing: Timing.TOG,
      direction: Direction.SAME,
      positionSystem: "beta",
      baseBlueMotion: MotionType.PRO,
      baseRedMotion: MotionType.PRO,
      baseBlueRotation: RotationDirection.CLOCKWISE,
      baseRedRotation: RotationDirection.CLOCKWISE
    });
  }
  getPatternM() {
    return this.createPattern("M", {
      timing: Timing.QUARTER,
      direction: Direction.OPP,
      positionSystem: "gamma",
      baseBlueMotion: MotionType.PRO,
      baseRedMotion: MotionType.PRO,
      baseBlueRotation: RotationDirection.COUNTER_CLOCKWISE,
      baseRedRotation: RotationDirection.CLOCKWISE
    });
  }
  getPatternW() {
    return this.createPattern("W", {
      timing: Timing.NONE,
      direction: Direction.NONE,
      positionSystem: "gamma",
      baseBlueMotion: MotionType.STATIC,
      baseRedMotion: MotionType.PRO,
      baseBlueRotation: RotationDirection.NO_ROTATION,
      baseRedRotation: RotationDirection.CLOCKWISE,
      variations: [
        {
          name: "reversed",
          blueMotionType: MotionType.PRO,
          redMotionType: MotionType.STATIC,
          blueRotation: RotationDirection.CLOCKWISE,
          redRotation: RotationDirection.NO_ROTATION
        }
      ]
    });
  }
  getPatternWDash() {
    return this.createPattern("W-", {
      timing: Timing.NONE,
      direction: Direction.NONE,
      positionSystem: "gamma",
      baseBlueMotion: MotionType.DASH,
      baseRedMotion: MotionType.PRO,
      baseBlueRotation: RotationDirection.NO_ROTATION,
      baseRedRotation: RotationDirection.CLOCKWISE,
      variations: [
        {
          name: "reversed",
          blueMotionType: MotionType.PRO,
          redMotionType: MotionType.DASH,
          blueRotation: RotationDirection.CLOCKWISE,
          redRotation: RotationDirection.NO_ROTATION
        }
      ]
    });
  }
  getPatternAlpha() {
    return this.createPattern("Î±", {
      timing: Timing.NONE,
      direction: Direction.NONE,
      positionSystem: "alpha",
      baseBlueMotion: MotionType.STATIC,
      baseRedMotion: MotionType.STATIC,
      baseBlueRotation: RotationDirection.NO_ROTATION,
      baseRedRotation: RotationDirection.NO_ROTATION
    });
  }
  /**
   * Generate position sequence based on pattern system
   */
  generatePositionSequence(pattern, length = 8) {
    const baseSequence = this.getSequenceBySystem(pattern.positionSystem);
    const result = [];
    for (let i = 0; i < length; i++) {
      result.push(baseSequence[i % baseSequence.length]);
    }
    return result;
  }
  getSequenceBySystem(system) {
    switch (system) {
      case "alpha":
        return this.getAlphaSequence();
      case "beta":
        return this.getBetaSequence();
      case "gamma":
        return this.getGammaSequence();
      default:
        throw new Error(`Unknown position system: ${system}`);
    }
  }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIk1vdmVtZW50UGF0dGVyblNlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBNb3ZlbWVudCBQYXR0ZXJuIFNlcnZpY2UgLSBNb3ZlbWVudCBwYXR0ZXJuIHRlbXBsYXRlcyBhbmQgdmFyaWF0aW9uc1xuICpcbiAqIENyZWF0ZXMgbW92ZW1lbnQgcGF0dGVybnMgZnJvbSB0ZW1wbGF0ZXMgYW5kIGdlbmVyYXRlcyB2YXJpYXRpb25zLlxuICogTWFuYWdlcyBwb3NpdGlvbiBzZXF1ZW5jZXMgYW5kIHBhdHRlcm4gY29tYmluYXRpb25zIGZvciBtb3ZlbWVudCBnZW5lcmF0aW9uLlxuICovXG5cbmltcG9ydCB0eXBlIHsgSU1vdmVtZW50UGF0dGVyblNlcnZpY2UgfSBmcm9tIFwiLi4vLi4vaW50ZXJmYWNlcy9nZW5lcmF0aW9uLWludGVyZmFjZXNcIjtcbmltcG9ydCB0eXBlIHsgTW92ZW1lbnRQYXR0ZXJuIH0gZnJvbSBcIiRsaWIvZG9tYWluL01vdmVtZW50RGF0YVwiO1xuaW1wb3J0IHsgY3JlYXRlTW92ZW1lbnRQYXR0ZXJuIH0gZnJvbSBcIiRsaWIvZG9tYWluL01vdmVtZW50RGF0YVwiO1xuaW1wb3J0IHtcbiAgR3JpZFBvc2l0aW9uLFxuICBUaW1pbmcsXG4gIERpcmVjdGlvbixcbiAgTW90aW9uVHlwZSxcbiAgUm90YXRpb25EaXJlY3Rpb24sXG59IGZyb20gXCIkbGliL2RvbWFpbi9lbnVtc1wiO1xuXG5leHBvcnQgY2xhc3MgTW92ZW1lbnRQYXR0ZXJuU2VydmljZSBpbXBsZW1lbnRzIElNb3ZlbWVudFBhdHRlcm5TZXJ2aWNlIHtcbiAgY3JlYXRlUGF0dGVybihcbiAgICBsZXR0ZXI6IHN0cmluZyxcbiAgICBjb25maWc6IFBhcnRpYWw8TW92ZW1lbnRQYXR0ZXJuPlxuICApOiBNb3ZlbWVudFBhdHRlcm4ge1xuICAgIHJldHVybiBjcmVhdGVNb3ZlbWVudFBhdHRlcm4oe1xuICAgICAgbGV0dGVyLFxuICAgICAgLi4uY29uZmlnLFxuICAgIH0pO1xuICB9XG5cbiAgZ2V0QWxwaGFTZXF1ZW5jZSgpOiBHcmlkUG9zaXRpb25bXSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIEdyaWRQb3NpdGlvbi5BTFBIQTMsXG4gICAgICBHcmlkUG9zaXRpb24uQUxQSEE1LFxuICAgICAgR3JpZFBvc2l0aW9uLkFMUEhBNyxcbiAgICAgIEdyaWRQb3NpdGlvbi5BTFBIQTEsXG4gICAgXTtcbiAgfVxuXG4gIGdldEJldGFTZXF1ZW5jZSgpOiBHcmlkUG9zaXRpb25bXSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIEdyaWRQb3NpdGlvbi5CRVRBMyxcbiAgICAgIEdyaWRQb3NpdGlvbi5CRVRBNSxcbiAgICAgIEdyaWRQb3NpdGlvbi5CRVRBNyxcbiAgICAgIEdyaWRQb3NpdGlvbi5CRVRBMSxcbiAgICBdO1xuICB9XG5cbiAgZ2V0R2FtbWFTZXF1ZW5jZSgpOiBHcmlkUG9zaXRpb25bXSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIEdyaWRQb3NpdGlvbi5HQU1NQTMsXG4gICAgICBHcmlkUG9zaXRpb24uR0FNTUE1LFxuICAgICAgR3JpZFBvc2l0aW9uLkdBTU1BNyxcbiAgICAgIEdyaWRQb3NpdGlvbi5HQU1NQTEsXG4gICAgICBHcmlkUG9zaXRpb24uR0FNTUExMSxcbiAgICAgIEdyaWRQb3NpdGlvbi5HQU1NQTEzLFxuICAgICAgR3JpZFBvc2l0aW9uLkdBTU1BMTUsXG4gICAgICBHcmlkUG9zaXRpb24uR0FNTUE5LFxuICAgIF07XG4gIH1cblxuICBnZXRDdXN0b21TZXF1ZW5jZShwb3NpdGlvbnM6IEdyaWRQb3NpdGlvbltdKTogR3JpZFBvc2l0aW9uW10ge1xuICAgIHJldHVybiBbLi4ucG9zaXRpb25zXTtcbiAgfVxuXG4gIGNyZWF0ZVZhcmlhdGlvbnMoXG4gICAgYmFzZVBhdHRlcm46IE1vdmVtZW50UGF0dGVybixcbiAgICB2YXJpYXRpb25zOiBBcnJheTx7XG4gICAgICBtb3Rpb25Db21iaW5hdGlvbjogW3N0cmluZywgc3RyaW5nXTtcbiAgICAgIHJvdGF0aW9uQ29tYmluYXRpb246IFtzdHJpbmcsIHN0cmluZ107XG4gICAgfT5cbiAgKTogTW92ZW1lbnRQYXR0ZXJuW10ge1xuICAgIHJldHVybiB2YXJpYXRpb25zLm1hcCgodmFyaWF0aW9uLCBpbmRleCkgPT4ge1xuICAgICAgY29uc3QgW2JsdWVNb3Rpb24sIHJlZE1vdGlvbl0gPSB2YXJpYXRpb24ubW90aW9uQ29tYmluYXRpb247XG4gICAgICBjb25zdCBbYmx1ZVJvdGF0aW9uLCByZWRSb3RhdGlvbl0gPSB2YXJpYXRpb24ucm90YXRpb25Db21iaW5hdGlvbjtcblxuICAgICAgcmV0dXJuIGNyZWF0ZU1vdmVtZW50UGF0dGVybih7XG4gICAgICAgIC4uLmJhc2VQYXR0ZXJuLFxuICAgICAgICBsZXR0ZXI6IGAke2Jhc2VQYXR0ZXJuLmxldHRlcn1fJHtpbmRleCArIDF9YCxcbiAgICAgICAgYmFzZUJsdWVNb3Rpb246IGJsdWVNb3Rpb24gYXMgTW90aW9uVHlwZSxcbiAgICAgICAgYmFzZVJlZE1vdGlvbjogcmVkTW90aW9uIGFzIE1vdGlvblR5cGUsXG4gICAgICAgIGJhc2VCbHVlUm90YXRpb246IGJsdWVSb3RhdGlvbiBhcyBSb3RhdGlvbkRpcmVjdGlvbixcbiAgICAgICAgYmFzZVJlZFJvdGF0aW9uOiByZWRSb3RhdGlvbiBhcyBSb3RhdGlvbkRpcmVjdGlvbixcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBwcmVkZWZpbmVkIHBhdHRlcm4gdGVtcGxhdGVzIGZvciBzdGFuZGFyZCBsZXR0ZXJzXG4gICAqL1xuICBnZXRQYXR0ZXJuQSgpOiBNb3ZlbWVudFBhdHRlcm4ge1xuICAgIHJldHVybiB0aGlzLmNyZWF0ZVBhdHRlcm4oXCJBXCIsIHtcbiAgICAgIHRpbWluZzogVGltaW5nLlNQTElULFxuICAgICAgZGlyZWN0aW9uOiBEaXJlY3Rpb24uU0FNRSxcbiAgICAgIHBvc2l0aW9uU3lzdGVtOiBcImFscGhhXCIsXG4gICAgICBiYXNlQmx1ZU1vdGlvbjogTW90aW9uVHlwZS5QUk8sXG4gICAgICBiYXNlUmVkTW90aW9uOiBNb3Rpb25UeXBlLlBSTyxcbiAgICAgIGJhc2VCbHVlUm90YXRpb246IFJvdGF0aW9uRGlyZWN0aW9uLkNMT0NLV0lTRSxcbiAgICAgIGJhc2VSZWRSb3RhdGlvbjogUm90YXRpb25EaXJlY3Rpb24uQ0xPQ0tXSVNFLFxuICAgIH0pO1xuICB9XG5cbiAgZ2V0UGF0dGVybkIoKTogTW92ZW1lbnRQYXR0ZXJuIHtcbiAgICByZXR1cm4gdGhpcy5jcmVhdGVQYXR0ZXJuKFwiQlwiLCB7XG4gICAgICB0aW1pbmc6IFRpbWluZy5TUExJVCxcbiAgICAgIGRpcmVjdGlvbjogRGlyZWN0aW9uLlNBTUUsXG4gICAgICBwb3NpdGlvblN5c3RlbTogXCJhbHBoYVwiLFxuICAgICAgYmFzZUJsdWVNb3Rpb246IE1vdGlvblR5cGUuQU5USSxcbiAgICAgIGJhc2VSZWRNb3Rpb246IE1vdGlvblR5cGUuQU5USSxcbiAgICAgIGJhc2VCbHVlUm90YXRpb246IFJvdGF0aW9uRGlyZWN0aW9uLkNPVU5URVJfQ0xPQ0tXSVNFLFxuICAgICAgYmFzZVJlZFJvdGF0aW9uOiBSb3RhdGlvbkRpcmVjdGlvbi5DT1VOVEVSX0NMT0NLV0lTRSxcbiAgICB9KTtcbiAgfVxuXG4gIGdldFBhdHRlcm5DKCk6IE1vdmVtZW50UGF0dGVybiB7XG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlUGF0dGVybihcIkNcIiwge1xuICAgICAgdGltaW5nOiBUaW1pbmcuU1BMSVQsXG4gICAgICBkaXJlY3Rpb246IERpcmVjdGlvbi5TQU1FLFxuICAgICAgcG9zaXRpb25TeXN0ZW06IFwiYWxwaGFcIixcbiAgICAgIGJhc2VCbHVlTW90aW9uOiBNb3Rpb25UeXBlLkFOVEksXG4gICAgICBiYXNlUmVkTW90aW9uOiBNb3Rpb25UeXBlLlBSTyxcbiAgICAgIGJhc2VCbHVlUm90YXRpb246IFJvdGF0aW9uRGlyZWN0aW9uLkNPVU5URVJfQ0xPQ0tXSVNFLFxuICAgICAgYmFzZVJlZFJvdGF0aW9uOiBSb3RhdGlvbkRpcmVjdGlvbi5DTE9DS1dJU0UsXG4gICAgICB2YXJpYXRpb25zOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiBcInJldmVyc2VkXCIsXG4gICAgICAgICAgYmx1ZU1vdGlvblR5cGU6IE1vdGlvblR5cGUuUFJPLFxuICAgICAgICAgIHJlZE1vdGlvblR5cGU6IE1vdGlvblR5cGUuQU5USSxcbiAgICAgICAgICBibHVlUm90YXRpb246IFJvdGF0aW9uRGlyZWN0aW9uLkNMT0NLV0lTRSxcbiAgICAgICAgICByZWRSb3RhdGlvbjogUm90YXRpb25EaXJlY3Rpb24uQ09VTlRFUl9DTE9DS1dJU0UsXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgIH0pO1xuICB9XG5cbiAgZ2V0UGF0dGVybkcoKTogTW92ZW1lbnRQYXR0ZXJuIHtcbiAgICByZXR1cm4gdGhpcy5jcmVhdGVQYXR0ZXJuKFwiR1wiLCB7XG4gICAgICB0aW1pbmc6IFRpbWluZy5UT0csXG4gICAgICBkaXJlY3Rpb246IERpcmVjdGlvbi5TQU1FLFxuICAgICAgcG9zaXRpb25TeXN0ZW06IFwiYmV0YVwiLFxuICAgICAgYmFzZUJsdWVNb3Rpb246IE1vdGlvblR5cGUuUFJPLFxuICAgICAgYmFzZVJlZE1vdGlvbjogTW90aW9uVHlwZS5QUk8sXG4gICAgICBiYXNlQmx1ZVJvdGF0aW9uOiBSb3RhdGlvbkRpcmVjdGlvbi5DTE9DS1dJU0UsXG4gICAgICBiYXNlUmVkUm90YXRpb246IFJvdGF0aW9uRGlyZWN0aW9uLkNMT0NLV0lTRSxcbiAgICB9KTtcbiAgfVxuXG4gIGdldFBhdHRlcm5NKCk6IE1vdmVtZW50UGF0dGVybiB7XG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlUGF0dGVybihcIk1cIiwge1xuICAgICAgdGltaW5nOiBUaW1pbmcuUVVBUlRFUixcbiAgICAgIGRpcmVjdGlvbjogRGlyZWN0aW9uLk9QUCxcbiAgICAgIHBvc2l0aW9uU3lzdGVtOiBcImdhbW1hXCIsXG4gICAgICBiYXNlQmx1ZU1vdGlvbjogTW90aW9uVHlwZS5QUk8sXG4gICAgICBiYXNlUmVkTW90aW9uOiBNb3Rpb25UeXBlLlBSTyxcbiAgICAgIGJhc2VCbHVlUm90YXRpb246IFJvdGF0aW9uRGlyZWN0aW9uLkNPVU5URVJfQ0xPQ0tXSVNFLFxuICAgICAgYmFzZVJlZFJvdGF0aW9uOiBSb3RhdGlvbkRpcmVjdGlvbi5DTE9DS1dJU0UsXG4gICAgfSk7XG4gIH1cblxuICBnZXRQYXR0ZXJuVygpOiBNb3ZlbWVudFBhdHRlcm4ge1xuICAgIHJldHVybiB0aGlzLmNyZWF0ZVBhdHRlcm4oXCJXXCIsIHtcbiAgICAgIHRpbWluZzogVGltaW5nLk5PTkUsXG4gICAgICBkaXJlY3Rpb246IERpcmVjdGlvbi5OT05FLFxuICAgICAgcG9zaXRpb25TeXN0ZW06IFwiZ2FtbWFcIixcbiAgICAgIGJhc2VCbHVlTW90aW9uOiBNb3Rpb25UeXBlLlNUQVRJQyxcbiAgICAgIGJhc2VSZWRNb3Rpb246IE1vdGlvblR5cGUuUFJPLFxuICAgICAgYmFzZUJsdWVSb3RhdGlvbjogUm90YXRpb25EaXJlY3Rpb24uTk9fUk9UQVRJT04sXG4gICAgICBiYXNlUmVkUm90YXRpb246IFJvdGF0aW9uRGlyZWN0aW9uLkNMT0NLV0lTRSxcbiAgICAgIHZhcmlhdGlvbnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6IFwicmV2ZXJzZWRcIixcbiAgICAgICAgICBibHVlTW90aW9uVHlwZTogTW90aW9uVHlwZS5QUk8sXG4gICAgICAgICAgcmVkTW90aW9uVHlwZTogTW90aW9uVHlwZS5TVEFUSUMsXG4gICAgICAgICAgYmx1ZVJvdGF0aW9uOiBSb3RhdGlvbkRpcmVjdGlvbi5DTE9DS1dJU0UsXG4gICAgICAgICAgcmVkUm90YXRpb246IFJvdGF0aW9uRGlyZWN0aW9uLk5PX1JPVEFUSU9OLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICB9KTtcbiAgfVxuXG4gIGdldFBhdHRlcm5XRGFzaCgpOiBNb3ZlbWVudFBhdHRlcm4ge1xuICAgIHJldHVybiB0aGlzLmNyZWF0ZVBhdHRlcm4oXCJXLVwiLCB7XG4gICAgICB0aW1pbmc6IFRpbWluZy5OT05FLFxuICAgICAgZGlyZWN0aW9uOiBEaXJlY3Rpb24uTk9ORSxcbiAgICAgIHBvc2l0aW9uU3lzdGVtOiBcImdhbW1hXCIsXG4gICAgICBiYXNlQmx1ZU1vdGlvbjogTW90aW9uVHlwZS5EQVNILFxuICAgICAgYmFzZVJlZE1vdGlvbjogTW90aW9uVHlwZS5QUk8sXG4gICAgICBiYXNlQmx1ZVJvdGF0aW9uOiBSb3RhdGlvbkRpcmVjdGlvbi5OT19ST1RBVElPTixcbiAgICAgIGJhc2VSZWRSb3RhdGlvbjogUm90YXRpb25EaXJlY3Rpb24uQ0xPQ0tXSVNFLFxuICAgICAgdmFyaWF0aW9uczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogXCJyZXZlcnNlZFwiLFxuICAgICAgICAgIGJsdWVNb3Rpb25UeXBlOiBNb3Rpb25UeXBlLlBSTyxcbiAgICAgICAgICByZWRNb3Rpb25UeXBlOiBNb3Rpb25UeXBlLkRBU0gsXG4gICAgICAgICAgYmx1ZVJvdGF0aW9uOiBSb3RhdGlvbkRpcmVjdGlvbi5DTE9DS1dJU0UsXG4gICAgICAgICAgcmVkUm90YXRpb246IFJvdGF0aW9uRGlyZWN0aW9uLk5PX1JPVEFUSU9OLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICB9KTtcbiAgfVxuXG4gIGdldFBhdHRlcm5BbHBoYSgpOiBNb3ZlbWVudFBhdHRlcm4ge1xuICAgIHJldHVybiB0aGlzLmNyZWF0ZVBhdHRlcm4oXCLOsVwiLCB7XG4gICAgICB0aW1pbmc6IFRpbWluZy5OT05FLFxuICAgICAgZGlyZWN0aW9uOiBEaXJlY3Rpb24uTk9ORSxcbiAgICAgIHBvc2l0aW9uU3lzdGVtOiBcImFscGhhXCIsXG4gICAgICBiYXNlQmx1ZU1vdGlvbjogTW90aW9uVHlwZS5TVEFUSUMsXG4gICAgICBiYXNlUmVkTW90aW9uOiBNb3Rpb25UeXBlLlNUQVRJQyxcbiAgICAgIGJhc2VCbHVlUm90YXRpb246IFJvdGF0aW9uRGlyZWN0aW9uLk5PX1JPVEFUSU9OLFxuICAgICAgYmFzZVJlZFJvdGF0aW9uOiBSb3RhdGlvbkRpcmVjdGlvbi5OT19ST1RBVElPTixcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBwb3NpdGlvbiBzZXF1ZW5jZSBiYXNlZCBvbiBwYXR0ZXJuIHN5c3RlbVxuICAgKi9cbiAgZ2VuZXJhdGVQb3NpdGlvblNlcXVlbmNlKFxuICAgIHBhdHRlcm46IE1vdmVtZW50UGF0dGVybixcbiAgICBsZW5ndGg6IG51bWJlciA9IDhcbiAgKTogR3JpZFBvc2l0aW9uW10ge1xuICAgIGNvbnN0IGJhc2VTZXF1ZW5jZSA9IHRoaXMuZ2V0U2VxdWVuY2VCeVN5c3RlbShwYXR0ZXJuLnBvc2l0aW9uU3lzdGVtKTtcbiAgICBjb25zdCByZXN1bHQ6IEdyaWRQb3NpdGlvbltdID0gW107XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICByZXN1bHQucHVzaChiYXNlU2VxdWVuY2VbaSAlIGJhc2VTZXF1ZW5jZS5sZW5ndGhdKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRTZXF1ZW5jZUJ5U3lzdGVtKFxuICAgIHN5c3RlbTogXCJhbHBoYVwiIHwgXCJiZXRhXCIgfCBcImdhbW1hXCJcbiAgKTogR3JpZFBvc2l0aW9uW10ge1xuICAgIHN3aXRjaCAoc3lzdGVtKSB7XG4gICAgICBjYXNlIFwiYWxwaGFcIjpcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QWxwaGFTZXF1ZW5jZSgpO1xuICAgICAgY2FzZSBcImJldGFcIjpcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QmV0YVNlcXVlbmNlKCk7XG4gICAgICBjYXNlIFwiZ2FtbWFcIjpcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0R2FtbWFTZXF1ZW5jZSgpO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3du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