import {
  ITKAImageExportServiceInterface,
  ILayoutCalculationServiceInterface,
  IDimensionCalculationServiceInterface,
  IFileExportServiceInterface,
  IBeatRenderingServiceInterface,
  ITextRenderingServiceInterface,
  IImageCompositionServiceInterface,
  IGridOverlayServiceInterface,
  ICanvasManagementServiceInterface
} from "/src/lib/services/di/interfaces/image-export-interfaces.ts";
import { IPictographServiceInterface } from "/src/lib/services/di/interfaces/core-interfaces.ts";
import { TKAImageExportService } from "/src/lib/services/implementations/image-export/TKAImageExportService.ts";
import { LayoutCalculationService } from "/src/lib/services/implementations/image-export/LayoutCalculationService.ts";
import { DimensionCalculationService } from "/src/lib/services/implementations/image-export/DimensionCalculationService.ts";
import { FileExportService } from "/src/lib/services/implementations/image-export/FileExportService.ts";
import { BeatRenderingService } from "/src/lib/services/implementations/image-export/BeatRenderingService.ts";
import { TextRenderingService } from "/src/lib/services/implementations/image-export/TextRenderingService.ts";
import { ImageCompositionService } from "/src/lib/services/implementations/image-export/ImageCompositionService.ts";
import { GridOverlayService } from "/src/lib/services/implementations/image-export/GridOverlayService.ts";
import { CanvasManagementService } from "/src/lib/services/implementations/image-export/CanvasManagementService.ts";
export async function registerImageExportServices(container) {
  try {
    container.registerFactory(ILayoutCalculationServiceInterface, () => {
      return new LayoutCalculationService();
    });
    container.registerFactory(IDimensionCalculationServiceInterface, () => {
      return new DimensionCalculationService();
    });
    container.registerFactory(IFileExportServiceInterface, () => {
      return new FileExportService();
    });
    container.registerFactory(ICanvasManagementServiceInterface, () => {
      return new CanvasManagementService();
    });
    container.registerFactory(IGridOverlayServiceInterface, () => {
      return new GridOverlayService();
    });
    container.registerFactory(IBeatRenderingServiceInterface, () => {
      const pictographService = container.resolve(IPictographServiceInterface);
      return new BeatRenderingService(pictographService);
    });
    container.registerFactory(ITextRenderingServiceInterface, () => {
      return new TextRenderingService();
    });
    container.registerFactory(IImageCompositionServiceInterface, () => {
      const layoutService = container.resolve(
        ILayoutCalculationServiceInterface
      );
      const dimensionService = container.resolve(
        IDimensionCalculationServiceInterface
      );
      const beatRenderer = container.resolve(IBeatRenderingServiceInterface);
      const textRenderer = container.resolve(ITextRenderingServiceInterface);
      return new ImageCompositionService(
        layoutService,
        dimensionService,
        beatRenderer,
        textRenderer
      );
    });
    container.registerFactory(ITKAImageExportServiceInterface, () => {
      const compositionService = container.resolve(
        IImageCompositionServiceInterface
      );
      const fileService = container.resolve(IFileExportServiceInterface);
      const layoutService = container.resolve(
        ILayoutCalculationServiceInterface
      );
      const dimensionService = container.resolve(
        IDimensionCalculationServiceInterface
      );
      return new TKAImageExportService(
        compositionService,
        fileService,
        layoutService,
        dimensionService
      );
    });
    await validateImageExportServices(container);
  } catch (error) {
    console.error("❌ Failed to register TKA image export services:", error);
    throw new Error(
      `Image export service registration failed: ${error instanceof Error ? error.message : "Unknown error"}`
    );
  }
}
async function validateImageExportServices(container) {
  const servicesToValidate = [
    {
      interface: ILayoutCalculationServiceInterface,
      name: "LayoutCalculationService"
    },
    {
      interface: IDimensionCalculationServiceInterface,
      name: "DimensionCalculationService"
    },
    { interface: IFileExportServiceInterface, name: "FileExportService" },
    { interface: IBeatRenderingServiceInterface, name: "BeatRenderingService" },
    { interface: ITextRenderingServiceInterface, name: "TextRenderingService" },
    {
      interface: IImageCompositionServiceInterface,
      name: "ImageCompositionService"
    },
    { interface: IGridOverlayServiceInterface, name: "GridOverlayService" },
    {
      interface: ICanvasManagementServiceInterface,
      name: "CanvasManagementService"
    },
    {
      interface: ITKAImageExportServiceInterface,
      name: "TKAImageExportService"
    }
  ];
  const validationErrors = [];
  for (const { interface: serviceInterface, name } of servicesToValidate) {
    try {
      const service = container.resolve(
        serviceInterface
      );
      if (!service) {
        validationErrors.push(`${name} resolved to null/undefined`);
      }
    } catch (error) {
      const errorMessage = error instanceof Error ? error.message : "Unknown error";
      validationErrors.push(`${name} resolution failed: ${errorMessage}`);
    }
  }
  if (validationErrors.length > 0) {
    console.error("❌ Service validation failed:");
    validationErrors.forEach((error) => console.error(`  - ${error}`));
    throw new Error(
      `Service validation failed: ${validationErrors.join(", ")}`
    );
  }
}
export async function testImageExportPipeline(container) {
  try {
    const layoutService = container.resolve(ILayoutCalculationServiceInterface);
    const layout = layoutService.calculateLayout(4, true);
    if (!layout || layout.length !== 2) {
      throw new Error("Layout calculation test failed");
    }
    const dimensionService = container.resolve(
      IDimensionCalculationServiceInterface
    );
    const testOptions = {
      addWord: true,
      addUserInfo: true,
      includeStartPosition: true,
      addBeatNumbers: true,
      addReversalSymbols: true,
      combinedGrids: false,
      addDifficultyLevel: true,
      beatScale: 1,
      beatSize: 144,
      margin: 50,
      redVisible: true,
      blueVisible: true,
      userName: "Test",
      exportDate: "1-1-2024",
      notes: "Test",
      format: "PNG",
      quality: 1
    };
    const dimensions = dimensionService.determineAdditionalHeights(
      testOptions,
      4,
      1
    );
    if (!dimensions || dimensions.length !== 2) {
      throw new Error("Dimension calculation test failed");
    }
    const fileService = container.resolve(IFileExportServiceInterface);
    const formats = fileService.getSupportedFormats();
    if (!formats.includes("PNG") || !formats.includes("JPEG")) {
      throw new Error("File export service test failed");
    }
    const textService = container.resolve(ITextRenderingServiceInterface);
    if (!textService) {
      throw new Error("Text rendering service test failed");
    }
    const exportService = container.resolve(ITKAImageExportServiceInterface);
    if (!exportService) {
      throw new Error("Main export service test failed");
    }
    return true;
  } catch (error) {
    console.error("❌ Image export pipeline test failed:", error);
    return false;
  }
}
export function getImageExportServiceMetrics(_container) {
  console.warn(
    "getImageExportServiceMetrics temporarily disabled - service interface compatibility issues"
  );
  return {
    servicesRegistered: 9,
    // Static count for now
    memoryUsage: void 0,
    cacheStats: void 0
  };
}
export function cleanupImageExportServices(_container) {
  try {
  } catch (error) {
    console.warn("⚠️ Some cleanup operations failed:", error);
  }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImltYWdlLWV4cG9ydC1zZXJ2aWNlcy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEltYWdlIEV4cG9ydCBTZXJ2aWNlcyBSZWdpc3RyYXRpb25cbiAqXG4gKiBSZWdpc3RlcnMgYWxsIFRLQSBpbWFnZSBleHBvcnQgc2VydmljZXMgd2l0aCB0aGUgREkgY29udGFpbmVyLlxuICogVGhpcyBtb2R1bGUgc2V0cyB1cCB0aGUgY29tcGxldGUgaW1hZ2UgZXhwb3J0IHBpcGVsaW5lIHdpdGggcHJvcGVyXG4gKiBkZXBlbmRlbmN5IGluamVjdGlvbiBmb2xsb3dpbmcgdGhlIGVzdGFibGlzaGVkIHBhdHRlcm5zLlxuICovXG5cbmltcG9ydCB0eXBlIHsgU2VydmljZUNvbnRhaW5lciB9IGZyb20gXCIuLi9TZXJ2aWNlQ29udGFpbmVyXCI7XG5pbXBvcnQgdHlwZSB7IFNlcnZpY2VJbnRlcmZhY2UgfSBmcm9tIFwiLi4vdHlwZXNcIjtcblxuLy8gSW1wb3J0IHNlcnZpY2UgaW50ZXJmYWNlcyAocHJvcGVyIFNlcnZpY2VJbnRlcmZhY2Ugb2JqZWN0cylcbmltcG9ydCB7XG4gIElUS0FJbWFnZUV4cG9ydFNlcnZpY2VJbnRlcmZhY2UsXG4gIElMYXlvdXRDYWxjdWxhdGlvblNlcnZpY2VJbnRlcmZhY2UsXG4gIElEaW1lbnNpb25DYWxjdWxhdGlvblNlcnZpY2VJbnRlcmZhY2UsXG4gIElGaWxlRXhwb3J0U2VydmljZUludGVyZmFjZSxcbiAgSUJlYXRSZW5kZXJpbmdTZXJ2aWNlSW50ZXJmYWNlLFxuICBJVGV4dFJlbmRlcmluZ1NlcnZpY2VJbnRlcmZhY2UsXG4gIElJbWFnZUNvbXBvc2l0aW9uU2VydmljZUludGVyZmFjZSxcbiAgSUdyaWRPdmVybGF5U2VydmljZUludGVyZmFjZSxcbiAgSUNhbnZhc01hbmFnZW1lbnRTZXJ2aWNlSW50ZXJmYWNlLFxufSBmcm9tIFwiLi4vaW50ZXJmYWNlcy9pbWFnZS1leHBvcnQtaW50ZXJmYWNlc1wiO1xuXG5pbXBvcnQgeyBJUGljdG9ncmFwaFNlcnZpY2VJbnRlcmZhY2UgfSBmcm9tIFwiLi4vaW50ZXJmYWNlcy9jb3JlLWludGVyZmFjZXNcIjtcblxuLy8gSW1wb3J0IHNlcnZpY2UgaW1wbGVtZW50YXRpb25zXG5pbXBvcnQgeyBUS0FJbWFnZUV4cG9ydFNlcnZpY2UgfSBmcm9tIFwiLi4vLi4vaW1wbGVtZW50YXRpb25zL2ltYWdlLWV4cG9ydC9US0FJbWFnZUV4cG9ydFNlcnZpY2VcIjtcbmltcG9ydCB7IExheW91dENhbGN1bGF0aW9uU2VydmljZSB9IGZyb20gXCIuLi8uLi9pbXBsZW1lbnRhdGlvbnMvaW1hZ2UtZXhwb3J0L0xheW91dENhbGN1bGF0aW9uU2VydmljZVwiO1xuaW1wb3J0IHsgRGltZW5zaW9uQ2FsY3VsYXRpb25TZXJ2aWNlIH0gZnJvbSBcIi4uLy4uL2ltcGxlbWVudGF0aW9ucy9pbWFnZS1leHBvcnQvRGltZW5zaW9uQ2FsY3VsYXRpb25TZXJ2aWNlXCI7XG5pbXBvcnQgeyBGaWxlRXhwb3J0U2VydmljZSB9IGZyb20gXCIuLi8uLi9pbXBsZW1lbnRhdGlvbnMvaW1hZ2UtZXhwb3J0L0ZpbGVFeHBvcnRTZXJ2aWNlXCI7XG5pbXBvcnQgeyBCZWF0UmVuZGVyaW5nU2VydmljZSB9IGZyb20gXCIuLi8uLi9pbXBsZW1lbnRhdGlvbnMvaW1hZ2UtZXhwb3J0L0JlYXRSZW5kZXJpbmdTZXJ2aWNlXCI7XG5pbXBvcnQgeyBUZXh0UmVuZGVyaW5nU2VydmljZSB9IGZyb20gXCIuLi8uLi9pbXBsZW1lbnRhdGlvbnMvaW1hZ2UtZXhwb3J0L1RleHRSZW5kZXJpbmdTZXJ2aWNlXCI7XG5pbXBvcnQgeyBJbWFnZUNvbXBvc2l0aW9uU2VydmljZSB9IGZyb20gXCIuLi8uLi9pbXBsZW1lbnRhdGlvbnMvaW1hZ2UtZXhwb3J0L0ltYWdlQ29tcG9zaXRpb25TZXJ2aWNlXCI7XG5pbXBvcnQgeyBHcmlkT3ZlcmxheVNlcnZpY2UgfSBmcm9tIFwiLi4vLi4vaW1wbGVtZW50YXRpb25zL2ltYWdlLWV4cG9ydC9HcmlkT3ZlcmxheVNlcnZpY2VcIjtcbmltcG9ydCB7IENhbnZhc01hbmFnZW1lbnRTZXJ2aWNlIH0gZnJvbSBcIi4uLy4uL2ltcGxlbWVudGF0aW9ucy9pbWFnZS1leHBvcnQvQ2FudmFzTWFuYWdlbWVudFNlcnZpY2VcIjtcblxuLyoqXG4gKiBSZWdpc3RlciBhbGwgVEtBIGltYWdlIGV4cG9ydCBzZXJ2aWNlcyB3aXRoIHRoZSBESSBjb250YWluZXJcbiAqIFNlcnZpY2VzIGFyZSByZWdpc3RlcmVkIGluIGRlcGVuZGVuY3kgb3JkZXIgdG8gZW5zdXJlIHByb3BlciByZXNvbHV0aW9uXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWdpc3RlckltYWdlRXhwb3J0U2VydmljZXMoXG4gIGNvbnRhaW5lcjogU2VydmljZUNvbnRhaW5lclxuKTogUHJvbWlzZTx2b2lkPiB7XG4gIHRyeSB7XG4gICAgLy8gUmVnaXN0ZXIgZm91bmRhdGlvbiBzZXJ2aWNlcyAobm8gZGVwZW5kZW5jaWVzKVxuICAgIGNvbnRhaW5lci5yZWdpc3RlckZhY3RvcnkoSUxheW91dENhbGN1bGF0aW9uU2VydmljZUludGVyZmFjZSwgKCkgPT4ge1xuICAgICAgcmV0dXJuIG5ldyBMYXlvdXRDYWxjdWxhdGlvblNlcnZpY2UoKTtcbiAgICB9KTtcblxuICAgIGNvbnRhaW5lci5yZWdpc3RlckZhY3RvcnkoSURpbWVuc2lvbkNhbGN1bGF0aW9uU2VydmljZUludGVyZmFjZSwgKCkgPT4ge1xuICAgICAgcmV0dXJuIG5ldyBEaW1lbnNpb25DYWxjdWxhdGlvblNlcnZpY2UoKTtcbiAgICB9KTtcblxuICAgIGNvbnRhaW5lci5yZWdpc3RlckZhY3RvcnkoSUZpbGVFeHBvcnRTZXJ2aWNlSW50ZXJmYWNlLCAoKSA9PiB7XG4gICAgICByZXR1cm4gbmV3IEZpbGVFeHBvcnRTZXJ2aWNlKCk7XG4gICAgfSk7XG5cbiAgICBjb250YWluZXIucmVnaXN0ZXJGYWN0b3J5KElDYW52YXNNYW5hZ2VtZW50U2VydmljZUludGVyZmFjZSwgKCkgPT4ge1xuICAgICAgcmV0dXJuIG5ldyBDYW52YXNNYW5hZ2VtZW50U2VydmljZSgpO1xuICAgIH0pO1xuXG4gICAgY29udGFpbmVyLnJlZ2lzdGVyRmFjdG9yeShJR3JpZE92ZXJsYXlTZXJ2aWNlSW50ZXJmYWNlLCAoKSA9PiB7XG4gICAgICByZXR1cm4gbmV3IEdyaWRPdmVybGF5U2VydmljZSgpO1xuICAgIH0pO1xuXG4gICAgY29udGFpbmVyLnJlZ2lzdGVyRmFjdG9yeShJQmVhdFJlbmRlcmluZ1NlcnZpY2VJbnRlcmZhY2UsICgpID0+IHtcbiAgICAgIGNvbnN0IHBpY3RvZ3JhcGhTZXJ2aWNlID0gY29udGFpbmVyLnJlc29sdmUoSVBpY3RvZ3JhcGhTZXJ2aWNlSW50ZXJmYWNlKTtcbiAgICAgIHJldHVybiBuZXcgQmVhdFJlbmRlcmluZ1NlcnZpY2UocGljdG9ncmFwaFNlcnZpY2UpO1xuICAgIH0pO1xuXG4gICAgY29udGFpbmVyLnJlZ2lzdGVyRmFjdG9yeShJVGV4dFJlbmRlcmluZ1NlcnZpY2VJbnRlcmZhY2UsICgpID0+IHtcbiAgICAgIHJldHVybiBuZXcgVGV4dFJlbmRlcmluZ1NlcnZpY2UoKTtcbiAgICB9KTtcblxuICAgIC8vIFJlZ2lzdGVyIGNvbXBvc2l0aW9uIHNlcnZpY2UgKGRlcGVuZHMgb24gbGF5b3V0LCBkaW1lbnNpb24sIGJlYXQgcmVuZGVyaW5nLCBhbmQgdGV4dCByZW5kZXJpbmcpXG4gICAgY29udGFpbmVyLnJlZ2lzdGVyRmFjdG9yeShJSW1hZ2VDb21wb3NpdGlvblNlcnZpY2VJbnRlcmZhY2UsICgpID0+IHtcbiAgICAgIGNvbnN0IGxheW91dFNlcnZpY2UgPSBjb250YWluZXIucmVzb2x2ZShcbiAgICAgICAgSUxheW91dENhbGN1bGF0aW9uU2VydmljZUludGVyZmFjZVxuICAgICAgKTtcbiAgICAgIGNvbnN0IGRpbWVuc2lvblNlcnZpY2UgPSBjb250YWluZXIucmVzb2x2ZShcbiAgICAgICAgSURpbWVuc2lvbkNhbGN1bGF0aW9uU2VydmljZUludGVyZmFjZVxuICAgICAgKTtcbiAgICAgIGNvbnN0IGJlYXRSZW5kZXJlciA9IGNvbnRhaW5lci5yZXNvbHZlKElCZWF0UmVuZGVyaW5nU2VydmljZUludGVyZmFjZSk7XG4gICAgICBjb25zdCB0ZXh0UmVuZGVyZXIgPSBjb250YWluZXIucmVzb2x2ZShJVGV4dFJlbmRlcmluZ1NlcnZpY2VJbnRlcmZhY2UpO1xuXG4gICAgICByZXR1cm4gbmV3IEltYWdlQ29tcG9zaXRpb25TZXJ2aWNlKFxuICAgICAgICBsYXlvdXRTZXJ2aWNlLFxuICAgICAgICBkaW1lbnNpb25TZXJ2aWNlLFxuICAgICAgICBiZWF0UmVuZGVyZXIsXG4gICAgICAgIHRleHRSZW5kZXJlclxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIC8vIFJlZ2lzdGVyIG1haW4gVEtBIGltYWdlIGV4cG9ydCBzZXJ2aWNlIChkZXBlbmRzIG9uIGNvbXBvc2l0aW9uIGFuZCBmaWxlIHNlcnZpY2VzKVxuICAgIGNvbnRhaW5lci5yZWdpc3RlckZhY3RvcnkoSVRLQUltYWdlRXhwb3J0U2VydmljZUludGVyZmFjZSwgKCkgPT4ge1xuICAgICAgY29uc3QgY29tcG9zaXRpb25TZXJ2aWNlID0gY29udGFpbmVyLnJlc29sdmUoXG4gICAgICAgIElJbWFnZUNvbXBvc2l0aW9uU2VydmljZUludGVyZmFjZVxuICAgICAgKTtcbiAgICAgIGNvbnN0IGZpbGVTZXJ2aWNlID0gY29udGFpbmVyLnJlc29sdmUoSUZpbGVFeHBvcnRTZXJ2aWNlSW50ZXJmYWNlKTtcbiAgICAgIGNvbnN0IGxheW91dFNlcnZpY2UgPSBjb250YWluZXIucmVzb2x2ZShcbiAgICAgICAgSUxheW91dENhbGN1bGF0aW9uU2VydmljZUludGVyZmFjZVxuICAgICAgKTtcbiAgICAgIGNvbnN0IGRpbWVuc2lvblNlcnZpY2UgPSBjb250YWluZXIucmVzb2x2ZShcbiAgICAgICAgSURpbWVuc2lvbkNhbGN1bGF0aW9uU2VydmljZUludGVyZmFjZVxuICAgICAgKTtcblxuICAgICAgcmV0dXJuIG5ldyBUS0FJbWFnZUV4cG9ydFNlcnZpY2UoXG4gICAgICAgIGNvbXBvc2l0aW9uU2VydmljZSxcbiAgICAgICAgZmlsZVNlcnZpY2UsXG4gICAgICAgIGxheW91dFNlcnZpY2UsXG4gICAgICAgIGRpbWVuc2lvblNlcnZpY2VcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICAvLyBWYWxpZGF0ZSByZWdpc3RyYXRpb25zXG4gICAgYXdhaXQgdmFsaWRhdGVJbWFnZUV4cG9ydFNlcnZpY2VzKGNvbnRhaW5lcik7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIuKdjCBGYWlsZWQgdG8gcmVnaXN0ZXIgVEtBIGltYWdlIGV4cG9ydCBzZXJ2aWNlczpcIiwgZXJyb3IpO1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBJbWFnZSBleHBvcnQgc2VydmljZSByZWdpc3RyYXRpb24gZmFpbGVkOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCJVbmtub3duIGVycm9yXCJ9YFxuICAgICk7XG4gIH1cbn1cblxuLyoqXG4gKiBWYWxpZGF0ZSB0aGF0IGFsbCBpbWFnZSBleHBvcnQgc2VydmljZXMgY2FuIGJlIHJlc29sdmVkXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHZhbGlkYXRlSW1hZ2VFeHBvcnRTZXJ2aWNlcyhcbiAgY29udGFpbmVyOiBTZXJ2aWNlQ29udGFpbmVyXG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3Qgc2VydmljZXNUb1ZhbGlkYXRlID0gW1xuICAgIHtcbiAgICAgIGludGVyZmFjZTogSUxheW91dENhbGN1bGF0aW9uU2VydmljZUludGVyZmFjZSxcbiAgICAgIG5hbWU6IFwiTGF5b3V0Q2FsY3VsYXRpb25TZXJ2aWNlXCIsXG4gICAgfSxcbiAgICB7XG4gICAgICBpbnRlcmZhY2U6IElEaW1lbnNpb25DYWxjdWxhdGlvblNlcnZpY2VJbnRlcmZhY2UsXG4gICAgICBuYW1lOiBcIkRpbWVuc2lvbkNhbGN1bGF0aW9uU2VydmljZVwiLFxuICAgIH0sXG4gICAgeyBpbnRlcmZhY2U6IElGaWxlRXhwb3J0U2VydmljZUludGVyZmFjZSwgbmFtZTogXCJGaWxlRXhwb3J0U2VydmljZVwiIH0sXG4gICAgeyBpbnRlcmZhY2U6IElCZWF0UmVuZGVyaW5nU2VydmljZUludGVyZmFjZSwgbmFtZTogXCJCZWF0UmVuZGVyaW5nU2VydmljZVwiIH0sXG4gICAgeyBpbnRlcmZhY2U6IElUZXh0UmVuZGVyaW5nU2VydmljZUludGVyZmFjZSwgbmFtZTogXCJUZXh0UmVuZGVyaW5nU2VydmljZVwiIH0sXG4gICAge1xuICAgICAgaW50ZXJmYWNlOiBJSW1hZ2VDb21wb3NpdGlvblNlcnZpY2VJbnRlcmZhY2UsXG4gICAgICBuYW1lOiBcIkltYWdlQ29tcG9zaXRpb25TZXJ2aWNlXCIsXG4gICAgfSxcbiAgICB7IGludGVyZmFjZTogSUdyaWRPdmVybGF5U2VydmljZUludGVyZmFjZSwgbmFtZTogXCJHcmlkT3ZlcmxheVNlcnZpY2VcIiB9LFxuICAgIHtcbiAgICAgIGludGVyZmFjZTogSUNhbnZhc01hbmFnZW1lbnRTZXJ2aWNlSW50ZXJmYWNlLFxuICAgICAgbmFtZTogXCJDYW52YXNNYW5hZ2VtZW50U2VydmljZVwiLFxuICAgIH0sXG4gICAge1xuICAgICAgaW50ZXJmYWNlOiBJVEtBSW1hZ2VFeHBvcnRTZXJ2aWNlSW50ZXJmYWNlLFxuICAgICAgbmFtZTogXCJUS0FJbWFnZUV4cG9ydFNlcnZpY2VcIixcbiAgICB9LFxuICBdO1xuXG4gIGNvbnN0IHZhbGlkYXRpb25FcnJvcnM6IHN0cmluZ1tdID0gW107XG5cbiAgZm9yIChjb25zdCB7IGludGVyZmFjZTogc2VydmljZUludGVyZmFjZSwgbmFtZSB9IG9mIHNlcnZpY2VzVG9WYWxpZGF0ZSkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBzZXJ2aWNlID0gY29udGFpbmVyLnJlc29sdmUoXG4gICAgICAgIHNlcnZpY2VJbnRlcmZhY2UgYXMgU2VydmljZUludGVyZmFjZTx1bmtub3duPlxuICAgICAgKTtcbiAgICAgIGlmICghc2VydmljZSkge1xuICAgICAgICB2YWxpZGF0aW9uRXJyb3JzLnB1c2goYCR7bmFtZX0gcmVzb2x2ZWQgdG8gbnVsbC91bmRlZmluZWRgKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID1cbiAgICAgICAgZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIlVua25vd24gZXJyb3JcIjtcbiAgICAgIHZhbGlkYXRpb25FcnJvcnMucHVzaChgJHtuYW1lfSByZXNvbHV0aW9uIGZhaWxlZDogJHtlcnJvck1lc3NhZ2V9YCk7XG4gICAgfVxuICB9XG5cbiAgaWYgKHZhbGlkYXRpb25FcnJvcnMubGVuZ3RoID4gMCkge1xuICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgU2VydmljZSB2YWxpZGF0aW9uIGZhaWxlZDpcIik7XG4gICAgdmFsaWRhdGlvbkVycm9ycy5mb3JFYWNoKChlcnJvcikgPT4gY29uc29sZS5lcnJvcihgICAtICR7ZXJyb3J9YCkpO1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBTZXJ2aWNlIHZhbGlkYXRpb24gZmFpbGVkOiAke3ZhbGlkYXRpb25FcnJvcnMuam9pbihcIiwgXCIpfWBcbiAgICApO1xuICB9XG59XG5cbi8qKlxuICogVGVzdCBpbWFnZSBleHBvcnQgc2VydmljZSBwaXBlbGluZVxuICogUXVpY2sgc21va2UgdGVzdCB0byBlbnN1cmUgdGhlIHNlcnZpY2VzIHdvcmsgdG9nZXRoZXJcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHRlc3RJbWFnZUV4cG9ydFBpcGVsaW5lKFxuICBjb250YWluZXI6IFNlcnZpY2VDb250YWluZXJcbik6IFByb21pc2U8Ym9vbGVhbj4ge1xuICB0cnkge1xuICAgIC8vIFRlc3QgbGF5b3V0IGNhbGN1bGF0aW9uXG4gICAgY29uc3QgbGF5b3V0U2VydmljZSA9IGNvbnRhaW5lci5yZXNvbHZlKElMYXlvdXRDYWxjdWxhdGlvblNlcnZpY2VJbnRlcmZhY2UpO1xuICAgIGNvbnN0IGxheW91dCA9IGxheW91dFNlcnZpY2UuY2FsY3VsYXRlTGF5b3V0KDQsIHRydWUpO1xuICAgIGlmICghbGF5b3V0IHx8IGxheW91dC5sZW5ndGggIT09IDIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkxheW91dCBjYWxjdWxhdGlvbiB0ZXN0IGZhaWxlZFwiKTtcbiAgICB9XG5cbiAgICAvLyBUZXN0IGRpbWVuc2lvbiBjYWxjdWxhdGlvblxuICAgIGNvbnN0IGRpbWVuc2lvblNlcnZpY2UgPSBjb250YWluZXIucmVzb2x2ZShcbiAgICAgIElEaW1lbnNpb25DYWxjdWxhdGlvblNlcnZpY2VJbnRlcmZhY2VcbiAgICApO1xuICAgIGNvbnN0IHRlc3RPcHRpb25zID0ge1xuICAgICAgYWRkV29yZDogdHJ1ZSxcbiAgICAgIGFkZFVzZXJJbmZvOiB0cnVlLFxuICAgICAgaW5jbHVkZVN0YXJ0UG9zaXRpb246IHRydWUsXG4gICAgICBhZGRCZWF0TnVtYmVyczogdHJ1ZSxcbiAgICAgIGFkZFJldmVyc2FsU3ltYm9sczogdHJ1ZSxcbiAgICAgIGNvbWJpbmVkR3JpZHM6IGZhbHNlLFxuICAgICAgYWRkRGlmZmljdWx0eUxldmVsOiB0cnVlLFxuICAgICAgYmVhdFNjYWxlOiAxLFxuICAgICAgYmVhdFNpemU6IDE0NCxcbiAgICAgIG1hcmdpbjogNTAsXG4gICAgICByZWRWaXNpYmxlOiB0cnVlLFxuICAgICAgYmx1ZVZpc2libGU6IHRydWUsXG4gICAgICB1c2VyTmFtZTogXCJUZXN0XCIsXG4gICAgICBleHBvcnREYXRlOiBcIjEtMS0yMDI0XCIsXG4gICAgICBub3RlczogXCJUZXN0XCIsXG4gICAgICBmb3JtYXQ6IFwiUE5HXCIgYXMgY29uc3QsXG4gICAgICBxdWFsaXR5OiAxLjAsXG4gICAgfTtcbiAgICBjb25zdCBkaW1lbnNpb25zID0gZGltZW5zaW9uU2VydmljZS5kZXRlcm1pbmVBZGRpdGlvbmFsSGVpZ2h0cyhcbiAgICAgIHRlc3RPcHRpb25zLFxuICAgICAgNCxcbiAgICAgIDFcbiAgICApO1xuICAgIGlmICghZGltZW5zaW9ucyB8fCBkaW1lbnNpb25zLmxlbmd0aCAhPT0gMikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRGltZW5zaW9uIGNhbGN1bGF0aW9uIHRlc3QgZmFpbGVkXCIpO1xuICAgIH1cblxuICAgIC8vIFRlc3QgZmlsZSBleHBvcnQgc2VydmljZVxuICAgIGNvbnN0IGZpbGVTZXJ2aWNlID0gY29udGFpbmVyLnJlc29sdmUoSUZpbGVFeHBvcnRTZXJ2aWNlSW50ZXJmYWNlKTtcbiAgICBjb25zdCBmb3JtYXRzID0gZmlsZVNlcnZpY2UuZ2V0U3VwcG9ydGVkRm9ybWF0cygpO1xuICAgIGlmICghZm9ybWF0cy5pbmNsdWRlcyhcIlBOR1wiKSB8fCAhZm9ybWF0cy5pbmNsdWRlcyhcIkpQRUdcIikpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkZpbGUgZXhwb3J0IHNlcnZpY2UgdGVzdCBmYWlsZWRcIik7XG4gICAgfVxuXG4gICAgLy8gVGVzdCB0ZXh0IHJlbmRlcmluZyBzZXJ2aWNlXG4gICAgY29uc3QgdGV4dFNlcnZpY2UgPSBjb250YWluZXIucmVzb2x2ZShJVGV4dFJlbmRlcmluZ1NlcnZpY2VJbnRlcmZhY2UpO1xuICAgIGlmICghdGV4dFNlcnZpY2UpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRleHQgcmVuZGVyaW5nIHNlcnZpY2UgdGVzdCBmYWlsZWRcIik7XG4gICAgfVxuXG4gICAgLy8gVGVzdCBtYWluIGV4cG9ydCBzZXJ2aWNlXG4gICAgY29uc3QgZXhwb3J0U2VydmljZSA9IGNvbnRhaW5lci5yZXNvbHZlKElUS0FJbWFnZUV4cG9ydFNlcnZpY2VJbnRlcmZhY2UpO1xuICAgIGlmICghZXhwb3J0U2VydmljZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWFpbiBleHBvcnQgc2VydmljZSB0ZXN0IGZhaWxlZFwiKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIEltYWdlIGV4cG9ydCBwaXBlbGluZSB0ZXN0IGZhaWxlZDpcIiwgZXJyb3IpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG4vKipcbiAqIEdldCBpbWFnZSBleHBvcnQgc2VydmljZSBtZXRyaWNzXG4gKiBUT0RPOiBGaXggc2VydmljZSBpbnRlcmZhY2UgY29tcGF0aWJpbGl0eSBpc3N1ZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEltYWdlRXhwb3J0U2VydmljZU1ldHJpY3MoX2NvbnRhaW5lcjogU2VydmljZUNvbnRhaW5lcik6IHtcbiAgc2VydmljZXNSZWdpc3RlcmVkOiBudW1iZXI7XG4gIG1lbW9yeVVzYWdlPzogbnVtYmVyO1xuICBjYWNoZVN0YXRzPzogdW5rbm93bjtcbn0ge1xuICAvLyBUZW1wb3JhcmlseSBkaXNhYmxlZCBkdWUgdG8gc2VydmljZSBpbnRlcmZhY2UgY29tcGF0aWJpbGl0eSBpc3N1ZXNcbiAgY29uc29sZS53YXJuKFxuICAgIFwiZ2V0SW1hZ2VFeHBvcnRTZXJ2aWNlTWV0cmljcyB0ZW1wb3JhcmlseSBkaXNhYmxlZCAtIHNlcnZpY2UgaW50ZXJmYWNlIGNvbXBhdGliaWxpdHkgaXNzdWVzXCJcbiAgKTtcbiAgcmV0dXJuIHtcbiAgICBzZXJ2aWNlc1JlZ2lzdGVyZWQ6IDksIC8vIFN0YXRpYyBjb3VudCBmb3Igbm93XG4gICAgbWVtb3J5VXNhZ2U6IHVuZGVmaW5lZCxcbiAgICBjYWNoZVN0YXRzOiB1bmRlZmluZWQsXG4gIH07XG59XG5cbi8qKlxuICogQ2xlYW51cCBpbWFnZSBleHBvcnQgc2VydmljZXNcbiAqIFNob3VsZCBiZSBjYWxsZWQgd2hlbiBzaHV0dGluZyBkb3duIHRoZSBhcHBsaWNhdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xlYW51cEltYWdlRXhwb3J0U2VydmljZXMoX2NvbnRhaW5lcjogU2VydmljZUNvbnRhaW5lcik6IHZvaWQge1xuICB0cnkge1xuICAgIC8vIE5vdGU6IFNlcnZpY2UgY2xlYW51cCB3b3VsZCBiZSBpbXBsZW1lbnRlZCBoZXJlIGlmIG5lZWRlZFxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUud2FybihcIuKaoO+4jyBTb21lIGNsZWFudXAgb3BlcmF0aW9ucyBmYWlsZWQ6XCIsIGVycm9yKTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiQUFZQTtBQUFBLEVBQ0U7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLE9BQ0s7QUFFUCxTQUFTLG1DQUFtQztBQUc1QyxTQUFTLDZCQUE2QjtBQUN0QyxTQUFTLGdDQUFnQztBQUN6QyxTQUFTLG1DQUFtQztBQUM1QyxTQUFTLHlCQUF5QjtBQUNsQyxTQUFTLDRCQUE0QjtBQUNyQyxTQUFTLDRCQUE0QjtBQUNyQyxTQUFTLCtCQUErQjtBQUN4QyxTQUFTLDBCQUEwQjtBQUNuQyxTQUFTLCtCQUErQjtBQU14QyxzQkFBc0IsNEJBQ3BCLFdBQ2U7QUFDZixNQUFJO0FBRUYsY0FBVSxnQkFBZ0Isb0NBQW9DLE1BQU07QUFDbEUsYUFBTyxJQUFJLHlCQUF5QjtBQUFBLElBQ3RDLENBQUM7QUFFRCxjQUFVLGdCQUFnQix1Q0FBdUMsTUFBTTtBQUNyRSxhQUFPLElBQUksNEJBQTRCO0FBQUEsSUFDekMsQ0FBQztBQUVELGNBQVUsZ0JBQWdCLDZCQUE2QixNQUFNO0FBQzNELGFBQU8sSUFBSSxrQkFBa0I7QUFBQSxJQUMvQixDQUFDO0FBRUQsY0FBVSxnQkFBZ0IsbUNBQW1DLE1BQU07QUFDakUsYUFBTyxJQUFJLHdCQUF3QjtBQUFBLElBQ3JDLENBQUM7QUFFRCxjQUFVLGdCQUFnQiw4QkFBOEIsTUFBTTtBQUM1RCxhQUFPLElBQUksbUJBQW1CO0FBQUEsSUFDaEMsQ0FBQztBQUVELGNBQVUsZ0JBQWdCLGdDQUFnQyxNQUFN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