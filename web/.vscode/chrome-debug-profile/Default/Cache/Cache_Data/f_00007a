import {
  AnswerFormat,
  LESSON_CONFIGS,
  LESSON_INFO,
  LESSON_TYPE_NAMES,
  LessonType,
  QuestionFormat,
  QUIZ_DEFAULTS,
  QUIZ_MODE_NAMES,
  QuizMode
} from "/src/lib/types/learn.ts";
export class LessonConfigService {
  /**
   * Get configuration for a specific lesson type.
   */
  static getLessonConfig(lessonType) {
    const config = LESSON_CONFIGS[lessonType];
    if (!config) {
      throw new Error(`No configuration found for lesson type: ${lessonType}`);
    }
    return config;
  }
  /**
   * Get lesson information for display.
   */
  static getLessonInfo(lessonType) {
    const info = LESSON_INFO.find((lesson) => lesson.lessonType === lessonType);
    if (!info) {
      throw new Error(`No lesson info found for lesson type: ${lessonType}`);
    }
    return info;
  }
  /**
   * Get all available lesson types.
   */
  static getAvailableLessonTypes() {
    return Object.values(LessonType);
  }
  /**
   * Get all available quiz modes.
   */
  static getAvailableQuizModes() {
    return Object.values(QuizMode);
  }
  /**
   * Get display name for a lesson type.
   */
  static getLessonTypeName(lessonType) {
    return LESSON_TYPE_NAMES[lessonType] || lessonType;
  }
  /**
   * Get display name for a quiz mode.
   */
  static getQuizModeName(quizMode) {
    return QUIZ_MODE_NAMES[quizMode] || quizMode;
  }
  /**
   * Get total questions for a quiz mode.
   */
  static getTotalQuestions(quizMode) {
    switch (quizMode) {
      case QuizMode.FIXED_QUESTION:
        return QUIZ_DEFAULTS.FIXED_QUESTION_COUNT;
      case QuizMode.COUNTDOWN:
        return 0;
      // Unlimited questions in countdown mode
      default:
        return QUIZ_DEFAULTS.FIXED_QUESTION_COUNT;
    }
  }
  /**
   * Get quiz time for a quiz mode.
   */
  static getQuizTime(quizMode) {
    switch (quizMode) {
      case QuizMode.COUNTDOWN:
        return QUIZ_DEFAULTS.COUNTDOWN_TIME_SECONDS;
      case QuizMode.FIXED_QUESTION:
        return 0;
      // No time limit for fixed question mode
      default:
        return 0;
    }
  }
  /**
   * Validate lesson configuration.
   */
  static validateLessonConfig(config) {
    return Object.values(LessonType).includes(config.lessonType) && Object.values(QuestionFormat).includes(config.questionFormat) && Object.values(AnswerFormat).includes(config.answerFormat) && typeof config.quizDescription === "string" && typeof config.questionPrompt === "string";
  }
  /**
   * Check if a lesson type supports a specific question format.
   */
  static supportsQuestionFormat(lessonType, format) {
    const config = this.getLessonConfig(lessonType);
    return config.questionFormat === format;
  }
  /**
   * Check if a lesson type supports a specific answer format.
   */
  static supportsAnswerFormat(lessonType, format) {
    const config = this.getLessonConfig(lessonType);
    return config.answerFormat === format;
  }
  /**
   * Get lesson number from lesson type (for display purposes).
   */
  static getLessonNumber(lessonType) {
    switch (lessonType) {
      case LessonType.PICTOGRAPH_TO_LETTER:
        return 1;
      case LessonType.LETTER_TO_PICTOGRAPH:
        return 2;
      case LessonType.VALID_NEXT_PICTOGRAPH:
        return 3;
      default:
        return 0;
    }
  }
  /**
   * Get lesson type from lesson number.
   */
  static getLessonTypeFromNumber(lessonNumber) {
    switch (lessonNumber) {
      case 1:
        return LessonType.PICTOGRAPH_TO_LETTER;
      case 2:
        return LessonType.LETTER_TO_PICTOGRAPH;
      case 3:
        return LessonType.VALID_NEXT_PICTOGRAPH;
      default:
        return null;
    }
  }
  /**
   * Get formatted lesson title for display.
   */
  static getFormattedLessonTitle(lessonType) {
    const lessonNumber = this.getLessonNumber(lessonType);
    const lessonName = this.getLessonTypeName(lessonType);
    return `Lesson ${lessonNumber}: ${lessonName}`;
  }
  /**
   * Get lesson description for display.
   */
  static getLessonDescription(lessonType) {
    const info = this.getLessonInfo(lessonType);
    return info.description;
  }
  /**
   * Check if a lesson is available (for future use with unlocking system).
   */
  static isLessonAvailable(_lessonType) {
    return true;
  }
  /**
   * Get recommended quiz mode for a lesson type.
   */
  static getRecommendedQuizMode(lessonType) {
    switch (lessonType) {
      case LessonType.PICTOGRAPH_TO_LETTER:
        return QuizMode.FIXED_QUESTION;
      case LessonType.LETTER_TO_PICTOGRAPH:
        return QuizMode.FIXED_QUESTION;
      case LessonType.VALID_NEXT_PICTOGRAPH:
        return QuizMode.COUNTDOWN;
      // More challenging lesson
      default:
        return QuizMode.FIXED_QUESTION;
    }
  }
  /**
   * Get difficulty level for a lesson type (1-5 scale).
   */
  static getDifficultyLevel(lessonType) {
    switch (lessonType) {
      case LessonType.PICTOGRAPH_TO_LETTER:
        return 1;
      // Easiest - just matching pictograph to letter
      case LessonType.LETTER_TO_PICTOGRAPH:
        return 2;
      // Medium - requires understanding pictograph structure
      case LessonType.VALID_NEXT_PICTOGRAPH:
        return 4;
      // Hardest - requires understanding flow and transitions
      default:
        return 1;
    }
  }
  /**
   * Get estimated completion time for a lesson (in minutes).
   */
  static getEstimatedCompletionTime(lessonType, quizMode) {
    const baseTime = this.getDifficultyLevel(lessonType) * 2;
    switch (quizMode) {
      case QuizMode.FIXED_QUESTION:
        return baseTime + 5;
      // Add 5 minutes for fixed questions
      case QuizMode.COUNTDOWN:
        return 2;
      // Countdown mode is always 2 minutes
      default:
        return baseTime;
    }
  }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkxlc3NvbkNvbmZpZ1NlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBMZXNzb24gQ29uZmlndXJhdGlvbiBTZXJ2aWNlXG4gKlxuICogTWFuYWdlcyBsZXNzb24gY29uZmlndXJhdGlvbnMsIHZhbGlkYXRpb24sIGFuZCBwcm92aWRlcyB1dGlsaXRpZXNcbiAqIGZvciB3b3JraW5nIHdpdGggZGlmZmVyZW50IGxlc3NvbiB0eXBlcyBhbmQgcXVpeiBtb2Rlcy5cbiAqL1xuXG5pbXBvcnQge1xuICBBbnN3ZXJGb3JtYXQsXG4gIExFU1NPTl9DT05GSUdTLFxuICBMRVNTT05fSU5GTyxcbiAgTEVTU09OX1RZUEVfTkFNRVMsXG4gIHR5cGUgTGVzc29uQ29uZmlnLFxuICB0eXBlIExlc3NvbkluZm8sXG4gIExlc3NvblR5cGUsXG4gIFF1ZXN0aW9uRm9ybWF0LFxuICBRVUlaX0RFRkFVTFRTLFxuICBRVUlaX01PREVfTkFNRVMsXG4gIFF1aXpNb2RlLFxufSBmcm9tIFwiJGxpYi90eXBlcy9sZWFyblwiO1xuXG5leHBvcnQgY2xhc3MgTGVzc29uQ29uZmlnU2VydmljZSB7XG4gIC8qKlxuICAgKiBHZXQgY29uZmlndXJhdGlvbiBmb3IgYSBzcGVjaWZpYyBsZXNzb24gdHlwZS5cbiAgICovXG4gIHN0YXRpYyBnZXRMZXNzb25Db25maWcobGVzc29uVHlwZTogTGVzc29uVHlwZSk6IExlc3NvbkNvbmZpZyB7XG4gICAgY29uc3QgY29uZmlnID0gTEVTU09OX0NPTkZJR1NbbGVzc29uVHlwZV07XG4gICAgaWYgKCFjb25maWcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgTm8gY29uZmlndXJhdGlvbiBmb3VuZCBmb3IgbGVzc29uIHR5cGU6ICR7bGVzc29uVHlwZX1gKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbmZpZztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgbGVzc29uIGluZm9ybWF0aW9uIGZvciBkaXNwbGF5LlxuICAgKi9cbiAgc3RhdGljIGdldExlc3NvbkluZm8obGVzc29uVHlwZTogTGVzc29uVHlwZSk6IExlc3NvbkluZm8ge1xuICAgIGNvbnN0IGluZm8gPSBMRVNTT05fSU5GTy5maW5kKChsZXNzb24pID0+IGxlc3Nvbi5sZXNzb25UeXBlID09PSBsZXNzb25UeXBlKTtcbiAgICBpZiAoIWluZm8pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgTm8gbGVzc29uIGluZm8gZm91bmQgZm9yIGxlc3NvbiB0eXBlOiAke2xlc3NvblR5cGV9YCk7XG4gICAgfVxuICAgIHJldHVybiBpbmZvO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhbGwgYXZhaWxhYmxlIGxlc3NvbiB0eXBlcy5cbiAgICovXG4gIHN0YXRpYyBnZXRBdmFpbGFibGVMZXNzb25UeXBlcygpOiBMZXNzb25UeXBlW10ge1xuICAgIHJldHVybiBPYmplY3QudmFsdWVzKExlc3NvblR5cGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhbGwgYXZhaWxhYmxlIHF1aXogbW9kZXMuXG4gICAqL1xuICBzdGF0aWMgZ2V0QXZhaWxhYmxlUXVpek1vZGVzKCk6IFF1aXpNb2RlW10ge1xuICAgIHJldHVybiBPYmplY3QudmFsdWVzKFF1aXpNb2RlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgZGlzcGxheSBuYW1lIGZvciBhIGxlc3NvbiB0eXBlLlxuICAgKi9cbiAgc3RhdGljIGdldExlc3NvblR5cGVOYW1lKGxlc3NvblR5cGU6IExlc3NvblR5cGUpOiBzdHJpbmcge1xuICAgIHJldHVybiBMRVNTT05fVFlQRV9OQU1FU1tsZXNzb25UeXBlXSB8fCBsZXNzb25UeXBlO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBkaXNwbGF5IG5hbWUgZm9yIGEgcXVpeiBtb2RlLlxuICAgKi9cbiAgc3RhdGljIGdldFF1aXpNb2RlTmFtZShxdWl6TW9kZTogUXVpek1vZGUpOiBzdHJpbmcge1xuICAgIHJldHVybiBRVUlaX01PREVfTkFNRVNbcXVpek1vZGVdIHx8IHF1aXpNb2RlO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0b3RhbCBxdWVzdGlvbnMgZm9yIGEgcXVpeiBtb2RlLlxuICAgKi9cbiAgc3RhdGljIGdldFRvdGFsUXVlc3Rpb25zKHF1aXpNb2RlOiBRdWl6TW9kZSk6IG51bWJlciB7XG4gICAgc3dpdGNoIChxdWl6TW9kZSkge1xuICAgICAgY2FzZSBRdWl6TW9kZS5GSVhFRF9RVUVTVElPTjpcbiAgICAgICAgcmV0dXJuIFFVSVpfREVGQVVMVFMuRklYRURfUVVFU1RJT05fQ09VTlQ7XG4gICAgICBjYXNlIFF1aXpNb2RlLkNPVU5URE9XTjpcbiAgICAgICAgcmV0dXJuIDA7IC8vIFVubGltaXRlZCBxdWVzdGlvbnMgaW4gY291bnRkb3duIG1vZGVcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBRVUlaX0RFRkFVTFRTLkZJWEVEX1FVRVNUSU9OX0NPVU5UO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgcXVpeiB0aW1lIGZvciBhIHF1aXogbW9kZS5cbiAgICovXG4gIHN0YXRpYyBnZXRRdWl6VGltZShxdWl6TW9kZTogUXVpek1vZGUpOiBudW1iZXIge1xuICAgIHN3aXRjaCAocXVpek1vZGUpIHtcbiAgICAgIGNhc2UgUXVpek1vZGUuQ09VTlRET1dOOlxuICAgICAgICByZXR1cm4gUVVJWl9ERUZBVUxUUy5DT1VOVERPV05fVElNRV9TRUNPTkRTO1xuICAgICAgY2FzZSBRdWl6TW9kZS5GSVhFRF9RVUVTVElPTjpcbiAgICAgICAgcmV0dXJuIDA7IC8vIE5vIHRpbWUgbGltaXQgZm9yIGZpeGVkIHF1ZXN0aW9uIG1vZGVcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBWYWxpZGF0ZSBsZXNzb24gY29uZmlndXJhdGlvbi5cbiAgICovXG4gIHN0YXRpYyB2YWxpZGF0ZUxlc3NvbkNvbmZpZyhjb25maWc6IExlc3NvbkNvbmZpZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAoXG4gICAgICBPYmplY3QudmFsdWVzKExlc3NvblR5cGUpLmluY2x1ZGVzKGNvbmZpZy5sZXNzb25UeXBlKSAmJlxuICAgICAgT2JqZWN0LnZhbHVlcyhRdWVzdGlvbkZvcm1hdCkuaW5jbHVkZXMoY29uZmlnLnF1ZXN0aW9uRm9ybWF0KSAmJlxuICAgICAgT2JqZWN0LnZhbHVlcyhBbnN3ZXJGb3JtYXQpLmluY2x1ZGVzKGNvbmZpZy5hbnN3ZXJGb3JtYXQpICYmXG4gICAgICB0eXBlb2YgY29uZmlnLnF1aXpEZXNjcmlwdGlvbiA9PT0gXCJzdHJpbmdcIiAmJlxuICAgICAgdHlwZW9mIGNvbmZpZy5xdWVzdGlvblByb21wdCA9PT0gXCJzdHJpbmdcIlxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSBsZXNzb24gdHlwZSBzdXBwb3J0cyBhIHNwZWNpZmljIHF1ZXN0aW9uIGZvcm1hdC5cbiAgICovXG4gIHN0YXRpYyBzdXBwb3J0c1F1ZXN0aW9uRm9ybWF0KFxuICAgIGxlc3NvblR5cGU6IExlc3NvblR5cGUsXG4gICAgZm9ybWF0OiBRdWVzdGlvbkZvcm1hdFxuICApOiBib29sZWFuIHtcbiAgICBjb25zdCBjb25maWcgPSB0aGlzLmdldExlc3NvbkNvbmZpZyhsZXNzb25UeXBlKTtcbiAgICByZXR1cm4gY29uZmlnLnF1ZXN0aW9uRm9ybWF0ID09PSBmb3JtYXQ7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSBsZXNzb24gdHlwZSBzdXBwb3J0cyBhIHNwZWNpZmljIGFuc3dlciBmb3JtYXQuXG4gICAqL1xuICBzdGF0aWMgc3VwcG9ydHNBbnN3ZXJGb3JtYXQoXG4gICAgbGVzc29uVHlwZTogTGVzc29uVHlwZSxcbiAgICBmb3JtYXQ6IEFuc3dlckZvcm1hdFxuICApOiBib29sZWFuIHtcbiAgICBjb25zdCBjb25maWcgPSB0aGlzLmdldExlc3NvbkNvbmZpZyhsZXNzb25UeXBlKTtcbiAgICByZXR1cm4gY29uZmlnLmFuc3dlckZvcm1hdCA9PT0gZm9ybWF0O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBsZXNzb24gbnVtYmVyIGZyb20gbGVzc29uIHR5cGUgKGZvciBkaXNwbGF5IHB1cnBvc2VzKS5cbiAgICovXG4gIHN0YXRpYyBnZXRMZXNzb25OdW1iZXIobGVzc29uVHlwZTogTGVzc29uVHlwZSk6IG51bWJlciB7XG4gICAgc3dpdGNoIChsZXNzb25UeXBlKSB7XG4gICAgICBjYXNlIExlc3NvblR5cGUuUElDVE9HUkFQSF9UT19MRVRURVI6XG4gICAgICAgIHJldHVybiAxO1xuICAgICAgY2FzZSBMZXNzb25UeXBlLkxFVFRFUl9UT19QSUNUT0dSQVBIOlxuICAgICAgICByZXR1cm4gMjtcbiAgICAgIGNhc2UgTGVzc29uVHlwZS5WQUxJRF9ORVhUX1BJQ1RPR1JBUEg6XG4gICAgICAgIHJldHVybiAzO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBsZXNzb24gdHlwZSBmcm9tIGxlc3NvbiBudW1iZXIuXG4gICAqL1xuICBzdGF0aWMgZ2V0TGVzc29uVHlwZUZyb21OdW1iZXIobGVzc29uTnVtYmVyOiBudW1iZXIpOiBMZXNzb25UeXBlIHwgbnVsbCB7XG4gICAgc3dpdGNoIChsZXNzb25OdW1iZXIpIHtcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgcmV0dXJuIExlc3NvblR5cGUuUElDVE9HUkFQSF9UT19MRVRURVI7XG4gICAgICBjYXNlIDI6XG4gICAgICAgIHJldHVybiBMZXNzb25UeXBlLkxFVFRFUl9UT19QSUNUT0dSQVBIO1xuICAgICAgY2FzZSAzOlxuICAgICAgICByZXR1cm4gTGVzc29uVHlwZS5WQUxJRF9ORVhUX1BJQ1RPR1JBUEg7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IGZvcm1hdHRlZCBsZXNzb24gdGl0bGUgZm9yIGRpc3BsYXkuXG4gICAqL1xuICBzdGF0aWMgZ2V0Rm9ybWF0dGVkTGVzc29uVGl0bGUobGVzc29uVHlwZTogTGVzc29uVHlwZSk6IHN0cmluZyB7XG4gICAgY29uc3QgbGVzc29uTnVtYmVyID0gdGhpcy5nZXRMZXNzb25OdW1iZXIobGVzc29uVHlwZSk7XG4gICAgY29uc3QgbGVzc29uTmFtZSA9IHRoaXMuZ2V0TGVzc29uVHlwZU5hbWUobGVzc29uVHlwZSk7XG4gICAgcmV0dXJuIGBMZXNzb24gJHtsZXNzb25OdW1iZXJ9OiAke2xlc3Nvbk5hbWV9YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgbGVzc29uIGRlc2NyaXB0aW9uIGZvciBkaXNwbGF5LlxuICAgKi9cbiAgc3RhdGljIGdldExlc3NvbkRlc2NyaXB0aW9uKGxlc3NvblR5cGU6IExlc3NvblR5cGUpOiBzdHJpbmcge1xuICAgIGNvbnN0IGluZm8gPSB0aGlzLmdldExlc3NvbkluZm8obGVzc29uVHlwZSk7XG4gICAgcmV0dXJuIGluZm8uZGVzY3JpcHRpb247XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSBsZXNzb24gaXMgYXZhaWxhYmxlIChmb3IgZnV0dXJlIHVzZSB3aXRoIHVubG9ja2luZyBzeXN0ZW0pLlxuICAgKi9cbiAgc3RhdGljIGlzTGVzc29uQXZhaWxhYmxlKF9sZXNzb25UeXBlOiBMZXNzb25UeXBlKTogYm9vbGVhbiB7XG4gICAgLy8gRm9yIG5vdywgYWxsIGxlc3NvbnMgYXJlIGF2YWlsYWJsZVxuICAgIC8vIFRoaXMgY2FuIGJlIGV4dGVuZGVkIHRvIHN1cHBvcnQgbGVzc29uIHVubG9ja2luZyBsb2dpY1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCByZWNvbW1lbmRlZCBxdWl6IG1vZGUgZm9yIGEgbGVzc29uIHR5cGUuXG4gICAqL1xuICBzdGF0aWMgZ2V0UmVjb21tZW5kZWRRdWl6TW9kZShsZXNzb25UeXBlOiBMZXNzb25UeXBlKTogUXVpek1vZGUge1xuICAgIC8vIEZvciBiZWdpbm5lcnMsIHN0YXJ0IHdpdGggZml4ZWQgcXVlc3Rpb25zXG4gICAgLy8gTW9yZSBhZHZhbmNlZCBsZXNzb25zIGNvdWxkIGRlZmF1bHQgdG8gY291bnRkb3duXG4gICAgc3dpdGNoIChsZXNzb25UeXBlKSB7XG4gICAgICBjYXNlIExlc3NvblR5cGUuUElDVE9HUkFQSF9UT19MRVRURVI6XG4gICAgICAgIHJldHVybiBRdWl6TW9kZS5GSVhFRF9RVUVTVElPTjtcbiAgICAgIGNhc2UgTGVzc29uVHlwZS5MRVRURVJfVE9fUElDVE9HUkFQSDpcbiAgICAgICAgcmV0dXJuIFF1aXpNb2RlLkZJWEVEX1FVRVNUSU9OO1xuICAgICAgY2FzZSBMZXNzb25UeXBlLlZBTElEX05FWFRfUElDVE9HUkFQSDpcbiAgICAgICAgcmV0dXJuIFF1aXpNb2RlLkNPVU5URE9XTjsgLy8gTW9yZSBjaGFsbGVuZ2luZyBsZXNzb25cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBRdWl6TW9kZS5GSVhFRF9RVUVTVElPTjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IGRpZmZpY3VsdHkgbGV2ZWwgZm9yIGEgbGVzc29uIHR5cGUgKDEtNSBzY2FsZSkuXG4gICAqL1xuICBzdGF0aWMgZ2V0RGlmZmljdWx0eUxldmVsKGxlc3NvblR5cGU6IExlc3NvblR5cGUpOiBudW1iZXIge1xuICAgIHN3aXRjaCAobGVzc29uVHlwZSkge1xuICAgICAgY2FzZSBMZXNzb25UeXBlLlBJQ1RPR1JBUEhfVE9fTEVUVEVSOlxuICAgICAgICByZXR1cm4gMTsgLy8gRWFzaWVzdCAtIGp1c3QgbWF0Y2hpbmcgcGljdG9ncmFwaCB0byBsZXR0ZXJcbiAgICAgIGNhc2UgTGVzc29uVHlwZS5MRVRURVJfVE9fUElDVE9HUkFQSDpcbiAgICAgICAgcmV0dXJuIDI7IC8vIE1lZGl1bSAtIHJlcXVpcmVzIHVuZGVyc3RhbmRpbmcgcGljdG9ncmFwaCBzdHJ1Y3R1cmVcbiAgICAgIGNhc2UgTGVzc29uVHlwZS5WQUxJRF9ORVhUX1BJQ1RPR1JBUEg6XG4gICAgICAgIHJldHVybiA0OyAvLyBIYXJkZXN0IC0gcmVxdWlyZXMgdW5kZXJzdGFuZGluZyBmbG93IGFuZCB0cmFuc2l0aW9uc1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIDE7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBlc3RpbWF0ZWQgY29tcGxldGlvbiB0aW1lIGZvciBhIGxlc3NvbiAoaW4gbWludXRlcykuXG4gICAqL1xuICBzdGF0aWMgZ2V0RXN0aW1hdGVkQ29tcGxldGlvblRpbWUoXG4gICAgbGVzc29uVHlwZTogTGVzc29uVHlwZSxcbiAgICBxdWl6TW9kZTogUXVpek1vZGVcbiAgKTogbnVtYmVyIHtcbiAgICBjb25zdCBiYXNlVGltZSA9IHRoaXMuZ2V0RGlmZmljdWx0eUxldmVsKGxlc3NvblR5cGUpICogMjsgLy8gMiBtaW51dGVzIHBlciBkaWZmaWN1bHR5IGxldmVsXG5cbiAgICBzd2l0Y2ggKHF1aXpNb2RlKSB7XG4gICAgICBjYXNlIFF1aXpNb2RlLkZJWEVEX1FVRVNUSU9OOlxuICAgICAgICByZXR1cm4gYmFzZVRpbWUgKyA1OyAvLyBBZGQgNSBtaW51dGVzIGZvciBmaXhlZCBxdWVzdGlvbnNcbiAgICAgIGNhc2UgUXVpek1vZGUuQ09VTlRET1dOOlxuICAgICAgICByZXR1cm4gMjsgLy8gQ291bnRkb3duIG1vZGUgaXMgYWx3YXlzIDIgbWludXRlc1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGJhc2VUaW1lO1xuICAgIH1cbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiQUFPQTtBQUFBLEVBQ0U7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUdBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLE9BQ0s7QUFFQSxhQUFNLG9CQUFvQjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBSS9CLE9BQU8sZ0JBQWdCLFlBQXNDO0FBQzNELFVBQU0sU0FBUyxlQUFlLFVBQVU7QUFDeEMsUUFBSSxDQUFDLFFBQVE7QUFD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