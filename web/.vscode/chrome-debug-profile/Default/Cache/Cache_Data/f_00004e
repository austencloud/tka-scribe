export class PrintablePageLayoutService {
  paperSizes = {
    A4: { width: 595, height: 842 },
    Letter: { width: 612, height: 792 },
    Legal: { width: 612, height: 1008 },
    Tabloid: { width: 792, height: 1224 }
  };
  defaultMargins = {
    top: 36,
    // 0.5 inch
    right: 18,
    // 0.25 inch
    bottom: 36,
    // 0.5 inch
    left: 18
    // 0.25 inch
  };
  dpiConfig = {
    screenDPI: 96,
    printDPI: 300,
    scaleFactor: 96 / 72
  };
  calculatePageDimensions(paperSize, orientation) {
    const dimensions = this.paperSizes[paperSize];
    if (orientation === "Landscape") {
      return {
        width: dimensions.height,
        height: dimensions.width
      };
    }
    return {
      width: dimensions.width,
      height: dimensions.height
    };
  }
  calculateMargins(_paperSize) {
    return { ...this.defaultMargins };
  }
  calculateContentArea(pageSize, margins) {
    return {
      x: margins.left,
      y: margins.top,
      width: pageSize.width - margins.left - margins.right,
      height: pageSize.height - margins.top - margins.bottom
    };
  }
  calculateOptimalGrid(cardAspectRatio, contentArea, options = {}) {
    const opts = {
      minCardsPerPage: 2,
      maxCardsPerPage: 12,
      preferSquareLayout: false,
      prioritizeCardSize: true,
      allowPartialLastPage: true,
      ...options
    };
    let bestGrid = null;
    let bestScore = 0;
    for (let totalCards = opts.minCardsPerPage; totalCards <= opts.maxCardsPerPage; totalCards++) {
      for (let rows = 1; rows <= Math.ceil(Math.sqrt(totalCards)); rows++) {
        const cols = Math.ceil(totalCards / rows);
        if (rows * cols < totalCards && !opts.allowPartialLastPage) {
          continue;
        }
        const cellWidth = contentArea.width / cols;
        const cellHeight = contentArea.height / rows;
        let cardWidth = cellWidth * 0.9;
        let cardHeight = cardWidth / cardAspectRatio;
        if (cardHeight > cellHeight * 0.9) {
          cardHeight = cellHeight * 0.9;
          cardWidth = cardHeight * cardAspectRatio;
        }
        const cardArea = cardWidth * cardHeight;
        const totalUsedArea = totalCards * cardArea;
        const totalAvailableArea = contentArea.width * contentArea.height;
        const utilization = totalUsedArea / totalAvailableArea;
        const cardSizeScore = opts.prioritizeCardSize ? cardArea / (contentArea.width * contentArea.height) : 0.5;
        const utilizationScore = Math.min(utilization, 1);
        const layoutScore = opts.preferSquareLayout ? 1 - Math.abs(rows - cols) / Math.max(rows, cols) : 0.5;
        const score = cardSizeScore * 0.4 + utilizationScore * 0.4 + layoutScore * 0.2;
        if (score > bestScore) {
          bestScore = score;
          bestGrid = {
            rows,
            columns: cols,
            spacing: Math.min(
              (cellWidth - cardWidth) / 2,
              (cellHeight - cardHeight) / 2
            ),
            cardWidth,
            cardHeight
          };
        }
      }
    }
    if (!bestGrid) {
      const cellWidth = contentArea.width / 2;
      const cellHeight = contentArea.height / 2;
      const cardWidth = cellWidth * 0.9;
      const cardHeight = cardWidth / cardAspectRatio;
      bestGrid = {
        rows: 2,
        columns: 2,
        spacing: Math.min(
          (cellWidth - cardWidth) / 2,
          (cellHeight - cardHeight) / 2
        ),
        cardWidth,
        cardHeight
      };
    }
    return bestGrid;
  }
  getPageSizeInPixels(paperSize, orientation, dpi = this.dpiConfig.screenDPI) {
    const pointDimensions = this.calculatePageDimensions(
      paperSize,
      orientation
    );
    const scaleFactor = dpi / 72;
    return {
      width: Math.round(pointDimensions.width * scaleFactor),
      height: Math.round(pointDimensions.height * scaleFactor)
    };
  }
  calculateLayout(request) {
    const pageDimensions = this.calculatePageDimensions(
      request.paperSize,
      request.orientation
    );
    const margins = request.margins || this.calculateMargins(request.paperSize);
    const contentArea = this.calculateContentArea(pageDimensions, margins);
    const gridOptions = {
      minCardsPerPage: 2,
      maxCardsPerPage: request.preferredCardsPerPage || 12,
      preferSquareLayout: false,
      prioritizeCardSize: true,
      allowPartialLastPage: true
    };
    const gridConfig = this.calculateOptimalGrid(
      request.cardAspectRatio,
      contentArea,
      gridOptions
    );
    const cardsPerPage = gridConfig.rows * gridConfig.columns;
    const pagesNeeded = Math.ceil(request.sequenceCount / cardsPerPage);
    const cardDimensions = {
      width: gridConfig.cardWidth,
      height: gridConfig.cardHeight
    };
    const cardArea = gridConfig.cardWidth * gridConfig.cardHeight;
    const totalCardArea = cardsPerPage * cardArea;
    const contentAreaSize = contentArea.width * contentArea.height;
    const utilization = Math.min(totalCardArea / contentAreaSize, 1);
    const minCardSize = Math.min(contentArea.width, contentArea.height) * 0.2;
    const isOptimal = utilization > 0.6 && Math.min(gridConfig.cardWidth, gridConfig.cardHeight) > minCardSize;
    return {
      gridConfig,
      pagesNeeded,
      cardDimensions,
      contentArea,
      utilization,
      isOptimal
    };
  }
  validateLayout(config) {
    const errors = [];
    const warnings = [];
    const suggestions = [];
    if (!this.paperSizes[config.printConfiguration.paperSize]) {
      errors.push({
        code: "INVALID_PAPER_SIZE",
        message: `Invalid paper size: ${config.printConfiguration.paperSize}`,
        field: "paperSize",
        severity: "error"
      });
    }
    const margins = config.printConfiguration.margins;
    if (margins.top < 0 || margins.right < 0 || margins.bottom < 0 || margins.left < 0) {
      errors.push({
        code: "NEGATIVE_MARGINS",
        message: "Margins cannot be negative",
        field: "margins",
        severity: "error"
      });
    }
    if (config.sequencesPerPage < 1) {
      errors.push({
        code: "INVALID_SEQUENCES_PER_PAGE",
        message: "Sequences per page must be at least 1",
        field: "sequencesPerPage",
        severity: "error"
      });
    }
    if (config.sequencesPerPage > 20) {
      warnings.push({
        code: "HIGH_SEQUENCES_PER_PAGE",
        message: "High number of sequences per page may result in very small cards",
        suggestion: "Consider reducing sequences per page for better readability"
      });
    }
    const pageDimensions = this.calculatePageDimensions(
      config.printConfiguration.paperSize,
      config.printConfiguration.orientation
    );
    const totalMarginWidth = margins.left + margins.right;
    const totalMarginHeight = margins.top + margins.bottom;
    if (totalMarginWidth > pageDimensions.width * 0.5) {
      warnings.push({
        code: "LARGE_HORIZONTAL_MARGINS",
        message: "Horizontal margins are very large",
        suggestion: "Consider reducing left and right margins"
      });
    }
    if (totalMarginHeight > pageDimensions.height * 0.5) {
      warnings.push({
        code: "LARGE_VERTICAL_MARGINS",
        message: "Vertical margins are very large",
        suggestion: "Consider reducing top and bottom margins"
      });
    }
    return {
      isValid: errors.length === 0,
      errors,
      warnings,
      suggestions
    };
  }
  getDPIConfiguration() {
    return { ...this.dpiConfig };
  }
  convertMeasurement(value, fromUnit, toUnit) {
    const units = {
      points: 1,
      inches: 72,
      millimeters: 72 / 25.4,
      centimeters: 72 / 2.54
    };
    const fromPoints = units[fromUnit];
    const toPoints = units[toUnit];
    if (!fromPoints || !toPoints) {
      throw new Error(
        `Invalid measurement unit. Supported: ${Object.keys(units).join(", ")}`
      );
    }
    const valueInPoints = value * fromPoints;
    return valueInPoints / toPoints;
  }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlByaW50YWJsZVBhZ2VMYXlvdXRTZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogUHJpbnRhYmxlIFBhZ2UgTGF5b3V0IFNlcnZpY2UgSW1wbGVtZW50YXRpb25cbiAqXG4gKiBIYW5kbGVzIGNhbGN1bGF0aW9ucyBmb3IgcHJpbnRhYmxlIHBhZ2UgbGF5b3V0cyBpbmNsdWRpbmcgcGFwZXIgc2l6ZXMsXG4gKiBtYXJnaW5zLCBncmlkIGNvbmZpZ3VyYXRpb25zLCBhbmQgbWVhc3VyZW1lbnQgY29udmVyc2lvbnMuXG4gKlxuICogQmFzZWQgb24gZGVza3RvcCBhcHBsaWNhdGlvbidzIHByaW50YWJsZV9sYXlvdXQucHkgZnVuY3Rpb25hbGl0eS5cbiAqL1xuXG5pbXBvcnQgdHlwZSB7IElQcmludGFibGVQYWdlTGF5b3V0U2VydmljZSB9IGZyb20gXCIuLi8uLi9pbnRlcmZhY2VzL3NlcXVlbmNlLWludGVyZmFjZXNcIjtcbmltcG9ydCB0eXBlIHtcbiAgUGFnZURpbWVuc2lvbnMsXG4gIE1hcmdpbnMsXG4gIFJlY3RhbmdsZSxcbiAgR3JpZENvbmZpZyxcbiAgUGFwZXJTaXplLFxuICBPcmllbnRhdGlvbixcbiAgTGF5b3V0Q2FsY3VsYXRpb25SZXF1ZXN0LFxuICBMYXlvdXRDYWxjdWxhdGlvblJlc3VsdCxcbiAgTGF5b3V0VmFsaWRhdGlvblJlc3VsdCxcbiAgTGF5b3V0VmFsaWRhdGlvbkVycm9yLFxuICBMYXlvdXRWYWxpZGF0aW9uV2FybmluZyxcbiAgTGF5b3V0U3VnZ2VzdGlvbixcbiAgR3JpZENhbGN1bGF0aW9uT3B0aW9ucyxcbiAgRFBJQ29uZmlndXJhdGlvbixcbiAgUGFnZUxheW91dENvbmZpZyxcbn0gZnJvbSBcIi4uLy4uLy4uL2RvbWFpbi9wYWdlTGF5b3V0XCI7XG5cbmV4cG9ydCBjbGFzcyBQcmludGFibGVQYWdlTGF5b3V0U2VydmljZSBpbXBsZW1lbnRzIElQcmludGFibGVQYWdlTGF5b3V0U2VydmljZSB7XG4gIHByaXZhdGUgcmVhZG9ubHkgcGFwZXJTaXplcyA9IHtcbiAgICBBNDogeyB3aWR0aDogNTk1LCBoZWlnaHQ6IDg0MiB9LFxuICAgIExldHRlcjogeyB3aWR0aDogNjEyLCBoZWlnaHQ6IDc5MiB9LFxuICAgIExlZ2FsOiB7IHdpZHRoOiA2MTIsIGhlaWdodDogMTAwOCB9LFxuICAgIFRhYmxvaWQ6IHsgd2lkdGg6IDc5MiwgaGVpZ2h0OiAxMjI0IH0sXG4gIH07XG5cbiAgcHJpdmF0ZSByZWFkb25seSBkZWZhdWx0TWFyZ2luczogTWFyZ2lucyA9IHtcbiAgICB0b3A6IDM2LCAvLyAwLjUgaW5jaFxuICAgIHJpZ2h0OiAxOCwgLy8gMC4yNSBpbmNoXG4gICAgYm90dG9tOiAzNiwgLy8gMC41IGluY2hcbiAgICBsZWZ0OiAxOCwgLy8gMC4yNSBpbmNoXG4gIH07XG5cbiAgcHJpdmF0ZSByZWFkb25seSBkcGlDb25maWc6IERQSUNvbmZpZ3VyYXRpb24gPSB7XG4gICAgc2NyZWVuRFBJOiA5NixcbiAgICBwcmludERQSTogMzAwLFxuICAgIHNjYWxlRmFjdG9yOiA5NiAvIDcyLFxuICB9O1xuXG4gIGNhbGN1bGF0ZVBhZ2VEaW1lbnNpb25zKFxuICAgIHBhcGVyU2l6ZTogUGFwZXJTaXplLFxuICAgIG9yaWVudGF0aW9uOiBPcmllbnRhdGlvblxuICApOiBQYWdlRGltZW5zaW9ucyB7XG4gICAgY29uc3QgZGltZW5zaW9ucyA9IHRoaXMucGFwZXJTaXplc1twYXBlclNpemVdO1xuXG4gICAgaWYgKG9yaWVudGF0aW9uID09PSBcIkxhbmRzY2FwZVwiKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB3aWR0aDogZGltZW5zaW9ucy5oZWlnaHQsXG4gICAgICAgIGhlaWdodDogZGltZW5zaW9ucy53aWR0aCxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHdpZHRoOiBkaW1lbnNpb25zLndpZHRoLFxuICAgICAgaGVpZ2h0OiBkaW1lbnNpb25zLmhlaWdodCxcbiAgICB9O1xuICB9XG5cbiAgY2FsY3VsYXRlTWFyZ2lucyhfcGFwZXJTaXplOiBQYXBlclNpemUpOiBNYXJnaW5zIHtcbiAgICAvLyBGb3Igbm93LCB1c2UgZGVmYXVsdCBtYXJnaW5zIGZvciBhbGwgcGFwZXIgc2l6ZXNcbiAgICAvLyBDb3VsZCBiZSBleHRlbmRlZCB0byBoYXZlIHBhcGVyLXNwZWNpZmljIG1hcmdpbnNcbiAgICByZXR1cm4geyAuLi50aGlzLmRlZmF1bHRNYXJnaW5zIH07XG4gIH1cblxuICBjYWxjdWxhdGVDb250ZW50QXJlYShwYWdlU2l6ZTogUGFnZURpbWVuc2lvbnMsIG1hcmdpbnM6IE1hcmdpbnMpOiBSZWN0YW5nbGUge1xuICAgIHJldHVybiB7XG4gICAgICB4OiBtYXJnaW5zLmxlZnQsXG4gICAgICB5OiBtYXJnaW5zLnRvcCxcbiAgICAgIHdpZHRoOiBwYWdlU2l6ZS53aWR0aCAtIG1hcmdpbnMubGVmdCAtIG1hcmdpbnMucmlnaHQsXG4gICAgICBoZWlnaHQ6IHBhZ2VTaXplLmhlaWdodCAtIG1hcmdpbnMudG9wIC0gbWFyZ2lucy5ib3R0b20sXG4gICAgfTtcbiAgfVxuXG4gIGNhbGN1bGF0ZU9wdGltYWxHcmlkKFxuICAgIGNhcmRBc3BlY3RSYXRpbzogbnVtYmVyLFxuICAgIGNvbnRlbnRBcmVhOiBSZWN0YW5nbGUsXG4gICAgb3B0aW9uczogUGFydGlhbDxHcmlkQ2FsY3VsYXRpb25PcHRpb25zPiA9IHt9XG4gICk6IEdyaWRDb25maWcge1xuICAgIGNvbnN0IG9wdHM6IEdyaWRDYWxjdWxhdGlvbk9wdGlvbnMgPSB7XG4gICAgICBtaW5DYXJkc1BlclBhZ2U6IDIsXG4gICAgICBtYXhDYXJkc1BlclBhZ2U6IDEyLFxuICAgICAgcHJlZmVyU3F1YXJlTGF5b3V0OiBmYWxzZSxcbiAgICAgIHByaW9yaXRpemVDYXJkU2l6ZTogdHJ1ZSxcbiAgICAgIGFsbG93UGFydGlhbExhc3RQYWdlOiB0cnVlLFxuICAgICAgLi4ub3B0aW9ucyxcbiAgICB9O1xuXG4gICAgbGV0IGJlc3RHcmlkOiBHcmlkQ29uZmlnIHwgbnVsbCA9IG51bGw7XG4gICAgbGV0IGJlc3RTY29yZSA9IDA7XG5cbiAgICAvLyBUcnkgZGlmZmVyZW50IGdyaWQgY29uZmlndXJhdGlvbnNcbiAgICBmb3IgKFxuICAgICAgbGV0IHRvdGFsQ2FyZHMgPSBvcHRzLm1pbkNhcmRzUGVyUGFnZTtcbiAgICAgIHRvdGFsQ2FyZHMgPD0gb3B0cy5tYXhDYXJkc1BlclBhZ2U7XG4gICAgICB0b3RhbENhcmRzKytcbiAgICApIHtcbiAgICAgIGZvciAobGV0IHJvd3MgPSAxOyByb3dzIDw9IE1hdGguY2VpbChNYXRoLnNxcnQodG90YWxDYXJkcykpOyByb3dzKyspIHtcbiAgICAgICAgY29uc3QgY29scyA9IE1hdGguY2VpbCh0b3RhbENhcmRzIC8gcm93cyk7XG5cbiAgICAgICAgaWYgKHJvd3MgKiBjb2xzIDwgdG90YWxDYXJkcyAmJiAhb3B0cy5hbGxvd1BhcnRpYWxMYXN0UGFnZSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY2VsbFdpZHRoID0gY29udGVudEFyZWEud2lkdGggLyBjb2xzO1xuICAgICAgICBjb25zdCBjZWxsSGVpZ2h0ID0gY29udGVudEFyZWEuaGVpZ2h0IC8gcm93cztcblxuICAgICAgICAvLyBDYWxjdWxhdGUgY2FyZCBkaW1lbnNpb25zIG1haW50YWluaW5nIGFzcGVjdCByYXRpb1xuICAgICAgICBsZXQgY2FyZFdpZHRoID0gY2VsbFdpZHRoICogMC45OyAvLyBMZWF2ZSBzb21lIHNwYWNpbmdcbiAgICAgICAgbGV0IGNhcmRIZWlnaHQgPSBjYXJkV2lkdGggLyBjYXJkQXNwZWN0UmF0aW87XG5cbiAgICAgICAgaWYgKGNhcmRIZWlnaHQgPiBjZWxsSGVpZ2h0ICogMC45KSB7XG4gICAgICAgICAgY2FyZEhlaWdodCA9IGNlbGxIZWlnaHQgKiAwLjk7XG4gICAgICAgICAgY2FyZFdpZHRoID0gY2FyZEhlaWdodCAqIGNhcmRBc3BlY3RSYXRpbztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENhbGN1bGF0ZSBzY29yZSBiYXNlZCBvbiBjYXJkIHNpemUgYW5kIGxheW91dCBlZmZpY2llbmN5XG4gICAgICAgIGNvbnN0IGNhcmRBcmVhID0gY2FyZFdpZHRoICogY2FyZEhlaWdodDtcbiAgICAgICAgY29uc3QgdG90YWxVc2VkQXJlYSA9IHRvdGFsQ2FyZHMgKiBjYXJkQXJlYTtcbiAgICAgICAgY29uc3QgdG90YWxBdmFpbGFibGVBcmVhID0gY29udGVudEFyZWEud2lkdGggKiBjb250ZW50QXJlYS5oZWlnaHQ7XG4gICAgICAgIGNvbnN0IHV0aWxpemF0aW9uID0gdG90YWxVc2VkQXJlYSAvIHRvdGFsQXZhaWxhYmxlQXJlYTtcblxuICAgICAgICAvLyBQcmVmZXIgbGF5b3V0cyB0aGF0IG1heGltaXplIGNhcmQgc2l6ZSBpZiBwcmlvcml0aXplQ2FyZFNpemUgaXMgdHJ1ZVxuICAgICAgICBjb25zdCBjYXJkU2l6ZVNjb3JlID0gb3B0cy5wcmlvcml0aXplQ2FyZFNpemVcbiAgICAgICAgICA/IGNhcmRBcmVhIC8gKGNvbnRlbnRBcmVhLndpZHRoICogY29udGVudEFyZWEuaGVpZ2h0KVxuICAgICAgICAgIDogMC41O1xuICAgICAgICBjb25zdCB1dGlsaXphdGlvblNjb3JlID0gTWF0aC5taW4odXRpbGl6YXRpb24sIDEuMCk7XG4gICAgICAgIGNvbnN0IGxheW91dFNjb3JlID0gb3B0cy5wcmVmZXJTcXVhcmVMYXlvdXRcbiAgICAgICAgICA/IDEgLSBNYXRoLmFicyhyb3dzIC0gY29scykgLyBNYXRoLm1heChyb3dzLCBjb2xzKVxuICAgICAgICAgIDogMC41O1xuXG4gICAgICAgIGNvbnN0IHNjb3JlID1cbiAgICAgICAgICBjYXJkU2l6ZVNjb3JlICogMC40ICsgdXRpbGl6YXRpb25TY29yZSAqIDAuNCArIGxheW91dFNjb3JlICogMC4yO1xuXG4gICAgICAgIGlmIChzY29yZSA+IGJlc3RTY29yZSkge1xuICAgICAgICAgIGJlc3RTY29yZSA9IHNjb3JlO1xuICAgICAgICAgIGJlc3RHcmlkID0ge1xuICAgICAgICAgICAgcm93cyxcbiAgICAgICAgICAgIGNvbHVtbnM6IGNvbHMsXG4gICAgICAgICAgICBzcGFjaW5nOiBNYXRoLm1pbihcbiAgICAgICAgICAgICAgKGNlbGxXaWR0aCAtIGNhcmRXaWR0aCkgLyAyLFxuICAgICAgICAgICAgICAoY2VsbEhlaWdodCAtIGNhcmRIZWlnaHQpIC8gMlxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIGNhcmRXaWR0aCxcbiAgICAgICAgICAgIGNhcmRIZWlnaHQsXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEZhbGxiYWNrIHRvIHNpbXBsZSAyeDIgaWYgbm8gb3B0aW1hbCBncmlkIGZvdW5kXG4gICAgaWYgKCFiZXN0R3JpZCkge1xuICAgICAgY29uc3QgY2VsbFdpZHRoID0gY29udGVudEFyZWEud2lkdGggLyAyO1xuICAgICAgY29uc3QgY2VsbEhlaWdodCA9IGNvbnRlbnRBcmVhLmhlaWdodCAvIDI7XG4gICAgICBjb25zdCBjYXJkV2lkdGggPSBjZWxsV2lkdGggKiAwLjk7XG4gICAgICBjb25zdCBjYXJkSGVpZ2h0ID0gY2FyZFdpZHRoIC8gY2FyZEFzcGVjdFJhdGlvO1xuXG4gICAgICBiZXN0R3JpZCA9IHtcbiAgICAgICAgcm93czogMixcbiAgICAgICAgY29sdW1uczogMixcbiAgICAgICAgc3BhY2luZzogTWF0aC5taW4oXG4gICAgICAgICAgKGNlbGxXaWR0aCAtIGNhcmRXaWR0aCkgLyAyLFxuICAgICAgICAgIChjZWxsSGVpZ2h0IC0gY2FyZEhlaWdodCkgLyAyXG4gICAgICAgICksXG4gICAgICAgIGNhcmRXaWR0aCxcbiAgICAgICAgY2FyZEhlaWdodCxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIGJlc3RHcmlkO1xuICB9XG5cbiAgZ2V0UGFnZVNpemVJblBpeGVscyhcbiAgICBwYXBlclNpemU6IFBhcGVyU2l6ZSxcbiAgICBvcmllbnRhdGlvbjogT3JpZW50YXRpb24sXG4gICAgZHBpOiBudW1iZXIgPSB0aGlzLmRwaUNvbmZpZy5zY3JlZW5EUElcbiAgKTogUGFnZURpbWVuc2lvbnMge1xuICAgIGNvbnN0IHBvaW50RGltZW5zaW9ucyA9IHRoaXMuY2FsY3VsYXRlUGFnZURpbWVuc2lvbnMoXG4gICAgICBwYXBlclNpemUsXG4gICAgICBvcmllbnRhdGlvblxuICAgICk7XG4gICAgY29uc3Qgc2NhbGVGYWN0b3IgPSBkcGkgLyA3MjsgLy8gQ29udmVydCBmcm9tIHBvaW50cyB0byBwaXhlbHNcblxuICAgIHJldHVybiB7XG4gICAgICB3aWR0aDogTWF0aC5yb3VuZChwb2ludERpbWVuc2lvbnMud2lkdGggKiBzY2FsZUZhY3RvciksXG4gICAgICBoZWlnaHQ6IE1hdGgucm91bmQocG9pbnREaW1lbnNpb25zLmhlaWdodCAqIHNjYWxlRmFjdG9yKSxcbiAgICB9O1xuICB9XG5cbiAgY2FsY3VsYXRlTGF5b3V0KHJlcXVlc3Q6IExheW91dENhbGN1bGF0aW9uUmVxdWVzdCk6IExheW91dENhbGN1bGF0aW9uUmVzdWx0IHtcbiAgICBjb25zdCBwYWdlRGltZW5zaW9ucyA9IHRoaXMuY2FsY3VsYXRlUGFnZURpbWVuc2lvbnMoXG4gICAgICByZXF1ZXN0LnBhcGVyU2l6ZSxcbiAgICAgIHJlcXVlc3Qub3JpZW50YXRpb25cbiAgICApO1xuICAgIGNvbnN0IG1hcmdpbnMgPSByZXF1ZXN0Lm1hcmdpbnMgfHwgdGhpcy5jYWxjdWxhdGVNYXJnaW5zKHJlcXVlc3QucGFwZXJTaXplKTtcbiAgICBjb25zdCBjb250ZW50QXJlYSA9IHRoaXMuY2FsY3VsYXRlQ29udGVudEFyZWEocGFnZURpbWVuc2lvbnMsIG1hcmdpbnMpO1xuXG4gICAgY29uc3QgZ3JpZE9wdGlvbnM6IEdyaWRDYWxjdWxhdGlvbk9wdGlvbnMgPSB7XG4gICAgICBtaW5DYXJkc1BlclBhZ2U6IDIsXG4gICAgICBtYXhDYXJkc1BlclBhZ2U6IHJlcXVlc3QucHJlZmVycmVkQ2FyZHNQZXJQYWdlIHx8IDEyLFxuICAgICAgcHJlZmVyU3F1YXJlTGF5b3V0OiBmYWxzZSxcbiAgICAgIHByaW9yaXRpemVDYXJkU2l6ZTogdHJ1ZSxcbiAgICAgIGFsbG93UGFydGlhbExhc3RQYWdlOiB0cnVlLFxuICAgIH07XG5cbiAgICBjb25zdCBncmlkQ29uZmlnID0gdGhpcy5jYWxjdWxhdGVPcHRpbWFsR3JpZChcbiAgICAgIHJlcXVlc3QuY2FyZEFzcGVjdFJhdGlvLFxuICAgICAgY29udGVudEFyZWEsXG4gICAgICBncmlkT3B0aW9uc1xuICAgICk7XG5cbiAgICBjb25zdCBjYXJkc1BlclBhZ2UgPSBncmlkQ29uZmlnLnJvd3MgKiBncmlkQ29uZmlnLmNvbHVtbnM7XG4gICAgY29uc3QgcGFnZXNOZWVkZWQgPSBNYXRoLmNlaWwocmVxdWVzdC5zZXF1ZW5jZUNvdW50IC8gY2FyZHNQZXJQYWdlKTtcbiAgICBjb25zdCBjYXJkRGltZW5zaW9ucyA9IHtcbiAgICAgIHdpZHRoOiBncmlkQ29uZmlnLmNhcmRXaWR0aCxcbiAgICAgIGhlaWdodDogZ3JpZENvbmZpZy5jYXJkSGVpZ2h0LFxuICAgIH07XG5cbiAgICAvLyBDYWxjdWxhdGUgdXRpbGl6YXRpb25cbiAgICBjb25zdCBjYXJkQXJlYSA9IGdyaWRDb25maWcuY2FyZFdpZHRoICogZ3JpZENvbmZpZy5jYXJkSGVpZ2h0O1xuICAgIGNvbnN0IHRvdGFsQ2FyZEFyZWEgPSBjYXJkc1BlclBhZ2UgKiBjYXJkQXJlYTtcbiAgICBjb25zdCBjb250ZW50QXJlYVNpemUgPSBjb250ZW50QXJlYS53aWR0aCAqIGNvbnRlbnRBcmVhLmhlaWdodDtcbiAgICBjb25zdCB1dGlsaXphdGlvbiA9IE1hdGgubWluKHRvdGFsQ2FyZEFyZWEgLyBjb250ZW50QXJlYVNpemUsIDEuMCk7XG5cbiAgICAvLyBDb25zaWRlciBsYXlvdXQgb3B0aW1hbCBpZiB1dGlsaXphdGlvbiA+IDAuNiBhbmQgY2FyZCBzaXplIGlzIHJlYXNvbmFibGVcbiAgICBjb25zdCBtaW5DYXJkU2l6ZSA9IE1hdGgubWluKGNvbnRlbnRBcmVhLndpZHRoLCBjb250ZW50QXJlYS5oZWlnaHQpICogMC4yO1xuICAgIGNvbnN0IGlzT3B0aW1hbCA9XG4gICAgICB1dGlsaXphdGlvbiA+IDAuNiAmJlxuICAgICAgTWF0aC5taW4oZ3JpZENvbmZpZy5jYXJkV2lkdGgsIGdyaWRDb25maWcuY2FyZEhlaWdodCkgPiBtaW5DYXJkU2l6ZTtcblxuICAgIHJldHVybiB7XG4gICAgICBncmlkQ29uZmlnLFxuICAgICAgcGFnZXNOZWVkZWQsXG4gICAgICBjYXJkRGltZW5zaW9ucyxcbiAgICAgIGNvbnRlbnRBcmVhLFxuICAgICAgdXRpbGl6YXRpb24sXG4gICAgICBpc09wdGltYWwsXG4gICAgfTtcbiAgfVxuXG4gIHZhbGlkYXRlTGF5b3V0KGNvbmZpZzogUGFnZUxheW91dENvbmZpZyk6IExheW91dFZhbGlkYXRpb25SZXN1bHQge1xuICAgIGNvbnN0IGVycm9yczogTGF5b3V0VmFsaWRhdGlvbkVycm9yW10gPSBbXTtcbiAgICBjb25zdCB3YXJuaW5nczogTGF5b3V0VmFsaWRhdGlvbldhcm5pbmdbXSA9IFtdO1xuICAgIGNvbnN0IHN1Z2dlc3Rpb25zOiBMYXlvdXRTdWdnZXN0aW9uW10gPSBbXTtcblxuICAgIC8vIFZhbGlkYXRlIHBhcGVyIHNpemVcbiAgICBpZiAoIXRoaXMucGFwZXJTaXplc1tjb25maWcucHJpbnRDb25maWd1cmF0aW9uLnBhcGVyU2l6ZV0pIHtcbiAgICAgIGVycm9ycy5wdXNoKHtcbiAgICAgICAgY29kZTogXCJJTlZBTElEX1BBUEVSX1NJWkVcIixcbiAgICAgICAgbWVzc2FnZTogYEludmFsaWQgcGFwZXIgc2l6ZTogJHtjb25maWcucHJpbnRDb25maWd1cmF0aW9uLnBhcGVyU2l6ZX1gLFxuICAgICAgICBmaWVsZDogXCJwYXBlclNpemVcIixcbiAgICAgICAgc2V2ZXJpdHk6IFwiZXJyb3JcIiBhcyBjb25zdCxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFZhbGlkYXRlIG1hcmdpbnNcbiAgICBjb25zdCBtYXJnaW5zID0gY29uZmlnLnByaW50Q29uZmlndXJhdGlvbi5tYXJnaW5zO1xuICAgIGlmIChcbiAgICAgIG1hcmdpbnMudG9wIDwgMCB8fFxuICAgICAgbWFyZ2lucy5yaWdodCA8IDAgfHxcbiAgICAgIG1hcmdpbnMuYm90dG9tIDwgMCB8fFxuICAgICAgbWFyZ2lucy5sZWZ0IDwgMFxuICAgICkge1xuICAgICAgZXJyb3JzLnB1c2goe1xuICAgICAgICBjb2RlOiBcIk5FR0FUSVZFX01BUkdJTlNcIixcbiAgICAgICAgbWVzc2FnZTogXCJNYXJnaW5zIGNhbm5vdCBiZSBuZWdhdGl2ZVwiLFxuICAgICAgICBmaWVsZDogXCJtYXJnaW5zXCIsXG4gICAgICAgIHNldmVyaXR5OiBcImVycm9yXCIgYXMgY29uc3QsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBWYWxpZGF0ZSBzZXF1ZW5jZXMgcGVyIHBhZ2VcbiAgICBpZiAoY29uZmlnLnNlcXVlbmNlc1BlclBhZ2UgPCAxKSB7XG4gICAgICBlcnJvcnMucHVzaCh7XG4gICAgICAgIGNvZGU6IFwiSU5WQUxJRF9TRVFVRU5DRVNfUEVSX1BBR0VcIixcbiAgICAgICAgbWVzc2FnZTogXCJTZXF1ZW5jZXMgcGVyIHBhZ2UgbXVzdCBiZSBhdCBsZWFzdCAxXCIsXG4gICAgICAgIGZpZWxkOiBcInNlcXVlbmNlc1BlclBhZ2VcIixcbiAgICAgICAgc2V2ZXJpdHk6IFwiZXJyb3JcIiBhcyBjb25zdCxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChjb25maWcuc2VxdWVuY2VzUGVyUGFnZSA+IDIwKSB7XG4gICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgY29kZTogXCJISUdIX1NFUVVFTkNFU19QRVJfUEFHRVwiLFxuICAgICAgICBtZXNzYWdlOlxuICAgICAgICAgIFwiSGlnaCBudW1iZXIgb2Ygc2VxdWVuY2VzIHBlciBwYWdlIG1heSByZXN1bHQgaW4gdmVyeSBzbWFsbCBjYXJkc1wiLFxuICAgICAgICBzdWdnZXN0aW9uOlxuICAgICAgICAgIFwiQ29uc2lkZXIgcmVkdWNpbmcgc2VxdWVuY2VzIHBlciBwYWdlIGZvciBiZXR0ZXIgcmVhZGFiaWxpdHlcIixcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIG1hcmdpbnMgYXJlIHRvbyBsYXJnZVxuICAgIGNvbnN0IHBhZ2VEaW1lbnNpb25zID0gdGhpcy5jYWxjdWxhdGVQYWdlRGltZW5zaW9ucyhcbiAgICAgIGNvbmZpZy5wcmludENvbmZpZ3VyYXRpb24ucGFwZXJTaXplLFxuICAgICAgY29uZmlnLnByaW50Q29uZmlndXJhdGlvbi5vcmllbnRhdGlvblxuICAgICk7XG4gICAgY29uc3QgdG90YWxNYXJnaW5XaWR0aCA9IG1hcmdpbnMubGVmdCArIG1hcmdpbnMucmlnaHQ7XG4gICAgY29uc3QgdG90YWxNYXJnaW5IZWlnaHQgPSBtYXJnaW5zLnRvcCArIG1hcmdpbnMuYm90dG9tO1xuXG4gICAgaWYgKHRvdGFsTWFyZ2luV2lkdGggPiBwYWdlRGltZW5zaW9ucy53aWR0aCAqIDAuNSkge1xuICAgICAgd2FybmluZ3MucHVzaCh7XG4gICAgICAgIGNvZGU6IFwiTEFSR0VfSE9SSVpPTlRBTF9NQVJHSU5TXCIsXG4gICAgICAgIG1lc3NhZ2U6IFwiSG9yaXpvbnRhbCBtYXJnaW5zIGFyZSB2ZXJ5IGxhcmdlXCIsXG4gICAgICAgIHN1Z2dlc3Rpb246IFwiQ29uc2lkZXIgcmVkdWNpbmcgbGVmdCBhbmQgcmlnaHQgbWFyZ2luc1wiLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKHRvdGFsTWFyZ2luSGVpZ2h0ID4gcGFnZURpbWVuc2lvbnMuaGVpZ2h0ICogMC41KSB7XG4gICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgY29kZTogXCJMQVJHRV9WRVJUSUNBTF9NQVJHSU5TXCIsXG4gICAgICAgIG1lc3NhZ2U6IFwiVmVydGljYWwgbWFyZ2lucyBhcmUgdmVyeSBsYXJnZVwiLFxuICAgICAgICBzdWdnZXN0aW9uOiBcIkNvbnNpZGVyIHJlZHVjaW5nIHRvcCBhbmQgYm90dG9tIG1hcmdpbnNcIixcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBpc1ZhbGlkOiBlcnJvcnMubGVuZ3RoID09PSAwLFxuICAgICAgZXJyb3JzLFxuICAgICAgd2FybmluZ3MsXG4gICAgICBzdWdnZXN0aW9ucyxcbiAgICB9O1xuICB9XG5cbiAgZ2V0RFBJQ29uZmlndXJhdGlvbigpOiBEUElDb25maWd1cmF0aW9uIHtcbiAgICByZXR1cm4geyAuLi50aGlzLmRwaUNvbmZpZyB9O1xuICB9XG5cbiAgY29udmVydE1lYXN1cmVtZW50KHZhbHVlOiBudW1iZXIsIGZyb21Vbml0OiBzdHJpbmcsIHRvVW5pdDogc3RyaW5nKTogbnVtYmVyIHtcbiAgICBjb25zdCB1bml0cyA9IHtcbiAgICAgIHBvaW50czogMSxcbiAgICAgIGluY2hlczogNzIsXG4gICAgICBtaWxsaW1ldGVyczogNzIgLyAyNS40LFxuICAgICAgY2VudGltZXRlcnM6IDcyIC8gMi41NCxcbiAgICB9IGFzIGNvbnN0O1xuXG4gICAgY29uc3QgZnJvbVBvaW50cyA9IHVuaXRzW2Zyb21Vbml0IGFzIGtleW9mIHR5cGVvZiB1bml0c107XG4gICAgY29uc3QgdG9Qb2ludHMgPSB1bml0c1t0b1VuaXQgYXMga2V5b2YgdHlwZW9mIHVuaXRzXTtcblxuICAgIGlmICghZnJvbVBvaW50cyB8fCAhdG9Qb2ludHMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYEludmFsaWQgbWVhc3VyZW1lbnQgdW5pdC4gU3VwcG9ydGVkOiAke09iamVjdC5rZXlzKHVuaXRzKS5qb2luKFwiLCBcIil9YFxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBDb252ZXJ0IHRvIHBvaW50cywgdGhlbiB0byB0YXJnZXQgdW5pdFxuICAgIGNvbnN0IHZhbHVlSW5Qb2ludHMgPSB2YWx1ZSAqIGZyb21Qb2lu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