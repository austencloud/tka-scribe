import { createHotContext as __vite__createHotContext } from "/@vite/client";import.meta.hot = __vite__createHotContext("/src/lib/components/export/ExportActionsCard.svelte");import "/node_modules/.vite/deps/svelte_internal_disclose-version.js?v=608ae08a";

ExportActionsCard[$.FILENAME] = 'src/lib/components/export/ExportActionsCard.svelte';

import * as $ from "/node_modules/.vite/deps/svelte_internal_client.js?v=608ae08a";

async function handleExportCurrent(_, canExportCurrent, isExporting, $$props) {
	if (!$.get(canExportCurrent) || isExporting()) return;

	console.log("\u{1F4E4} [ACTIONS-CARD] Triggering current sequence export");
	$$props.onexportcurrent?.();
}

async function handleExportAll(__1, isExportingAll, $$props) {
	if ($.get(isExportingAll)) return;

	try {
		$.set(isExportingAll, true);
		console.log("\u{1F4E4} [ACTIONS-CARD] Triggering batch export");
		$$props.onexportall?.();
	} catch(error) {
		console.error(...$.log_if_contains_state('error', "Export all failed:", error));
	} finally {
		setTimeout(
			() => {
				$.set(isExportingAll, false);
			},
			1e3
		);
	}
}

var root_3 = $.add_locations($.from_html(`<span class="beat-count s-mwP9uTptHa6v"> </span>`), ExportActionsCard[$.FILENAME], [[91, 16]]);
var root_4 = $.add_locations($.from_html(`<span class="start-pos-indicator s-mwP9uTptHa6v">üìç Start Position</span>`), ExportActionsCard[$.FILENAME], [[94, 16]]);
var root_5 = $.add_locations($.from_html(`<span class="empty-indicator s-mwP9uTptHa6v">‚ö†Ô∏è Empty</span>`), ExportActionsCard[$.FILENAME], [[97, 16]]);
var root_2 = $.add_locations($.from_html(`<div class="sequence-info s-mwP9uTptHa6v"><span class="sequence-name s-mwP9uTptHa6v"> </span> <div class="sequence-metadata s-mwP9uTptHa6v"><!> <!> <!></div></div>`), ExportActionsCard[$.FILENAME], [[87, 10, [[88, 12], [89, 12]]]]);
var root_1 = $.add_locations($.from_html(`<!> <div class="sequence-status s-mwP9uTptHa6v"><span class="status-text s-mwP9uTptHa6v"> </span></div>`, 1), ExportActionsCard[$.FILENAME], [[102, 8, [[103, 10]]]]);
var root_6 = $.add_locations($.from_html(`<div class="no-sequence s-mwP9uTptHa6v"><span class="no-sequence-text s-mwP9uTptHa6v">No sequence loaded</span> <span class="status-text s-mwP9uTptHa6v"> </span></div>`), ExportActionsCard[$.FILENAME], [[106, 8, [[107, 10], [108, 10]]]]);
var root_7 = $.add_locations($.from_html(`<span class="loading-spinner s-mwP9uTptHa6v"></span> `, 1), ExportActionsCard[$.FILENAME], [[120, 8]]);
var root_8 = $.add_locations($.from_html(`<span class="button-icon s-mwP9uTptHa6v">üî§</span> `, 1), ExportActionsCard[$.FILENAME], [[123, 8]]);
var root_9 = $.add_locations($.from_html(`<span class="loading-spinner s-mwP9uTptHa6v"></span> Preparing Batch...`, 1), ExportActionsCard[$.FILENAME], [[146, 8]]);
var root_10 = $.add_locations($.from_html(`<span class="button-icon s-mwP9uTptHa6v">üìö</span> Export All Sequences`, 1), ExportActionsCard[$.FILENAME], [[149, 8]]);

var root = $.add_locations($.from_html(`<div class="export-actions-card s-mwP9uTptHa6v"><h3 class="card-title s-mwP9uTptHa6v">Export Actions</h3> <div class="action-section s-mwP9uTptHa6v"><div class="action-header s-mwP9uTptHa6v"><h4 class="action-title s-mwP9uTptHa6v">Current Sequence</h4> <!></div> <button><!></button></div> <div class="action-section s-mwP9uTptHa6v"><div class="action-header s-mwP9uTptHa6v"><h4 class="action-title s-mwP9uTptHa6v">Batch Export</h4> <div class="all-sequences-info s-mwP9uTptHa6v"><span class="info-text s-mwP9uTptHa6v">Export all sequences in your library</span> <span class="status-text s-mwP9uTptHa6v">(Feature coming soon)</span></div></div> <button><!></button></div></div>`), ExportActionsCard[$.FILENAME], [
	[
		77,
		0,

		[
			[78, 2],
			[81, 2, [[82, 4, [[83, 6]]], [113, 4]]],

			[
				130,
				2,

				[
					[131, 4, [[132, 6], [133, 6, [[134, 8], [135, 8]]]]],
					[139, 4]
				]
			]
		]
	]
]);

function ExportActionsCard($$anchor, $$props) {
	$.check_target(new.target);
	$.push($$props, true, ExportActionsCard);

	let canExport = $.prop($$props, 'canExport', 3, false),
		isExporting = $.prop($$props, 'isExporting', 3, false);

	let isExportingAll = $.tag($.state(false), 'isExportingAll');

	let canExportCurrent = $.tag(
		$.derived(() => () => {
			if ($.strict_equals(canExport(), void 0, false)) {
				return canExport() && $.strict_equals($$props.currentSequence, null, false);
			}

			return $$props.currentSequence && $$props.currentSequence.beats && $$props.currentSequence.beats.length > 0;
		}),
		'canExportCurrent'
	);

	let sequenceInfo = $.tag(
		$.derived(() => () => {
			if (!$$props.currentSequence) return null;

			const beatCount = $$props.currentSequence.beats?.length || 0;
			const word = $$props.currentSequence.word || $$props.currentSequence.name || "Untitled";

			return {
				name: word,
				beatCount,
				isEmpty: $.strict_equals(beatCount, 0),
				hasStartPosition: !!$$props.currentSequence.startPosition
			};
		}),
		'sequenceInfo'
	);

	let exportButtonText = $.tag(
		$.derived(() => () => {
			if (isExporting()) {
				return "Exporting...";
			}

			const info = $.get(sequenceInfo)();

			if (!info) {
				return "No Sequence to Export";
			}

			if (info.isEmpty && !info.hasStartPosition) {
				return "Empty Sequence";
			}

			if (info.isEmpty && info.hasStartPosition) {
				return "Export Start Position";
			}

			return "Export Current Sequence";
		}),
		'exportButtonText'
	);

	let sequenceStatus = $.tag(
		$.derived(() => () => {
			const info = $.get(sequenceInfo)();

			if (!info) {
				return "Create a sequence in the Construct tab";
			}

			if (info.isEmpty && !info.hasStartPosition) {
				return "Add beats or set start position to export";
			}

			if (info.isEmpty && info.hasStartPosition) {
				return "Start position only";
			}

			return `${info.beatCount} beats ready to export`;
		}),
		'sequenceStatus'
	);

	var div = root();
	var div_1 = $.sibling($.child(div), 2);
	var div_2 = $.child(div_1);
	var node = $.sibling($.child(div_2), 2);

	{
		var consequent_4 = ($$anchor) => {
			const info = $.tag($.derived(() => $.get(sequenceInfo)()), 'info');

			$.get(info);

			var fragment = root_1();
			var node_1 = $.first_child(fragment);

			{
				var consequent_3 = ($$anchor) => {
					var div_3 = root_2();
					var span = $.child(div_3);
					var text = $.child(span, true);

					$.reset(span);

					var div_4 = $.sibling(span, 2);
					var node_2 = $.child(div_4);

					{
						var consequent = ($$anchor) => {
							var span_1 = root_3();
							var text_1 = $.child(span_1);

							$.reset(span_1);
							$.template_effect(() => $.set_text(text_1, `${$.get(info).beatCount ?? ''} beats`));
							$.append($$anchor, span_1);
						};

						$.add_svelte_meta(
							() => $.if(node_2, ($$render) => {
								if ($.get(info).beatCount > 0) $$render(consequent);
							}),
							'if',
							ExportActionsCard,
							90,
							14
						);
					}

					var node_3 = $.sibling(node_2, 2);

					{
						var consequent_1 = ($$anchor) => {
							var span_2 = root_4();

							$.append($$anchor, span_2);
						};

						$.add_svelte_meta(
							() => $.if(node_3, ($$render) => {
								if ($.get(info).hasStartPosition) $$render(consequent_1);
							}),
							'if',
							ExportActionsCard,
							93,
							14
						);
					}

					var node_4 = $.sibling(node_3, 2);

					{
						var consequent_2 = ($$anchor) => {
							var span_3 = root_5();

							$.append($$anchor, span_3);
						};

						$.add_svelte_meta(
							() => $.if(node_4, ($$render) => {
								if ($.get(info).isEmpty && !$.get(info).hasStartPosition) $$render(consequent_2);
							}),
							'if',
							ExportActionsCard,
							96,
							14
						);
					}

					$.reset(div_4);
					$.reset(div_3);
					$.template_effect(() => $.set_text(text, $.get(info).name));
					$.append($$anchor, div_3);
				};

				$.add_svelte_meta(
					() => $.if(node_1, ($$render) => {
						if ($.get(info)) $$render(consequent_3);
					}),
					'if',
					ExportActionsCard,
					86,
					8
				);
			}

			var div_5 = $.sibling(node_1, 2);
			var span_4 = $.child(div_5);
			var text_2 = $.child(span_4, true);

			$.reset(span_4);
			$.reset(div_5);
			$.template_effect(($0) => $.set_text(text_2, $0), [() => $.get(sequenceStatus)()]);
			$.append($$anchor, fragment);
		};

		var alternate = ($$anchor) => {
			var div_6 = root_6();
			var span_5 = $.sibling($.child(div_6), 2);
			var text_3 = $.child(span_5, true);

			$.reset(span_5);
			$.reset(div_6);
			$.template_effect(($0) => $.set_text(text_3, $0), [() => $.get(sequenceStatus)()]);
			$.append($$anchor, div_6);
		};

		$.add_svelte_meta(
			() => $.if(node, ($$render) => {
				if ($.get(sequenceInfo)()) $$render(consequent_4); else $$render(alternate, false);
			}),
			'if',
			ExportActionsCard,
			84,
			6
		);
	}

	$.reset(div_2);

	var button = $.sibling(div_2, 2);
	let classes;

	button.__click = [handleExportCurrent, canExportCurrent, isExporting, $$props];

	var node_5 = $.child(button);

	{
		var consequent_5 = ($$anchor) => {
			var fragment_1 = root_7();
			var text_4 = $.sibling($.first_child(fragment_1));

			$.template_effect(($0) => $.set_text(text_4, ` ${$0 ?? ''}`), [() => $.get(exportButtonText)()]);
			$.append($$anchor, fragment_1);
		};

		var alternate_1 = ($$anchor) => {
			var fragment_2 = root_8();
			var text_5 = $.sibling($.first_child(fragment_2));

			$.template_effect(($0) => $.set_text(text_5, ` ${$0 ?? ''}`), [() => $.get(exportButtonText)()]);
			$.append($$anchor, fragment_2);
		};

		$.add_svelte_meta(
			() => $.if(node_5, ($$render) => {
				if (isExporting()) $$render(consequent_5); else $$render(alternate_1, false);
			}),
			'if',
			ExportActionsCard,
			119,
			6
		);
	}

	$.reset(button);
	$.reset(div_1);

	var div_7 = $.sibling(div_1, 2);
	var button_1 = $.sibling($.child(div_7), 2);
	let classes_1;

	button_1.__click = [handleExportAll, isExportingAll, $$props];

	var node_6 = $.child(button_1);

	{
		var consequent_6 = ($$anchor) => {
			var fragment_3 = root_9();

			$.next();
			$.append($$anchor, fragment_3);
		};

		var alternate_2 = ($$anchor) => {
			var fragment_4 = root_10();

			$.next();
			$.append($$anchor, fragment_4);
		};

		$.add_svelte_meta(
			() => $.if(node_6, ($$render) => {
				if ($.get(isExportingAll)) $$render(consequent_6); else $$render(alternate_2, false);
			}),
			'if',
			ExportActionsCard,
			145,
			6
		);
	}

	$.reset(button_1);
	$.reset(div_7);
	$.reset(div);

	$.template_effect(
		($0, $1) => {
			classes = $.set_class(button, 1, 'export-button primary s-mwP9uTptHa6v', null, classes, $0);
			button.disabled = !$.get(canExportCurrent) || isExporting();
			classes_1 = $.set_class(button_1, 1, 'export-button secondary s-mwP9uTptHa6v', null, classes_1, $1);
			button_1.disabled = $.get(isExportingAll);
		},
		[
			() => ({ disabled: !$.get(canExportCurrent) || isExporting() }),
			() => ({ disabled: $.get(isExportingAll) })
		]
	);

	$.append($$anchor, div);

	return $.pop({ ...$.legacy_api() });
}

if (import.meta.hot) {
	ExportActionsCard = $.hmr(ExportActionsCard, () => ExportActionsCard[$.HMR].source);

	import.meta.hot.acceptExports(["default"],(module) => {
		$.cleanup_styles('s-mwP9uTptHa6v');
		module.default[$.HMR].source = ExportActionsCard[$.HMR].source;
		$.set(ExportActionsCard[$.HMR].source, module.default[$.HMR].original);
	});
}

export default ExportActionsCard;

$.delegate(['click']);
import "/src/lib/components/export/ExportActionsCard.svelte?svelte&type=style&lang.css";

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJtYXBwaW5ncyI6Ijs7Ozs7O2VBc0VXO1lBQ0wscUJBQU07O0NBRU4sWUFBUyw2REFBYzs7QUFFekI7O2VBS0ksOENBQWE7V0FDZjs7S0FHSTtRQUNGLGdCQUFPO0VBQ1QsUUFBTzs7Q0FHVCxRQUFTO0VBQ1AsUUFBTztDQUNUO0VBR0U7U0FBTztVQUNUO0dBRUE7R0FBTzs7Q0FDUjtBQUdEOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs4Q0FyR0YsQ0FBQzs7OztLQW1DRTtFQUdELGdEQUFlOztLQVNULCtCQUFnQjs7S0FJbEI7d0JBQVk7dUJBRWQsa0JBQWdCO1dBQ04sd0RBQWlDO0dBQzNDOzs2REFLQSxpQ0FDRjtFQUlFOzs7O0tBdUNFO3dCQUFPO3dDQUNUOztTQUdFLG9DQUFPO1NBQ1Q7OztJQUlBO0lBRUE7SUFDRDtJQUNELDRDQUFNOztFQUVQOzs7O0tBR0s7d0JBQTJCO09BQzFCLGVBQWM7V0FDWjtHQUNUOztTQUVVLGFBQU07O1FBQ1AsTUFBSTtXQUNGO0dBQ1g7O09BRUEsaUJBQXdCLHVCQUFhO1dBQ3JDO0dBQ0E7O09BRUEsZ0JBQXNCLEtBQU8sa0JBQVU7V0FDdkM7R0FDQTs7VUFFQTtFQUNBOzs7O0tBR0E7d0JBQW9DO1NBQzFCLGFBQU07O1FBQ1AsTUFBSTtXQUNEO0dBQ1o7O09BRUEsS0FBVyxZQUFZLEtBQU8sa0JBQU87V0FDeEI7R0FDYjs7O1dBR0s7R0FDTDs7YUFFYyxLQUFDO0VBQ2Y7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzJEQWlCMEMsSUFBQyxXQUFhOzs7Ozs7a0JBRHRDLElBQUksV0FBVSxHQUFJLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O2tCQUcxQjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7a0JBR047Ozs7Ozs7Ozs7O29EQVJ5Qjs7Ozs7O2dCQUZuQjs7Ozs7Ozs7Ozs7Ozs7O2tFQWlCMEIsY0FBTzs7Ozs7Ozs7Ozs7a0VBS2xDOzs7Ozs7Y0F4Qkg7Ozs7Ozs7Ozs7Ozs7O21CQWdDUSxtQkFBaUI7Ozs7Ozs7Ozs4RUFLdkIsZ0JBQWdCOzs7Ozs7Ozs4RUFHbkIsZ0JBQVE7Ozs7OztRQUxILFdBQU07Ozs7Ozs7Ozs7Ozs7Ozs7cUJBdUJmOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Y0FHUyxjQUFNOzs7Ozs7Ozs7Ozs7Ozs7OzRCQTVCQSxnQkFBSzs7Ozs7NkJBRkQsZ0JBQWlCLEtBQUc7NEJBMEJuQixjQUFjOzs7Ozs7O0NBbEVwQyIsIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZXMiOlsiRXhwb3J0QWN0aW9uc0NhcmQuc3ZlbHRlIl0sInNvdXJjZXNDb250ZW50IjpbIjwhLS0gRXhwb3J0QWN0aW9uc0NhcmQuc3ZlbHRlIC0gUmVhbCBUS0EgSW1hZ2UgRXhwb3J0IEFjdGlvbnMgLS0+XG48c2NyaXB0IGxhbmc9XCJ0c1wiPlxuICBpbXBvcnQgdHlwZSB7IFNlcXVlbmNlRGF0YSB9IGZyb20gXCIkc2VydmljZXMvaW50ZXJmYWNlcy9kb21haW4tdHlwZXNcIjtcblxuICBpbnRlcmZhY2UgUHJvcHMge1xuICAgIGN1cnJlbnRTZXF1ZW5jZTogU2VxdWVuY2VEYXRhIHwgbnVsbDtcbiAgICBjYW5FeHBvcnQ/OiBib29sZWFuO1xuICAgIGlzRXhwb3J0aW5nPzogYm9vbGVhbjtcbiAgICBvbmV4cG9ydGN1cnJlbnQ/OiAoKSA9PiB2b2lkO1xuICAgIG9uZXhwb3J0YWxsPzogKCkgPT4gdm9pZDtcbiAgfVxuXG4gIGxldCB7XG4gICAgY3VycmVudFNlcXVlbmNlLFxuICAgIGNhbkV4cG9ydCA9IGZhbHNlLFxuICAgIGlzRXhwb3J0aW5nID0gZmFsc2UsXG4gICAgb25leHBvcnRjdXJyZW50LFxuICAgIG9uZXhwb3J0YWxsLFxuICB9OiBQcm9wcyA9ICRwcm9wcygpO1xuXG4gIC8vIExvYWRpbmcgc3RhdGVzIGZvciBiYXRjaCBvcGVyYXRpb25zXG4gIGxldCBpc0V4cG9ydGluZ0FsbCA9ICRzdGF0ZShmYWxzZSk7XG5cbiAgLy8gRGVyaXZlZCBzdGF0ZSBmb3IgYnV0dG9uIGF2YWlsYWJpbGl0eVxuICBsZXQgY2FuRXhwb3J0Q3VycmVudCA9ICRkZXJpdmVkKCgpID0+IHtcbiAgICAvLyBVc2UgdGhlIHByb3ZpZGVkIGNhbkV4cG9ydCBwcm9wIGlmIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIGZhbGwgYmFjayB0byBzZXF1ZW5jZSBjaGVja1xuICAgIGlmIChjYW5FeHBvcnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGNhbkV4cG9ydCAmJiBjdXJyZW50U2VxdWVuY2UgIT09IG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIGN1cnJlbnRTZXF1ZW5jZSAmJlxuICAgICAgY3VycmVudFNlcXVlbmNlLmJlYXRzICYmXG4gICAgICBjdXJyZW50U2VxdWVuY2UuYmVhdHMubGVuZ3RoID4gMFxuICAgICk7XG4gIH0pO1xuXG4gIC8vIEhhbmRsZSBleHBvcnQgY3VycmVudCBzZXF1ZW5jZVxuICBhc3luYyBmdW5jdGlvbiBoYW5kbGVFeHBvcnRDdXJyZW50KCkge1xuICAgIGlmICghY2FuRXhwb3J0Q3VycmVudCB8fCBpc0V4cG9ydGluZykgcmV0dXJuO1xuXG4gICAgY29uc29sZS5sb2coXCLwn5OkIFtBQ1RJT05TLUNBUkRdIFRyaWdnZXJpbmcgY3VycmVudCBzZXF1ZW5jZSBleHBvcnRcIik7XG4gICAgb25leHBvcnRjdXJyZW50Py4oKTtcbiAgfVxuXG4gIC8vIEhhbmRsZSBleHBvcnQgYWxsIHNlcXVlbmNlc1xuICBhc3luYyBmdW5jdGlvbiBoYW5kbGVFeHBvcnRBbGwoKSB7XG4gICAgaWYgKGlzRXhwb3J0aW5nQWxsKSByZXR1cm47XG5cbiAgICB0cnkge1xuICAgICAgaXNFeHBvcnRpbmdBbGwgPSB0cnVlO1xuICAgICAgY29uc29sZS5sb2coXCLwn5OkIFtBQ1RJT05TLUNBUkRdIFRyaWdnZXJpbmcgYmF0Y2ggZXhwb3J0XCIpO1xuICAgICAgb25leHBvcnRhbGw/LigpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXhwb3J0IGFsbCBmYWlsZWQ6XCIsIGVycm9yKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgLy8gQWxsb3cgbWFudWFsIHJlc2V0LCBhY3R1YWwgc3RhdGUgbWFuYWdlZCBieSBwYXJlbnRcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBpc0V4cG9ydGluZ0FsbCA9IGZhbHNlO1xuICAgICAgfSwgMTAwMCk7XG4gICAgfVxuICB9XG5cbiAgLy8gR2V0IGN1cnJlbnQgc2VxdWVuY2UgaW5mbyBmb3IgZGlzcGxheVxuICBsZXQgc2VxdWVuY2VJbmZvID0gJGRlcml2ZWQoKCkgPT4ge1xuICAgIGlmICghY3VycmVudFNlcXVlbmNlKSByZXR1cm4gbnVsbDtcblxuICAgIGNvbnN0IGJlYXRDb3VudCA9IGN1cnJlbnRTZXF1ZW5jZS5iZWF0cz8ubGVuZ3RoIHx8IDA7XG4gICAgY29uc3Qgd29yZCA9IGN1cnJlbnRTZXF1ZW5jZS53b3JkIHx8IGN1cnJlbnRTZXF1ZW5jZS5uYW1lIHx8IFwiVW50aXRsZWRcIjtcblxuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB3b3JkLFxuICAgICAgYmVhdENvdW50LFxuICAgICAgaXNFbXB0eTogYmVhdENvdW50ID09PSAwLFxuICAgICAgaGFzU3RhcnRQb3NpdGlvbjogISFjdXJyZW50U2VxdWVuY2Uuc3RhcnRQb3NpdGlvbixcbiAgICB9O1xuICB9KTtcblxuICAvLyBFeHBvcnQgYnV0dG9uIHRleHQgYmFzZWQgb24gY3VycmVudCBzdGF0ZVxuICBsZXQgZXhwb3J0QnV0dG9uVGV4dCA9ICRkZXJpdmVkKCgpID0+IHtcbiAgICBpZiAoaXNFeHBvcnRpbmcpIHtcbiAgICAgIHJldHVybiBcIkV4cG9ydGluZy4uLlwiO1xuICAgIH1cblxuICAgIGNvbnN0IGluZm8gPSBzZXF1ZW5jZUluZm8oKTtcbiAgICBpZiAoIWluZm8pIHtcbiAgICAgIHJldHVybiBcIk5vIFNlcXVlbmNlIHRvIEV4cG9ydFwiO1xuICAgIH1cblxuICAgIGlmIChpbmZvLmlzRW1wdHkgJiYgIWluZm8uaGFzU3RhcnRQb3NpdGlvbikge1xuICAgICAgcmV0dXJuIFwiRW1wdHkgU2VxdWVuY2VcIjtcbiAgICB9XG5cbiAgICBpZiAoaW5mby5pc0VtcHR5ICYmIGluZm8uaGFzU3RhcnRQb3NpdGlvbikge1xuICAgICAgcmV0dXJuIFwiRXhwb3J0IFN0YXJ0IFBvc2l0aW9uXCI7XG4gICAgfVxuXG4gICAgcmV0dXJuIFwiRXhwb3J0IEN1cnJlbnQgU2VxdWVuY2VcIjtcbiAgfSk7XG5cbiAgLy8gU3RhdHVzIG1lc3NhZ2UgZm9yIHVzZXIgZmVlZGJhY2tcbiAgbGV0IHNlcXVlbmNlU3RhdHVzID0gJGRlcml2ZWQoKCkgPT4ge1xuICAgIGNvbnN0IGluZm8gPSBzZXF1ZW5jZUluZm8oKTtcbiAgICBpZiAoIWluZm8pIHtcbiAgICAgIHJldHVybiBcIkNyZWF0ZSBhIHNlcXVlbmNlIGluIHRoZSBDb25zdHJ1Y3QgdGFiXCI7XG4gICAgfVxuXG4gICAgaWYgKGluZm8uaXNFbXB0eSAmJiAhaW5mby5oYXNTdGFydFBvc2l0aW9uKSB7XG4gICAgICByZXR1cm4gXCJBZGQgYmVhdHMgb3Igc2V0IHN0YXJ0IHBvc2l0aW9uIHRvIGV4cG9ydFwiO1xuICAgIH1cblxuICAgIGlmIChpbmZvLmlzRW1wdHkgJiYgaW5mby5oYXNTdGFydFBvc2l0aW9uKSB7XG4gICAgICByZXR1cm4gXCJTdGFydCBwb3NpdGlvbiBvbmx5XCI7XG4gICAgfVxuXG4gICAgcmV0dXJuIGAke2luZm8uYmVhdENvdW50fSBiZWF0cyByZWFkeSB0byBleHBvcnRgO1xuICB9KTtcbjwvc2NyaXB0PlxuXG48ZGl2IGNsYXNzPVwiZXhwb3J0LWFjdGlvbnMtY2FyZFwiPlxuICA8aDMgY2xhc3M9XCJjYXJkLXRpdGxlXCI+RXhwb3J0IEFjdGlvbnM8L2gzPlxuXG4gIDwhLS0gQ3VycmVudCBTZXF1ZW5jZSBFeHBvcnQgLS0+XG4gIDxkaXYgY2xhc3M9XCJhY3Rpb24tc2VjdGlvblwiPlxuICAgIDxkaXYgY2xhc3M9XCJhY3Rpb24taGVhZGVyXCI+XG4gICAgICA8aDQgY2xhc3M9XCJhY3Rpb24tdGl0bGVcIj5DdXJyZW50IFNlcXVlbmNlPC9oND5cbiAgICAgIHsjaWYgc2VxdWVuY2VJbmZvKCl9XG4gICAgICAgIHtAY29uc3QgaW5mbyA9IHNlcXVlbmNlSW5mbygpfVxuICAgICAgICB7I2lmIGluZm99XG4gICAgICAgICAgPGRpdiBjbGFzcz1cInNlcXVlbmNlLWluZm9cIj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic2VxdWVuY2UtbmFtZVwiPntpbmZvLm5hbWV9PC9zcGFuPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNlcXVlbmNlLW1ldGFkYXRhXCI+XG4gICAgICAgICAgICAgIHsjaWYgaW5mby5iZWF0Q291bnQgPiAwfVxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiYmVhdC1jb3VudFwiPntpbmZvLmJlYXRDb3VudH0gYmVhdHM8L3NwYW4+XG4gICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICAgIHsjaWYgaW5mby5oYXNTdGFydFBvc2l0aW9ufVxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3RhcnQtcG9zLWluZGljYXRvclwiPvCfk40gU3RhcnQgUG9zaXRpb248L3NwYW4+XG4gICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICAgIHsjaWYgaW5mby5pc0VtcHR5ICYmICFpbmZvLmhhc1N0YXJ0UG9zaXRpb259XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJlbXB0eS1pbmRpY2F0b3JcIj7imqDvuI8gRW1wdHk8L3NwYW4+XG4gICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgey9pZn1cbiAgICAgICAgPGRpdiBjbGFzcz1cInNlcXVlbmNlLXN0YXR1c1wiPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3RhdHVzLXRleHRcIj57c2VxdWVuY2VTdGF0dXMoKX08L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgezplbHNlfVxuICAgICAgICA8ZGl2IGNsYXNzPVwibm8tc2VxdWVuY2VcIj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cIm5vLXNlcXVlbmNlLXRleHRcIj5ObyBzZXF1ZW5jZSBsb2FkZWQ8L3NwYW4+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJzdGF0dXMtdGV4dFwiPntzZXF1ZW5jZVN0YXR1cygpfTwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICB7L2lmfVxuICAgIDwvZGl2PlxuXG4gICAgPGJ1dHRvblxuICAgICAgY2xhc3M9XCJleHBvcnQtYnV0dG9uIHByaW1hcnlcIlxuICAgICAgY2xhc3M6ZGlzYWJsZWQ9eyFjYW5FeHBvcnRDdXJyZW50IHx8IGlzRXhwb3J0aW5nfVxuICAgICAgb25jbGljaz17aGFuZGxlRXhwb3J0Q3VycmVudH1cbiAgICAgIGRpc2FibGVkPXshY2FuRXhwb3J0Q3VycmVudCB8fCBpc0V4cG9ydGluZ31cbiAgICA+XG4gICAgICB7I2lmIGlzRXhwb3J0aW5nfVxuICAgICAgICA8c3BhbiBjbGFzcz1cImxvYWRpbmctc3Bpbm5lclwiPjwvc3Bhbj5cbiAgICAgICAge2V4cG9ydEJ1dHRvblRleHQoKX1cbiAgICAgIHs6ZWxzZX1cbiAgICAgICAgPHNwYW4gY2xhc3M9XCJidXR0b24taWNvblwiPvCflKQ8L3NwYW4+XG4gICAgICAgIHtleHBvcnRCdXR0b25UZXh0KCl9XG4gICAgICB7L2lmfVxuICAgIDwvYnV0dG9uPlxuICA8L2Rpdj5cblxuICA8IS0tIEFsbCBTZXF1ZW5jZXMgRXhwb3J0IC0tPlxuICA8ZGl2IGNsYXNzPVwiYWN0aW9uLXNlY3Rpb25cIj5cbiAgICA8ZGl2IGNsYXNzPVwiYWN0aW9uLWhlYWRlclwiPlxuICAgICAgPGg0IGNsYXNzPVwiYWN0aW9uLXRpdGxlXCI+QmF0Y2ggRXhwb3J0PC9oND5cbiAgICAgIDxkaXYgY2xhc3M9XCJhbGwtc2VxdWVuY2VzLWluZm9cIj5cbiAgICAgICAgPHNwYW4gY2xhc3M9XCJpbmZvLXRleHRcIj5FeHBvcnQgYWxsIHNlcXVlbmNlcyBpbiB5b3VyIGxpYnJhcnk8L3NwYW4+XG4gICAgICAgIDxzcGFuIGNsYXNzPVwic3RhdHVzLXRleHRcIj4oRmVhdHVyZSBjb21pbmcgc29vbik8L3NwYW4+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cblxuICAgIDxidXR0b25cbiAgICAgIGNsYXNzPVwiZXhwb3J0LWJ1dHRvbiBzZWNvbmRhcnlcIlxuICAgICAgY2xhc3M6ZGlzYWJsZWQ9e2lzRXhwb3J0aW5nQWxsfVxuICAgICAgb25jbGljaz17aGFuZGxlRXhwb3J0QWxsfVxuICAgICAgZGlzYWJsZWQ9e2lzRXhwb3J0aW5nQWxsfVxuICAgID5cbiAgICAgIHsjaWYgaXNFeHBvcnRpbmdBbGx9XG4gICAgICAgIDxzcGFuIGNsYXNzPVwibG9hZGluZy1zcGlubmVyXCI+PC9zcGFuPlxuICAgICAgICBQcmVwYXJpbmcgQmF0Y2guLi5cbiAgICAgIHs6ZWxzZX1cbiAgICAgICAgPHNwYW4gY2xhc3M9XCJidXR0b24taWNvblwiPvCfk5o8L3NwYW4+XG4gICAgICAgIEV4cG9ydCBBbGwgU2VxdWVuY2VzXG4gICAgICB7L2lmfVxuICAgIDwvYnV0dG9uPlxuICA8L2Rpdj5cbjwvZGl2PlxuXG48c3R5bGU+XG4gIC5leHBvcnQtYWN0aW9ucy1jYXJkIHtcbiAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDUpO1xuICAgIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xKTtcbiAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgcGFkZGluZzogdmFyKC0tc3BhY2luZy1zbSk7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIGdhcDogdmFyKC0tc3BhY2luZy1zbSk7XG4gICAgcG9zaXRpb246IHN0aWNreTtcbiAgICB0b3A6IDA7XG4gICAgei1pbmRleDogMTtcbiAgfVxuXG4gIC5jYXJkLXRpdGxlIHtcbiAgICBtYXJnaW46IDA7XG4gICAgZm9udC1zaXplOiB2YXIoLS1mb250LXNpemUtbWQpO1xuICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC45NSk7XG4gIH1cblxuICAuYWN0aW9uLXNlY3Rpb24ge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBnYXA6IHZhcigtLXNwYWNpbmcteHMpO1xuICAgIHBhZGRpbmc6IHZhcigtLXNwYWNpbmcteHMpO1xuICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4wMik7XG4gICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4wNSk7XG4gIH1cblxuICAuYWN0aW9uLWhlYWRlciB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIGdhcDogNHB4O1xuICB9XG5cbiAgLmFjdGlvbi10aXRsZSB7XG4gICAgbWFyZ2luOiAwO1xuICAgIGZvbnQtc2l6ZTogdmFyKC0tZm9udC1zaXplLXNtKTtcbiAgICBmb250LXdlaWdodDogNjAwO1xuICAgIGNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuOSk7XG4gIH1cblxuICAuc2VxdWVuY2UtaW5mbyB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIGdhcDogMnB4O1xuICB9XG5cbiAgLnNlcXVlbmNlLW5hbWUge1xuICAgIGZvbnQtc2l6ZTogdmFyKC0tZm9udC1zaXplLXhzKTtcbiAgICBjb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjgpO1xuICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gIH1cblxuICAuc2VxdWVuY2UtbWV0YWRhdGEge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBnYXA6IHZhcigtLXNwYWNpbmcteHMpO1xuICAgIGZsZXgtd3JhcDogd3JhcDtcbiAgfVxuXG4gIC5iZWF0LWNvdW50IHtcbiAgICBmb250LXNpemU6IHZhcigtLWZvbnQtc2l6ZS14cyk7XG4gICAgY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC43KTtcbiAgICBwYWRkaW5nOiAxcHggNnB4O1xuICAgIGJhY2tncm91bmQ6IHJnYmEoOTksIDEwMiwgMjQxLCAwLjMpO1xuICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICB9XG5cbiAgLnN0YXJ0LXBvcy1pbmRpY2F0b3Ige1xuICAgIGZvbnQtc2l6ZTogdmFyKC0tZm9udC1zaXplLXhzKTtcbiAgICBjb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjcpO1xuICAgIHBhZGRpbmc6IDFweCA2cHg7XG4gICAgYmFja2dyb3VuZDogcmdiYSgxNiwgMTg1LCAxMjksIDAuMyk7XG4gICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gIH1cblxuICAuZW1wdHktaW5kaWNhdG9yIHtcbiAgICBmb250LXNpemU6IHZhcigtLWZvbnQtc2l6ZS14cyk7XG4gICAgY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC43KTtcbiAgICBwYWRkaW5nOiAxcHggNnB4O1xuICAgIGJhY2tncm91bmQ6IHJnYmEoMjM5LCA2OCwgNjgsIDAuMyk7XG4gICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gIH1cblxuICAuc2VxdWVuY2Utc3RhdHVzLFxuICAubm8tc2VxdWVuY2Uge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBnYXA6IDJweDtcbiAgfVxuXG4gIC5uby1zZXF1ZW5jZS10ZXh0IHtcbiAgICBmb250LXNpemU6IHZhcigtLWZvbnQtc2l6ZS14cyk7XG4gICAgY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC43KTtcbiAgICBmb250LXdlaWdodDogNTAwO1xuICB9XG5cbiAgLnN0YXR1cy10ZXh0IHtcbiAgICBmb250LXNpemU6IHZhcigtLWZvbnQtc2l6ZS14cyk7XG4gICAgY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC41KTtcbiAgICBmb250LXN0eWxlOiBpdGFsaWM7XG4gICAgbGluZS1oZWlnaHQ6IDEuMjtcbiAgfVxuXG4gIC5hbGwtc2VxdWVuY2VzLWluZm8ge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBnYXA6IDJweDtcbiAgfVxuXG4gIC5pbmZvLXRleHQge1xuICAgIGZvbnQtc2l6ZTogdmFyKC0tZm9udC1zaXplLXhzKTtcbiAgICBjb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjcpO1xuICB9XG5cbiAgLmV4cG9ydC1idXR0b24ge1xuICAgIHBhZGRpbmc6IHZhcigtLXNwYWNpbmctc20pO1xuICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICBmb250LXNpemU6IHZhcigtLWZvbnQtc2l6ZS14cyk7XG4gICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgdHJhbnNpdGlvbjogYWxsIHZhcigtLXRyYW5zaXRpb24tZmFzdCk7XG4gICAgYm9yZGVyOiAxcHggc29saWQgdHJhbnNwYXJlbnQ7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIGdhcDogdmFyKC0tc3BhY2luZy14cyk7XG4gICAgbWluLWhlaWdodDogMzZweDtcbiAgfVxuXG4gIC5leHBvcnQtYnV0dG9uLnByaW1hcnkge1xuICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICM2MzY2ZjEgMCUsICM1ODU1ZWIgMTAwJSk7XG4gICAgY29sb3I6IHdoaXRlO1xuICAgIGJvcmRlci1jb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjIpO1xuICAgIGJveC1zaGFkb3c6IDAgNHB4IDEycHggcmdiYSg5OSwgMTAyLCAyNDEsIDAuMyk7XG4gIH1cblxuICAuZXhwb3J0LWJ1dHRvbi5wcmltYXJ5OmhvdmVyOm5vdCguZGlzYWJsZWQpIHtcbiAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjNTg1NWViIDAlLCAjNGY0NmU1IDEwMCUpO1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMXB4KTtcbiAgICBib3gtc2hhZG93OiAwIDZweCAxNnB4IHJnYmEoOTksIDEwMiwgMjQxLCAwLjQpO1xuICB9XG5cbiAgLmV4cG9ydC1idXR0b24uc2Vjb25kYXJ5IHtcbiAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDgpO1xuICAgIGNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuOSk7XG4gICAgYm9yZGVyLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMik7XG4gIH1cblxuICAuZXhwb3J0LWJ1dHRvbi5zZWNvbmRhcnk6aG92ZXI6bm90KC5kaXNhYmxlZCkge1xuICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xMik7XG4gICAgYm9yZGVyLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMyk7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0xcHgpO1xuICB9XG5cbiAgLmV4cG9ydC1idXR0b24uZGlzYWJsZWQge1xuICAgIG9wYWNpdHk6IDAuNTtcbiAgICBjdXJzb3I6IG5vdC1hbGxvd2VkO1xuICAgIHRyYW5zZm9ybTogbm9uZSAhaW1wb3J0YW50O1xuICAgIGJveC1zaGFkb3c6IG5vbmUgIWltcG9ydGFudDtcbiAgfVxuXG4gIC5idXR0b24taWNvbiB7XG4gICAgZm9udC1zaXplOiB2YXIoLS1mb250LXNpemUtc20pO1xuICB9XG5cbiAgLmxvYWRpbmctc3Bpbm5lciB7XG4gICAgd2lkdGg6IDEycHg7XG4gICAgaGVpZ2h0OiAxMnB4O1xuICAgIGJvcmRlcjogMnB4IHNvbGlkIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4zKTtcbiAgICBib3JkZXItdG9wOiAycHggc29saWQgY3VycmVudENvbG9yO1xuICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgICBhbmltYXRpb246IHNwaW4gMXMgbGluZWFyIGluZmluaXRlO1xuICB9XG5cbiAgQGtleWZyYW1lcyBzcGluIHtcbiAgICAwJSB7XG4gICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTtcbiAgICB9XG4gICAgMTAwJSB7XG4gICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpO1xuICAgIH1cbiAgfVxuXG4gIC8qIFJlc3BvbnNpdmUgYWRqdXN0bWVudHMgKi9cbiAgQG1lZGlhIChtYXgtd2lkdGg6IDc2OHB4KSB7XG4gICAgLmV4cG9ydC1hY3Rpb25zLWNhcmQge1xuICAgICAgcGFkZGluZzogdmFyKC0tc3BhY2luZy1tZCk7XG4gICAgfVxuXG4gICAgLmV4cG9ydC1idXR0b24ge1xuICAgICAgcGFkZGluZzogdmFyKC0tc3BhY2luZy1zbSkgdmFyKC0tc3BhY2luZy1tZCk7XG4gICAgICBmb250LXNpemU6IHZhcigtLWZvbnQtc2l6ZS14cyk7XG4gICAgfVxuXG4gICAgLnNlcXVlbmNlLW1ldGFkYXRhIHtcbiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICBhbGlnbi1pdGVtczogZmxleC1zdGFydDtcbiAgICB9XG4gIH1cbjwvc3R5bGU+XG4iXSwiZmlsZSI6IkM6L1RLQS93ZWIvc3JjL2xpYi9jb21wb25lbnRzL2V4cG9ydC9FeHBvcnRBY3Rpb25zQ2FyZC5zdmVsdGUifQ==