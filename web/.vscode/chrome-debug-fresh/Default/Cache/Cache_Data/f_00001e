var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __decorateClass = (decorators, target, key, kind) => {
  var result = kind > 1 ? void 0 : kind ? __getOwnPropDesc(target, key) : target;
  for (var i = decorators.length - 1, decorator; i >= 0; i--)
    if (decorator = decorators[i])
      result = (kind ? decorator(target, key, result) : decorator(result)) || result;
  if (kind && result) __defProp(target, key, result);
  return result;
};
import { injectable } from "/node_modules/.vite/deps/inversify.js?v=608ae08a";
export let NavigationService = class {
  async generateNavigationSections(sequences, favorites) {
    const sections = [
      await this.generateFavoritesSection(sequences, favorites),
      await this.generateDateSection(sequences),
      await this.generateLengthSection(sequences),
      await this.generateLetterSection(sequences),
      await this.generateLevelSection(sequences),
      await this.generateAuthorSection(sequences)
    ];
    return sections;
  }
  toggleSectionExpansion(sectionId, sections) {
    return sections.map((section) => ({
      ...section,
      isExpanded: section.id === sectionId ? !section.isExpanded : section.isExpanded
    }));
  }
  setActiveItem(sectionId, itemId, sections) {
    return sections.map((section) => ({
      ...section,
      items: section.items.map((item) => ({
        ...item,
        isActive: section.id === sectionId && item.id === itemId
      }))
    }));
  }
  clearActiveStates(sections) {
    return sections.map((section) => ({
      ...section,
      items: section.items.map((item) => ({
        ...item,
        isActive: false
      }))
    }));
  }
  getSequencesForNavigationItem(item, sectionType, allSequences) {
    switch (sectionType) {
      case "length": {
        const length = parseInt(item.value);
        return allSequences.filter((seq) => seq.sequenceLength === length);
      }
      case "letter":
        return allSequences.filter(
          (seq) => seq.word.startsWith(item.value)
        );
      case "level":
        return allSequences.filter((seq) => seq.difficultyLevel === item.value);
      case "author":
        return allSequences.filter((seq) => seq.author === item.value);
      case "date":
        return allSequences.filter((seq) => {
          if (!seq.dateAdded) return false;
          const itemDate = new Date(item.value);
          const seqDate = new Date(seq.dateAdded);
          return seqDate.toDateString() === itemDate.toDateString();
        });
      case "favorites":
        return allSequences;
      default:
        return allSequences;
    }
  }
  updateSectionCounts(sections, sequences, favorites) {
    return sections.map((section) => ({
      ...section,
      totalCount: this.calculateSectionCount(section, sequences, favorites),
      items: section.items.map((item) => ({
        ...item,
        count: this.getSequencesForNavigationItem(item, section.type, sequences).length
      }))
    }));
  }
  // Private helper methods
  async generateFavoritesSection(sequences, favorites) {
    const favoriteSequences = sequences.filter(
      (seq) => favorites.includes(seq.id)
    );
    return {
      id: "favorites",
      title: "â­ Favorites",
      type: "favorites",
      items: [
        {
          id: "all-favorites",
          label: "All Favorites",
          value: "favorites",
          count: favoriteSequences.length,
          isActive: false,
          sequences: favoriteSequences
        }
      ],
      isExpanded: false,
      totalCount: favoriteSequences.length
    };
  }
  async generateDateSection(sequences) {
    const dateGroups = /* @__PURE__ */ new Map();
    sequences.forEach((seq) => {
      if (seq.dateAdded) {
        const date = new Date(seq.dateAdded);
        const dateKey = date.toDateString();
        if (!dateGroups.has(dateKey)) {
          dateGroups.set(dateKey, []);
        }
        const group = dateGroups.get(dateKey);
        if (group) {
          group.push(seq);
        }
      }
    });
    const items = Array.from(dateGroups.entries()).sort(([a], [b]) => new Date(b).getTime() - new Date(a).getTime()).slice(0, 10).map(([date, seqs]) => ({
      id: `date-${date}`,
      label: this.formatDateLabel(new Date(date)),
      value: date,
      count: seqs.length,
      isActive: false,
      sequences: seqs
    }));
    return {
      id: "date",
      title: "ðŸ“… Recently Added",
      type: "date",
      items,
      isExpanded: false,
      totalCount: sequences.filter((seq) => seq.dateAdded).length
    };
  }
  async generateLengthSection(sequences) {
    const lengthGroups = /* @__PURE__ */ new Map();
    sequences.forEach((seq) => {
      const length = seq.sequenceLength || seq.word.length;
      if (!lengthGroups.has(length)) {
        lengthGroups.set(length, []);
      }
      const group = lengthGroups.get(length);
      if (group) {
        group.push(seq);
      }
    });
    const items = Array.from(lengthGroups.entries()).sort(([a], [b]) => a - b).map(([length, seqs]) => ({
      id: `length-${length}`,
      label: `${length} beats`,
      value: length,
      count: seqs.length,
      isActive: false,
      sequences: seqs
    }));
    return {
      id: "length",
      title: "ðŸ“ Length",
      type: "length",
      items,
      isExpanded: false,
      totalCount: sequences.length
    };
  }
  async generateLetterSection(sequences) {
    const letterGroups = /* @__PURE__ */ new Map();
    sequences.forEach((seq) => {
      const firstLetter = seq.word.charAt(0).toUpperCase();
      if (!letterGroups.has(firstLetter)) {
        letterGroups.set(firstLetter, []);
      }
      const group = letterGroups.get(firstLetter);
      if (group) {
        group.push(seq);
      }
    });
    const items = Array.from(letterGroups.entries()).sort(([a], [b]) => a.localeCompare(b)).map(([letter, seqs]) => ({
      id: `letter-${letter}`,
      label: letter,
      value: letter,
      count: seqs.length,
      isActive: false,
      sequences: seqs
    }));
    return {
      id: "letter",
      title: "ðŸ”¤ Starting Letter",
      type: "letter",
      items,
      isExpanded: true,
      // Default expanded like desktop
      totalCount: sequences.length
    };
  }
  async generateLevelSection(sequences) {
    const levelGroups = /* @__PURE__ */ new Map();
    sequences.forEach((seq) => {
      const level = seq.difficultyLevel || "unknown";
      if (!levelGroups.has(level)) {
        levelGroups.set(level, []);
      }
      const group = levelGroups.get(level);
      if (group) {
        group.push(seq);
      }
    });
    const levelOrder = ["beginner", "intermediate", "advanced", "unknown"];
    const items = levelOrder.filter((level) => levelGroups.has(level)).map((level) => ({
      id: `level-${level}`,
      label: level.charAt(0).toUpperCase() + level.slice(1),
      value: level,
      count: levelGroups.get(level)?.length || 0,
      isActive: false,
      sequences: levelGroups.get(level) ?? []
    }));
    return {
      id: "level",
      title: "ðŸ“Š Difficulty",
      type: "level",
      items,
      isExpanded: false,
      totalCount: sequences.length
    };
  }
  async generateAuthorSection(sequences) {
    const authorGroups = /* @__PURE__ */ new Map();
    sequences.forEach((seq) => {
      const author = seq.author || "Unknown";
      if (!authorGroups.has(author)) {
        authorGroups.set(author, []);
      }
      const group = authorGroups.get(author);
      if (group) {
        group.push(seq);
      }
    });
    const items = Array.from(authorGroups.entries()).sort(([a], [b]) => a.localeCompare(b)).map(([author, seqs]) => ({
      id: `author-${author}`,
      label: author,
      value: author,
      count: seqs.length,
      isActive: false,
      sequences: seqs
    }));
    return {
      id: "author",
      title: "ðŸ‘¤ Author",
      type: "author",
      items,
      isExpanded: false,
      totalCount: sequences.length
    };
  }
  calculateSectionCount(section, sequences, favorites) {
    switch (section.type) {
      case "favorites":
        return sequences.filter((seq) => favorites.includes(seq.id)).length;
      default:
        return sequences.length;
    }
  }
  formatDateLabel(date) {
    const now = /* @__PURE__ */ new Date();
    const diffTime = now.getTime() - date.getTime();
    const diffDays = Math.floor(diffTime / (1e3 * 60 * 60 * 24));
    if (diffDays === 0) return "Today";
    if (diffDays === 1) return "Yesterday";
    if (diffDays < 7) return `${diffDays} days ago`;
    if (diffDays < 30) return `${Math.floor(diffDays / 7)} weeks ago`;
    return date.toLocaleDateString();
  }
  // Additional methods required by browse-interfaces.ts
  async buildNavigationStructure(sequences) {
    return this.generateNavigationSections(sequences, []);
  }
  async getNavigationItem(_sectionId, _itemId) {
    return null;
  }
};
NavigationService = __decorateClass([
  injectable()
], NavigationService);
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiQzovVEtBL3dlYi9zcmMvbGliL3NlcnZpY2VzL2ltcGxlbWVudGF0aW9ucy9uYXZpZ2F0aW9uL05hdmlnYXRpb25TZXJ2aWNlLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyIvKipcbiAqIE5hdmlnYXRpb24gU2VydmljZSAtIE1hbmFnZXMgYnJvd3NlIHRhYiBuYXZpZ2F0aW9uXG4gKlxuICogSGFuZGxlcyBzaWRlYmFyIG5hdmlnYXRpb24gc2VjdGlvbnMsIG9yZ2FuaXphdGlvbiwgYW5kIHN0YXRlIG1hbmFnZW1lbnRcbiAqIGZvbGxvd2luZyB0aGUgbWljcm9zZXJ2aWNlcyBhcmNoaXRlY3R1cmUgcGF0dGVybi5cbiAqL1xuXG5pbXBvcnQgdHlwZSB7IFNlcXVlbmNlRGF0YSB9IGZyb20gXCIuLi8uLi9pbnRlcmZhY2VzL2RvbWFpbi10eXBlc1wiO1xuaW1wb3J0IHsgaW5qZWN0YWJsZSB9IGZyb20gXCJpbnZlcnNpZnlcIjtcblxuZXhwb3J0IGludGVyZmFjZSBOYXZpZ2F0aW9uU2VjdGlvbiB7XG4gIGlkOiBzdHJpbmc7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIHR5cGU6IFwiZGF0ZVwiIHwgXCJsZW5ndGhcIiB8IFwibGV0dGVyXCIgfCBcImxldmVsXCIgfCBcImF1dGhvclwiIHwgXCJmYXZvcml0ZXNcIjtcbiAgaXRlbXM6IE5hdmlnYXRpb25JdGVtW107XG4gIGlzRXhwYW5kZWQ6IGJvb2xlYW47XG4gIHRvdGFsQ291bnQ6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBOYXZpZ2F0aW9uSXRlbSB7XG4gIGlkOiBzdHJpbmc7XG4gIGxhYmVsOiBzdHJpbmc7XG4gIHZhbHVlOiBzdHJpbmcgfCBudW1iZXI7XG4gIGNvdW50OiBudW1iZXI7XG4gIGlzQWN0aXZlOiBib29sZWFuO1xuICBzZXF1ZW5jZXM6IFNlcXVlbmNlRGF0YVtdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElOYXZpZ2F0aW9uU2VydmljZSB7XG4gIC8qKiBHZW5lcmF0ZSBuYXZpZ2F0aW9uIHNlY3Rpb25zIGZyb20gc2VxdWVuY2VzICovXG4gIGdlbmVyYXRlTmF2aWdhdGlvblNlY3Rpb25zKFxuICAgIHNlcXVlbmNlczogU2VxdWVuY2VEYXRhW10sXG4gICAgZmF2b3JpdGVzOiBzdHJpbmdbXVxuICApOiBQcm9taXNlPE5hdmlnYXRpb25TZWN0aW9uW10+O1xuXG4gIC8qKiBUb2dnbGUgc2VjdGlvbiBleHBhbnNpb24gc3RhdGUgKi9cbiAgdG9nZ2xlU2VjdGlvbkV4cGFuc2lvbihcbiAgICBzZWN0aW9uSWQ6IHN0cmluZyxcbiAgICBzZWN0aW9uczogTmF2aWdhdGlvblNlY3Rpb25bXVxuICApOiBOYXZpZ2F0aW9uU2VjdGlvbltdO1xuXG4gIC8qKiBTZXQgYWN0aXZlIG5hdmlnYXRpb24gaXRlbSAqL1xuICBzZXRBY3RpdmVJdGVtKFxuICAgIHNlY3Rpb25JZDogc3RyaW5nLFxuICAgIGl0ZW1JZDogc3RyaW5nLFxuICAgIHNlY3Rpb25zOiBOYXZpZ2F0aW9uU2VjdGlvbltdXG4gICk6IE5hdmlnYXRpb25TZWN0aW9uW107XG5cbiAgLyoqIENsZWFyIGFsbCBhY3RpdmUgc3RhdGVzICovXG4gIGNsZWFyQWN0aXZlU3RhdGVzKHNlY3Rpb25zOiBOYXZpZ2F0aW9uU2VjdGlvbltdKTogTmF2aWdhdGlvblNlY3Rpb25bXTtcblxuICAvKiogR2V0IHNlcXVlbmNlcyBmb3IgbmF2aWdhdGlvbiBpdGVtICovXG4gIGdldFNlcXVlbmNlc0Zvck5hdmlnYXRpb25JdGVtKFxuICAgIGl0ZW06IE5hdmlnYXRpb25JdGVtLFxuICAgIHNlY3Rpb25UeXBlOiBOYXZpZ2F0aW9uU2VjdGlvbltcInR5cGVcIl0sXG4gICAgYWxsU2VxdWVuY2VzOiBTZXF1ZW5jZURhdGFbXVxuICApOiBTZXF1ZW5jZURhdGFbXTtcblxuICAvKiogVXBkYXRlIHNlY3Rpb24gY291bnRzIGJhc2VkIG9uIGN1cnJlbnQgc2VxdWVuY2VzICovXG4gIHVwZGF0ZVNlY3Rpb25Db3VudHMoXG4gICAgc2VjdGlvbnM6IE5hdmlnYXRpb25TZWN0aW9uW10sXG4gICAgc2VxdWVuY2VzOiBTZXF1ZW5jZURhdGFbXSxcbiAgICBmYXZvcml0ZXM6IHN0cmluZ1tdXG4gICk6IE5hdmlnYXRpb25TZWN0aW9uW107XG59XG5cbkBpbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBOYXZpZ2F0aW9uU2VydmljZSBpbXBsZW1lbnRzIElOYXZpZ2F0aW9uU2VydmljZSB7XG4gIGFzeW5jIGdlbmVyYXRlTmF2aWdhdGlvblNlY3Rpb25zKFxuICAgIHNlcXVlbmNlczogU2VxdWVuY2VEYXRhW10sXG4gICAgZmF2b3JpdGVzOiBzdHJpbmdbXVxuICApOiBQcm9taXNlPE5hdmlnYXRpb25TZWN0aW9uW10+IHtcbiAgICBjb25zdCBzZWN0aW9uczogTmF2aWdhdGlvblNlY3Rpb25bXSA9IFtcbiAgICAgIGF3YWl0IHRoaXMuZ2VuZXJhdGVGYXZvcml0ZXNTZWN0aW9uKHNlcXVlbmNlcywgZmF2b3JpdGVzKSxcbiAgICAgIGF3YWl0IHRoaXMuZ2VuZXJhdGVEYXRlU2VjdGlvbihzZXF1ZW5jZXMpLFxuICAgICAgYXdhaXQgdGhpcy5nZW5lcmF0ZUxlbmd0aFNlY3Rpb24oc2VxdWVuY2VzKSxcbiAgICAgIGF3YWl0IHRoaXMuZ2VuZXJhdGVMZXR0ZXJTZWN0aW9uKHNlcXVlbmNlcyksXG4gICAgICBhd2FpdCB0aGlzLmdlbmVyYXRlTGV2ZWxTZWN0aW9uKHNlcXVlbmNlcyksXG4gICAgICBhd2FpdCB0aGlzLmdlbmVyYXRlQXV0aG9yU2VjdGlvbihzZXF1ZW5jZXMpLFxuICAgIF07XG5cbiAgICByZXR1cm4gc2VjdGlvbnM7XG4gIH1cblxuICB0b2dnbGVTZWN0aW9uRXhwYW5zaW9uKFxuICAgIHNlY3Rpb25JZDogc3RyaW5nLFxuICAgIHNlY3Rpb25zOiBOYXZpZ2F0aW9uU2VjdGlvbltdXG4gICk6IE5hdmlnYXRpb25TZWN0aW9uW10ge1xuICAgIHJldHVybiBzZWN0aW9ucy5tYXAoKHNlY3Rpb24pID0+ICh7XG4gICAgICAuLi5zZWN0aW9uLFxuICAgICAgaXNFeHBhbmRlZDpcbiAgICAgICAgc2VjdGlvbi5pZCA9PT0gc2VjdGlvbklkID8gIXNlY3Rpb24uaXNFeHBhbmRlZCA6IHNlY3Rpb24uaXNFeHBhbmRlZCxcbiAgICB9KSk7XG4gIH1cblxuICBzZXRBY3RpdmVJdGVtKFxuICAgIHNlY3Rpb25JZDogc3RyaW5nLFxuICAgIGl0ZW1JZDogc3RyaW5nLFxuICAgIHNlY3Rpb25zOiBOYXZpZ2F0aW9uU2VjdGlvbltdXG4gICk6IE5hdmlnYXRpb25TZWN0aW9uW10ge1xuICAgIHJldHVybiBzZWN0aW9ucy5tYXAoKHNlY3Rpb24pID0+ICh7XG4gICAgICAuLi5zZWN0aW9uLFxuICAgICAgaXRlbXM6IHNlY3Rpb24uaXRlbXMubWFwKChpdGVtKSA9PiAoe1xuICAgICAgICAuLi5pdGVtLFxuICAgICAgICBpc0FjdGl2ZTogc2VjdGlvbi5pZCA9PT0gc2VjdGlvbklkICYmIGl0ZW0uaWQgPT09IGl0ZW1JZCxcbiAgICAgIH0pKSxcbiAgICB9KSk7XG4gIH1cblxuICBjbGVhckFjdGl2ZVN0YXRlcyhzZWN0aW9uczogTmF2aWdhdGlvblNlY3Rpb25bXSk6IE5hdmlnYXRpb25TZWN0aW9uW10ge1xuICAgIHJldHVybiBzZWN0aW9ucy5tYXAoKHNlY3Rpb24pID0+ICh7XG4gICAgICAuLi5zZWN0aW9uLFxuICAgICAgaXRlbXM6IHNlY3Rpb24uaXRlbXMubWFwKChpdGVtKSA9PiAoe1xuICAgICAgICAuLi5pdGVtLFxuICAgICAgICBpc0FjdGl2ZTogZmFsc2UsXG4gICAgICB9KSksXG4gICAgfSkpO1xuICB9XG5cbiAgZ2V0U2VxdWVuY2VzRm9yTmF2aWdhdGlvbkl0ZW0oXG4gICAgaXRlbTogTmF2aWdhdGlvbkl0ZW0sXG4gICAgc2VjdGlvblR5cGU6IE5hdmlnYXRpb25TZWN0aW9uW1widHlwZVwiXSxcbiAgICBhbGxTZXF1ZW5jZXM6IFNlcXVlbmNlRGF0YVtdXG4gICk6IFNlcXVlbmNlRGF0YVtdIHtcbiAgICBzd2l0Y2ggKHNlY3Rpb25UeXBlKSB7XG4gICAgICBjYXNlIFwibGVuZ3RoXCI6IHtcbiAgICAgICAgY29uc3QgbGVuZ3RoID0gcGFyc2VJbnQoaXRlbS52YWx1ZSBhcyBzdHJpbmcpO1xuICAgICAgICByZXR1cm4gYWxsU2VxdWVuY2VzLmZpbHRlcigoc2VxKSA9PiBzZXEuc2VxdWVuY2VMZW5ndGggPT09IGxlbmd0aCk7XG4gICAgICB9XG5cbiAgICAgIGNhc2UgXCJsZXR0ZXJcIjpcbiAgICAgICAgcmV0dXJuIGFsbFNlcXVlbmNlcy5maWx0ZXIoKHNlcSkgPT5cbiAgICAgICAgICBzZXEud29yZC5zdGFydHNXaXRoKGl0ZW0udmFsdWUgYXMgc3RyaW5nKVxuICAgICAgICApO1xuXG4gICAgICBjYXNlIFwibGV2ZWxcIjpcbiAgICAgICAgcmV0dXJuIGFsbFNlcXVlbmNlcy5maWx0ZXIoKHNlcSkgPT4gc2VxLmRpZmZpY3VsdHlMZXZlbCA9PT0gaXRlbS52YWx1ZSk7XG5cbiAgICAgIGNhc2UgXCJhdXRob3JcIjpcbiAgICAgICAgcmV0dXJuIGFsbFNlcXVlbmNlcy5maWx0ZXIoKHNlcSkgPT4gc2VxLmF1dGhvciA9PT0gaXRlbS52YWx1ZSk7XG5cbiAgICAgIGNhc2UgXCJkYXRlXCI6XG4gICAgICAgIC8vIEltcGxlbWVudGF0aW9uIGRlcGVuZHMgb24gZGF0ZSBmb3JtYXRcbiAgICAgICAgcmV0dXJuIGFsbFNlcXVlbmNlcy5maWx0ZXIoKHNlcSkgPT4ge1xuICAgICAgICAgIGlmICghc2VxLmRhdGVBZGRlZCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIGNvbnN0IGl0ZW1EYXRlID0gbmV3IERhdGUoaXRlbS52YWx1ZSBhcyBzdHJpbmcpO1xuICAgICAgICAgIGNvbnN0IHNlcURhdGUgPSBuZXcgRGF0ZShzZXEuZGF0ZUFkZGVkKTtcbiAgICAgICAgICByZXR1cm4gc2VxRGF0ZS50b0RhdGVTdHJpbmcoKSA9PT0gaXRlbURhdGUudG9EYXRlU3RyaW5nKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICBjYXNlIFwiZmF2b3JpdGVzXCI6XG4gICAgICAgIC8vIFdpbGwgYmUgaGFuZGxlZCBieSBmYXZvcml0ZXMgZmlsdGVyXG4gICAgICAgIHJldHVybiBhbGxTZXF1ZW5jZXM7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBhbGxTZXF1ZW5jZXM7XG4gICAgfVxuICB9XG5cbiAgdXBkYXRlU2VjdGlvbkNvdW50cyhcbiAgICBzZWN0aW9uczogTmF2aWdhdGlvblNlY3Rpb25bXSxcbiAgICBzZXF1ZW5jZXM6IFNlcXVlbmNlRGF0YVtdLFxuICAgIGZhdm9yaXRlczogc3RyaW5nW11cbiAgKTogTmF2aWdhdGlvblNlY3Rpb25bXSB7XG4gICAgcmV0dXJuIHNlY3Rpb25zLm1hcCgoc2VjdGlvbikgPT4gKHtcbiAgICAgIC4uLnNlY3Rpb24sXG4gICAgICB0b3RhbENvdW50OiB0aGlzLmNhbGN1bGF0ZVNlY3Rpb25Db3VudChzZWN0aW9uLCBzZXF1ZW5jZXMsIGZhdm9yaXRlcyksXG4gICAgICBpdGVtczogc2VjdGlvbi5pdGVtcy5tYXAoKGl0ZW0pID0+ICh7XG4gICAgICAgIC4uLml0ZW0sXG4gICAgICAgIGNvdW50OiB0aGlzLmdldFNlcXVlbmNlc0Zvck5hdmlnYXRpb25JdGVtKGl0ZW0sIHNlY3Rpb24udHlwZSwgc2VxdWVuY2VzKVxuICAgICAgICAgIC5sZW5ndGgsXG4gICAgICB9KSksXG4gICAgfSkpO1xuICB9XG5cbiAgLy8gUHJpdmF0ZSBoZWxwZXIgbWV0aG9kc1xuICBwcml2YXRlIGFzeW5jIGdlbmVyYXRlRmF2b3JpdGVzU2VjdGlvbihcbiAgICBzZXF1ZW5jZXM6IFNlcXVlbmNlRGF0YVtdLFxuICAgIGZhdm9yaXRlczogc3RyaW5nW11cbiAgKTogUHJvbWlzZTxOYXZpZ2F0aW9uU2VjdGlvbj4ge1xuICAgIGNvbnN0IGZhdm9yaXRlU2VxdWVuY2VzID0gc2VxdWVuY2VzLmZpbHRlcigoc2VxKSA9PlxuICAgICAgZmF2b3JpdGVzLmluY2x1ZGVzKHNlcS5pZClcbiAgICApO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBcImZhdm9yaXRlc1wiLFxuICAgICAgdGl0bGU6IFwi4q2QIEZhdm9yaXRlc1wiLFxuICAgICAgdHlwZTogXCJmYXZvcml0ZXNcIixcbiAgICAgIGl0ZW1zOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogXCJhbGwtZmF2b3JpdGVzXCIsXG4gICAgICAgICAgbGFiZWw6IFwiQWxsIEZhdm9yaXRlc1wiLFxuICAgICAgICAgIHZhbHVlOiBcImZhdm9yaXRlc1wiLFxuICAgICAgICAgIGNvdW50OiBmYXZvcml0ZVNlcXVlbmNlcy5sZW5ndGgsXG4gICAgICAgICAgaXNBY3RpdmU6IGZhbHNlLFxuICAgICAgICAgIHNlcXVlbmNlczogZmF2b3JpdGVTZXF1ZW5jZXMsXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgICAgaXNFeHBhbmRlZDogZmFsc2UsXG4gICAgICB0b3RhbENvdW50OiBmYXZvcml0ZVNlcXVlbmNlcy5sZW5ndGgsXG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZ2VuZXJhdGVEYXRlU2VjdGlvbihcbiAgICBzZXF1ZW5jZXM6IFNlcXVlbmNlRGF0YVtdXG4gICk6IFByb21pc2U8TmF2aWdhdGlvblNlY3Rpb24+IHtcbiAgICBjb25zdCBkYXRlR3JvdXBzID0gbmV3IE1hcDxzdHJpbmcsIFNlcXVlbmNlRGF0YVtdPigpO1xuXG4gICAgc2VxdWVuY2VzLmZvckVhY2goKHNlcSkgPT4ge1xuICAgICAgaWYgKHNlcS5kYXRlQWRkZWQpIHtcbiAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHNlcS5kYXRlQWRkZWQpO1xuICAgICAgICBjb25zdCBkYXRlS2V5ID0gZGF0ZS50b0RhdGVTdHJpbmcoKTtcbiAgICAgICAgaWYgKCFkYXRlR3JvdXBzLmhhcyhkYXRlS2V5KSkge1xuICAgICAgICAgIGRhdGVHcm91cHMuc2V0KGRhdGVLZXksIFtdKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBncm91cCA9IGRhdGVHcm91cHMuZ2V0KGRhdGVLZXkpO1xuICAgICAgICBpZiAoZ3JvdXApIHtcbiAgICAgICAgICBncm91cC5wdXNoKHNlcSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGNvbnN0IGl0ZW1zOiBOYXZpZ2F0aW9uSXRlbVtdID0gQXJyYXkuZnJvbShkYXRlR3JvdXBzLmVudHJpZXMoKSlcbiAgICAgIC5zb3J0KChbYV0sIFtiXSkgPT4gbmV3IERhdGUoYikuZ2V0VGltZSgpIC0gbmV3IERhdGUoYSkuZ2V0VGltZSgpKVxuICAgICAgLnNsaWNlKDAsIDEwKSAvLyBTaG93IGxhc3QgMTAgZGF0ZXNcbiAgICAgIC5tYXAoKFtkYXRlLCBzZXFzXSkgPT4gKHtcbiAgICAgICAgaWQ6IGBkYXRlLSR7ZGF0ZX1gLFxuICAgICAgICBsYWJlbDogdGhpcy5mb3JtYXREYXRlTGFiZWwobmV3IERhdGUoZGF0ZSkpLFxuICAgICAgICB2YWx1ZTogZGF0ZSxcbiAgICAgICAgY291bnQ6IHNlcXMubGVuZ3RoLFxuICAgICAgICBpc0FjdGl2ZTogZmFsc2UsXG4gICAgICAgIHNlcXVlbmNlczogc2VxcyxcbiAgICAgIH0pKTtcblxuICAgIHJldHVybiB7XG4gICAgICBpZDogXCJkYXRlXCIsXG4gICAgICB0aXRsZTogXCLwn5OFIFJlY2VudGx5IEFkZGVkXCIsXG4gICAgICB0eXBlOiBcImRhdGVcIixcbiAgICAgIGl0ZW1zLFxuICAgICAgaXNFeHBhbmRlZDogZmFsc2UsXG4gICAgICB0b3RhbENvdW50OiBzZXF1ZW5jZXMuZmlsdGVyKChzZXEpID0+IHNlcS5kYXRlQWRkZWQpLmxlbmd0aCxcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZW5lcmF0ZUxlbmd0aFNlY3Rpb24oXG4gICAgc2VxdWVuY2VzOiBTZXF1ZW5jZURhdGFbXVxuICApOiBQcm9taXNlPE5hdmlnYXRpb25TZWN0aW9uPiB7XG4gICAgY29uc3QgbGVuZ3RoR3JvdXBzID0gbmV3IE1hcDxudW1iZXIsIFNlcXVlbmNlRGF0YVtdPigpO1xuXG4gICAgc2VxdWVuY2VzLmZvckVhY2goKHNlcSkgPT4ge1xuICAgICAgY29uc3QgbGVuZ3RoID0gc2VxLnNlcXVlbmNlTGVuZ3RoIHx8IHNlcS53b3JkLmxlbmd0aDtcbiAgICAgIGlmICghbGVuZ3RoR3JvdXBzLmhhcyhsZW5ndGgpKSB7XG4gICAgICAgIGxlbmd0aEdyb3Vwcy5zZXQobGVuZ3RoLCBbXSk7XG4gICAgICB9XG4gICAgICBjb25zdCBncm91cCA9IGxlbmd0aEdyb3Vwcy5nZXQobGVuZ3RoKTtcbiAgICAgIGlmIChncm91cCkge1xuICAgICAgICBncm91cC5wdXNoKHNlcSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBjb25zdCBpdGVtczogTmF2aWdhdGlvbkl0ZW1bXSA9IEFycmF5LmZyb20obGVuZ3RoR3JvdXBzLmVudHJpZXMoKSlcbiAgICAgIC5zb3J0KChbYV0sIFtiXSkgPT4gYSAtIGIpXG4gICAgICAubWFwKChbbGVuZ3RoLCBzZXFzXSkgPT4gKHtcbiAgICAgICAgaWQ6IGBsZW5ndGgtJHtsZW5ndGh9YCxcbiAgICAgICAgbGFiZWw6IGAke2xlbmd0aH0gYmVhdHNgLFxuICAgICAgICB2YWx1ZTogbGVuZ3RoLFxuICAgICAgICBjb3VudDogc2Vxcy5sZW5ndGgsXG4gICAgICAgIGlzQWN0aXZlOiBmYWxzZSxcbiAgICAgICAgc2VxdWVuY2VzOiBzZXFzLFxuICAgICAgfSkpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBcImxlbmd0aFwiLFxuICAgICAgdGl0bGU6IFwi8J+TjyBMZW5ndGhcIixcbiAgICAgIHR5cGU6IFwibGVuZ3RoXCIsXG4gICAgICBpdGVtcyxcbiAgICAgIGlzRXhwYW5kZWQ6IGZhbHNlLFxuICAgICAgdG90YWxDb3VudDogc2VxdWVuY2VzLmxlbmd0aCxcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZW5lcmF0ZUxldHRlclNlY3Rpb24oXG4gICAgc2VxdWVuY2VzOiBTZXF1ZW5jZURhdGFbXVxuICApOiBQcm9taXNlPE5hdmlnYXRpb25TZWN0aW9uPiB7XG4gICAgY29uc3QgbGV0dGVyR3JvdXBzID0gbmV3IE1hcDxzdHJpbmcsIFNlcXVlbmNlRGF0YVtdPigpO1xuXG4gICAgc2VxdWVuY2VzLmZvckVhY2goKHNlcSkgPT4ge1xuICAgICAgY29uc3QgZmlyc3RMZXR0ZXIgPSBzZXEud29yZC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKTtcbiAgICAgIGlmICghbGV0dGVyR3JvdXBzLmhhcyhmaXJzdExldHRlcikpIHtcbiAgICAgICAgbGV0dGVyR3JvdXBzLnNldChmaXJzdExldHRlciwgW10pO1xuICAgICAgfVxuICAgICAgY29uc3QgZ3JvdXAgPSBsZXR0ZXJHcm91cHMuZ2V0KGZpcnN0TGV0dGVyKTtcbiAgICAgIGlmIChncm91cCkge1xuICAgICAgICBncm91cC5wdXNoKHNlcSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBjb25zdCBpdGVtczogTmF2aWdhdGlvbkl0ZW1bXSA9IEFycmF5LmZyb20obGV0dGVyR3JvdXBzLmVudHJpZXMoKSlcbiAgICAgIC5zb3J0KChbYV0sIFtiXSkgPT4gYS5sb2NhbGVDb21wYXJlKGIpKVxuICAgICAgLm1hcCgoW2xldHRlciwgc2Vxc10pID0+ICh7XG4gICAgICAgIGlkOiBgbGV0dGVyLSR7bGV0dGVyfWAsXG4gICAgICAgIGxhYmVsOiBsZXR0ZXIsXG4gICAgICAgIHZhbHVlOiBsZXR0ZXIsXG4gICAgICAgIGNvdW50OiBzZXFzLmxlbmd0aCxcbiAgICAgICAgaXNBY3RpdmU6IGZhbHNlLFxuICAgICAgICBzZXF1ZW5jZXM6IHNlcXMsXG4gICAgICB9KSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IFwibGV0dGVyXCIsXG4gICAgICB0aXRsZTogXCLwn5SkIFN0YXJ0aW5nIExldHRlclwiLFxuICAgICAgdHlwZTogXCJsZXR0ZXJcIixcbiAgICAgIGl0ZW1zLFxuICAgICAgaXNFeHBhbmRlZDogdHJ1ZSwgLy8gRGVmYXVsdCBleHBhbmRlZCBsaWtlIGRlc2t0b3BcbiAgICAgIHRvdGFsQ291bnQ6IHNlcXVlbmNlcy5sZW5ndGgsXG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZ2VuZXJhdGVMZXZlbFNlY3Rpb24oXG4gICAgc2VxdWVuY2VzOiBTZXF1ZW5jZURhdGFbXVxuICApOiBQcm9taXNlPE5hdmlnYXRpb25TZWN0aW9uPiB7XG4gICAgY29uc3QgbGV2ZWxHcm91cHMgPSBuZXcgTWFwPHN0cmluZywgU2VxdWVuY2VEYXRhW10+KCk7XG5cbiAgICBzZXF1ZW5jZXMuZm9yRWFjaCgoc2VxKSA9PiB7XG4gICAgICBjb25zdCBsZXZlbCA9IHNlcS5kaWZmaWN1bHR5TGV2ZWwgfHwgXCJ1bmtub3duXCI7XG4gICAgICBpZiAoIWxldmVsR3JvdXBzLmhhcyhsZXZlbCkpIHtcbiAgICAgICAgbGV2ZWxHcm91cHMuc2V0KGxldmVsLCBbXSk7XG4gICAgICB9XG4gICAgICBjb25zdCBncm91cCA9IGxldmVsR3JvdXBzLmdldChsZXZlbCk7XG4gICAgICBpZiAoZ3JvdXApIHtcbiAgICAgICAgZ3JvdXAucHVzaChzZXEpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgY29uc3QgbGV2ZWxPcmRlciA9IFtcImJlZ2lubmVyXCIsIFwiaW50ZXJtZWRpYXRlXCIsIFwiYWR2YW5jZWRcIiwgXCJ1bmtub3duXCJdO1xuICAgIGNvbnN0IGl0ZW1zOiBOYXZpZ2F0aW9uSXRlbVtdID0gbGV2ZWxPcmRlclxuICAgICAgLmZpbHRlcigobGV2ZWwpID0+IGxldmVsR3JvdXBzLmhhcyhsZXZlbCkpXG4gICAgICAubWFwKChsZXZlbCkgPT4gKHtcbiAgICAgICAgaWQ6IGBsZXZlbC0ke2xldmVsfWAsXG4gICAgICAgIGxhYmVsOiBsZXZlbC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGxldmVsLnNsaWNlKDEpLFxuICAgICAgICB2YWx1ZTogbGV2ZWwsXG4gICAgICAgIGNvdW50OiBsZXZlbEdyb3Vwcy5nZXQobGV2ZWwpPy5sZW5ndGggfHwgMCxcbiAgICAgICAgaXNBY3RpdmU6IGZhbHNlLFxuICAgICAgICBzZXF1ZW5jZXM6IGxldmVsR3JvdXBzLmdldChsZXZlbCkgPz8gW10sXG4gICAgICB9KSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IFwibGV2ZWxcIixcbiAgICAgIHRpdGxlOiBcIvCfk4ogRGlmZmljdWx0eVwiLFxuICAgICAgdHlwZTogXCJsZXZlbFwiLFxuICAgICAgaXRlbXMsXG4gICAgICBpc0V4cGFuZGVkOiBmYWxzZSxcbiAgICAgIHRvdGFsQ291bnQ6IHNlcXVlbmNlcy5sZW5ndGgsXG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZ2VuZXJhdGVBdXRob3JTZWN0aW9uKFxuICAgIHNlcXVlbmNlczogU2VxdWVuY2VEYXRhW11cbiAgKTogUHJvbWlzZTxOYXZpZ2F0aW9uU2VjdGlvbj4ge1xuICAgIGNvbnN0IGF1dGhvckdyb3VwcyA9IG5ldyBNYXA8c3RyaW5nLCBTZXF1ZW5jZURhdGFbXT4oKTtcblxuICAgIHNlcXVlbmNlcy5mb3JFYWNoKChzZXEpID0+IHtcbiAgICAgIGNvbnN0IGF1dGhvciA9IHNlcS5hdXRob3IgfHwgXCJVbmtub3duXCI7XG4gICAgICBpZiAoIWF1dGhvckdyb3Vwcy5oYXMoYXV0aG9yKSkge1xuICAgICAgICBhdXRob3JHcm91cHMuc2V0KGF1dGhvciwgW10pO1xuICAgICAgfVxuICAgICAgY29uc3QgZ3JvdXAgPSBhdXRob3JHcm91cHMuZ2V0KGF1dGhvcik7XG4gICAgICBpZiAoZ3JvdXApIHtcbiAgICAgICAgZ3JvdXAucHVzaChzZXEpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgY29uc3QgaXRlbXM6IE5hdmlnYXRpb25JdGVtW10gPSBBcnJheS5mcm9tKGF1dGhvckdyb3Vwcy5lbnRyaWVzKCkpXG4gICAgICAuc29ydCgoW2FdLCBbYl0pID0+IGEubG9jYWxlQ29tcGFyZShiKSlcbiAgICAgIC5tYXAoKFthdXRob3IsIHNlcXNdKSA9PiAoe1xuICAgICAgICBpZDogYGF1dGhvci0ke2F1dGhvcn1gLFxuICAgICAgICBsYWJlbDogYXV0aG9yLFxuICAgICAgICB2YWx1ZTogYXV0aG9yLFxuICAgICAgICBjb3VudDogc2Vxcy5sZW5ndGgsXG4gICAgICAgIGlzQWN0aXZlOiBmYWxzZSxcbiAgICAgICAgc2VxdWVuY2VzOiBzZXFzLFxuICAgICAgfSkpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBcImF1dGhvclwiLFxuICAgICAgdGl0bGU6IFwi8J+RpCBBdXRob3JcIixcbiAgICAgIHR5cGU6IFwiYXV0aG9yXCIsXG4gICAgICBpdGVtcyxcbiAgICAgIGlzRXhwYW5kZWQ6IGZhbHNlLFxuICAgICAgdG90YWxDb3VudDogc2VxdWVuY2VzLmxlbmd0aCxcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBjYWxjdWxhdGVTZWN0aW9uQ291bnQoXG4gICAgc2VjdGlvbjogTmF2aWdhdGlvblNlY3Rpb24sXG4gICAgc2VxdWVuY2VzOiBTZXF1ZW5jZURhdGFbXSxcbiAgICBmYXZvcml0ZXM6IHN0cmluZ1tdXG4gICk6IG51bWJlciB7XG4gICAgc3dpdGNoIChzZWN0aW9uLnR5cGUpIHtcbiAgICAgIGNhc2UgXCJmYXZvcml0ZXNcIjpcbiAgICAgICAgcmV0dXJuIHNlcXVlbmNlcy5maWx0ZXIoKHNlcSkgPT4gZmF2b3JpdGVzLmluY2x1ZGVzKHNlcS5pZCkpLmxlbmd0aDtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBzZXF1ZW5jZXMubGVuZ3RoO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZm9ybWF0RGF0ZUxhYmVsKGRhdGU6IERhdGUpOiBzdHJpbmcge1xuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgY29uc3QgZGlmZlRpbWUgPSBub3cuZ2V0VGltZSgpIC0gZGF0ZS5nZXRUaW1lKCk7XG4gICAgY29uc3QgZGlmZkRheXMgPSBNYXRoLmZsb29yKGRpZmZUaW1lIC8gKDEwMDAgKiA2MCAqIDYwICogMjQpKTtcblxuICAgIGlmIChkaWZmRGF5cyA9PT0gMCkgcmV0dXJuIFwiVG9kYXlcIjtcbiAgICBpZiAoZGlmZkRheXMgPT09IDEpIHJldHVybiBcIlllc3RlcmRheVwiO1xuICAgIGlmIChkaWZmRGF5cyA8IDcpIHJldHVybiBgJHtkaWZmRGF5c30gZGF5cyBhZ29gO1xuICAgIGlmIChkaWZmRGF5cyA8IDMwKSByZXR1cm4gYCR7TWF0aC5mbG9vcihkaWZmRGF5cyAvIDcpfSB3ZWVrcyBhZ29gO1xuXG4gICAgcmV0dXJuIGRhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCk7XG4gIH1cblxuICAvLyBBZGRpdGlvbmFsIG1ldGhvZHMgcmVxdWlyZWQgYnkgYnJvd3NlLWludGVyZmFjZXMudHNcbiAgYXN5bmMgYnVpbGROYXZpZ2F0aW9uU3RydWN0dXJlKFxuICAgIHNlcXVlbmNlczogU2VxdWVuY2VEYXRhW11cbiAgKTogUHJvbWlzZTxOYXZpZ2F0aW9uU2VjdGlvbltdPiB7XG4gICAgLy8gVXNlIHRoZSBleGlzdGluZyBnZW5lcmF0ZU5hdmlnYXRpb25TZWN0aW9ucyBtZXRob2RcbiAgICByZXR1cm4gdGhpcy5nZW5lcmF0ZU5hdmlnYXRpb25TZWN0aW9ucyhzZXF1ZW5jZXMsIFtdKTtcbiAgfVxuXG4gIGFzeW5jIGdldE5hdmlnYXRpb25JdGVtKFxuICAgIF9zZWN0aW9uSWQ6IHN0cmluZyxcbiAgICBfaXRlbUlkOiBzdHJpbmdcbiAgKTogUHJvbWlzZTxOYXZpZ2F0aW9uSXRlbSB8IG51bGw+IHtcbiAgICAvLyBUaGlzIHdvdWxkIG5lZWQgdG8gYmUgaW1wbGVtZW50ZWQgYmFzZWQgb24gdGhlIGN1cnJlbnQgbmF2aWdhdGlvbiBzdGF0ZVxuICAgIC8vIEZvciBub3csIHJldHVybiBudWxsIGFzIGEgcGxhY2Vob2xkZXJcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7OztBQVFBLFNBQVMsa0JBQWtCO0FBMkRwQixXQUFNLG9CQUFOLE1BQXNEO0FBQUEsRUFDM0QsTUFBTSwyQkFDSixXQUNBLFdBQzhCO0FBQzlCLFVBQU0sV0FBZ0M7QUFBQSxNQUNwQyxNQUFNLEtBQUsseUJBQXlCLFdBQVcsU0FBUztBQUFBLE1BQ3hELE1BQU0sS0FBSyxvQkFBb0IsU0FBUztBQUFBLE1BQ3hDLE1BQU0sS0FBSyxzQkFBc0IsU0FBUztBQUFBLE1BQzFDLE1BQU0sS0FBSyxzQkFBc0IsU0FBUztBQUFBLE1BQzFDLE1BQU0sS0FBSyxxQkFBcUIsU0FBUztBQUFBLE1BQ3pDLE1BQU0sS0FBSyxzQkFBc0IsU0FBUztBQUFBLElBQzVDO0FBRUEsV0FBTztBQUFBLEVBQ1Q7QUFBQSxFQUVBLHVCQUNFLFdBQ0EsVUFDcUI7QUFDckIsV0FBTyxTQUFTLElBQUksQ0FBQyxhQUFhO0FBQUEsTUFDaEMsR0FBRztBQUFBLE1BQ0gsWUFDRSxRQUFRLE9BQU8sWUFBWSxDQUFDLFFBQVEsYUFBYSxRQUFRO0FBQUEsSUFDN0QsRUFBRTtBQUFBLEVBQ0o7QUFBQSxFQUVBLGNBQ0UsV0FDQSxRQUNBLFVBQ3FCO0FBQ3JCLFdBQU8sU0FBUyxJQUFJLENBQUMsYUFBYTtBQUFBLE1BQ2hDLEdBQUc7QUFBQSxNQUNILE9BQU8sUUFBUSxNQUFNLElBQUksQ0FBQyxVQUFVO0FBQUEsUUFDbEMsR0FBRztBQUFBLFFBQ0gsVUFBVSxRQUFRLE9BQU8sYUFBYSxLQUFLLE9BQU87QUFBQSxNQUNwRCxFQUFFO0FBQUEsSUFDSixFQUFFO0FBQUEsRUFDSjtBQUFBLEVBRUEsa0JBQWtCLFVBQW9EO0FBQ3BFLFdBQU8sU0FBUyxJQUFJLENBQUMsYUFBYTtBQUFBLE1BQ2hDLEdBQUc7QUFBQSxNQUNILE9BQU8sUUFBUSxNQUFNLElBQUksQ0FBQyxVQUFVO0FBQUEsUUFDbEMsR0FBRztBQUFBLFFBQ0gsVUFBVTtBQUFBLE1BQ1osRUFBRTtBQUFBLElBQ0osRUFBRTtBQUFBLEVBQ0o7QUFBQSxFQUVBLDhCQUNFLE1BQ0EsYUFDQSxjQUNnQjtBQUNoQixZQUFRLGFBQWE7QUFBQSxNQUNuQixLQUFLLFVBQVU7QUFDYixjQUFNLFNBQVMsU0FBUyxLQUFLLEtBQWU7QUFDNUMsZUFBTyxhQUFhLE9BQU8sQ0FBQyxRQUFRLElBQUksbUJBQW1CLE1BQU07QUFBQSxNQUNuRTtBQUFBLE1BRUEsS0FBSztBQUNILGVBQU8sYUFBYTtBQUFBLFVBQU8sQ0FBQyxRQUMxQixJQUFJLEtBQUssV0FBVyxLQUFLLEtBQWU7QUFBQSxRQUMxQztBQUFBLE1BRUYsS0FBSztBQUNILGVBQU8sYUFBYSxPQUFPLENBQUMsUUFBUSxJQUFJLG9CQUFvQixLQUFLLEtBQUs7QUFBQSxNQUV4RSxLQUFLO0FBQ0gsZUFBTyxhQUFhLE9BQU8sQ0FBQyxRQUFRLElBQUksV0FBVyxLQUFLLEtBQUs7QUFBQSxNQUUvRCxLQUFLO0FBRUgsZUFBTyxhQUFhLE9BQU8sQ0FBQyxRQUFRO0FBQ2xDLGNBQUksQ0FBQyxJQUFJLFVBQVcsUUFBTztBQUMzQixnQkFBTSxXQUFXLElBQUksS0FBSyxLQUFLLEtBQWU7QUFDOUMsZ0JBQU0sVUFBVSxJQUFJLEtBQUssSUFBSSxTQUFTO0FBQ3RDLGlCQUFPLFFBQVEsYUFBYSxNQUFNLFNBQVMsYUFBYTtBQUFBLFFBQzFELENBQUM7QUFBQSxNQUVILEtBQUs7QUFFSCxlQUFPO0FBQUEsTUFFVDtBQUNFLGVBQU87QUFBQSxJQUNYO0FBQUEsRUFDRjtBQUFBLEVBRUEsb0JBQ0UsVUFDQSxXQUNBLFdBQ3FCO0FBQ3JCLFdBQU8sU0FBUyxJQUFJLENBQUMsYUFBYTtBQUFBLE1BQ2hDLEdBQUc7QUFBQSxNQUNILFlBQVksS0FBSyxzQkFBc0IsU0FBUyxXQUFXLFNBQVM7QUFBQSxNQUNwRSxPQUFPLFFBQVEsTUFBTSxJQUFJLENBQUMsVUFBVTtBQUFBLFFBQ2xDLEdBQUc7QUFBQSxRQUNILE9BQU8sS0FBSyw4QkFBOEIsTUFBTSxRQUFRLE1BQU0sU0FBUyxFQUNwRTtBQUFBLE1BQ0wsRUFBRTtBQUFBLElBQ0osRUFBRTtBQUFBLEVBQ0o7QUFBQTtBQUFBLEVBR0EsTUFBYyx5QkFDWixXQUNBLFdBQzRCO0FBQzVCLFVBQU0sb0JBQW9CLFVBQVU7QUFBQSxNQUFPLENBQUMsUUFDMUMsVUFBVSxTQUFTLElBQUksRUFBRTtBQUFBLElBQzNCO0FBRUEsV0FBTztBQUFBLE1BQ0wsSUFBSTtBQUFBLE1BQ0osT0FBTztBQUFBLE1BQ1AsTUFBTTtBQUFBLE1BQ04sT0FBTztBQUFBLFFBQ0w7QUFBQSxVQUNFLElBQUk7QUFBQSxVQUNKLE9BQU87QUFBQSxVQUNQLE9BQU87QUFBQSxVQUNQLE9BQU8sa0JBQWtCO0FBQUEsVUFDekIsVUFBVTtBQUFBLFVBQ1YsV0FBVztBQUFBLFFBQ2I7QUFBQSxNQUNGO0FBQUEsTUFDQSxZQUFZO0FBQUEsTUFDWixZQUFZLGtCQUFrQjtBQUFBLElBQ2hDO0FBQUEsRUFDRjtBQUFBLEVBRUEsTUFBYyxvQkFDWixXQUM0QjtBQUM1QixVQUFNLGFBQWEsb0JBQUksSUFBNEI7QUFFbkQsY0FBVSxRQUFRLENBQUMsUUFBUTtBQUN6QixVQUFJLElBQUksV0FBVztBQUNqQixjQUFNLE9BQU8sSUFBSSxLQUFLLElBQUksU0FBUztBQUNuQyxjQUFNLFVBQVUsS0FBSyxhQUFhO0FBQ2xDLFlBQUksQ0FBQyxXQUFXLElBQUksT0FBTyxHQUFHO0FBQzVCLHFCQUFXLElBQUksU0FBUyxDQUFDLENBQUM7QUFBQSxRQUM1QjtBQUNBLGNBQU0sUUFBUSxXQUFXLElBQUksT0FBTztBQUNwQyxZQUFJLE9BQU87QUFDVCxnQkFBTSxLQUFLLEdBQUc7QUFBQSxRQUNoQjtBQUFBLE1BQ0Y7QUFBQSxJQUNGLENBQUM7QUFFRCxVQUFNLFFBQTBCLE1BQU0sS0FBSyxXQUFXLFFBQVEsQ0FBQyxFQUM1RCxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sSUFBSSxLQUFLLENBQUMsRUFBRSxRQUFRLElBQUksSUFBSSxLQUFLLENBQUMsRUFBRSxRQUFRLENBQUMsRUFDaEUsTUFBTSxHQUFHLEVBQUUsRUFDWCxJQUFJLENBQUMsQ0FBQyxNQUFNLElBQUksT0FBTztBQUFBLE1BQ3RCLElBQUksUUFBUSxJQUFJO0FBQUEsTUFDaEIsT0FBTyxLQUFLLGdCQUFnQixJQUFJLEtBQUssSUFBSSxDQUFDO0FBQUEsTUFDMUMsT0FBTztBQUFBLE1BQ1AsT0FBTyxLQUFLO0FBQUEsTUFDWixVQUFVO0FBQUEsTUFDVixXQUFXO0FBQUEsSUFDYixFQUFFO0FBRUosV0FBTztBQUFBLE1BQ0wsSUFBSTtBQUFBLE1BQ0osT0FBTztBQUFBLE1BQ1AsTUFBTTtBQUFBLE1BQ047QUFBQSxNQUNBLFlBQVk7QUFBQSxNQUNaLFlBQVksVUFBVSxPQUFPLENBQUMsUUFBUSxJQUFJLFNBQVMsRUFBRTtBQUFBLElBQ3ZEO0FBQUEsRUFDRjtBQUFBLEVBRUEsTUFBYyxzQkFDWixXQUM0QjtBQUM1QixVQUFNLGVBQWUsb0JBQUksSUFBNEI7QUFFckQsY0FBVSxRQUFRLENBQUMsUUFBUTtBQUN6QixZQUFNLFNBQVMsSUFBSSxrQkFBa0IsSUFBSSxLQUFLO0FBQzlDLFVBQUksQ0FBQyxhQUFhLElBQUksTUFBTSxHQUFHO0FBQzdCLHFCQUFhLElBQUksUUFBUSxDQUFDLENBQUM7QUFBQSxNQUM3QjtBQUNBLFlBQU0sUUFBUSxhQUFhLElBQUksTUFBTTtBQUNyQyxVQUFJLE9BQU87QUFDVCxjQUFNLEtBQUssR0FBRztBQUFBLE1BQ2hCO0FBQUEsSUFDRixDQUFDO0FBRUQsVUFBTSxRQUEwQixNQUFNLEtBQUssYUFBYSxRQUFRLENBQUMsRUFDOUQsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLElBQUksQ0FBQyxFQUN4QixJQUFJLENBQUMsQ0FBQyxRQUFRLElBQUksT0FBTztBQUFBLE1BQ3hCLElBQUksVUFBVSxNQUFNO0FBQUEsTUFDcEIsT0FBTyxHQUFHLE1BQU07QUFBQSxNQUNoQixPQUFPO0FBQUEsTUFDUCxPQUFPLEtBQUs7QUFBQSxNQUNaLFVBQVU7QUFBQSxNQUNWLFdBQVc7QUFBQSxJQUNiLEVBQUU7QUFFSixXQUFPO0FBQUEsTUFDTCxJQUFJO0FBQUEsTUFDSixPQUFPO0FBQUEsTUFDUCxNQUFNO0FBQUEsTUFDTjtBQUFBLE1BQ0EsWUFBWTtBQUFBLE1BQ1osWUFBWSxVQUFVO0FBQUEsSUFDeEI7QUFBQSxFQUNGO0FBQUEsRUFFQSxNQUFjLHNCQUNaLFdBQzRCO0FBQzVCLFVBQU0sZUFBZSxvQkFBSSxJQUE0QjtBQUVyRCxjQUFVLFFBQVEsQ0FBQyxRQUFRO0FBQ3pCLFlBQU0sY0FBYyxJQUFJLEtBQUssT0FBTyxDQUFDLEVBQUUsWUFBWTtBQUNuRCxVQUFJLENBQUMsYUFBYSxJQUFJLFdBQVcsR0FBRztBQUNsQyxxQkFBYSxJQUFJLGFBQWEsQ0FBQyxDQUFDO0FBQUEsTUFDbEM7QUFDQSxZQUFNLFFBQVEsYUFBYSxJQUFJLFdBQVc7QUFDMUMsVUFBSSxPQUFPO0FBQ1QsY0FBTSxLQUFLLEdBQUc7QUFBQSxNQUNoQjtBQUFBLElBQ0YsQ0FBQztBQUVELFVBQU0sUUFBMEIsTUFBTSxLQUFLLGFBQWEsUUFBUSxDQUFDLEVBQzlELEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxFQUFFLGNBQWMsQ0FBQyxDQUFDLEVBQ3JDLElBQUksQ0FBQyxDQUFDLFFBQVEsSUFBSSxPQUFPO0FBQUEsTUFDeEIsSUFBSSxVQUFVLE1BQU07QUFBQSxNQUNwQixPQUFPO0FBQUEsTUFDUCxPQUFPO0FBQUEsTUFDUCxPQUFPLEtBQUs7QUFBQSxNQUNaLFVBQVU7QUFBQSxNQUNWLFdBQVc7QUFBQSxJQUNiLEVBQUU7QUFFSixXQUFPO0FBQUEsTUFDTCxJQUFJO0FBQUEsTUFDSixPQUFPO0FBQUEsTUFDUCxNQUFNO0FBQUEsTUFDTjtBQUFBLE1BQ0EsWUFBWTtBQUFBO0FBQUEsTUFDWixZQUFZLFVBQVU7QUFBQSxJQUN4QjtBQUFBLEVBQ0Y7QUFBQSxFQUVBLE1BQWMscUJBQ1osV0FDNEI7QUFDNUIsVUFBTSxjQUFjLG9CQUFJLElBQTRCO0FBRXBELGNBQVUsUUFBUSxDQUFDLFFBQVE7QUFDekIsWUFBTSxRQUFRLElBQUksbUJBQW1CO0FBQ3JDLFVBQUksQ0FBQyxZQUFZLElBQUksS0FBSyxHQUFHO0FBQzNCLG9CQUFZLElBQUksT0FBTyxDQUFDLENBQUM7QUFBQSxNQUMzQjtBQUNBLFlBQU0sUUFBUSxZQUFZLElBQUksS0FBSztBQUNuQyxVQUFJLE9BQU87QUFDVCxjQUFNLEtBQUssR0FBRztBQUFBLE1BQ2hCO0FBQUEsSUFDRixDQUFDO0FBRUQsVUFBTSxhQUFhLENBQUMsWUFBWSxnQkFBZ0IsWUFBWSxTQUFTO0FBQ3JFLFVBQU0sUUFBMEIsV0FDN0IsT0FBTyxDQUFDLFVBQVUsWUFBWSxJQUFJLEtBQUssQ0FBQyxFQUN4QyxJQUFJLENBQUMsV0FBVztBQUFBLE1BQ2YsSUFBSSxTQUFTLEtBQUs7QUFBQSxNQUNsQixPQUFPLE1BQU0sT0FBTyxDQUFDLEVBQUUsWUFBWSxJQUFJLE1BQU0sTUFBTSxDQUFDO0FBQUEsTUFDcEQsT0FBTztBQUFBLE1BQ1AsT0FBTyxZQUFZLElBQUksS0FBSyxHQUFHLFVBQVU7QUFBQSxNQUN6QyxVQUFVO0FBQUEsTUFDVixXQUFXLFlBQVksSUFBSSxLQUFLLEtBQUssQ0FBQztBQUFBLElBQ3hDLEVBQUU7QUFFSixXQUFPO0FBQUEsTUFDTCxJQUFJO0FBQUEsTUFDSixPQUFPO0FBQUEsTUFDUCxNQUFNO0FBQUEsTUFDTjtBQUFBLE1BQ0EsWUFBWTtBQUFBLE1BQ1osWUFBWSxVQUFVO0FBQUEsSUFDeEI7QUFBQSxFQUNGO0FBQUEsRUFFQSxNQUFjLHNCQUNaLFdBQzRCO0FBQzVCLFVBQU0sZUFBZSxvQkFBSSxJQUE0QjtBQUVyRCxjQUFVLFFBQVEsQ0FBQyxRQUFRO0FBQ3pCLFlBQU0sU0FBUyxJQUFJLFVBQVU7QUFDN0IsVUFBSSxDQUFDLGFBQWEsSUFBSSxNQUFNLEdBQUc7QUFDN0IscUJBQWEsSUFBSSxRQUFRLENBQUMsQ0FBQztBQUFBLE1BQzdCO0FBQ0EsWUFBTSxRQUFRLGFBQWEsSUFBSSxNQUFNO0FBQ3JDLFVBQUksT0FBTztBQUNULGNBQU0sS0FBSyxHQUFHO0FBQUEsTUFDaEI7QUFBQSxJQUNGLENBQUM7QUFFRCxVQUFNLFFBQTBCLE1BQU0sS0FBSyxhQUFhLFFBQVEsQ0FBQyxFQUM5RCxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sRUFBRSxjQUFjLENBQUMsQ0FBQyxFQUNyQyxJQUFJLENBQUMsQ0FBQyxRQUFRLElBQUksT0FBTztBQUFBLE1BQ3hCLElBQUksVUFBVSxNQUFNO0FBQUEsTUFDcEIsT0FBTztBQUFBLE1BQ1AsT0FBTztBQUFBLE1BQ1AsT0FBTyxLQUFLO0FBQUEsTUFDWixVQUFVO0FBQUEsTUFDVixXQUFXO0FBQUEsSUFDYixFQUFFO0FBRUosV0FBTztBQUFBLE1BQ0wsSUFBSTtBQUFBLE1BQ0osT0FBTztBQUFBLE1BQ1AsTUFBTTtBQUFBLE1BQ047QUFBQSxNQUNBLFlBQVk7QUFBQSxNQUNaLFlBQVksVUFBVTtBQUFBLElBQ3hCO0FBQUEsRUFDRjtBQUFBLEVBRVEsc0JBQ04sU0FDQSxXQUNBLFdBQ1E7QUFDUixZQUFRLFFBQVEsTUFBTTtBQUFBLE1BQ3BCLEtBQUs7QUFDSCxlQUFPLFVBQVUsT0FBTyxDQUFDLFFBQVEsVUFBVSxTQUFTLElBQUksRUFBRSxDQUFDLEVBQUU7QUFBQSxNQUMvRDtBQUNFLGVBQU8sVUFBVTtBQUFBLElBQ3JCO0FBQUEsRUFDRjtBQUFBLEVBRVEsZ0JBQWdCLE1BQW9CO0FBQzFDLFVBQU0sTUFBTSxvQkFBSSxLQUFLO0FBQ3JCLFVBQU0sV0FBVyxJQUFJLFFBQVEsSUFBSSxLQUFLLFFBQVE7QUFDOUMsVUFBTSxXQUFXLEtBQUssTUFBTSxZQUFZLE1BQU8sS0FBSyxLQUFLLEdBQUc7QUFFNUQsUUFBSSxhQUFhLEVBQUcsUUFBTztBQUMzQixRQUFJLGFBQWEsRUFBRyxRQUFPO0FBQzNCLFFBQUksV0FBVyxFQUFHLFFBQU8sR0FBRyxRQUFRO0FBQ3BDLFFBQUksV0FBVyxHQUFJLFFBQU8sR0FBRyxLQUFLLE1BQU0sV0FBVyxDQUFDLENBQUM7QUFFckQsV0FBTyxLQUFLLG1CQUFtQjtBQUFBLEVBQ2pDO0FBQUE7QUFBQSxFQUdBLE1BQU0seUJBQ0osV0FDOEI7QUFFOUIsV0FBTyxLQUFLLDJCQUEyQixXQUFXLENBQUMsQ0FBQztBQUFBLEVBQ3REO0FBQUEsRUFFQSxNQUFNLGtCQUNKLFlBQ0EsU0FDZ0M7QUFHaEMsV0FBTztBQUFBLEVBQ1Q7QUFDRjtBQWhYYSxvQkFBTjtBQUFBLEVBRE4sV0FBVztBQUFBLEdBQ0M7IiwKICAibmFtZXMiOiBbXQp9Cg==
