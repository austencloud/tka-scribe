import { Location, MotionType } from "/src/lib/domain/index.ts";
export class ArrowRotationCalculator {
  /**
   * Pure algorithmic service for calculating arrow rotation angles.
   *
   * Implements rotation calculation algorithms without any UI dependencies.
   * Each motion type has its own rotation strategy based on proven algorithms.
   */
  staticRotationMap = {
    [Location.NORTH]: 180,
    [Location.NORTHEAST]: 225,
    [Location.EAST]: 270,
    [Location.SOUTHEAST]: 315,
    [Location.SOUTH]: 0,
    [Location.SOUTHWEST]: 45,
    [Location.WEST]: 90,
    [Location.NORTHWEST]: 135
  };
  proClockwiseMap = {
    [Location.NORTH]: 225,
    [Location.EAST]: 315,
    [Location.SOUTH]: 45,
    [Location.WEST]: 135,
    [Location.NORTHEAST]: 0,
    [Location.SOUTHEAST]: 90,
    [Location.SOUTHWEST]: 180,
    [Location.NORTHWEST]: 270
  };
  proCounterClockwiseMap = {
    [Location.NORTH]: 225,
    [Location.EAST]: 135,
    [Location.SOUTH]: 45,
    [Location.WEST]: 315,
    [Location.NORTHEAST]: 90,
    [Location.SOUTHEAST]: 180,
    [Location.SOUTHWEST]: 270,
    [Location.NORTHWEST]: 0
  };
  antiClockwiseMap = {
    [Location.NORTH]: 315,
    [Location.EAST]: 225,
    [Location.SOUTH]: 135,
    [Location.WEST]: 45,
    [Location.NORTHEAST]: 90,
    [Location.SOUTHEAST]: 180,
    [Location.SOUTHWEST]: 270,
    [Location.NORTHWEST]: 0
  };
  antiCounterClockwiseMap = {
    [Location.NORTH]: 315,
    [Location.EAST]: 45,
    [Location.SOUTH]: 135,
    [Location.WEST]: 225,
    [Location.NORTHEAST]: 0,
    [Location.SOUTHEAST]: 90,
    [Location.SOUTHWEST]: 180,
    [Location.NORTHWEST]: 270
  };
  dashClockwiseMap = {
    [Location.NORTH]: 270,
    [Location.EAST]: 0,
    [Location.SOUTH]: 90,
    [Location.WEST]: 180,
    [Location.NORTHEAST]: 315,
    [Location.SOUTHEAST]: 45,
    [Location.SOUTHWEST]: 135,
    [Location.NORTHWEST]: 225
  };
  dashCounterClockwiseMap = {
    [Location.NORTH]: 270,
    [Location.EAST]: 180,
    [Location.SOUTH]: 90,
    [Location.WEST]: 0,
    [Location.NORTHEAST]: 225,
    [Location.SOUTHEAST]: 135,
    [Location.SOUTHWEST]: 45,
    [Location.NORTHWEST]: 315
  };
  dashNoRotationMap = {
    [`${Location.NORTH},${Location.SOUTH}`]: 90,
    [`${Location.EAST},${Location.WEST}`]: 180,
    [`${Location.SOUTH},${Location.NORTH}`]: 270,
    [`${Location.WEST},${Location.EAST}`]: 0,
    [`${Location.SOUTHEAST},${Location.NORTHWEST}`]: 225,
    [`${Location.SOUTHWEST},${Location.NORTHEAST}`]: 315,
    [`${Location.NORTHWEST},${Location.SOUTHEAST}`]: 45,
    [`${Location.NORTHEAST},${Location.SOUTHWEST}`]: 135
  };
  calculateRotation(motion, location) {
    const motionType = motion.motionType?.toLowerCase();
    switch (motionType) {
      case "static":
        return this.calculateStaticRotation(location);
      case "pro":
        return this.calculateProRotation(motion, location);
      case "anti":
        return this.calculateAntiRotation(motion, location);
      case "dash":
        return this.calculateDashRotation(motion, location);
      case "float":
        return this.calculateFloatRotation(motion, location);
      default:
        console.warn(`Unknown motion type: ${motionType}, returning 0.0`);
        return 0;
    }
  }
  calculateStaticRotation(location) {
    return this.staticRotationMap[location] || 0;
  }
  calculateProRotation(motion, location) {
    const rotationDirection = motion.rotationDirection?.toLowerCase();
    if (rotationDirection === "clockwise" || rotationDirection === "cw") {
      return this.proClockwiseMap[location] || 0;
    } else {
      return this.proCounterClockwiseMap[location] || 0;
    }
  }
  calculateAntiRotation(motion, location) {
    const rotationDirection = motion.rotationDirection?.toLowerCase();
    if (rotationDirection === "clockwise" || rotationDirection === "cw") {
      return this.antiClockwiseMap[location] || 0;
    } else {
      return this.antiCounterClockwiseMap[location] || 0;
    }
  }
  calculateDashRotation(motion, location) {
    const rotationDirection = motion.rotationDirection?.toLowerCase();
    if (rotationDirection === "noRotation" || rotationDirection === "none") {
      const key = `${motion.startLocation},${motion.endLocation}`;
      return this.dashNoRotationMap[key] || 0;
    }
    if (rotationDirection === "clockwise" || rotationDirection === "cw") {
      return this.dashClockwiseMap[location] || 0;
    } else {
      return this.dashCounterClockwiseMap[location] || 0;
    }
  }
  calculateFloatRotation(motion, location) {
    return this.calculateProRotation(motion, location);
  }
  getSupportedMotionTypes() {
    return [
      MotionType.STATIC,
      MotionType.PRO,
      MotionType.ANTI,
      MotionType.DASH,
      MotionType.FLOAT
    ];
  }
  validateMotionData(motion) {
    if (!motion) {
      return false;
    }
    const motionType = motion.motionType?.toLowerCase();
    if (!this.getSupportedMotionTypes().includes(motionType)) {
      return false;
    }
    if (!motion.rotationDirection) {
      return false;
    }
    return true;
  }
}
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiQzovVEtBL3dlYi9zcmMvbGliL3NlcnZpY2VzL3Bvc2l0aW9uaW5nL2Fycm93cy9jYWxjdWxhdGlvbi9BcnJvd1JvdGF0aW9uQ2FsY3VsYXRvci50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHR5cGUgeyBNb3Rpb25EYXRhIH0gZnJvbSBcIiRsaWIvZG9tYWluXCI7XG5pbXBvcnQgeyBMb2NhdGlvbiwgTW90aW9uVHlwZSB9IGZyb20gXCIkbGliL2RvbWFpblwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIElBcnJvd1JvdGF0aW9uQ2FsY3VsYXRvciB7XG4gIGNhbGN1bGF0ZVJvdGF0aW9uKG1vdGlvbjogTW90aW9uRGF0YSwgbG9jYXRpb246IExvY2F0aW9uKTogbnVtYmVyO1xuICBnZXRTdXBwb3J0ZWRNb3Rpb25UeXBlcygpOiBNb3Rpb25UeXBlW107XG4gIHZhbGlkYXRlTW90aW9uRGF0YShtb3Rpb246IE1vdGlvbkRhdGEpOiBib29sZWFuO1xufVxuXG5leHBvcnQgY2xhc3MgQXJyb3dSb3RhdGlvbkNhbGN1bGF0b3IgaW1wbGVtZW50cyBJQXJyb3dSb3RhdGlvbkNhbGN1bGF0b3Ige1xuICAvKipcbiAgICogUHVyZSBhbGdvcml0aG1pYyBzZXJ2aWNlIGZvciBjYWxjdWxhdGluZyBhcnJvdyByb3RhdGlvbiBhbmdsZXMuXG4gICAqXG4gICAqIEltcGxlbWVudHMgcm90YXRpb24gY2FsY3VsYXRpb24gYWxnb3JpdGhtcyB3aXRob3V0IGFueSBVSSBkZXBlbmRlbmNpZXMuXG4gICAqIEVhY2ggbW90aW9uIHR5cGUgaGFzIGl0cyBvd24gcm90YXRpb24gc3RyYXRlZ3kgYmFzZWQgb24gcHJvdmVuIGFsZ29yaXRobXMuXG4gICAqL1xuXG4gIHByaXZhdGUgcmVhZG9ubHkgc3RhdGljUm90YXRpb25NYXA6IFJlY29yZDxMb2NhdGlvbiwgbnVtYmVyPiA9IHtcbiAgICBbTG9jYXRpb24uTk9SVEhdOiAxODAuMCxcbiAgICBbTG9jYXRpb24uTk9SVEhFQVNUXTogMjI1LjAsXG4gICAgW0xvY2F0aW9uLkVBU1RdOiAyNzAuMCxcbiAgICBbTG9jYXRpb24uU09VVEhFQVNUXTogMzE1LjAsXG4gICAgW0xvY2F0aW9uLlNPVVRIXTogMC4wLFxuICAgIFtMb2NhdGlvbi5TT1VUSFdFU1RdOiA0NS4wLFxuICAgIFtMb2NhdGlvbi5XRVNUXTogOTAuMCxcbiAgICBbTG9jYXRpb24uTk9SVEhXRVNUXTogMTM1LjAsXG4gIH07XG5cbiAgcHJpdmF0ZSByZWFkb25seSBwcm9DbG9ja3dpc2VNYXA6IFJlY29yZDxMb2NhdGlvbiwgbnVtYmVyPiA9IHtcbiAgICBbTG9jYXRpb24uTk9SVEhdOiAyMjUsXG4gICAgW0xvY2F0aW9uLkVBU1RdOiAzMTUsXG4gICAgW0xvY2F0aW9uLlNPVVRIXTogNDUsXG4gICAgW0xvY2F0aW9uLldFU1RdOiAxMzUsXG4gICAgW0xvY2F0aW9uLk5PUlRIRUFTVF06IDAsXG4gICAgW0xvY2F0aW9uLlNPVVRIRUFTVF06IDkwLFxuICAgIFtMb2NhdGlvbi5TT1VUSFdFU1RdOiAxODAsXG4gICAgW0xvY2F0aW9uLk5PUlRIV0VTVF06IDI3MCxcbiAgfTtcblxuICBwcml2YXRlIHJlYWRvbmx5IHByb0NvdW50ZXJDbG9ja3dpc2VNYXA6IFJlY29yZDxMb2NhdGlvbiwgbnVtYmVyPiA9IHtcbiAgICBbTG9jYXRpb24uTk9SVEhdOiAyMjUsXG4gICAgW0xvY2F0aW9uLkVBU1RdOiAxMzUsXG4gICAgW0xvY2F0aW9uLlNPVVRIXTogNDUsXG4gICAgW0xvY2F0aW9uLldFU1RdOiAzMTUsXG4gICAgW0xvY2F0aW9uLk5PUlRIRUFTVF06IDkwLFxuICAgIFtMb2NhdGlvbi5TT1VUSEVBU1RdOiAxODAsXG4gICAgW0xvY2F0aW9uLlNPVVRIV0VTVF06IDI3MCxcbiAgICBbTG9jYXRpb24uTk9SVEhXRVNUXTogMCxcbiAgfTtcblxuICBwcml2YXRlIHJlYWRvbmx5IGFudGlDbG9ja3dpc2VNYXA6IFJlY29yZDxMb2NhdGlvbiwgbnVtYmVyPiA9IHtcbiAgICBbTG9jYXRpb24uTk9SVEhdOiAzMTUsXG4gICAgW0xvY2F0aW9uLkVBU1RdOiAyMjUsXG4gICAgW0xvY2F0aW9uLlNPVVRIXTogMTM1LFxuICAgIFtMb2NhdGlvbi5XRVNUXTogNDUsXG4gICAgW0xvY2F0aW9uLk5PUlRIRUFTVF06IDkwLFxuICAgIFtMb2NhdGlvbi5TT1VUSEVBU1RdOiAxODAsXG4gICAgW0xvY2F0aW9uLlNPVVRIV0VTVF06IDI3MCxcbiAgICBbTG9jYXRpb24uTk9SVEhXRVNUXTogMCxcbiAgfTtcblxuICBwcml2YXRlIHJlYWRvbmx5IGFudGlDb3VudGVyQ2xvY2t3aXNlTWFwOiBSZWNvcmQ8TG9jYXRpb24sIG51bWJlcj4gPSB7XG4gICAgW0xvY2F0aW9uLk5PUlRIXTogMzE1LFxuICAgIFtMb2NhdGlvbi5FQVNUXTogNDUsXG4gICAgW0xvY2F0aW9uLlNPVVRIXTogMTM1LFxuICAgIFtMb2NhdGlvbi5XRVNUXTogMjI1LFxuICAgIFtMb2NhdGlvbi5OT1JUSEVBU1RdOiAwLFxuICAgIFtMb2NhdGlvbi5TT1VUSEVBU1RdOiA5MCxcbiAgICBbTG9jYXRpb24uU09VVEhXRVNUXTogMTgwLFxuICAgIFtMb2NhdGlvbi5OT1JUSFdFU1RdOiAyNzAsXG4gIH07XG5cbiAgcHJpdmF0ZSByZWFkb25seSBkYXNoQ2xvY2t3aXNlTWFwOiBSZWNvcmQ8TG9jYXRpb24sIG51bWJlcj4gPSB7XG4gICAgW0xvY2F0aW9uLk5PUlRIXTogMjcwLFxuICAgIFtMb2NhdGlvbi5FQVNUXTogMCxcbiAgICBbTG9jYXRpb24uU09VVEhdOiA5MCxcbiAgICBbTG9jYXRpb24uV0VTVF06IDE4MCxcbiAgICBbTG9jYXRpb24uTk9SVEhFQVNUXTogMzE1LFxuICAgIFtMb2NhdGlvbi5TT1VUSEVBU1RdOiA0NSxcbiAgICBbTG9jYXRpb24uU09VVEhXRVNUXTogMTM1LFxuICAgIFtMb2NhdGlvbi5OT1JUSFdFU1RdOiAyMjUsXG4gIH07XG5cbiAgcHJpdmF0ZSByZWFkb25seSBkYXNoQ291bnRlckNsb2Nrd2lzZU1hcDogUmVjb3JkPExvY2F0aW9uLCBudW1iZXI+ID0ge1xuICAgIFtMb2NhdGlvbi5OT1JUSF06IDI3MCxcbiAgICBbTG9jYXRpb24uRUFTVF06IDE4MCxcbiAgICBbTG9jYXRpb24uU09VVEhdOiA5MCxcbiAgICBbTG9jYXRpb24uV0VTVF06IDAsXG4gICAgW0xvY2F0aW9uLk5PUlRIRUFTVF06IDIyNSxcbiAgICBbTG9jYXRpb24uU09VVEhFQVNUXTogMTM1LFxuICAgIFtMb2NhdGlvbi5TT1VUSFdFU1RdOiA0NSxcbiAgICBbTG9jYXRpb24uTk9SVEhXRVNUXTogMzE1LFxuICB9O1xuXG4gIHByaXZhdGUgcmVhZG9ubHkgZGFzaE5vUm90YXRpb25NYXA6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7XG4gICAgW2Ake0xvY2F0aW9uLk5PUlRIfSwke0xvY2F0aW9uLlNPVVRIfWBdOiA5MCxcbiAgICBbYCR7TG9jYXRpb24uRUFTVH0sJHtMb2NhdGlvbi5XRVNUfWBdOiAxODAsXG4gICAgW2Ake0xvY2F0aW9uLlNPVVRIfSwke0xvY2F0aW9uLk5PUlRIfWBdOiAyNzAsXG4gICAgW2Ake0xvY2F0aW9uLldFU1R9LCR7TG9jYXRpb24uRUFTVH1gXTogMCxcbiAgICBbYCR7TG9jYXRpb24uU09VVEhFQVNUfSwke0xvY2F0aW9uLk5PUlRIV0VTVH1gXTogMjI1LFxuICAgIFtgJHtMb2NhdGlvbi5TT1VUSFdFU1R9LCR7TG9jYXRpb24uTk9SVEhFQVNUfWBdOiAzMTUsXG4gICAgW2Ake0xvY2F0aW9uLk5PUlRIV0VTVH0sJHtMb2NhdGlvbi5TT1VUSEVBU1R9YF06IDQ1LFxuICAgIFtgJHtMb2NhdGlvbi5OT1JUSEVBU1R9LCR7TG9jYXRpb24uU09VVEhXRVNUfWBdOiAxMzUsXG4gIH07XG5cbiAgY2FsY3VsYXRlUm90YXRpb24obW90aW9uOiBNb3Rpb25EYXRhLCBsb2NhdGlvbjogTG9jYXRpb24pOiBudW1iZXIge1xuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZSBhcnJvdyByb3RhdGlvbiBhbmdsZSBiYXNlZCBvbiBtb3Rpb24gdHlwZSBhbmQgbG9jYXRpb24uXG4gICAgICpcbiAgICAgKiBBcmdzOlxuICAgICAqICAgICBtb3Rpb246IE1vdGlvbiBkYXRhIGNvbnRhaW5pbmcgdHlwZSBhbmQgcm90YXRpb24gZGlyZWN0aW9uXG4gICAgICogICAgIGxvY2F0aW9uOiBDYWxjdWxhdGVkIGFycm93IGxvY2F0aW9uXG4gICAgICpcbiAgICAgKiBSZXR1cm5zOlxuICAgICAqICAgICBSb3RhdGlvbiBhbmdsZSBpbiBkZWdyZWVzICgwLTM2MClcbiAgICAgKi9cbiAgICBjb25zdCBtb3Rpb25UeXBlID0gbW90aW9uLm1vdGlvblR5cGU/LnRvTG93ZXJDYXNlKCk7XG5cbiAgICBzd2l0Y2ggKG1vdGlvblR5cGUpIHtcbiAgICAgIGNhc2UgXCJzdGF0aWNcIjpcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FsY3VsYXRlU3RhdGljUm90YXRpb24obG9jYXRpb24pO1xuICAgICAgY2FzZSBcInByb1wiOlxuICAgICAgICByZXR1cm4gdGhpcy5jYWxjdWxhdGVQcm9Sb3RhdGlvbihtb3Rpb24sIGxvY2F0aW9uKTtcbiAgICAgIGNhc2UgXCJhbnRpXCI6XG4gICAgICAgIHJldHVybiB0aGlzLmNhbGN1bGF0ZUFudGlSb3RhdGlvbihtb3Rpb24sIGxvY2F0aW9uKTtcbiAgICAgIGNhc2UgXCJkYXNoXCI6XG4gICAgICAgIHJldHVybiB0aGlzLmNhbGN1bGF0ZURhc2hSb3RhdGlvbihtb3Rpb24sIGxvY2F0aW9uKTtcbiAgICAgIGNhc2UgXCJmbG9hdFwiOlxuICAgICAgICByZXR1cm4gdGhpcy5jYWxjdWxhdGVGbG9hdFJvdGF0aW9uKG1vdGlvbiwgbG9jYXRpb24pO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgY29uc29sZS53YXJuKGBVbmtub3duIG1vdGlvbiB0eXBlOiAke21vdGlvblR5cGV9LCByZXR1cm5pbmcgMC4wYCk7XG4gICAgICAgIHJldHVybiAwLjA7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjYWxjdWxhdGVTdGF0aWNSb3RhdGlvbihsb2NhdGlvbjogTG9jYXRpb24pOiBudW1iZXIge1xuICAgIC8qKkNhbGN1bGF0ZSByb3RhdGlvbiBmb3Igc3RhdGljIGFycm93cyAocG9pbnQgaW53YXJkKS4qL1xuICAgIHJldHVybiB0aGlzLnN0YXRpY1JvdGF0aW9uTWFwW2xvY2F0aW9uXSB8fCAwLjA7XG4gIH1cblxuICBwcml2YXRlIGNhbGN1bGF0ZVByb1JvdGF0aW9uKG1vdGlvbjogTW90aW9uRGF0YSwgbG9jYXRpb246IExvY2F0aW9uKTogbnVtYmVyIHtcbiAgICAvKipDYWxjdWxhdGUgcm90YXRpb24gZm9yIFBSTyBhcnJvd3MgYmFzZWQgb24gcm90YXRpb24gZGlyZWN0aW9uLiovXG4gICAgY29uc3Qgcm90YXRpb25EaXJlY3Rpb24gPSBtb3Rpb24ucm90YXRpb25EaXJlY3Rpb24/LnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKHJvdGF0aW9uRGlyZWN0aW9uID09PSBcImNsb2Nrd2lzZVwiIHx8IHJvdGF0aW9uRGlyZWN0aW9uID09PSBcImN3XCIpIHtcbiAgICAgIHJldHVybiB0aGlzLnByb0Nsb2Nrd2lzZU1hcFtsb2NhdGlvbl0gfHwgMC4wO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm9Db3VudGVyQ2xvY2t3aXNlTWFwW2xvY2F0aW9uXSB8fCAwLjA7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjYWxjdWxhdGVBbnRpUm90YXRpb24oXG4gICAgbW90aW9uOiBNb3Rpb25EYXRhLFxuICAgIGxvY2F0aW9uOiBMb2NhdGlvblxuICApOiBudW1iZXIge1xuICAgIC8qKkNhbGN1bGF0ZSByb3RhdGlvbiBmb3IgQU5USSBhcnJvd3MgYmFzZWQgb24gcm90YXRpb24gZGlyZWN0aW9uLiovXG4gICAgY29uc3Qgcm90YXRpb25EaXJlY3Rpb24gPSBtb3Rpb24ucm90YXRpb25EaXJlY3Rpb24/LnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKHJvdGF0aW9uRGlyZWN0aW9uID09PSBcImNsb2Nrd2lzZVwiIHx8IHJvdGF0aW9uRGlyZWN0aW9uID09PSBcImN3XCIpIHtcbiAgICAgIHJldHVybiB0aGlzLmFudGlDbG9ja3dpc2VNYXBbbG9jYXRpb25dIHx8IDAuMDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuYW50aUNvdW50ZXJDbG9ja3dpc2VNYXBbbG9jYXRpb25dIHx8IDAuMDtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGNhbGN1bGF0ZURhc2hSb3RhdGlvbihcbiAgICBtb3Rpb246IE1vdGlvbkRhdGEsXG4gICAgbG9jYXRpb246IExvY2F0aW9uXG4gICk6IG51bWJlciB7XG4gICAgLyoqQ2FsY3VsYXRlIHJvdGF0aW9uIGZvciBEQVNIIGFycm93cyB3aXRoIHNwZWNpYWwgTk9fUk9UQVRJT04gaGFuZGxpbmcuKi9cbiAgICBjb25zdCByb3RhdGlvbkRpcmVjdGlvbiA9IG1vdGlvbi5yb3RhdGlvbkRpcmVjdGlvbj8udG9Mb3dlckNhc2UoKTtcblxuICAgIGlmIChyb3RhdGlvbkRpcmVjdGlvbiA9PT0gXCJub1JvdGF0aW9uXCIgfHwgcm90YXRpb25EaXJlY3Rpb24gPT09IFwibm9uZVwiKSB7XG4gICAgICBjb25zdCBrZXkgPSBgJHttb3Rpb24uc3RhcnRMb2NhdGlvbn0sJHttb3Rpb24uZW5kTG9jYXRpb259YDtcbiAgICAgIHJldHVybiB0aGlzLmRhc2hOb1JvdGF0aW9uTWFwW2tleV0gfHwgMC4wO1xuICAgIH1cblxuICAgIGlmIChyb3RhdGlvbkRpcmVjdGlvbiA9PT0gXCJjbG9ja3dpc2VcIiB8fCByb3RhdGlvbkRpcmVjdGlvbiA9PT0gXCJjd1wiKSB7XG4gICAgICByZXR1cm4gdGhpcy5kYXNoQ2xvY2t3aXNlTWFwW2xvY2F0aW9uXSB8fCAwLjA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLmRhc2hDb3VudGVyQ2xvY2t3aXNlTWFwW2xvY2F0aW9uXSB8fCAwLjA7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjYWxjdWxhdGVGbG9hdFJvdGF0aW9uKFxuICAgIG1vdGlvbjogTW90aW9uRGF0YSxcbiAgICBsb2NhdGlvbjogTG9jYXRpb25cbiAgKTogbnVtYmVyIHtcbiAgICAvKipDYWxjdWxhdGUgcm90YXRpb24gZm9yIEZMT0FUIGFycm93cyAoc2ltaWxhciB0byBQUk8pLiovXG4gICAgcmV0dXJuIHRoaXMuY2FsY3VsYXRlUHJvUm90YXRpb24obW90aW9uLCBsb2NhdGlvbik7XG4gIH1cblxuICBnZXRTdXBwb3J0ZWRNb3Rpb25UeXBlcygpOiBNb3Rpb25UeXBlW10ge1xuICAgIC8qKkdldCBsaXN0IG9mIG1vdGlvbiB0eXBlcyBzdXBwb3J0ZWQgYnkgdGhpcyBjYWxjdWxhdG9yLiovXG4gICAgcmV0dXJuIFtcbiAgICAgIE1vdGlvblR5cGUuU1RBVElDLFxuICAgICAgTW90aW9uVHlwZS5QUk8sXG4gICAgICBNb3Rpb25UeXBlLkFOVEksXG4gICAgICBNb3Rpb25UeXBlLkRBU0gsXG4gICAgICBNb3Rpb25UeXBlLkZMT0FULFxuICAgIF07XG4gIH1cblxuICB2YWxpZGF0ZU1vdGlvbkRhdGEobW90aW9uOiBNb3Rpb25EYXRhKTogYm9vbGVhbiB7XG4gICAgLyoqVmFsaWRhdGUgdGhhdCBtb3Rpb24gZGF0YSBpcyBzdWl0YWJsZSBmb3Igcm90YXRpb24gY2FsY3VsYXRpb24uKi9cbiAgICBpZiAoIW1vdGlvbikge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IG1vdGlvblR5cGUgPSBtb3Rpb24ubW90aW9uVHlwZT8udG9Mb3dlckNhc2UoKTtcbiAgICBpZiAoIXRoaXMuZ2V0U3VwcG9ydGVkTW90aW9uVHlwZXMoKS5pbmNsdWRlcyhtb3Rpb25UeXBlIGFzIE1vdGlvblR5cGUpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKCFtb3Rpb24ucm90YXRpb25EaXJlY3Rpb24pIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1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
