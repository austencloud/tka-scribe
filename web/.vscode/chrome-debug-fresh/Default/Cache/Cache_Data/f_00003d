export class SectionService {
  async organizeSections(sequences, config) {
    if (config.groupBy === "none") {
      return [
        {
          id: "all",
          title: "All Sequences",
          count: sequences.length,
          sequences,
          isExpanded: true,
          sortOrder: 0
        }
      ];
    }
    const grouped = this.groupSequences(sequences, config.groupBy);
    const sections = this.createSections(grouped, config);
    return this.sortSections(sections, config.groupBy);
  }
  toggleSectionExpansion(sectionId, sections) {
    return sections.map((section) => ({
      ...section,
      isExpanded: section.id === sectionId ? !section.isExpanded : section.isExpanded
    }));
  }
  getDefaultSectionConfiguration() {
    return {
      groupBy: "letter",
      sortMethod: "alphabetical",
      showEmptySections: false,
      expandedSections: /* @__PURE__ */ new Set(["A", "B", "C"])
      // Default expand first few sections
    };
  }
  updateSectionConfiguration(config, updates) {
    return {
      ...config,
      ...updates
    };
  }
  getSectionStatistics(sections) {
    const totalSections = sections.length;
    const totalSequences = sections.reduce(
      (sum, section) => sum + section.count,
      0
    );
    const expandedSections = sections.filter(
      (section) => section.isExpanded
    ).length;
    const averageSequencesPerSection = totalSections > 0 ? totalSequences / totalSections : 0;
    return {
      totalSections,
      totalSequences,
      expandedSections,
      averageSequencesPerSection: Math.round(averageSequencesPerSection * 10) / 10
    };
  }
  // Private helper methods
  groupSequences(sequences, groupBy) {
    const groups = /* @__PURE__ */ new Map();
    sequences.forEach((sequence) => {
      const key = this.getGroupKey(sequence, groupBy);
      if (!groups.has(key)) {
        groups.set(key, []);
      }
      const group = groups.get(key);
      if (group) {
        group.push(sequence);
      }
    });
    return groups;
  }
  getGroupKey(sequence, groupBy) {
    switch (groupBy) {
      case "letter":
        return sequence.word.charAt(0).toUpperCase();
      case "length": {
        const length = sequence.sequenceLength || sequence.word.length;
        return `${length} beats`;
      }
      case "difficulty":
        return sequence.difficultyLevel || "Unknown";
      case "author":
        return sequence.author || "Unknown Author";
      case "date": {
        if (!sequence.dateAdded) return "Unknown Date";
        const date = new Date(sequence.dateAdded);
        return date.toDateString();
      }
      default:
        return "All";
    }
  }
  createSections(grouped, config) {
    const sections = [];
    grouped.forEach((sequences, key) => {
      if (!config.showEmptySections && sequences.length === 0) {
        return;
      }
      const section = {
        id: this.createSectionId(key, config.groupBy),
        title: this.createSectionTitle(key, config.groupBy, sequences.length),
        count: sequences.length,
        sequences: this.sortSequencesInSection(sequences, config.sortMethod),
        isExpanded: config.expandedSections?.has(key) ?? false,
        sortOrder: this.getSectionSortOrder(key, config.groupBy)
      };
      sections.push(section);
    });
    return sections;
  }
  createSectionId(key, groupBy) {
    return `${groupBy}-${key.toLowerCase().replace(/\s+/g, "-")}`;
  }
  createSectionTitle(key, groupBy, count) {
    const countText = count === 1 ? "1 sequence" : `${count} sequences`;
    switch (groupBy) {
      case "letter":
        return `${key} (${countText})`;
      case "length":
        return `${key} (${countText})`;
      case "difficulty": {
        const difficultyEmoji = {
          beginner: "ðŸŸ¢",
          intermediate: "ðŸŸ¡",
          advanced: "ðŸ”´",
          Unknown: "âšª"
        }[key] || "âšª";
        return `${difficultyEmoji} ${key} (${countText})`;
      }
      case "author":
        return `ðŸ‘¤ ${key} (${countText})`;
      case "date":
        return `ðŸ“… ${this.formatDateForSection(key)} (${countText})`;
      default:
        return `${key} (${countText})`;
    }
  }
  sortSequencesInSection(sequences, sortMethod) {
    const sorted = [...sequences];
    switch (sortMethod) {
      case "alphabetical":
        return sorted.sort((a, b) => a.word.localeCompare(b.word));
      case "difficultyLevel":
        return sorted.sort((a, b) => {
          const getDifficultyOrder = (level) => {
            switch (level) {
              case "beginner":
                return 1;
              case "intermediate":
                return 2;
              case "advanced":
                return 3;
              default:
                return 0;
            }
          };
          return getDifficultyOrder(a.difficultyLevel) - getDifficultyOrder(b.difficultyLevel);
        });
      case "sequenceLength":
        return sorted.sort((a, b) => {
          const lengthA = a.sequenceLength || a.word.length;
          const lengthB = b.sequenceLength || b.word.length;
          return lengthA - lengthB;
        });
      case "dateAdded":
        return sorted.sort((a, b) => {
          const dateA = a.dateAdded ? new Date(a.dateAdded).getTime() : 0;
          const dateB = b.dateAdded ? new Date(b.dateAdded).getTime() : 0;
          return dateB - dateA;
        });
      case "author":
        return sorted.sort(
          (a, b) => (a.author || "").localeCompare(b.author || "")
        );
      default:
        return sorted;
    }
  }
  sortSections(sections, _groupBy) {
    return sections.sort((a, b) => {
      if (a.sortOrder !== b.sortOrder) {
        return a.sortOrder - b.sortOrder;
      }
      return a.title.localeCompare(b.title);
    });
  }
  getSectionSortOrder(key, groupBy) {
    switch (groupBy) {
      case "letter":
        return key.charCodeAt(0);
      case "length": {
        const match = key.match(/^(\d+)/);
        return match && match[1] ? parseInt(match[1]) : 999;
      }
      case "difficulty": {
        const difficultyOrder = {
          beginner: 1,
          intermediate: 2,
          advanced: 3,
          Unknown: 4
        };
        return difficultyOrder[key] || 999;
      }
      case "author":
        return 0;
      // Will be sorted by title comparison
      case "date": {
        const date = new Date(key);
        return -date.getTime();
      }
      default:
        return 0;
    }
  }
  formatDateForSection(dateString) {
    const date = new Date(dateString);
    const now = /* @__PURE__ */ new Date();
    const diffTime = now.getTime() - date.getTime();
    const diffDays = Math.floor(diffTime / (1e3 * 60 * 60 * 24));
    if (diffDays === 0) return "Today";
    if (diffDays === 1) return "Yesterday";
    if (diffDays < 7) return `${diffDays} days ago`;
    if (diffDays < 30) return `${Math.floor(diffDays / 7)} weeks ago`;
    return date.toLocaleDateString();
  }
  // Additional methods required by browse-interfaces.ts
  async organizeIntoSections(sequences, config) {
    return this.organizeSections(sequences, config);
  }
  async getSectionConfiguration(sortMethod) {
    return {
      groupBy: "letter",
      sortMethod,
      showEmptySections: false,
      expandedSections: /* @__PURE__ */ new Set()
    };
  }
}
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiQzovVEtBL3dlYi9zcmMvbGliL3NlcnZpY2VzL2ltcGxlbWVudGF0aW9ucy9uYXZpZ2F0aW9uL1NlY3Rpb25TZXJ2aWNlLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyIvKipcbiAqIFNlY3Rpb24gU2VydmljZSAtIE1hbmFnZXMgc2VxdWVuY2Ugc2VjdGlvbiBvcmdhbml6YXRpb25cbiAqXG4gKiBIYW5kbGVzIGdyb3VwaW5nIHNlcXVlbmNlcyBpbnRvIHNlY3Rpb25zIHdpdGggaGVhZGVycyBhbmQgY291bnRzLFxuICogZm9sbG93aW5nIHRoZSBtaWNyb3NlcnZpY2VzIGFyY2hpdGVjdHVyZSBwYXR0ZXJuLlxuICovXG5cbmltcG9ydCB0eXBlIHsgU2VxdWVuY2VEYXRhLCBTb3J0TWV0aG9kIH0gZnJvbSBcIi4uLy4uL2ludGVyZmFjZXMvZG9tYWluLXR5cGVzXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2VxdWVuY2VTZWN0aW9uIHtcbiAgaWQ6IHN0cmluZztcbiAgdGl0bGU6IHN0cmluZztcbiAgY291bnQ6IG51bWJlcjtcbiAgc2VxdWVuY2VzOiBTZXF1ZW5jZURhdGFbXTtcbiAgaXNFeHBhbmRlZDogYm9vbGVhbjtcbiAgc29ydE9yZGVyOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2VjdGlvbkNvbmZpZ3VyYXRpb24ge1xuICBncm91cEJ5OiBcImxldHRlclwiIHwgXCJsZW5ndGhcIiB8IFwiZGlmZmljdWx0eVwiIHwgXCJhdXRob3JcIiB8IFwiZGF0ZVwiIHwgXCJub25lXCI7XG4gIHNvcnRNZXRob2Q6IFNvcnRNZXRob2Q7XG4gIHNob3dFbXB0eVNlY3Rpb25zOiBib29sZWFuO1xuICBleHBhbmRlZFNlY3Rpb25zPzogU2V0PHN0cmluZz47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVNlY3Rpb25TZXJ2aWNlIHtcbiAgLyoqIE9yZ2FuaXplIHNlcXVlbmNlcyBpbnRvIHNlY3Rpb25zIGJhc2VkIG9uIGNvbmZpZ3VyYXRpb24gKi9cbiAgb3JnYW5pemVTZWN0aW9ucyhcbiAgICBzZXF1ZW5jZXM6IFNlcXVlbmNlRGF0YVtdLFxuICAgIGNvbmZpZzogU2VjdGlvbkNvbmZpZ3VyYXRpb25cbiAgKTogUHJvbWlzZTxTZXF1ZW5jZVNlY3Rpb25bXT47XG5cbiAgLyoqIFRvZ2dsZSBzZWN0aW9uIGV4cGFuc2lvbiBzdGF0ZSAqL1xuICB0b2dnbGVTZWN0aW9uRXhwYW5zaW9uKFxuICAgIHNlY3Rpb25JZDogc3RyaW5nLFxuICAgIHNlY3Rpb25zOiBTZXF1ZW5jZVNlY3Rpb25bXVxuICApOiBTZXF1ZW5jZVNlY3Rpb25bXTtcblxuICAvKiogR2V0IGRlZmF1bHQgc2VjdGlvbiBjb25maWd1cmF0aW9uICovXG4gIGdldERlZmF1bHRTZWN0aW9uQ29uZmlndXJhdGlvbigpOiBTZWN0aW9uQ29uZmlndXJhdGlvbjtcblxuICAvKiogVXBkYXRlIHNlY3Rpb24gY29uZmlndXJhdGlvbiAqL1xuICB1cGRhdGVTZWN0aW9uQ29uZmlndXJhdGlvbihcbiAgICBjb25maWc6IFNlY3Rpb25Db25maWd1cmF0aW9uLFxuICAgIHVwZGF0ZXM6IFBhcnRpYWw8U2VjdGlvbkNvbmZpZ3VyYXRpb24+XG4gICk6IFNlY3Rpb25Db25maWd1cmF0aW9uO1xuXG4gIC8qKiBHZXQgc2VjdGlvbiBzdGF0aXN0aWNzICovXG4gIGdldFNlY3Rpb25TdGF0aXN0aWNzKHNlY3Rpb25zOiBTZXF1ZW5jZVNlY3Rpb25bXSk6IHtcbiAgICB0b3RhbFNlY3Rpb25zOiBudW1iZXI7XG4gICAgdG90YWxTZXF1ZW5jZXM6IG51bWJlcjtcbiAgICBleHBhbmRlZFNlY3Rpb25zOiBudW1iZXI7XG4gICAgYXZlcmFnZVNlcXVlbmNlc1BlclNlY3Rpb246IG51bWJlcjtcbiAgfTtcbn1cblxuZXhwb3J0IGNsYXNzIFNlY3Rpb25TZXJ2aWNlIGltcGxlbWVudHMgSVNlY3Rpb25TZXJ2aWNlIHtcbiAgYXN5bmMgb3JnYW5pemVTZWN0aW9ucyhcbiAgICBzZXF1ZW5jZXM6IFNlcXVlbmNlRGF0YVtdLFxuICAgIGNvbmZpZzogU2VjdGlvbkNvbmZpZ3VyYXRpb25cbiAgKTogUHJvbWlzZTxTZXF1ZW5jZVNlY3Rpb25bXT4ge1xuICAgIGlmIChjb25maWcuZ3JvdXBCeSA9PT0gXCJub25lXCIpIHtcbiAgICAgIHJldHVybiBbXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogXCJhbGxcIixcbiAgICAgICAgICB0aXRsZTogXCJBbGwgU2VxdWVuY2VzXCIsXG4gICAgICAgICAgY291bnQ6IHNlcXVlbmNlcy5sZW5ndGgsXG4gICAgICAgICAgc2VxdWVuY2VzLFxuICAgICAgICAgIGlzRXhwYW5kZWQ6IHRydWUsXG4gICAgICAgICAgc29ydE9yZGVyOiAwLFxuICAgICAgICB9LFxuICAgICAgXTtcbiAgICB9XG5cbiAgICBjb25zdCBncm91cGVkID0gdGhpcy5ncm91cFNlcXVlbmNlcyhzZXF1ZW5jZXMsIGNvbmZpZy5ncm91cEJ5KTtcbiAgICBjb25zdCBzZWN0aW9ucyA9IHRoaXMuY3JlYXRlU2VjdGlvbnMoZ3JvdXBlZCwgY29uZmlnKTtcblxuICAgIHJldHVybiB0aGlzLnNvcnRTZWN0aW9ucyhzZWN0aW9ucywgY29uZmlnLmdyb3VwQnkpO1xuICB9XG5cbiAgdG9nZ2xlU2VjdGlvbkV4cGFuc2lvbihcbiAgICBzZWN0aW9uSWQ6IHN0cmluZyxcbiAgICBzZWN0aW9uczogU2VxdWVuY2VTZWN0aW9uW11cbiAgKTogU2VxdWVuY2VTZWN0aW9uW10ge1xuICAgIHJldHVybiBzZWN0aW9ucy5tYXAoKHNlY3Rpb24pID0+ICh7XG4gICAgICAuLi5zZWN0aW9uLFxuICAgICAgaXNFeHBhbmRlZDpcbiAgICAgICAgc2VjdGlvbi5pZCA9PT0gc2VjdGlvbklkID8gIXNlY3Rpb24uaXNFeHBhbmRlZCA6IHNlY3Rpb24uaXNFeHBhbmRlZCxcbiAgICB9KSk7XG4gIH1cblxuICBnZXREZWZhdWx0U2VjdGlvbkNvbmZpZ3VyYXRpb24oKTogU2VjdGlvbkNvbmZpZ3VyYXRpb24ge1xuICAgIHJldHVybiB7XG4gICAgICBncm91cEJ5OiBcImxldHRlclwiLFxuICAgICAgc29ydE1ldGhvZDogXCJhbHBoYWJldGljYWxcIiBhcyBTb3J0TWV0aG9kLFxuICAgICAgc2hvd0VtcHR5U2VjdGlvbnM6IGZhbHNlLFxuICAgICAgZXhwYW5kZWRTZWN0aW9uczogbmV3IFNldChbXCJBXCIsIFwiQlwiLCBcIkNcIl0pLCAvLyBEZWZhdWx0IGV4cGFuZCBmaXJzdCBmZXcgc2VjdGlvbnNcbiAgICB9O1xuICB9XG5cbiAgdXBkYXRlU2VjdGlvbkNvbmZpZ3VyYXRpb24oXG4gICAgY29uZmlnOiBTZWN0aW9uQ29uZmlndXJhdGlvbixcbiAgICB1cGRhdGVzOiBQYXJ0aWFsPFNlY3Rpb25Db25maWd1cmF0aW9uPlxuICApOiBTZWN0aW9uQ29uZmlndXJhdGlvbiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLmNvbmZpZyxcbiAgICAgIC4uLnVwZGF0ZXMsXG4gICAgfTtcbiAgfVxuXG4gIGdldFNlY3Rpb25TdGF0aXN0aWNzKHNlY3Rpb25zOiBTZXF1ZW5jZVNlY3Rpb25bXSkge1xuICAgIGNvbnN0IHRvdGFsU2VjdGlvbnMgPSBzZWN0aW9ucy5sZW5ndGg7XG4gICAgY29uc3QgdG90YWxTZXF1ZW5jZXMgPSBzZWN0aW9ucy5yZWR1Y2UoXG4gICAgICAoc3VtLCBzZWN0aW9uKSA9PiBzdW0gKyBzZWN0aW9uLmNvdW50LFxuICAgICAgMFxuICAgICk7XG4gICAgY29uc3QgZXhwYW5kZWRTZWN0aW9ucyA9IHNlY3Rpb25zLmZpbHRlcihcbiAgICAgIChzZWN0aW9uKSA9PiBzZWN0aW9uLmlzRXhwYW5kZWRcbiAgICApLmxlbmd0aDtcbiAgICBjb25zdCBhdmVyYWdlU2VxdWVuY2VzUGVyU2VjdGlvbiA9XG4gICAgICB0b3RhbFNlY3Rpb25zID4gMCA/IHRvdGFsU2VxdWVuY2VzIC8gdG90YWxTZWN0aW9ucyA6IDA7XG5cbiAgICByZXR1cm4ge1xuICAgICAgdG90YWxTZWN0aW9ucyxcbiAgICAgIHRvdGFsU2VxdWVuY2VzLFxuICAgICAgZXhwYW5kZWRTZWN0aW9ucyxcbiAgICAgIGF2ZXJhZ2VTZXF1ZW5jZXNQZXJTZWN0aW9uOlxuICAgICAgICBNYXRoLnJvdW5kKGF2ZXJhZ2VTZXF1ZW5jZXNQZXJTZWN0aW9uICogMTApIC8gMTAsXG4gICAgfTtcbiAgfVxuXG4gIC8vIFByaXZhdGUgaGVscGVyIG1ldGhvZHNcbiAgcHJpdmF0ZSBncm91cFNlcXVlbmNlcyhcbiAgICBzZXF1ZW5jZXM6IFNlcXVlbmNlRGF0YVtdLFxuICAgIGdyb3VwQnk6IFNlY3Rpb25Db25maWd1cmF0aW9uW1wiZ3JvdXBCeVwiXVxuICApOiBNYXA8c3RyaW5nLCBTZXF1ZW5jZURhdGFbXT4ge1xuICAgIGNvbnN0IGdyb3VwcyA9IG5ldyBNYXA8c3RyaW5nLCBTZXF1ZW5jZURhdGFbXT4oKTtcblxuICAgIHNlcXVlbmNlcy5mb3JFYWNoKChzZXF1ZW5jZSkgPT4ge1xuICAgICAgY29uc3Qga2V5ID0gdGhpcy5nZXRHcm91cEtleShzZXF1ZW5jZSwgZ3JvdXBCeSk7XG4gICAgICBpZiAoIWdyb3Vwcy5oYXMoa2V5KSkge1xuICAgICAgICBncm91cHMuc2V0KGtleSwgW10pO1xuICAgICAgfVxuICAgICAgY29uc3QgZ3JvdXAgPSBncm91cHMuZ2V0KGtleSk7XG4gICAgICBpZiAoZ3JvdXApIHtcbiAgICAgICAgZ3JvdXAucHVzaChzZXF1ZW5jZSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gZ3JvdXBzO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRHcm91cEtleShcbiAgICBzZXF1ZW5jZTogU2VxdWVuY2VEYXRhLFxuICAgIGdyb3VwQnk6IFNlY3Rpb25Db25maWd1cmF0aW9uW1wiZ3JvdXBCeVwiXVxuICApOiBzdHJpbmcge1xuICAgIHN3aXRjaCAoZ3JvdXBCeSkge1xuICAgICAgY2FzZSBcImxldHRlclwiOlxuICAgICAgICByZXR1cm4gc2VxdWVuY2Uud29yZC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKTtcblxuICAgICAgY2FzZSBcImxlbmd0aFwiOiB7XG4gICAgICAgIGNvbnN0IGxlbmd0aCA9IHNlcXVlbmNlLnNlcXVlbmNlTGVuZ3RoIHx8IHNlcXVlbmNlLndvcmQubGVuZ3RoO1xuICAgICAgICByZXR1cm4gYCR7bGVuZ3RofSBiZWF0c2A7XG4gICAgICB9XG5cbiAgICAgIGNhc2UgXCJkaWZmaWN1bHR5XCI6XG4gICAgICAgIHJldHVybiBzZXF1ZW5jZS5kaWZmaWN1bHR5TGV2ZWwgfHwgXCJVbmtub3duXCI7XG5cbiAgICAgIGNhc2UgXCJhdXRob3JcIjpcbiAgICAgICAgcmV0dXJuIHNlcXVlbmNlLmF1dGhvciB8fCBcIlVua25vd24gQXV0aG9yXCI7XG5cbiAgICAgIGNhc2UgXCJkYXRlXCI6IHtcbiAgICAgICAgaWYgKCFzZXF1ZW5jZS5kYXRlQWRkZWQpIHJldHVybiBcIlVua25vd24gRGF0ZVwiO1xuICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoc2VxdWVuY2UuZGF0ZUFkZGVkKTtcbiAgICAgICAgcmV0dXJuIGRhdGUudG9EYXRlU3RyaW5nKCk7XG4gICAgICB9XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBcIkFsbFwiO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlU2VjdGlvbnMoXG4gICAgZ3JvdXBlZDogTWFwPHN0cmluZywgU2VxdWVuY2VEYXRhW10+LFxuICAgIGNvbmZpZzogU2VjdGlvbkNvbmZpZ3VyYXRpb25cbiAgKTogU2VxdWVuY2VTZWN0aW9uW10ge1xuICAgIGNvbnN0IHNlY3Rpb25zOiBTZXF1ZW5jZVNlY3Rpb25bXSA9IFtdO1xuXG4gICAgZ3JvdXBlZC5mb3JFYWNoKChzZXF1ZW5jZXMsIGtleSkgPT4ge1xuICAgICAgaWYgKCFjb25maWcuc2hvd0VtcHR5U2VjdGlvbnMgJiYgc2VxdWVuY2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHNlY3Rpb246IFNlcXVlbmNlU2VjdGlvbiA9IHtcbiAgICAgICAgaWQ6IHRoaXMuY3JlYXRlU2VjdGlvbklkKGtleSwgY29uZmlnLmdyb3VwQnkpLFxuICAgICAgICB0aXRsZTogdGhpcy5jcmVhdGVTZWN0aW9uVGl0bGUoa2V5LCBjb25maWcuZ3JvdXBCeSwgc2VxdWVuY2VzLmxlbmd0aCksXG4gICAgICAgIGNvdW50OiBzZXF1ZW5jZXMubGVuZ3RoLFxuICAgICAgICBzZXF1ZW5jZXM6IHRoaXMuc29ydFNlcXVlbmNlc0luU2VjdGlvbihzZXF1ZW5jZXMsIGNvbmZpZy5zb3J0TWV0aG9kKSxcbiAgICAgICAgaXNFeHBhbmRlZDogY29uZmlnLmV4cGFuZGVkU2VjdGlvbnM/LmhhcyhrZXkpID8/IGZhbHNlLFxuICAgICAgICBzb3J0T3JkZXI6IHRoaXMuZ2V0U2VjdGlvblNvcnRPcmRlcihrZXksIGNvbmZpZy5ncm91cEJ5KSxcbiAgICAgIH07XG5cbiAgICAgIHNlY3Rpb25zLnB1c2goc2VjdGlvbik7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gc2VjdGlvbnM7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZVNlY3Rpb25JZChcbiAgICBrZXk6IHN0cmluZyxcbiAgICBncm91cEJ5OiBTZWN0aW9uQ29uZmlndXJhdGlvbltcImdyb3VwQnlcIl1cbiAgKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYCR7Z3JvdXBCeX0tJHtrZXkudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9cXHMrL2csIFwiLVwiKX1gO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVTZWN0aW9uVGl0bGUoXG4gICAga2V5OiBzdHJpbmcsXG4gICAgZ3JvdXBCeTogU2VjdGlvbkNvbmZpZ3VyYXRpb25bXCJncm91cEJ5XCJdLFxuICAgIGNvdW50OiBudW1iZXJcbiAgKTogc3RyaW5nIHtcbiAgICBjb25zdCBjb3VudFRleHQgPSBjb3VudCA9PT0gMSA/IFwiMSBzZXF1ZW5jZVwiIDogYCR7Y291bnR9IHNlcXVlbmNlc2A7XG5cbiAgICBzd2l0Y2ggKGdyb3VwQnkpIHtcbiAgICAgIGNhc2UgXCJsZXR0ZXJcIjpcbiAgICAgICAgcmV0dXJuIGAke2tleX0gKCR7Y291bnRUZXh0fSlgO1xuXG4gICAgICBjYXNlIFwibGVuZ3RoXCI6XG4gICAgICAgIHJldHVybiBgJHtrZXl9ICgke2NvdW50VGV4dH0pYDtcblxuICAgICAgY2FzZSBcImRpZmZpY3VsdHlcIjoge1xuICAgICAgICBjb25zdCBkaWZmaWN1bHR5RW1vamkgPVxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGJlZ2lubmVyOiBcIvCfn6JcIixcbiAgICAgICAgICAgIGludGVybWVkaWF0ZTogXCLwn5+hXCIsXG4gICAgICAgICAgICBhZHZhbmNlZDogXCLwn5S0XCIsXG4gICAgICAgICAgICBVbmtub3duOiBcIuKaqlwiLFxuICAgICAgICAgIH1ba2V5XSB8fCBcIuKaqlwiO1xuICAgICAgICByZXR1cm4gYCR7ZGlmZmljdWx0eUVtb2ppfSAke2tleX0gKCR7Y291bnRUZXh0fSlgO1xuICAgICAgfVxuXG4gICAgICBjYXNlIFwiYXV0aG9yXCI6XG4gICAgICAgIHJldHVybiBg8J+RpCAke2tleX0gKCR7Y291bnRUZXh0fSlgO1xuXG4gICAgICBjYXNlIFwiZGF0ZVwiOlxuICAgICAgICByZXR1cm4gYPCfk4UgJHt0aGlzLmZvcm1hdERhdGVGb3JTZWN0aW9uKGtleSl9ICgke2NvdW50VGV4dH0pYDtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGAke2tleX0gKCR7Y291bnRUZXh0fSlgO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc29ydFNlcXVlbmNlc0luU2VjdGlvbihcbiAgICBzZXF1ZW5jZXM6IFNlcXVlbmNlRGF0YVtdLFxuICAgIHNvcnRNZXRob2Q6IFNvcnRNZXRob2RcbiAgKTogU2VxdWVuY2VEYXRhW10ge1xuICAgIGNvbnN0IHNvcnRlZCA9IFsuLi5zZXF1ZW5jZXNdO1xuXG4gICAgc3dpdGNoIChzb3J0TWV0aG9kKSB7XG4gICAgICBjYXNlIFwiYWxwaGFiZXRpY2FsXCI6XG4gICAgICAgIHJldHVybiBzb3J0ZWQuc29ydCgoYSwgYikgPT4gYS53b3JkLmxvY2FsZUNvbXBhcmUoYi53b3JkKSk7XG5cbiAgICAgIGNhc2UgXCJkaWZmaWN1bHR5TGV2ZWxcIjpcbiAgICAgICAgcmV0dXJuIHNvcnRlZC5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgY29uc3QgZ2V0RGlmZmljdWx0eU9yZGVyID0gKGxldmVsPzogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICBzd2l0Y2ggKGxldmVsKSB7XG4gICAgICAgICAgICAgIGNhc2UgXCJiZWdpbm5lclwiOlxuICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgICBjYXNlIFwiaW50ZXJtZWRpYXRlXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDI7XG4gICAgICAgICAgICAgIGNhc2UgXCJhZHZhbmNlZFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiAzO1xuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIGdldERpZmZpY3VsdHlPcmRlcihhLmRpZmZpY3VsdHlMZXZlbCkgLVxuICAgICAgICAgICAgZ2V0RGlmZmljdWx0eU9yZGVyKGIuZGlmZmljdWx0eUxldmVsKVxuICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuXG4gICAgICBjYXNlIFwic2VxdWVuY2VMZW5ndGhcIjpcbiAgICAgICAgcmV0dXJuIHNvcnRlZC5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgY29uc3QgbGVuZ3RoQSA9IGEuc2VxdWVuY2VMZW5ndGggfHwgYS53b3JkLmxlbmd0aDtcbiAgICAgICAgICBjb25zdCBsZW5ndGhCID0gYi5zZXF1ZW5jZUxlbmd0aCB8fCBiLndvcmQubGVuZ3RoO1xuICAgICAgICAgIHJldHVybiBsZW5ndGhBIC0gbGVuZ3RoQjtcbiAgICAgICAgfSk7XG5cbiAgICAgIGNhc2UgXCJkYXRlQWRkZWRcIjpcbiAgICAgICAgcmV0dXJuIHNvcnRlZC5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgY29uc3QgZGF0ZUEgPSBhLmRhdGVBZGRlZCA/IG5ldyBEYXRlKGEuZGF0ZUFkZGVkKS5nZXRUaW1lKCkgOiAwO1xuICAgICAgICAgIGNvbnN0IGRhdGVCID0gYi5kYXRlQWRkZWQgPyBuZXcgRGF0ZShiLmRhdGVBZGRlZCkuZ2V0VGltZSgpIDogMDtcbiAgICAgICAgICByZXR1cm4gZGF0ZUIgLSBkYXRlQTsgLy8gTW9zdCByZWNlbnQgZmlyc3RcbiAgICAgICAgfSk7XG5cbiAgICAgIGNhc2UgXCJhdXRob3JcIjpcbiAgICAgICAgcmV0dXJuIHNvcnRlZC5zb3J0KChhLCBiKSA9PlxuICAgICAgICAgIChhLmF1dGhvciB8fCBcIlwiKS5sb2NhbGVDb21wYXJlKGIuYXV0aG9yIHx8IFwiXCIpXG4gICAgICAgICk7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBzb3J0ZWQ7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzb3J0U2VjdGlvbnMoXG4gICAgc2VjdGlvbnM6IFNlcXVlbmNlU2VjdGlvbltdLFxuICAgIF9ncm91cEJ5OiBTZWN0aW9uQ29uZmlndXJhdGlvbltcImdyb3VwQnlcIl1cbiAgKTogU2VxdWVuY2VTZWN0aW9uW10ge1xuICAgIHJldHVybiBzZWN0aW9ucy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAvLyBQcmltYXJ5IHNvcnQgYnkgc29ydE9yZGVyXG4gICAgICBpZiAoYS5zb3J0T3JkZXIgIT09IGIuc29ydE9yZGVyKSB7XG4gICAgICAgIHJldHVybiBhLnNvcnRPcmRlciAtIGIuc29ydE9yZGVyO1xuICAgICAgfVxuXG4gICAgICAvLyBTZWNvbmRhcnkgc29ydCBieSB0aXRsZSBmb3IgY29uc2lzdGVudCBvcmRlcmluZ1xuICAgICAgcmV0dXJuIGEudGl0bGUubG9jYWxlQ29tcGFyZShiLnRpdGxlKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0U2VjdGlvblNvcnRPcmRlcihcbiAgICBrZXk6IHN0cmluZyxcbiAgICBncm91cEJ5OiBTZWN0aW9uQ29uZmlndXJhdGlvbltcImdyb3VwQnlcIl1cbiAgKTogbnVtYmVyIHtcbiAgICBzd2l0Y2ggKGdyb3VwQnkpIHtcbiAgICAgIGNhc2UgXCJsZXR0ZXJcIjpcbiAgICAgICAgLy8gQS1aIG9yZGVyXG4gICAgICAgIHJldHVybiBrZXkuY2hhckNvZGVBdCgwKTtcblxuICAgICAgY2FzZSBcImxlbmd0aFwiOiB7XG4gICAgICAgIC8vIEV4dHJhY3QgbnVtYmVyIGZyb20gXCJYIGJlYXRzXCJcbiAgICAgICAgY29uc3QgbWF0Y2ggPSBrZXkubWF0Y2goL14oXFxkKykvKTtcbiAgICAgICAgcmV0dXJuIG1hdGNoICYmIG1hdGNoWzFdID8gcGFyc2VJbnQobWF0Y2hbMV0pIDogOTk5O1xuICAgICAgfVxuXG4gICAgICBjYXNlIFwiZGlmZmljdWx0eVwiOiB7XG4gICAgICAgIC8vIERpZmZpY3VsdHkgb3JkZXJcbiAgICAgICAgY29uc3QgZGlmZmljdWx0eU9yZGVyID0ge1xuICAgICAgICAgIGJlZ2lubmVyOiAxLFxuICAgICAgICAgIGludGVybWVkaWF0ZTogMixcbiAgICAgICAgICBhZHZhbmNlZDogMyxcbiAgICAgICAgICBVbmtub3duOiA0LFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gZGlmZmljdWx0eU9yZGVyW2tleSBhcyBrZXlvZiB0eXBlb2YgZGlmZmljdWx0eU9yZGVyXSB8fCA5OTk7XG4gICAgICB9XG5cbiAgICAgIGNhc2UgXCJhdXRob3JcIjpcbiAgICAgICAgLy8gQWxwaGFiZXRpY2FsIGJ5IGF1dGhvclxuICAgICAgICByZXR1cm4gMDsgLy8gV2lsbCBiZSBzb3J0ZWQgYnkgdGl0bGUgY29tcGFyaXNvblxuXG4gICAgICBjYXNlIFwiZGF0ZVwiOiB7XG4gICAgICAgIC8vIE1vc3QgcmVjZW50IGZpcnN0XG4gICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShrZXkpO1xuICAgICAgICByZXR1cm4gLWRhdGUuZ2V0VGltZSgpOyAvLyBOZWdhdGl2ZSBmb3IgcmV2ZXJzZSBjaHJvbm9sb2dpY2FsXG4gICAgICB9XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZm9ybWF0RGF0ZUZvclNlY3Rpb24oZGF0ZVN0cmluZzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoZGF0ZVN0cmluZyk7XG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICBjb25zdCBkaWZmVGltZSA9IG5vdy5nZXRUaW1lKCkgLSBkYXRlLmdldFRpbWUoKTtcbiAgICBjb25zdCBkaWZmRGF5cyA9IE1hdGguZmxvb3IoZGlmZlRpbWUgLyAoMTAwMCAqIDYwICogNjAgKiAyNCkpO1xuXG4gICAgaWYgKGRpZmZEYXlzID09PSAwKSByZXR1cm4gXCJUb2RheVwiO1xuICAgIGlmIChkaWZmRGF5cyA9PT0gMSkgcmV0dXJuIFwiWWVzdGVyZGF5XCI7XG4gICAgaWYgKGRpZmZEYXlzIDwgNykgcmV0dXJuIGAke2RpZmZEYXlzfSBkYXlzIGFnb2A7XG4gICAgaWYgKGRpZmZEYXlzIDwgMzApIHJldHVybiBgJHtNYXRoLmZsb29yKGRpZmZEYXlzIC8gNyl9IHdlZWtzIGFnb2A7XG5cbiAgICByZXR1cm4gZGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoKTtcbiAgfVxuXG4gIC8vIEFkZGl0aW9uYWwgbWV0aG9kcyByZXF1aXJlZCBieSBicm93c2UtaW50ZXJmYWNlcy50c1xuICBhc3luYyBvcmdhbml6ZUludG9TZWN0aW9ucyhcbiAgICBzZXF1ZW5jZXM6IFNlcXVlbmNlRGF0YVtdLFxuICAgIGNvbmZpZzogU2VjdGlvbkNvbmZpZ3VyYXRpb25cbiAgKTogUHJvbWlzZTxTZXF1ZW5jZVNlY3Rpb25bXT4ge1xuICAgIC8vIFVzZSB0aGUgZXhpc3Rpbmcgb3JnYW5pemVTZWN0aW9ucyBtZXRob2RcbiAgICByZXR1cm4gdGhpcy5vcmdhbml6ZVNlY3Rpb25zKHNlcXVlbmNlcywgY29uZmlnKTtcbiAgfVxuXG4gIGFzeW5jIGdldFNlY3Rpb25Db25maWd1cmF0aW9uKFxuICAgIHNvcnRNZXRob2Q6IFNvcnRNZXRob2RcbiAgKTogUHJvbWlzZTxTZWN0aW9uQ29uZmlndXJhdGlvbj4ge1xuICAgIC8vIFJldHVybiBhIGJhc2ljIGNvbmZpZ3VyYXRpb24gYmFzZWQgb24gc29ydCBtZXRob2RcbiAgICByZXR1cm4ge1xuICAgICAgZ3JvdXBCeTogXCJsZXR0ZXJcIiBhcyBjb25zdCxcbiAgICAgIHNvcnRNZXRob2Q6IHNvcnRNZXRob2QsXG4gICAgICBzaG93RW1wdHlTZWN0aW9uczogZmFsc2UsXG4gICAgICBleHBhbmRlZFNlY3Rpb25zOiBuZXcgU2V0PHN0cmluZz4oKSxcbiAgICB9O1xuICB9XG59XG4iXSwKICAibWFwcGluZ3MiOiAiQUF3RE8sYUFBTSxlQUEwQztBQUFBLEVBQ3JELE1BQU0saUJBQ0osV0FDQSxRQUM0QjtBQUM1QixRQUFJLE9BQU8sWUFBWSxRQUFRO0FBQzdCLGFBQU87QUFBQSxRQUNMO0FBQUEsVUFDRSxJQUFJO0FBQUEsVUFDSixPQUFPO0FBQUEsVUFDUCxPQUFPLFVBQVU7QUFBQSxVQUNqQjtBQUFBLFVBQ0EsWUFBWTtBQUFBLFVBQ1osV0FBVztBQUFBLFFBQ2I7QUFBQSxNQUNGO0FBQUEsSUFDRjtBQUVBLFVBQU0sVUFBVSxLQUFLLGVBQWUsV0FBVyxPQUFPLE9BQU87QUFDN0QsVUFBTSxXQUFXLEtBQUssZUFBZSxTQUFTLE1BQU07QUFFcEQsV0FBTyxLQUFLLGFBQWEsVUFBVSxPQUFPLE9BQU87QUFBQSxFQUNuRDtBQUFBLEVBRUEsdUJBQ0UsV0FDQSxVQUNtQjtBQUNuQixXQUFPLFNBQVMsSUFBSSxDQUFDLGFBQWE7QUFBQSxNQUNoQyxHQUFHO0FBQUEsTUFDSCxZQUNFLFFBQVEsT0FBTyxZQUFZLENBQUMsUUFBUSxhQUFhLFFBQVE7QUFBQSxJQUM3RCxFQUFFO0FBQUEsRUFDSjtBQUFBLEVBRUEsaUNBQXVEO0FBQ3JELFdBQU87QUFBQSxNQUNMLFNBQVM7QUFBQSxNQUNULFlBQVk7QUFBQSxNQUNaLG1CQUFtQjtBQUFBLE1BQ25CLGtCQUFrQixvQkFBSSxJQUFJLENBQUMsS0FBSyxLQUFLLEdBQUcsQ0FBQztBQUFBO0FBQUEsSUFDM0M7QUFBQSxFQUNGO0FBQUEsRUFFQSwyQkFDRSxRQUNBLFNBQ3NCO0FBQ3RCLFdBQU87QUFBQSxNQUNMLEdBQUc7QUFBQSxNQUNILEdBQUc7QUFBQSxJQUNMO0FBQUEsRUFDRjtBQUFBLEVBRUEscUJBQXFCLFVBQTZCO0FBQ2hELFVBQU0sZ0JBQWdCLFNBQVM7QUFDL0IsVUFBTSxpQkFBaUIsU0FBUztBQUFBLE1BQzlCLENBQUMsS0FBSyxZQUFZLE1BQU0sUUFBUTtBQUFBLE1BQ2hDO0FBQUEsSUFDRjtBQUNBLFVBQU0sbUJBQW1CLFNBQVM7QUFBQSxNQUNoQyxDQUFDLFlBQVksUUFBUTtBQUFBLElBQ3ZCLEVBQUU7QUFDRixVQUFNLDZCQUNKLGdCQUFnQixJQUFJLGlCQUFpQixnQkFBZ0I7QUFFdkQsV0FBTztBQUFBLE1BQ0w7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0EsNEJBQ0UsS0FBSyxNQUFNLDZCQUE2QixFQUFFLElBQUk7QUFBQSxJQUNsRDtBQUFBLEVBQ0Y7QUFBQTtBQUFBLEVBR1EsZUFDTixXQUNBLFNBQzZCO0FBQzdCLFVBQU0sU0FBUyxvQkFBSSxJQUE0QjtBQUUvQyxjQUFVLFFBQVEsQ0FBQyxhQUFhO0FBQzlCLFlBQU0sTUFBTSxLQUFLLFlBQVksVUFBVSxPQUFPO0FBQzlDLFVBQUksQ0FBQyxPQUFPLElBQUksR0FBRyxHQUFHO0FBQ3BCLGVBQU8sSUFBSSxLQUFLLENBQUMsQ0FBQztBQUFBLE1BQ3BCO0FBQ0EsWUFBTSxRQUFRLE9BQU8sSUFBSSxHQUFHO0FBQzVCLFVBQUksT0FBTztBQUNULGNBQU0sS0FBSyxRQUFRO0FBQUEsTUFDckI7QUFBQSxJQUNGLENBQUM7QUFFRCxXQUFPO0FBQUEsRUFDVDtBQUFBLEVBRVEsWUFDTixVQUNBLFNBQ1E7QUFDUixZQUFRLFNBQVM7QUFBQSxNQUNmLEtBQUs7QUFDSCxlQUFPLFNBQVMsS0FBSyxPQUFPLENBQUMsRUFBRSxZQUFZO0FBQUEsTUFFN0MsS0FBSyxVQUFVO0FBQ2IsY0FBTSxTQUFTLFNBQVMsa0JBQWtCLFNBQVMsS0FBSztBQUN4RCxlQUFPLEdBQUcsTUFBTTtBQUFBLE1BQ2xCO0FBQUEsTUFFQSxLQUFLO0FBQ0gsZUFBTyxTQUFTLG1CQUFtQjtBQUFBLE1BRXJDLEtBQUs7QUFDSCxlQUFPLFNBQVMsVUFBVTtBQUFBLE1BRTVCLEtBQUssUUFBUTtBQUNYLFlBQUksQ0FBQyxTQUFTLFVBQVcsUUFBTztBQUNoQyxjQUFNLE9BQU8sSUFBSSxLQUFLLFNBQVMsU0FBUztBQUN4QyxlQUFPLEtBQUssYUFBYTtBQUFBLE1BQzNCO0FBQUEsTUFFQTtBQUNFLGVBQU87QUFBQSxJQUNYO0FBQUEsRUFDRjtBQUFBLEVBRVEsZUFDTixTQUNBLFFBQ21CO0FBQ25CLFVBQU0sV0FBOEIsQ0FBQztBQUVyQyxZQUFRLFFBQVEsQ0FBQyxXQUFXLFFBQVE7QUFDbEMsVUFBSSxDQUFDLE9BQU8scUJBQXFCLFVBQVUsV0FBVyxHQUFHO0FBQ3ZEO0FBQUEsTUFDRjtBQUVBLFlBQU0sVUFBMkI7QUFBQSxRQUMvQixJQUFJLEtBQUssZ0JBQWdCLEtBQUssT0FBTyxPQUFPO0FBQUEsUUFDNUMsT0FBTyxLQUFLLG1CQUFtQixLQUFLLE9BQU8sU0FBUyxVQUFVLE1BQU07QUFBQSxRQUNwRSxPQUFPLFVBQVU7QUFBQSxRQUNqQixXQUFXLEtBQUssdUJBQXVCLFdBQVcsT0FBTyxVQUFVO0FBQUEsUUFDbkUsWUFBWSxPQUFPLGtCQUFrQixJQUFJLEdBQUcsS0FBSztBQUFBLFFBQ2pELFdBQVcsS0FBSyxvQkFBb0IsS0FBSyxPQUFPLE9BQU87QUFBQSxNQUN6RDtBQUVBLGVBQVMsS0FBSyxPQUFPO0FBQUEsSUFDdkIsQ0FBQztBQUVELFdBQU87QUFBQSxFQUNUO0FBQUEsRUFFUSxnQkFDTixLQUNBLFNBQ1E7QUFDUixXQUFPLEdBQUcsT0FBTyxJQUFJLElBQUksWUFBWSxFQUFFLFFBQVEsUUFBUSxHQUFHLENBQUM7QUFBQSxFQUM3RDtBQUFBLEVBRVEsbUJBQ04sS0FDQSxTQUNBLE9BQ1E7QUFDUixVQUFNLFlBQVksVUFBVSxJQUFJLGVBQWUsR0FBRyxLQUFLO0FBRXZELFlBQVEsU0FBUztBQUFBLE1BQ2YsS0FBSztBQUNILGVBQU8sR0FBRyxHQUFHLEtBQUssU0FBUztBQUFBLE1BRTdCLEtBQUs7QUFDSCxlQUFPLEdBQUcsR0FBRyxLQUFLLFNBQVM7QUFBQSxNQUU3QixLQUFLLGNBQWM7QUFDakIsY0FBTSxrQkFDSjtBQUFBLFVBQ0UsVUFBVTtBQUFBLFVBQ1YsY0FBYztBQUFBLFVBQ2QsVUFBVTtBQUFBLFVBQ1YsU0FBUztBQUFBLFFBQ1gsRUFBRSxHQUFHLEtBQUs7QUFDWixlQUFPLEdBQUcsZUFBZSxJQUFJLEdBQUcsS0FBSyxTQUFTO0FBQUEsTUFDaEQ7QUFBQSxNQUVBLEtBQUs7QUFDSCxlQUFPLE1BQU0sR0FBRyxLQUFLLFNBQVM7QUFBQSxNQUVoQyxLQUFLO0FBQ0gsZUFBTyxNQUFNLEtBQUsscUJBQXFCLEdBQUcsQ0FBQyxLQUFLLFNBQVM7QUFBQSxNQUUzRDtBQUNFLGVBQU8sR0FBRyxHQUFHLEtBQUssU0FBUztBQUFBLElBQy9CO0FBQUEsRUFDRjtBQUFBLEVBRVEsdUJBQ04sV0FDQSxZQUNnQjtBQUNoQixVQUFNLFNBQVMsQ0FBQyxHQUFHLFNBQVM7QUFFNUIsWUFBUSxZQUFZO0FBQUEsTUFDbEIsS0FBSztBQUNILGVBQU8sT0FBTyxLQUFLLENBQUMsR0FBRyxNQUFNLEVBQUUsS0FBSyxjQUFjLEVBQUUsSUFBSSxDQUFDO0FBQUEsTUFFM0QsS0FBSztBQUNILGVBQU8sT0FBTyxLQUFLLENBQUMsR0FBRyxNQUFNO0FBQzNCLGdCQUFNLHFCQUFxQixDQUFDLFVBQW1CO0FBQzdDLG9CQUFRLE9BQU87QUFBQSxjQUNiLEtBQUs7QUFDSCx1QkFBTztBQUFBLGNBQ1QsS0FBSztBQUNILHVCQUFPO0FBQUEsY0FDVCxLQUFLO0FBQ0gsdUJBQU87QUFBQSxjQUNUO0FBQ0UsdUJBQU87QUFBQSxZQUNYO0FBQUEsVUFDRjtBQUNBLGlCQUNFLG1CQUFtQixFQUFFLGVBQWUsSUFDcEMsbUJBQW1CLEVBQUUsZUFBZTtBQUFBLFFBRXhDLENBQUM7QUFBQSxNQUVILEtBQUs7QUFDSCxlQUFPLE9BQU8sS0FBSyxDQUFDLEdBQUcsTUFBTTtBQUMzQixnQkFBTSxVQUFVLEVBQUUsa0JBQWtCLEVBQUUsS0FBSztBQUMzQyxnQkFBTSxVQUFVLEVBQUUsa0JBQWtCLEVBQUUsS0FBSztBQUMzQyxpQkFBTyxVQUFVO0FBQUEsUUFDbkIsQ0FBQztBQUFBLE1BRUgsS0FBSztBQUNILGVBQU8sT0FBTyxLQUFLLENBQUMsR0FBRyxNQUFNO0FBQzNCLGdCQUFNLFFBQVEsRUFBRSxZQUFZLElBQUksS0FBSyxFQUFFLFNBQVMsRUFBRSxRQUFRLElBQUk7QUFDOUQsZ0JBQU0sUUFBUSxFQUFFLFlBQVksSUFBSSxLQUFLLEVBQUUsU0FBUyxFQUFFLFFBQVEsSUFBSTtBQUM5RCxpQkFBTyxRQUFRO0FBQUEsUUFDakIsQ0FBQztBQUFBLE1BRUgsS0FBSztBQUNILGVBQU8sT0FBTztBQUFBLFVBQUssQ0FBQyxHQUFHLE9BQ3BCLEVBQUUsVUFBVSxJQUFJLGNBQWMsRUFBRSxVQUFVLEVBQUU7QUFBQSxRQUMvQztBQUFBLE1BRUY7QUFDRSxlQUFPO0FBQUEsSUFDWDtBQUFBLEVBQ0Y7QUFBQSxFQUVRLGFBQ04sVUFDQSxVQUNtQjtBQUNuQixXQUFPLFNBQVMsS0FBSyxDQUFDLEdBQUcsTUFBTTtBQUU3QixVQUFJLEVBQUUsY0FBYyxFQUFFLFdBQVc7QUFDL0IsZUFBTyxFQUFFLFlBQVksRUFBRTtBQUFBLE1BQ3pCO0FBR0EsYUFBTyxFQUFFLE1BQU0sY0FBYyxFQUFFLEtBQUs7QUFBQSxJQUN0QyxDQUFDO0FBQUEsRUFDSDtBQUFBLEVBRVEsb0JBQ04sS0FDQSxTQUNRO0FBQ1IsWUFBUSxTQUFTO0FBQUEsTUFDZixLQUFLO0FBRUgsZUFBTyxJQUFJLFdBQVcsQ0FBQztBQUFBLE1BRXpCLEtBQUssVUFBVTtBQUViLGNBQU0sUUFBUSxJQUFJLE1BQU0sUUFBUTtBQUNoQyxlQUFPLFNBQVMsTUFBTSxDQUFDLElBQUksU0FBUyxNQUFNLENBQUMsQ0FBQyxJQUFJO0FBQUEsTUFDbEQ7QUFBQSxNQUVBLEtBQUssY0FBYztBQUVqQixjQUFNLGtCQUFrQjtBQUFBLFVBQ3RCLFVBQVU7QUFBQSxVQUNWLGNBQWM7QUFBQSxVQUNkLFVBQVU7QUFBQSxVQUNWLFNBQVM7QUFBQSxRQUNYO0FBQ0EsZUFBTyxnQkFBZ0IsR0FBbUMsS0FBSztBQUFBLE1BQ2pFO0FBQUEsTUFFQSxLQUFLO0FBRUgsZUFBTztBQUFBO0FBQUEsTUFFVCxLQUFLLFFBQVE7QUFFWCxjQUFNLE9BQU8sSUFBSSxLQUFLLEdBQUc7QUFDekIsZUFBTyxDQUFDLEtBQUssUUFBUTtBQUFBLE1BQ3ZCO0FBQUEsTUFFQTtBQUNFLGVBQU87QUFBQSxJQUNYO0FBQUEsRUFDRjtBQUFBLEVBRVEscUJBQXFCLFlBQTRCO0FBQ3ZELFVBQU0sT0FBTyxJQUFJLEtBQUssVUFBVTtBQUNoQyxVQUFNLE1BQU0sb0JBQUksS0FBSztBQUNyQixVQUFNLFdBQVcsSUFBSSxRQUFRLElBQUksS0FBSyxRQUFRO0FBQzlDLFVBQU0sV0FBVyxLQUFLLE1BQU0sWUFBWSxNQUFPLEtBQUssS0FBSyxHQUFHO0FBRTVELFFBQUksYUFBYSxFQUFHLFFBQU87QUFDM0IsUUFBSSxhQUFhLEVBQUcsUUFBTztBQUMzQixRQUFJLFdBQVcsRUFBRyxRQUFPLEdBQUcsUUFBUTtBQUNwQyxRQUFJLFdBQVcsR0FBSSxRQUFPLEdBQUcsS0FBSyxNQUFNLFdBQVcsQ0FBQyxDQUFDO0FBRXJELFdBQU8sS0FBSyxtQkFBbUI7QUFBQSxFQUNqQztBQUFBO0FBQUEsRUFHQSxNQUFNLHFCQUNKLFdBQ0EsUUFDNEI7QUFFNUIsV0FBTyxLQUFLLGlCQUFpQixXQUFXLE1BQU07QUFBQSxFQUNoRDtBQUFBLEVBRUEsTUFBTSx3QkFDSixZQUMrQjtBQUUvQixXQUFPO0FBQUEsTUFDTCxTQUFTO0FBQUEsTUFDVDtBQUFBLE1BQ0EsbUJBQW1CO0FBQUEsTUFDbkIsa0JBQWtCLG9CQUFJLElBQVk7QUFBQSxJQUNwQztBQUFBLEVBQ0Y7QUFDRjsiLAogICJuYW1lcyI6IFtdCn0K
