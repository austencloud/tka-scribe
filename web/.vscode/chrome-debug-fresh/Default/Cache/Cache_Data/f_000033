import { getLetterType } from "/src/lib/domain/index.ts";
export class OptionFilteringService {
  constructor(enumMappingService, positionService) {
    this.enumMappingService = enumMappingService;
    this.positionService = positionService;
  }
  /**
   * Filter options by start position
   */
  filterByStartPosition(options, startPosition) {
    if (!startPosition) return options;
    return options.filter((option) => {
      const optionStartPos = option.motions?.blue && option.motions?.red ? this.positionService.getPositionFromLocations(
        option.motions.blue.startLocation,
        option.motions.red.startLocation
      )?.toString().toLowerCase() : null;
      const targetStartPos = startPosition.toLowerCase();
      return optionStartPos === targetStartPos;
    });
  }
  /**
   * Filter options by end position
   */
  filterByEndPosition(options, endPosition) {
    if (!endPosition) return options;
    return options.filter((option) => {
      const optionEndPos = option.motions?.blue && option.motions?.red ? this.positionService.getPositionFromLocations(
        option.motions.blue.endLocation,
        option.motions.red.endLocation
      )?.toString().toLowerCase() : null;
      const targetEndPos = endPosition.toLowerCase();
      return optionEndPos === targetEndPos;
    });
  }
  /**
   * Filter options by letter types
   */
  filterByLetterTypes(options, letterTypes) {
    if (!letterTypes || letterTypes.length === 0) return options;
    return options.filter((option) => {
      if (!option.letter) return false;
      const letterType = getLetterType(option.letter);
      return letterTypes.includes(letterType);
    });
  }
  /**
   * Filter options by rotation directions
   */
  filterByRotation(options, blueRotationDirection, redRotationDirection) {
    return options.filter((option) => {
      let matches = true;
      if (blueRotationDirection && blueRotationDirection !== "any") {
        const blueRotation = option.motions?.blue?.rotationDirection?.toString().toLowerCase();
        const targetBlueRotation = blueRotationDirection.toLowerCase();
        matches = matches && blueRotation === targetBlueRotation;
      }
      if (redRotationDirection && redRotationDirection !== "any") {
        const redRotation = option.motions?.red?.rotationDirection?.toString().toLowerCase();
        const targetRedRotation = redRotationDirection.toLowerCase();
        matches = matches && redRotation === targetRedRotation;
      }
      return matches;
    });
  }
  /**
   * Filter options by multiple criteria with detailed result
   */
  filterByCriteria(options, criteria) {
    let filtered = [...options];
    const appliedFilters = [];
    const totalOriginal = options.length;
    if (criteria.startPosition) {
      filtered = this.filterByStartPosition(filtered, criteria.startPosition);
      appliedFilters.push(`startPosition: ${criteria.startPosition}`);
    }
    if (criteria.endPosition) {
      filtered = this.filterByEndPosition(filtered, criteria.endPosition);
      appliedFilters.push(`endPosition: ${criteria.endPosition}`);
    }
    if (criteria.letterTypes && criteria.letterTypes.length > 0) {
      filtered = this.filterByLetterTypes(filtered, criteria.letterTypes);
      appliedFilters.push(`letterTypes: ${criteria.letterTypes.join(", ")}`);
    }
    if (criteria.blueRotationDirection || criteria.redRotationDirection) {
      filtered = this.filterByRotation(
        filtered,
        criteria.blueRotationDirection || "",
        criteria.redRotationDirection || ""
      );
      appliedFilters.push(
        `rotation: blue=${criteria.blueRotationDirection || "any"}, red=${criteria.redRotationDirection || "any"}`
      );
    }
    if (criteria.motionTypes && criteria.motionTypes.length > 0) {
      filtered = this.filterByMotionTypes(filtered, criteria.motionTypes);
      appliedFilters.push(`motionTypes: ${criteria.motionTypes.join(", ")}`);
    }
    if (criteria.excludeLetters && criteria.excludeLetters.length > 0) {
      filtered = this.filterExcludeLetters(filtered, criteria.excludeLetters);
      appliedFilters.push(
        `excludeLetters: ${criteria.excludeLetters.join(", ")}`
      );
    }
    return {
      filtered,
      totalOriginal,
      totalFiltered: filtered.length,
      appliedFilters
    };
  }
  /**
   * Extract end position from the last beat in a sequence
   * Computes end position from motion data using PositionMapper
   */
  extractEndPosition(lastBeat) {
    try {
      if (!lastBeat || !lastBeat.pictographData) {
        return null;
      }
      const pictographData = lastBeat.pictographData;
      if (!pictographData.motions?.blue || !pictographData.motions?.red) {
        return null;
      }
      const endPosition = this.positionService.getPositionFromLocations(
        pictographData.motions.blue.endLocation,
        pictographData.motions.red.endLocation
      );
      return endPosition ? endPosition.toString() : null;
    } catch (error) {
      console.warn("⚠️ Failed to extract end position from beat:", error);
      return null;
    }
  }
  /**
   * Filter by motion types
   */
  filterByMotionTypes(options, motionTypes) {
    return options.filter((option) => {
      const blueMotionType = option.motions?.blue?.motionType?.toString().toLowerCase();
      const redMotionType = option.motions?.red?.motionType?.toString().toLowerCase();
      const normalizedMotionTypes = motionTypes.map((mt) => mt.toLowerCase());
      return normalizedMotionTypes.includes(blueMotionType || "") || normalizedMotionTypes.includes(redMotionType || "");
    });
  }
  /**
   * Filter to exclude specific letters
   */
  filterExcludeLetters(options, excludeLetters) {
    return options.filter((option) => {
      return !excludeLetters.includes(option.letter || "");
    });
  }
  /**
   * Get filtering statistics for debugging
   */
  getFilteringStats(originalOptions, criteria) {
    let current = [...originalOptions];
    const afterEachFilter = [];
    if (criteria.startPosition) {
      current = this.filterByStartPosition(current, criteria.startPosition);
      afterEachFilter.push({
        filterName: "startPosition",
        count: current.length,
        criteria: criteria.startPosition
      });
    }
    if (criteria.endPosition) {
      current = this.filterByEndPosition(current, criteria.endPosition);
      afterEachFilter.push({
        filterName: "endPosition",
        count: current.length,
        criteria: criteria.endPosition
      });
    }
    if (criteria.letterTypes && criteria.letterTypes.length > 0) {
      current = this.filterByLetterTypes(current, criteria.letterTypes);
      afterEachFilter.push({
        filterName: "letterTypes",
        count: current.length,
        criteria: criteria.letterTypes.join(", ")
      });
    }
    return {
      originalCount: originalOptions.length,
      afterEachFilter,
      finalCount: current.length
    };
  }
}
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiQzovVEtBL3dlYi9zcmMvbGliL3NlcnZpY2VzL2ltcGxlbWVudGF0aW9ucy9kYXRhL09wdGlvbkZpbHRlcmluZ1NlcnZpY2UudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIi8qKlxuICogT3B0aW9uRmlsdGVyaW5nU2VydmljZSAtIENlbnRyYWxpemVkIG9wdGlvbiBmaWx0ZXJpbmcgdXRpbGl0aWVzXG4gKlxuICogSGFuZGxlcyBmaWx0ZXJpbmcgb2YgcGljdG9ncmFwaCBvcHRpb25zIGJ5IHZhcmlvdXMgY3JpdGVyaWEgaW5jbHVkaW5nXG4gKiBwb3NpdGlvbiwgbGV0dGVyIHR5cGVzLCByb3RhdGlvbiwgYW5kIG90aGVyIG1vdGlvbiBwYXJhbWV0ZXJzLlxuICovXG5cbmltcG9ydCB7IGdldExldHRlclR5cGUgfSBmcm9tIFwiJGxpYi9kb21haW5cIjtcbmltcG9ydCB0eXBlIHsgQmVhdERhdGEgfSBmcm9tIFwiJGxpYi9kb21haW4vQmVhdERhdGFcIjtcbmltcG9ydCB0eXBlIHsgUGljdG9ncmFwaERhdGEgfSBmcm9tIFwiJGxpYi9kb21haW4vUGljdG9ncmFwaERhdGFcIjtcbmltcG9ydCB0eXBlIHsgSVBvc2l0aW9uTWFwcGVyIH0gZnJvbSBcIi4uLy4uL2ludGVyZmFjZXMvbW92ZW1lbnQvSVBvc2l0aW9uTWFwcGVyXCI7XG5pbXBvcnQgdHlwZSB7IElFbnVtTWFwcGluZ1NlcnZpY2UgfSBmcm9tIFwiLi9FbnVtTWFwcGluZ1NlcnZpY2VcIjtcblxuZXhwb3J0IGludGVyZmFjZSBGaWx0ZXJDcml0ZXJpYSB7XG4gIHN0YXJ0UG9zaXRpb24/OiBzdHJpbmc7XG4gIGVuZFBvc2l0aW9uPzogc3RyaW5nO1xuICBsZXR0ZXJUeXBlcz86IHN0cmluZ1tdO1xuICBibHVlUm90YXRpb25EaXJlY3Rpb24/OiBzdHJpbmc7XG4gIHJlZFJvdGF0aW9uRGlyZWN0aW9uPzogc3RyaW5nO1xuICBtb3Rpb25UeXBlcz86IHN0cmluZ1tdO1xuICBkaWZmaWN1bHR5Pzogc3RyaW5nO1xuICBleGNsdWRlTGV0dGVycz86IHN0cmluZ1tdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZpbHRlclJlc3VsdCB7XG4gIGZpbHRlcmVkOiBQaWN0b2dyYXBoRGF0YVtdO1xuICB0b3RhbE9yaWdpbmFsOiBudW1iZXI7XG4gIHRvdGFsRmlsdGVyZWQ6IG51bWJlcjtcbiAgYXBwbGllZEZpbHRlcnM6IHN0cmluZ1tdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElPcHRpb25GaWx0ZXJpbmdTZXJ2aWNlIHtcbiAgZmlsdGVyQnlTdGFydFBvc2l0aW9uKFxuICAgIG9wdGlvbnM6IFBpY3RvZ3JhcGhEYXRhW10sXG4gICAgc3RhcnRQb3NpdGlvbjogc3RyaW5nXG4gICk6IFBpY3RvZ3JhcGhEYXRhW107XG4gIGZpbHRlckJ5RW5kUG9zaXRpb24oXG4gICAgb3B0aW9uczogUGljdG9ncmFwaERhdGFbXSxcbiAgICBlbmRQb3NpdGlvbjogc3RyaW5nXG4gICk6IFBpY3RvZ3JhcGhEYXRhW107XG4gIGZpbHRlckJ5TGV0dGVyVHlwZXMoXG4gICAgb3B0aW9uczogUGljdG9ncmFwaERhdGFbXSxcbiAgICBsZXR0ZXJUeXBlczogc3RyaW5nW11cbiAgKTogUGljdG9ncmFwaERhdGFbXTtcbiAgZmlsdGVyQnlSb3RhdGlvbihcbiAgICBvcHRpb25zOiBQaWN0b2dyYXBoRGF0YVtdLFxuICAgIGJsdWVSb3RhdGlvbkRpcmVjdGlvbjogc3RyaW5nLFxuICAgIHJlZFJvdGF0aW9uRGlyZWN0aW9uOiBzdHJpbmdcbiAgKTogUGljdG9ncmFwaERhdGFbXTtcbiAgZmlsdGVyQnlDcml0ZXJpYShcbiAgICBvcHRpb25zOiBQaWN0b2dyYXBoRGF0YVtdLFxuICAgIGNyaXRlcmlhOiBGaWx0ZXJDcml0ZXJpYVxuICApOiBGaWx0ZXJSZXN1bHQ7XG4gIGV4dHJhY3RFbmRQb3NpdGlvbihsYXN0QmVhdDogQmVhdERhdGEpOiBzdHJpbmcgfCBudWxsO1xufVxuXG5leHBvcnQgY2xhc3MgT3B0aW9uRmlsdGVyaW5nU2VydmljZSBpbXBsZW1lbnRzIElPcHRpb25GaWx0ZXJpbmdTZXJ2aWNlIHtcbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBlbnVtTWFwcGluZ1NlcnZpY2U6IElFbnVtTWFwcGluZ1NlcnZpY2UsXG4gICAgcHJpdmF0ZSBwb3NpdGlvblNlcnZpY2U6IElQb3NpdGlvbk1hcHBlclxuICApIHt9XG5cbiAgLyoqXG4gICAqIEZpbHRlciBvcHRpb25zIGJ5IHN0YXJ0IHBvc2l0aW9uXG4gICAqL1xuICBmaWx0ZXJCeVN0YXJ0UG9zaXRpb24oXG4gICAgb3B0aW9uczogUGljdG9ncmFwaERhdGFbXSxcbiAgICBzdGFydFBvc2l0aW9uOiBzdHJpbmdcbiAgKTogUGljdG9ncmFwaERhdGFbXSB7XG4gICAgaWYgKCFzdGFydFBvc2l0aW9uKSByZXR1cm4gb3B0aW9ucztcblxuICAgIHJldHVybiBvcHRpb25zLmZpbHRlcigob3B0aW9uKSA9PiB7XG4gICAgICAvLyBDb21wdXRlIHN0YXJ0UG9zaXRpb24gZnJvbSBtb3Rpb24gZGF0YVxuICAgICAgY29uc3Qgb3B0aW9uU3RhcnRQb3MgPVxuICAgICAgICBvcHRpb24ubW90aW9ucz8uYmx1ZSAmJiBvcHRpb24ubW90aW9ucz8ucmVkXG4gICAgICAgICAgPyB0aGlzLnBvc2l0aW9uU2VydmljZVxuICAgICAgICAgICAgICAuZ2V0UG9zaXRpb25Gcm9tTG9jYXRpb25zKFxuICAgICAgICAgICAgICAgIG9wdGlvbi5tb3Rpb25zLmJsdWUuc3RhcnRMb2NhdGlvbixcbiAgICAgICAgICAgICAgICBvcHRpb24ubW90aW9ucy5yZWQuc3RhcnRMb2NhdGlvblxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgID8udG9TdHJpbmcoKVxuICAgICAgICAgICAgICAudG9Mb3dlckNhc2UoKVxuICAgICAgICAgIDogbnVsbDtcbiAgICAgIGNvbnN0IHRhcmdldFN0YXJ0UG9zID0gc3RhcnRQb3NpdGlvbi50b0xvd2VyQ2FzZSgpO1xuICAgICAgcmV0dXJuIG9wdGlvblN0YXJ0UG9zID09PSB0YXJnZXRTdGFydFBvcztcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaWx0ZXIgb3B0aW9ucyBieSBlbmQgcG9zaXRpb25cbiAgICovXG4gIGZpbHRlckJ5RW5kUG9zaXRpb24oXG4gICAgb3B0aW9uczogUGljdG9ncmFwaERhdGFbXSxcbiAgICBlbmRQb3NpdGlvbjogc3RyaW5nXG4gICk6IFBpY3RvZ3JhcGhEYXRhW10ge1xuICAgIGlmICghZW5kUG9zaXRpb24pIHJldHVybiBvcHRpb25zO1xuXG4gICAgcmV0dXJuIG9wdGlvbnMuZmlsdGVyKChvcHRpb24pID0+IHtcbiAgICAgIC8vIENvbXB1dGUgZW5kUG9zaXRpb24gZnJvbSBtb3Rpb24gZGF0YVxuICAgICAgY29uc3Qgb3B0aW9uRW5kUG9zID1cbiAgICAgICAgb3B0aW9uLm1vdGlvbnM/LmJsdWUgJiYgb3B0aW9uLm1vdGlvbnM/LnJlZFxuICAgICAgICAgID8gdGhpcy5wb3NpdGlvblNlcnZpY2VcbiAgICAgICAgICAgICAgLmdldFBvc2l0aW9uRnJvbUxvY2F0aW9ucyhcbiAgICAgICAgICAgICAgICBvcHRpb24ubW90aW9ucy5ibHVlLmVuZExvY2F0aW9uLFxuICAgICAgICAgICAgICAgIG9wdGlvbi5tb3Rpb25zLnJlZC5lbmRMb2NhdGlvblxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgID8udG9TdHJpbmcoKVxuICAgICAgICAgICAgICAudG9Mb3dlckNhc2UoKVxuICAgICAgICAgIDogbnVsbDtcbiAgICAgIGNvbnN0IHRhcmdldEVuZFBvcyA9IGVuZFBvc2l0aW9uLnRvTG93ZXJDYXNlKCk7XG4gICAgICByZXR1cm4gb3B0aW9uRW5kUG9zID09PSB0YXJnZXRFbmRQb3M7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRmlsdGVyIG9wdGlvbnMgYnkgbGV0dGVyIHR5cGVzXG4gICAqL1xuICBmaWx0ZXJCeUxldHRlclR5cGVzKFxuICAgIG9wdGlvbnM6IFBpY3RvZ3JhcGhEYXRhW10sXG4gICAgbGV0dGVyVHlwZXM6IHN0cmluZ1tdXG4gICk6IFBpY3RvZ3JhcGhEYXRhW10ge1xuICAgIGlmICghbGV0dGVyVHlwZXMgfHwgbGV0dGVyVHlwZXMubGVuZ3RoID09PSAwKSByZXR1cm4gb3B0aW9ucztcblxuICAgIHJldHVybiBvcHRpb25zLmZpbHRlcigob3B0aW9uKSA9PiB7XG4gICAgICBpZiAoIW9wdGlvbi5sZXR0ZXIpIHJldHVybiBmYWxzZTtcblxuICAgICAgY29uc3QgbGV0dGVyVHlwZSA9IGdldExldHRlclR5cGUob3B0aW9uLmxldHRlcik7XG4gICAgICByZXR1cm4gbGV0dGVyVHlwZXMuaW5jbHVkZXMobGV0dGVyVHlwZSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRmlsdGVyIG9wdGlvbnMgYnkgcm90YXRpb24gZGlyZWN0aW9uc1xuICAgKi9cbiAgZmlsdGVyQnlSb3RhdGlvbihcbiAgICBvcHRpb25zOiBQaWN0b2dyYXBoRGF0YVtdLFxuICAgIGJsdWVSb3RhdGlvbkRpcmVjdGlvbjogc3RyaW5nLFxuICAgIHJlZFJvdGF0aW9uRGlyZWN0aW9uOiBzdHJpbmdcbiAgKTogUGljdG9ncmFwaERhdGFbXSB7XG4gICAgcmV0dXJuIG9wdGlvbnMuZmlsdGVyKChvcHRpb24pID0+IHtcbiAgICAgIGxldCBtYXRjaGVzID0gdHJ1ZTtcblxuICAgICAgLy8gQ2hlY2sgYmx1ZSByb3RhdGlvbiBpZiBzcGVjaWZpZWRcbiAgICAgIGlmIChibHVlUm90YXRpb25EaXJlY3Rpb24gJiYgYmx1ZVJvdGF0aW9uRGlyZWN0aW9uICE9PSBcImFueVwiKSB7XG4gICAgICAgIGNvbnN0IGJsdWVSb3RhdGlvbiA9IG9wdGlvbi5tb3Rpb25zPy5ibHVlPy5yb3RhdGlvbkRpcmVjdGlvblxuICAgICAgICAgID8udG9TdHJpbmcoKVxuICAgICAgICAgIC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBjb25zdCB0YXJnZXRCbHVlUm90YXRpb24gPSBibHVlUm90YXRpb25EaXJlY3Rpb24udG9Mb3dlckNhc2UoKTtcbiAgICAgICAgbWF0Y2hlcyA9IG1hdGNoZXMgJiYgYmx1ZVJvdGF0aW9uID09PSB0YXJnZXRCbHVlUm90YXRpb247XG4gICAgICB9XG5cbiAgICAgIC8vIENoZWNrIHJlZCByb3RhdGlvbiBpZiBzcGVjaWZpZWRcbiAgICAgIGlmIChyZWRSb3RhdGlvbkRpcmVjdGlvbiAmJiByZWRSb3RhdGlvbkRpcmVjdGlvbiAhPT0gXCJhbnlcIikge1xuICAgICAgICBjb25zdCByZWRSb3RhdGlvbiA9IG9wdGlvbi5tb3Rpb25zPy5yZWQ/LnJvdGF0aW9uRGlyZWN0aW9uXG4gICAgICAgICAgPy50b1N0cmluZygpXG4gICAgICAgICAgLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGNvbnN0IHRhcmdldFJlZFJvdGF0aW9uID0gcmVkUm90YXRpb25EaXJlY3Rpb24udG9Mb3dlckNhc2UoKTtcbiAgICAgICAgbWF0Y2hlcyA9IG1hdGNoZXMgJiYgcmVkUm90YXRpb24gPT09IHRhcmdldFJlZFJvdGF0aW9uO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbWF0Y2hlcztcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaWx0ZXIgb3B0aW9ucyBieSBtdWx0aXBsZSBjcml0ZXJpYSB3aXRoIGRldGFpbGVkIHJlc3VsdFxuICAgKi9cbiAgZmlsdGVyQnlDcml0ZXJpYShcbiAgICBvcHRpb25zOiBQaWN0b2dyYXBoRGF0YVtdLFxuICAgIGNyaXRlcmlhOiBGaWx0ZXJDcml0ZXJpYVxuICApOiBGaWx0ZXJSZXN1bHQge1xuICAgIGxldCBmaWx0ZXJlZCA9IFsuLi5vcHRpb25zXTtcbiAgICBjb25zdCBhcHBsaWVkRmlsdGVyczogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCB0b3RhbE9yaWdpbmFsID0gb3B0aW9ucy5sZW5ndGg7XG5cbiAgICAvLyBBcHBseSBzdGFydCBwb3NpdGlvbiBmaWx0ZXJcbiAgICBpZiAoY3JpdGVyaWEuc3RhcnRQb3NpdGlvbikge1xuICAgICAgZmlsdGVyZWQgPSB0aGlzLmZpbHRlckJ5U3RhcnRQb3NpdGlvbihmaWx0ZXJlZCwgY3JpdGVyaWEuc3RhcnRQb3NpdGlvbik7XG4gICAgICBhcHBsaWVkRmlsdGVycy5wdXNoKGBzdGFydFBvc2l0aW9uOiAke2NyaXRlcmlhLnN0YXJ0UG9zaXRpb259YCk7XG4gICAgfVxuXG4gICAgLy8gQXBwbHkgZW5kIHBvc2l0aW9uIGZpbHRlclxuICAgIGlmIChjcml0ZXJpYS5lbmRQb3NpdGlvbikge1xuICAgICAgZmlsdGVyZWQgPSB0aGlzLmZpbHRlckJ5RW5kUG9zaXRpb24oZmlsdGVyZWQsIGNyaXRlcmlhLmVuZFBvc2l0aW9uKTtcbiAgICAgIGFwcGxpZWRGaWx0ZXJzLnB1c2goYGVuZFBvc2l0aW9uOiAke2NyaXRlcmlhLmVuZFBvc2l0aW9ufWApO1xuICAgIH1cblxuICAgIC8vIEFwcGx5IGxldHRlciB0eXBlcyBmaWx0ZXJcbiAgICBpZiAoY3JpdGVyaWEubGV0dGVyVHlwZXMgJiYgY3JpdGVyaWEubGV0dGVyVHlwZXMubGVuZ3RoID4gMCkge1xuICAgICAgZmlsdGVyZWQgPSB0aGlzLmZpbHRlckJ5TGV0dGVyVHlwZXMoZmlsdGVyZWQsIGNyaXRlcmlhLmxldHRlclR5cGVzKTtcbiAgICAgIGFwcGxpZWRGaWx0ZXJzLnB1c2goYGxldHRlclR5cGVzOiAke2NyaXRlcmlhLmxldHRlclR5cGVzLmpvaW4oXCIsIFwiKX1gKTtcbiAgICB9XG5cbiAgICAvLyBBcHBseSByb3RhdGlvbiBmaWx0ZXJcbiAgICBpZiAoY3JpdGVyaWEuYmx1ZVJvdGF0aW9uRGlyZWN0aW9uIHx8IGNyaXRlcmlhLnJlZFJvdGF0aW9uRGlyZWN0aW9uKSB7XG4gICAgICBmaWx0ZXJlZCA9IHRoaXMuZmlsdGVyQnlSb3RhdGlvbihcbiAgICAgICAgZmlsdGVyZWQsXG4gICAgICAgIGNyaXRlcmlhLmJsdWVSb3RhdGlvbkRpcmVjdGlvbiB8fCBcIlwiLFxuICAgICAgICBjcml0ZXJpYS5yZWRSb3RhdGlvbkRpcmVjdGlvbiB8fCBcIlwiXG4gICAgICApO1xuICAgICAgYXBwbGllZEZpbHRlcnMucHVzaChcbiAgICAgICAgYHJvdGF0aW9uOiBibHVlPSR7Y3JpdGVyaWEuYmx1ZVJvdGF0aW9uRGlyZWN0aW9uIHx8IFwiYW55XCJ9LCByZWQ9JHtjcml0ZXJpYS5yZWRSb3RhdGlvbkRpcmVjdGlvbiB8fCBcImFueVwifWBcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gQXBwbHkgbW90aW9uIHR5cGVzIGZpbHRlclxuICAgIGlmIChjcml0ZXJpYS5tb3Rpb25UeXBlcyAmJiBjcml0ZXJpYS5tb3Rpb25UeXBlcy5sZW5ndGggPiAwKSB7XG4gICAgICBmaWx0ZXJlZCA9IHRoaXMuZmlsdGVyQnlNb3Rpb25UeXBlcyhmaWx0ZXJlZCwgY3JpdGVyaWEubW90aW9uVHlwZXMpO1xuICAgICAgYXBwbGllZEZpbHRlcnMucHVzaChgbW90aW9uVHlwZXM6ICR7Y3JpdGVyaWEubW90aW9uVHlwZXMuam9pbihcIiwgXCIpfWApO1xuICAgIH1cblxuICAgIC8vIEFwcGx5IGV4Y2x1ZGUgbGV0dGVycyBmaWx0ZXJcbiAgICBpZiAoY3JpdGVyaWEuZXhjbHVkZUxldHRlcnMgJiYgY3JpdGVyaWEuZXhjbHVkZUxldHRlcnMubGVuZ3RoID4gMCkge1xuICAgICAgZmlsdGVyZWQgPSB0aGlzLmZpbHRlckV4Y2x1ZGVMZXR0ZXJzKGZpbHRlcmVkLCBjcml0ZXJpYS5leGNsdWRlTGV0dGVycyk7XG4gICAgICBhcHBsaWVkRmlsdGVycy5wdXNoKFxuICAgICAgICBgZXhjbHVkZUxldHRlcnM6ICR7Y3JpdGVyaWEuZXhjbHVkZUxldHRlcnMuam9pbihcIiwgXCIpfWBcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGZpbHRlcmVkLFxuICAgICAgdG90YWxPcmlnaW5hbCxcbiAgICAgIHRvdGFsRmlsdGVyZWQ6IGZpbHRlcmVkLmxlbmd0aCxcbiAgICAgIGFwcGxpZWRGaWx0ZXJzLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogRXh0cmFjdCBlbmQgcG9zaXRpb24gZnJvbSB0aGUgbGFzdCBiZWF0IGluIGEgc2VxdWVuY2VcbiAgICogQ29tcHV0ZXMgZW5kIHBvc2l0aW9uIGZyb20gbW90aW9uIGRhdGEgdXNpbmcgUG9zaXRpb25NYXBwZXJcbiAgICovXG4gIGV4dHJhY3RFbmRQb3NpdGlvbihsYXN0QmVhdDogQmVhdERhdGEpOiBzdHJpbmcgfCBudWxsIHtcbiAgICB0cnkge1xuICAgICAgaWYgKCFsYXN0QmVhdCB8fCAhbGFzdEJlYXQucGljdG9ncmFwaERhdGEpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHBpY3RvZ3JhcGhEYXRhID0gbGFzdEJlYXQucGljdG9ncmFwaERhdGE7XG4gICAgICBpZiAoIXBpY3RvZ3JhcGhEYXRhLm1vdGlvbnM/LmJsdWUgfHwgIXBpY3RvZ3JhcGhEYXRhLm1vdGlvbnM/LnJlZCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZW5kUG9zaXRpb24gPSB0aGlzLnBvc2l0aW9uU2VydmljZS5nZXRQb3NpdGlvbkZyb21Mb2NhdGlvbnMoXG4gICAgICAgIHBpY3RvZ3JhcGhEYXRhLm1vdGlvbnMuYmx1ZS5lbmRMb2NhdGlvbixcbiAgICAgICAgcGljdG9ncmFwaERhdGEubW90aW9ucy5yZWQuZW5kTG9jYXRpb25cbiAgICAgICk7XG5cbiAgICAgIHJldHVybiBlbmRQb3NpdGlvbiA/IGVuZFBvc2l0aW9uLnRvU3RyaW5nKCkgOiBudWxsO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCLimqDvuI8gRmFpbGVkIHRvIGV4dHJhY3QgZW5kIHBvc2l0aW9uIGZyb20gYmVhdDpcIiwgZXJyb3IpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEZpbHRlciBieSBtb3Rpb24gdHlwZXNcbiAgICovXG4gIHByaXZhdGUgZmlsdGVyQnlNb3Rpb25UeXBlcyhcbiAgICBvcHRpb25zOiBQaWN0b2dyYXBoRGF0YVtdLFxuICAgIG1vdGlvblR5cGVzOiBzdHJpbmdbXVxuICApOiBQaWN0b2dyYXBoRGF0YVtdIHtcbiAgICByZXR1cm4gb3B0aW9ucy5maWx0ZXIoKG9wdGlvbikgPT4ge1xuICAgICAgY29uc3QgYmx1ZU1vdGlvblR5cGUgPSBvcHRpb24ubW90aW9ucz8uYmx1ZT8ubW90aW9uVHlwZVxuICAgICAgICA/LnRvU3RyaW5nKClcbiAgICAgICAgLnRvTG93ZXJDYXNlKCk7XG4gICAgICBjb25zdCByZWRNb3Rpb25UeXBlID0gb3B0aW9uLm1vdGlvbnM/LnJlZD8ubW90aW9uVHlwZVxuICAgICAgICA/LnRvU3RyaW5nKClcbiAgICAgICAgLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgIGNvbnN0IG5vcm1hbGl6ZWRNb3Rpb25UeXBlcyA9IG1vdGlvblR5cGVzLm1hcCgobXQpID0+IG10LnRvTG93ZXJDYXNlKCkpO1xuXG4gICAgICByZXR1cm4gKFxuICAgICAgICBub3JtYWxpemVkTW90aW9uVHlwZXMuaW5jbHVkZXMoYmx1ZU1vdGlvblR5cGUgfHwgXCJcIikgfHxcbiAgICAgICAgbm9ybWFsaXplZE1vdGlvblR5cGVzLmluY2x1ZGVzKHJlZE1vdGlvblR5cGUgfHwgXCJcIilcbiAgICAgICk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRmlsdGVyIHRvIGV4Y2x1ZGUgc3BlY2lmaWMgbGV0dGVyc1xuICAgKi9cbiAgcHJpdmF0ZSBmaWx0ZXJFeGNsdWRlTGV0dGVycyhcbiAgICBvcHRpb25zOiBQaWN0b2dyYXBoRGF0YVtdLFxuICAgIGV4Y2x1ZGVMZXR0ZXJzOiBzdHJpbmdbXVxuICApOiBQaWN0b2dyYXBoRGF0YVtdIHtcbiAgICByZXR1cm4gb3B0aW9ucy5maWx0ZXIoKG9wdGlvbikgPT4ge1xuICAgICAgcmV0dXJuICFleGNsdWRlTGV0dGVycy5pbmNsdWRlcyhvcHRpb24ubGV0dGVyIHx8IFwiXCIpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBmaWx0ZXJpbmcgc3RhdGlzdGljcyBmb3IgZGVidWdnaW5nXG4gICAqL1xuICBnZXRGaWx0ZXJpbmdTdGF0cyhcbiAgICBvcmlnaW5hbE9wdGlvbnM6IFBpY3RvZ3JhcGhEYXRhW10sXG4gICAgY3JpdGVyaWE6IEZpbHRlckNyaXRlcmlhXG4gICk6IHtcbiAgICBvcmlnaW5hbENvdW50OiBudW1iZXI7XG4gICAgYWZ0ZXJFYWNoRmlsdGVyOiBBcnJheTx7XG4gICAgICBmaWx0ZXJOYW1lOiBzdHJpbmc7XG4gICAgICBjb3VudDogbnVtYmVyO1xuICAgICAgY3JpdGVyaWE6IHN0cmluZztcbiAgICB9PjtcbiAgICBmaW5hbENvdW50OiBudW1iZXI7XG4gIH0ge1xuICAgIGxldCBjdXJyZW50ID0gWy4uLm9yaWdpbmFsT3B0aW9uc107XG4gICAgY29uc3QgYWZ0ZXJFYWNoRmlsdGVyOiBBcnJheTx7XG4gICAgICBmaWx0ZXJOYW1lOiBzdHJpbmc7XG4gICAgICBjb3VudDogbnVtYmVyO1xuICAgICAgY3JpdGVyaWE6IHN0cmluZztcbiAgICB9PiA9IFtdO1xuXG4gICAgLy8gVHJhY2sgZWFjaCBmaWx0ZXIgc3RlcFxuICAgIGlmIChjcml0ZXJpYS5zdGFydFBvc2l0aW9uKSB7XG4gICAgICBjdXJyZW50ID0gdGhpcy5maWx0ZXJCeVN0YXJ0UG9zaXRpb24oY3VycmVudCwgY3JpdGVyaWEuc3RhcnRQb3NpdGlvbik7XG4gICAgICBhZnRlckVhY2hGaWx0ZXIucHVzaCh7XG4gICAgICAgIGZpbHRlck5hbWU6IFwic3RhcnRQb3NpdGlvblwiLFxuICAgICAgICBjb3VudDogY3VycmVudC5sZW5ndGgsXG4gICAgICAgIGNyaXRlcmlhOiBjcml0ZXJpYS5zdGFydFBvc2l0aW9uLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKGNyaXRlcmlhLmVuZFBvc2l0aW9uKSB7XG4gICAgICBjdXJyZW50ID0gdGhpcy5maWx0ZXJCeUVuZFBvc2l0aW9uKGN1cnJlbnQsIGNyaXRlcmlhLmVuZFBvc2l0aW9uKTtcbiAgICAgIGFmdGVyRWFjaEZpbHRlci5wdXNoKHtcbiAgICAgICAgZmlsdGVyTmFtZTogXCJlbmRQb3NpdGlvblwiLFxuICAgICAgICBjb3VudDogY3VycmVudC5sZW5ndGgsXG4gICAgICAgIGNyaXRlcmlhOiBjcml0ZXJpYS5lbmRQb3NpdGlvbixcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChjcml0ZXJpYS5sZXR0ZXJUeXBlcyAmJiBjcml0ZXJpYS5sZXR0ZXJUeXBlcy5sZW5ndGggPiAwKSB7XG4gICAgICBjdXJyZW50ID0gdGhpcy5maWx0ZXJCeUxldHRlclR5cGVzKGN1cnJlbnQsIGNyaXRlcmlhLmxldHRlclR5cGVzKTtcbiAgICAgIGFmdGVyRWFjaEZpbHRlci5wdXNoKHtcbiAgICAgICAgZmlsdGVyTmFtZTogXCJsZXR0ZXJUeXBlc1wiLFxuICAgICAgICBjb3VudDogY3VycmVudC5sZW5ndGgsXG4gICAgICAgIGNyaXRlcmlhOiBjcml0ZXJpYS5sZXR0ZXJUeXBlcy5qb2luKFwiLCBcIiksXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgb3JpZ2luYWxDb3VudDogb3JpZ2luYWxPcHRpb25zLmxlbmd0aCxcbiAgICAgIGFmdGVyRWFjaEZpbHRlcixcbiAgICAgIGZpbmFsQ291bnQ6IGN1cnJlbnQubGVuZ3RoLFxuICAgIH07XG4gIH1cbn1cbiJdLAogICJtYXBwaW5ncyI6ICJBQU9BLFNBQVMscUJBQXFCO0FBaUR2QixhQUFNLHVCQUEwRDtBQUFBLEVBQ3JFLFlBQ1Usb0JBQ0EsaUJBQ1I7QUFGUTtBQUNBO0FBQUEsRUFDUDtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0gsc0JBQ0UsU0FDQSxlQUNrQjtBQUNsQixRQUFJLENBQUMsY0FBZSxRQUFPO0FBRTNCLFdBQU8sUUFBUSxPQUFPLENBQUMsV0FBVztBQUVoQyxZQUFNLGlCQUNKLE9BQU8sU0FBUyxRQUFRLE9BQU8sU0FBUyxNQUNwQyxLQUFLLGdCQUNGO0FBQUEsUUFDQyxPQUFP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LFlBQVk7QUFDZixZQUFNLGdCQUFnQixPQUFPLFNBQVMsS0FBSyxZQUN2QyxTQUFTLEVBQ1YsWUFBWTtBQUVmLFlBQU0sd0JBQXdCLFlBQVksSUFBSSxDQUFDLE9BQU8sR0FBRyxZQUFZLENBQUM7QUFFdEUsYUFDRSxzQkFBc0IsU0FBUyxrQkFBa0IsRUFBRSxLQUNuRCxzQkFBc0IsU0FBUyxpQkFBaUIsRUFBRTtBQUFBLElBRXRELENBQUM7QUFBQSxFQUNIO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLUSxxQkFDTixTQUNBLGdCQUNrQjtBQUNsQixXQUFPLFFBQVEsT0FBTyxDQUFDLFdBQVc7QUFDaEMsYUFBTyxDQUFDLGVBQWUsU0FBUyxPQUFPLFVBQVUsRUFBRTtBQUFBLElBQ3JELENBQUM7QUFBQSxFQUNIO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxrQkFDRSxpQkFDQSxVQVNBO0FBQ0EsUUFBSSxVQUFVLENBQUMsR0FBRyxlQUFlO0FBQ2pDLFVBQU0sa0JBSUQsQ0FBQztBQUdOLFFBQUksU0FBUyxlQUFlO0FBQzFCLGdCQUFVLEtBQUssc0JBQXNCLFNBQVMsU0FBUyxhQUFhO0FBQ3BFLHNCQUFnQixLQUFLO0FBQUEsUUFDbkIsWUFBWTtBQUFBLFFBQ1osT0FBTyxRQUFRO0FBQUEsUUFDZixVQUFVLFNBQVM7QUFBQSxNQUNyQixDQUFDO0FBQUEsSUFDSDtBQUVBLFFBQUksU0FBUyxhQUFhO0FBQ3hCLGdCQUFVLEtBQUssb0JBQW9CLFNBQVMsU0FBUyxXQUFXO0FBQ2hFLHNCQUFnQixLQUFLO0FBQUEsUUFDbkIsWUFBWTtBQUFBLFFBQ1osT0FBTyxRQUFRO0FBQUEsUUFDZixVQUFVLFNBQVM7QUFBQSxNQUNyQixDQUFDO0FBQUEsSUFDSDtBQUVBLFFBQUksU0FBUyxlQUFlLFNBQVMsWUFBWSxTQUFTLEdBQUc7QUFDM0QsZ0JBQVUsS0FBSyxvQkFBb0IsU0FBUyxTQUFTLFdBQVc7QUFDaEUsc0JBQWdCLEtBQUs7QUFBQSxRQUNuQixZQUFZO0FBQUEsUUFDWixPQUFPLFFBQVE7QUFBQSxRQUNmLFVBQVUsU0FBUyxZQUFZLEtBQUssSUFBSTtBQUFBLE1BQzFDLENBQUM7QUFBQSxJQUNIO0FBRUEsV0FBTztBQUFBLE1BQ0wsZUFBZSxnQkFBZ0I7QUFBQSxNQUMvQjtBQUFBLE1BQ0EsWUFBWSxRQUFRO0FBQUEsSUFDdEI7QUFBQSxFQUNGO0FBQ0Y7IiwKICAibmFtZXMiOiBbXQp9Cg==
