import {
  getLetterType,
  GridPosition,
  GridPositionGroup,
  Letter,
  LetterType,
  OptionPickerReversalFilter,
  OptionPickerSortMethod
} from "/src/lib/domain/index.ts";
import { resolve } from "/src/lib/services/bootstrap.ts";
function getEndPosition(option) {
  if (option.motions?.blue && option.motions?.red) {
    const positionService = resolve("IPositionMapper");
    const position = positionService.getPositionFromLocations(
      option.motions.blue.endLocation,
      option.motions.red.endLocation
    );
    return position?.toString() || null;
  }
  return null;
}
export function determineReversalCategory(sequence, option) {
  if (!sequence || sequence.length === 0) {
    return OptionPickerReversalFilter.ALL;
  }
  const lastBeat = sequence[sequence.length - 1];
  if (!lastBeat?.motions?.red || !lastBeat?.motions?.blue) {
    return OptionPickerReversalFilter.ALL;
  }
  if (!option?.motions?.red || !option?.motions?.blue) {
    return OptionPickerReversalFilter.ALL;
  }
  const redContinuous = lastBeat.motions.red.rotationDirection === option.motions.red.rotationDirection;
  const blueContinuous = lastBeat.motions.blue.rotationDirection === option.motions.blue.rotationDirection;
  if (redContinuous && blueContinuous) {
    return OptionPickerReversalFilter.CONTINUOUS;
  } else if (redContinuous || blueContinuous) {
    return OptionPickerReversalFilter.ONE_REVERSAL;
  } else {
    return OptionPickerReversalFilter.TWO_REVERSALS;
  }
}
export function determineGroupKey(option, sortMethod, sequence) {
  switch (sortMethod) {
    case OptionPickerSortMethod.LETTER_TYPE:
      if (!option.letter) {
        throw new Error("Option letter is required for letter type grouping");
      }
      return getLetterType(option.letter);
    case OptionPickerSortMethod.END_POSITION: {
      const endPosition = getEndPosition(option);
      if (typeof endPosition === "string") {
        const gridPosition = Object.values(GridPosition).find(
          (pos) => pos === endPosition
        );
        if (gridPosition) return gridPosition;
        const gridGroup = Object.values(GridPositionGroup).find(
          (positionGroup) => endPosition.startsWith(positionGroup)
        );
        if (gridGroup) return gridGroup;
      }
      return "Unknown";
    }
    case OptionPickerSortMethod.REVERSALS:
      return determineReversalCategory(sequence, option);
    default:
      return "all";
  }
}
export function getSortedGroupKeys(keys, sortMethod) {
  switch (sortMethod) {
    case OptionPickerSortMethod.LETTER_TYPE:
      return keys.sort((a, b) => {
        const order = [
          LetterType.TYPE1,
          LetterType.TYPE2,
          LetterType.TYPE3,
          LetterType.TYPE4,
          LetterType.TYPE5,
          LetterType.TYPE6
        ];
        return order.indexOf(a) - order.indexOf(b);
      });
    case OptionPickerSortMethod.END_POSITION:
      return keys.sort((a, b) => {
        return String(a).localeCompare(String(b));
      });
    case OptionPickerSortMethod.REVERSALS:
      return keys.sort((a, b) => {
        const order = [
          OptionPickerReversalFilter.CONTINUOUS,
          OptionPickerReversalFilter.ONE_REVERSAL,
          OptionPickerReversalFilter.TWO_REVERSALS,
          OptionPickerReversalFilter.ALL
        ];
        return order.indexOf(a) - order.indexOf(b);
      });
    default:
      return keys.sort();
  }
}
export function getSorter(sortMethod, sequence) {
  switch (sortMethod) {
    case OptionPickerSortMethod.LETTER_TYPE:
      return (a, b) => {
        const typeA = getLetterType(a.letter || Letter.A);
        const typeB = getLetterType(b.letter || Letter.A);
        if (typeA !== typeB) {
          return typeA.localeCompare(typeB);
        }
        const letterA = a.letter || "";
        const letterB = b.letter || "";
        return letterA.localeCompare(letterB);
      };
    case OptionPickerSortMethod.END_POSITION:
      return (a, b) => {
        const endPosA = String(getEndPosition(a) || "");
        const endPosB = String(getEndPosition(b) || "");
        if (endPosA !== endPosB) {
          return endPosA.localeCompare(endPosB);
        }
        const letterA = a.letter || "";
        const letterB = b.letter || "";
        return letterA.localeCompare(letterB);
      };
    case OptionPickerSortMethod.REVERSALS:
      return (a, b) => {
        const reversalA = determineReversalCategory(sequence, a);
        const reversalB = determineReversalCategory(sequence, b);
        if (reversalA !== reversalB) {
          return reversalA.localeCompare(reversalB);
        }
        const letterA = a.letter || "";
        const letterB = b.letter || "";
        return letterA.localeCompare(letterB);
      };
    default:
      return (a, b) => {
        const letterA = a.letter || "";
        const letterB = b.letter || "";
        return letterA.localeCompare(letterB);
      };
  }
}
export function filterByReversals(options, sequence, filter) {
  if (filter === OptionPickerReversalFilter.ALL) {
    return options;
  }
  return options.filter((option) => {
    const category = determineReversalCategory(sequence, option);
    return category === filter;
  });
}
export function getGroupDisplayName(groupKey, sortMethod) {
  switch (sortMethod) {
    case OptionPickerSortMethod.LETTER_TYPE:
      switch (groupKey) {
        case LetterType.TYPE1:
          return "Type 1: Dual-Shift";
        case LetterType.TYPE2:
          return "Type 2: Shift";
        case LetterType.TYPE3:
          return "Type 3: Cross-Shift";
        case LetterType.TYPE4:
          return "Type 4: Dash";
        case LetterType.TYPE5:
          return "Type 5: Dual-Dash";
        case LetterType.TYPE6:
          return "Type 6: Static";
        default:
          return String(groupKey);
      }
    case OptionPickerSortMethod.END_POSITION:
      return `End Position: ${groupKey}`;
    case OptionPickerSortMethod.REVERSALS:
      switch (groupKey) {
        case OptionPickerReversalFilter.CONTINUOUS:
          return "Continuous";
        case OptionPickerReversalFilter.ONE_REVERSAL:
          return "One Reversal";
        case OptionPickerReversalFilter.TWO_REVERSALS:
          return "Two Reversals";
        default:
          return String(groupKey);
      }
    default:
      return String(groupKey);
  }
}
export function getOptionsSummary(options) {
  const summary = {
    total: options.length,
    byType: {},
    byEndPosition: {}
  };
  options.forEach((option) => {
    const type = getLetterType(option.letter || Letter.A);
    summary.byType[type] = (summary.byType[type] || 0) + 1;
    const endPos = String(getEndPosition(option) || "Unknown");
    summary.byEndPosition[endPos] = (summary.byEndPosition[endPos] || 0) + 1;
  });
  return summary;
}
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiQzovVEtBL3dlYi9zcmMvbGliL2NvbXBvbmVudHMvY29uc3RydWN0L29wdGlvbi1waWNrZXIvc2VydmljZXMvT3B0aW9uc1NlcnZpY2UudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIi8qKlxuICogT3B0aW9ucyBTZXJ2aWNlIGZvciBPcHRpb25QaWNrZXIgdXNpbmcgT05MWSBTdmVsdGUgNSBSdW5lc1xuICpcbiAqIFByb3ZpZGVzIGZ1bmN0aW9uYWxpdHkgZm9yIGdlbmVyYXRpbmcsIGZpbHRlcmluZywgc29ydGluZywgYW5kIGdyb3VwaW5nIHBpY3RvZ3JhcGggb3B0aW9ucy5cbiAqIENvbXBsZXRlIHBvcnQgZnJvbSBsZWdhY3kgc3lzdGVtIHdpdGhvdXQgYW55IHN0b3JlcyAtIHB1cmUgcnVuZXMgYW5kIGZ1bmN0aW9ucy5cbiAqL1xuXG5pbXBvcnQge1xuICBnZXRMZXR0ZXJUeXBlLFxuICBHcmlkUG9zaXRpb24sXG4gIEdyaWRQb3NpdGlvbkdyb3VwLFxuICBMZXR0ZXIsXG4gIExldHRlclR5cGUsXG4gIE9wdGlvblBpY2tlclJldmVyc2FsRmlsdGVyLFxuICBPcHRpb25QaWNrZXJTb3J0TWV0aG9kLFxufSBmcm9tIFwiJGxpYi9kb21haW5cIjtcbmltcG9ydCB0eXBlIHsgUGljdG9ncmFwaERhdGEgfSBmcm9tIFwiJGxpYi9kb21haW4vUGljdG9ncmFwaERhdGFcIjtcbmltcG9ydCB7IHJlc29sdmUgfSBmcm9tIFwiJGxpYi9zZXJ2aWNlcy9ib290c3RyYXBcIjtcbmltcG9ydCB0eXBlIHsgSVBvc2l0aW9uTWFwcGVyIH0gZnJvbSBcIiRsaWIvc2VydmljZXMvaW50ZXJmYWNlcy9tb3ZlbWVudC9JUG9zaXRpb25NYXBwZXJcIjtcblxuLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb24gdG8gY29tcHV0ZSBlbmRQb3NpdGlvbiBmcm9tIG1vdGlvbiBkYXRhXG4gKi9cbmZ1bmN0aW9uIGdldEVuZFBvc2l0aW9uKG9wdGlvbjogUGljdG9ncmFwaERhdGEpOiBzdHJpbmcgfCBudWxsIHtcbiAgaWYgKG9wdGlvbi5tb3Rpb25zPy5ibHVlICYmIG9wdGlvbi5tb3Rpb25zPy5yZWQpIHtcbiAgICBjb25zdCBwb3NpdGlvblNlcnZpY2UgPSByZXNvbHZlKFwiSVBvc2l0aW9uTWFwcGVyXCIpIGFzIElQb3NpdGlvbk1hcHBlcjtcbiAgICBjb25zdCBwb3NpdGlvbiA9IHBvc2l0aW9uU2VydmljZS5nZXRQb3NpdGlvbkZyb21Mb2NhdGlvbnMoXG4gICAgICBvcHRpb24ubW90aW9ucy5ibHVlLmVuZExvY2F0aW9uLFxuICAgICAgb3B0aW9uLm1vdGlvbnMucmVkLmVuZExvY2F0aW9uXG4gICAgKTtcbiAgICByZXR1cm4gcG9zaXRpb24/LnRvU3RyaW5nKCkgfHwgbnVsbDtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuLyoqXG4gKiBVbmlvbiB0eXBlIGZvciBhbGwgcG9zc2libGUgZ3JvdXAga2V5IHZhbHVlcyByZXR1cm5lZCBieSBkZXRlcm1pbmVHcm91cEtleVxuICovXG5leHBvcnQgdHlwZSBPcHRpb25QaWNrZXJHcm91cEtleSA9XG4gIHwgTGV0dGVyVHlwZVxuICB8IEdyaWRQb3NpdGlvblxuICB8IEdyaWRQb3NpdGlvbkdyb3VwXG4gIHwgT3B0aW9uUGlja2VyUmV2ZXJzYWxGaWx0ZXJcbiAgfCBcIlVua25vd25cIlxuICB8IFwiYWxsXCI7XG5cbi8qKlxuICogRGV0ZXJtaW5lIHJldmVyc2FsIGNhdGVnb3J5IGZvciBhbiBvcHRpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRldGVybWluZVJldmVyc2FsQ2F0ZWdvcnkoXG4gIHNlcXVlbmNlOiBQaWN0b2dyYXBoRGF0YVtdLFxuICBvcHRpb246IFBpY3RvZ3JhcGhEYXRhXG4pOiBPcHRpb25QaWNrZXJSZXZlcnNhbEZpbHRlciB7XG4gIC8vIFNpbXBsaWZpZWQgcmV2ZXJzYWwgZGV0ZWN0aW9uXG4gIGlmICghc2VxdWVuY2UgfHwgc2VxdWVuY2UubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIE9wdGlvblBpY2tlclJldmVyc2FsRmlsdGVyLkFMTDtcbiAgfVxuXG4gIGNvbnN0IGxhc3RCZWF0ID0gc2VxdWVuY2Vbc2VxdWVuY2UubGVuZ3RoIC0gMV07XG4gIGlmICghbGFzdEJlYXQ/Lm1vdGlvbnM/LnJlZCB8fCAhbGFzdEJlYXQ/Lm1vdGlvbnM/LmJsdWUpIHtcbiAgICByZXR1cm4gT3B0aW9uUGlja2VyUmV2ZXJzYWxGaWx0ZXIuQUxMO1xuICB9XG5cbiAgaWYgKCFvcHRpb24/Lm1vdGlvbnM/LnJlZCB8fCAhb3B0aW9uPy5tb3Rpb25zPy5ibHVlKSB7XG4gICAgcmV0dXJuIE9wdGlvblBpY2tlclJldmVyc2FsRmlsdGVyLkFMTDtcbiAgfVxuXG4gIC8vIENoZWNrIGlmIHJvdGF0aW9uIGRpcmVjdGlvbnMgY29udGludWUgb3IgcmV2ZXJzZVxuICBjb25zdCByZWRDb250aW51b3VzID1cbiAgICBsYXN0QmVhdC5tb3Rpb25zLnJlZC5yb3RhdGlvbkRpcmVjdGlvbiA9PT1cbiAgICBvcHRpb24ubW90aW9ucy5yZWQucm90YXRpb25EaXJlY3Rpb247XG4gIGNvbnN0IGJsdWVDb250aW51b3VzID1cbiAgICBsYXN0QmVhdC5tb3Rpb25zLmJsdWUucm90YXRpb25EaXJlY3Rpb24gPT09XG4gICAgb3B0aW9uLm1vdGlvbnMuYmx1ZS5yb3RhdGlvbkRpcmVjdGlvbjtcblxuICBpZiAocmVkQ29udGludW91cyAmJiBibHVlQ29udGludW91cykge1xuICAgIHJldHVybiBPcHRpb25QaWNrZXJSZXZlcnNhbEZpbHRlci5DT05USU5VT1VTO1xuICB9IGVsc2UgaWYgKHJlZENvbnRpbnVvdXMgfHwgYmx1ZUNvbnRpbnVvdXMpIHtcbiAgICByZXR1cm4gT3B0aW9uUGlja2VyUmV2ZXJzYWxGaWx0ZXIuT05FX1JFVkVSU0FMO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBPcHRpb25QaWNrZXJSZXZlcnNhbEZpbHRlci5UV09fUkVWRVJTQUxTO1xuICB9XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGdyb3VwIGtleSBmb3IgYW4gb3B0aW9uIGJhc2VkIG9uIHNvcnQgbWV0aG9kXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZXRlcm1pbmVHcm91cEtleShcbiAgb3B0aW9uOiBQaWN0b2dyYXBoRGF0YSxcbiAgc29ydE1ldGhvZDogT3B0aW9uUGlja2VyU29ydE1ldGhvZCxcbiAgc2VxdWVuY2U6IFBpY3RvZ3JhcGhEYXRhW11cbik6IE9wdGlvblBpY2tlckdyb3VwS2V5IHtcbiAgc3dpdGNoIChzb3J0TWV0aG9kKSB7XG4gICAgY2FzZSBPcHRpb25QaWNrZXJTb3J0TWV0aG9kLkxFVFRFUl9UWVBFOlxuICAgICAgaWYgKCFvcHRpb24ubGV0dGVyKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk9wdGlvbiBsZXR0ZXIgaXMgcmVxdWlyZWQgZm9yIGxldHRlciB0eXBlIGdyb3VwaW5nXCIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGdldExldHRlclR5cGUob3B0aW9uLmxldHRlcik7XG4gICAgY2FzZSBPcHRpb25QaWNrZXJTb3J0TWV0aG9kLkVORF9QT1NJVElPTjoge1xuICAgICAgY29uc3QgZW5kUG9zaXRpb24gPSBnZXRFbmRQb3NpdGlvbihvcHRpb24pO1xuICAgICAgaWYgKHR5cGVvZiBlbmRQb3NpdGlvbiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAvLyBUcnkgdG8gbWF0Y2ggdG8gR3JpZFBvc2l0aW9uIGVudW0sIGZhbGxiYWNrIHRvIEdyaWRQb3NpdGlvbkdyb3VwXG4gICAgICAgIGNvbnN0IGdyaWRQb3NpdGlvbiA9IE9iamVjdC52YWx1ZXMoR3JpZFBvc2l0aW9uKS5maW5kKFxuICAgICAgICAgIChwb3MpID0+IHBvcyA9PT0gZW5kUG9zaXRpb25cbiAgICAgICAgKTtcbiAgICAgICAgaWYgKGdyaWRQb3NpdGlvbikgcmV0dXJuIGdyaWRQb3NpdGlvbiBhcyBHcmlkUG9zaXRpb247XG5cbiAgICAgICAgLy8gVHJ5IHRvIG1hdGNoIHRvIEdyaWRQb3NpdGlvbkdyb3VwIChhbHBoYSwgYmV0YSwgZ2FtbWEpXG4gICAgICAgIGNvbnN0IGdyaWRHcm91cCA9IE9iamVjdC52YWx1ZXMoR3JpZFBvc2l0aW9uR3JvdXApLmZpbmQoXG4gICAgICAgICAgKHBvc2l0aW9uR3JvdXApID0+IGVuZFBvc2l0aW9uLnN0YXJ0c1dpdGgocG9zaXRpb25Hcm91cClcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKGdyaWRHcm91cCkgcmV0dXJuIGdyaWRHcm91cCBhcyBHcmlkUG9zaXRpb25Hcm91cDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIFwiVW5rbm93blwiO1xuICAgIH1cbiAgICBjYXNlIE9wdGlvblBpY2tlclNvcnRNZXRob2QuUkVWRVJTQUxTOlxuICAgICAgcmV0dXJuIGRldGVybWluZVJldmVyc2FsQ2F0ZWdvcnkoc2VxdWVuY2UsIG9wdGlvbik7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBcImFsbFwiO1xuICB9XG59XG5cbi8qKlxuICogR2V0IHNvcnRlZCBncm91cCBrZXlzIGJhc2VkIG9uIHNvcnQgbWV0aG9kXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTb3J0ZWRHcm91cEtleXMoXG4gIGtleXM6IE9wdGlvblBpY2tlckdyb3VwS2V5W10sXG4gIHNvcnRNZXRob2Q6IE9wdGlvblBpY2tlclNvcnRNZXRob2Rcbik6IE9wdGlvblBpY2tlckdyb3VwS2V5W10ge1xuICBzd2l0Y2ggKHNvcnRNZXRob2QpIHtcbiAgICBjYXNlIE9wdGlvblBpY2tlclNvcnRNZXRob2QuTEVUVEVSX1RZUEU6XG4gICAgICByZXR1cm4ga2V5cy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgIGNvbnN0IG9yZGVyID0gW1xuICAgICAgICAgIExldHRlclR5cGUuVFlQRTEsXG4gICAgICAgICAgTGV0dGVyVHlwZS5UWVBFMixcbiAgICAgICAgICBMZXR0ZXJUeXBlLlRZUEUzLFxuICAgICAgICAgIExldHRlclR5cGUuVFlQRTQsXG4gICAgICAgICAgTGV0dGVyVHlwZS5UWVBFNSxcbiAgICAgICAgICBMZXR0ZXJUeXBlLlRZUEU2LFxuICAgICAgICBdO1xuICAgICAgICByZXR1cm4gb3JkZXIuaW5kZXhPZihhIGFzIExldHRlclR5cGUpIC0gb3JkZXIuaW5kZXhPZihiIGFzIExldHRlclR5cGUpO1xuICAgICAgfSk7XG4gICAgY2FzZSBPcHRpb25QaWNrZXJTb3J0TWV0aG9kLkVORF9QT1NJVElPTjpcbiAgICAgIHJldHVybiBrZXlzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgLy8gU29ydCBncmlkIHBvc2l0aW9ucyBsb2dpY2FsbHlcbiAgICAgICAgcmV0dXJuIFN0cmluZyhhKS5sb2NhbGVDb21wYXJlKFN0cmluZyhiKSk7XG4gICAgICB9KTtcbiAgICBjYXNlIE9wdGlvblBpY2tlclNvcnRNZXRob2QuUkVWRVJTQUxTOlxuICAgICAgcmV0dXJuIGtleXMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICBjb25zdCBvcmRlciA9IFtcbiAgICAgICAgICBPcHRpb25QaWNrZXJSZXZlcnNhbEZpbHRlci5DT05USU5VT1VTLFxuICAgICAgICAgIE9wdGlvblBpY2tlclJldmVyc2FsRmlsdGVyLk9ORV9SRVZFUlNBTCxcbiAgICAgICAgICBPcHRpb25QaWNrZXJSZXZlcnNhbEZpbHRlci5UV09fUkVWRVJTQUxTLFxuICAgICAgICAgIE9wdGlvblBpY2tlclJldmVyc2FsRmlsdGVyLkFMTCxcbiAgICAgICAgXTtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBvcmRlci5pbmRleE9mKGEgYXMgT3B0aW9uUGlja2VyUmV2ZXJzYWxGaWx0ZXIpIC1cbiAgICAgICAgICBvcmRlci5pbmRleE9mKGIgYXMgT3B0aW9uUGlja2VyUmV2ZXJzYWxGaWx0ZXIpXG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGtleXMuc29ydCgpO1xuICB9XG59XG5cbi8qKlxuICogR2V0IHNvcnRlciBmdW5jdGlvbiBmb3Igb3B0aW9ucyBiYXNlZCBvbiBzb3J0IG1ldGhvZFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U29ydGVyKFxuICBzb3J0TWV0aG9kOiBPcHRpb25QaWNrZXJTb3J0TWV0aG9kLFxuICBzZXF1ZW5jZTogUGljdG9ncmFwaERhdGFbXVxuKTogKGE6IFBpY3RvZ3JhcGhEYXRhLCBiOiBQaWN0b2dyYXBoRGF0YSkgPT4gbnVtYmVyIHtcbiAgc3dpdGNoIChzb3J0TWV0aG9kKSB7XG4gICAgY2FzZSBPcHRpb25QaWNrZXJTb3J0TWV0aG9kLkxFVFRFUl9UWVBFOlxuICAgICAgcmV0dXJuIChhLCBiKSA9PiB7XG4gICAgICAgIGNvbnN0IHR5cGVBID0gZ2V0TGV0dGVyVHlwZShhLmxldHRlciB8fCBMZXR0ZXIuQSk7IC8vIERlZmF1bHQgdG8gVHlwZTFcbiAgICAgICAgY29uc3QgdHlwZUIgPSBnZXRMZXR0ZXJUeXBlKGIubGV0dGVyIHx8IExldHRlci5BKTsgLy8gRGVmYXVsdCB0byBUeXBlMVxuICAgICAgICBpZiAodHlwZUEgIT09IHR5cGVCKSB7XG4gICAgICAgICAgcmV0dXJuIHR5cGVBLmxvY2FsZUNvbXBhcmUodHlwZUIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFdpdGhpbiBzYW1lIHR5cGUsIHNvcnQgYnkgbGV0dGVyXG4gICAgICAgIGNvbnN0IGxldHRlckEgPSBhLmxldHRlciB8fCBcIlwiO1xuICAgICAgICBjb25zdCBsZXR0ZXJCID0gYi5sZXR0ZXIgfHwgXCJcIjtcbiAgICAgICAgcmV0dXJuIGxldHRlckEubG9jYWxlQ29tcGFyZShsZXR0ZXJCKTtcbiAgICAgIH07XG4gICAgY2FzZSBPcHRpb25QaWNrZXJTb3J0TWV0aG9kLkVORF9QT1NJVElPTjpcbiAgICAgIHJldHVybiAoYSwgYikgPT4ge1xuICAgICAgICBjb25zdCBlbmRQb3NBID0gU3RyaW5nKGdldEVuZFBvc2l0aW9uKGEpIHx8IFwiXCIpO1xuICAgICAgICBjb25zdCBlbmRQb3NCID0gU3RyaW5nKGdldEVuZFBvc2l0aW9uKGIpIHx8IFwiXCIpO1xuICAgICAgICBpZiAoZW5kUG9zQSAhPT0gZW5kUG9zQikge1xuICAgICAgICAgIHJldHVybiBlbmRQb3NBLmxvY2FsZUNvbXBhcmUoZW5kUG9zQik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gV2l0aGluIHNhbWUgZW5kIHBvc2l0aW9uLCBzb3J0IGJ5IGxldHRlclxuICAgICAgICBjb25zdCBsZXR0ZXJBID0gYS5sZXR0ZXIgfHwgXCJcIjtcbiAgICAgICAgY29uc3QgbGV0dGVyQiA9IGIubGV0dGVyIHx8IFwiXCI7XG4gICAgICAgIHJldHVybiBsZXR0ZXJBLmxvY2FsZUNvbXBhcmUobGV0dGVyQik7XG4gICAgICB9O1xuICAgIGNhc2UgT3B0aW9uUGlja2VyU29ydE1ldGhvZC5SRVZFUlNBTFM6XG4gICAgICByZXR1cm4gKGEsIGIpID0+IHtcbiAgICAgICAgY29uc3QgcmV2ZXJzYWxBID0gZGV0ZXJtaW5lUmV2ZXJzYWxDYXRlZ29yeShzZXF1ZW5jZSwgYSk7XG4gICAgICAgIGNvbnN0IHJldmVyc2FsQiA9IGRldGVybWluZVJldmVyc2FsQ2F0ZWdvcnkoc2VxdWVuY2UsIGIpO1xuICAgICAgICBpZiAocmV2ZXJzYWxBICE9PSByZXZlcnNhbEIpIHtcbiAgICAgICAgICByZXR1cm4gcmV2ZXJzYWxBLmxvY2FsZUNvbXBhcmUocmV2ZXJzYWxCKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBXaXRoaW4gc2FtZSByZXZlcnNhbCBjYXRlZ29yeSwgc29ydCBieSBsZXR0ZXJcbiAgICAgICAgY29uc3QgbGV0dGVyQSA9IGEubGV0dGVyIHx8IFwiXCI7XG4gICAgICAgIGNvbnN0IGxldHRlckIgPSBiLmxldHRlciB8fCBcIlwiO1xuICAgICAgICByZXR1cm4gbGV0dGVyQS5sb2NhbGVDb21wYXJlKGxldHRlckIpO1xuICAgICAgfTtcbiAgICBkZWZhdWx0OlxuICAgICAgLy8gRGVmYXVsdCBzb3J0IGJ5IGxldHRlclxuICAgICAgcmV0dXJuIChhLCBiKSA9PiB7XG4gICAgICAgIGNvbnN0IGxldHRlckEgPSBhLmxldHRlciB8fCBcIlwiO1xuICAgICAgICBjb25zdCBsZXR0ZXJCID0gYi5sZXR0ZXIgfHwgXCJcIjtcbiAgICAgICAgcmV0dXJuIGxldHRlckEubG9jYWxlQ29tcGFyZShsZXR0ZXJCKTtcbiAgICAgIH07XG4gIH1cbn1cblxuLyoqXG4gKiBGaWx0ZXIgb3B0aW9ucyBiYXNlZCBvbiByZXZlcnNhbCBmaWx0ZXJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlckJ5UmV2ZXJzYWxzKFxuICBvcHRpb25zOiBQaWN0b2dyYXBoRGF0YVtdLFxuICBzZXF1ZW5jZTogUGljdG9ncmFwaERhdGFbXSxcbiAgZmlsdGVyOiBPcHRpb25QaWNrZXJSZXZlcnNhbEZpbHRlclxuKTogUGljdG9ncmFwaERhdGFbXSB7XG4gIGlmIChmaWx0ZXIgPT09IE9wdGlvblBpY2tlclJldmVyc2FsRmlsdGVyLkFMTCkge1xuICAgIHJldHVybiBvcHRpb25zO1xuICB9XG5cbiAgcmV0dXJuIG9wdGlvbnMuZmlsdGVyKChvcHRpb24pID0+IHtcbiAgICBjb25zdCBjYXRlZ29yeSA9IGRldGVybWluZVJldmVyc2FsQ2F0ZWdvcnkoc2VxdWVuY2UsIG9wdGlvbik7XG4gICAgcmV0dXJuIGNhdGVnb3J5ID09PSBmaWx0ZXI7XG4gIH0pO1xufVxuXG4vKipcbiAqIEdldCBkaXNwbGF5IG5hbWUgZm9yIGEgZ3JvdXAga2V5XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRHcm91cERpc3BsYXlOYW1lKFxuICBncm91cEtleTogT3B0aW9uUGlja2VyR3JvdXBLZXksXG4gIHNvcnRNZXRob2Q6IE9wdGlvblBpY2tlclNvcnRNZXRob2Rcbik6IHN0cmluZyB7XG4gIHN3aXRjaCAoc29ydE1ldGhvZCkge1xuICAgIGNhc2UgT3B0aW9uUGlja2VyU29ydE1ldGhvZC5MRVRURVJfVFlQRTpcbiAgICAgIHN3aXRjaCAoZ3JvdXBLZXkpIHtcbiAgICAgICAgY2FzZSBMZXR0ZXJUeXBlLlRZUEUxOlxuICAgICAgICAgIHJldHVybiBcIlR5cGUgMTogRHVhbC1TaGlmdFwiO1xuICAgICAgICBjYXNlIExldHRlclR5cGUuVFlQRTI6XG4gICAgICAgICAgcmV0dXJuIFwiVHlwZSAyOiBTaGlmdFwiO1xuICAgICAgICBjYXNlIExldHRlclR5cGUuVFlQRTM6XG4gICAgICAgICAgcmV0dXJuIFwiVHlwZSAzOiBDcm9zcy1TaGlmdFwiO1xuICAgICAgICBjYXNlIExldHRlclR5cGUuVFlQRTQ6XG4gICAgICAgICAgcmV0dXJuIFwiVHlwZSA0OiBEYXNoXCI7XG4gICAgICAgIGNhc2UgTGV0dGVyVHlwZS5UWVBFNTpcbiAgICAgICAgICByZXR1cm4gXCJUeXBlIDU6IER1YWwtRGFzaFwiO1xuICAgICAgICBjYXNlIExldHRlclR5cGUuVFlQRTY6XG4gICAgICAgICAgcmV0dXJuIFwiVHlwZSA2OiBTdGF0aWNcIjtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZXR1cm4gU3RyaW5nKGdyb3VwS2V5KTtcbiAgICAgIH1cbiAgICBjYXNlIE9wdGlvblBpY2tlclNvcnRNZXRob2QuRU5EX1BPU0lUSU9OOlxuICAgICAgcmV0dXJuIGBFbmQgUG9zaXRpb246ICR7Z3JvdXBLZXl9YDtcbiAgICBjYXNlIE9wdGlvblBpY2tlclNvcnRNZXRob2QuUkVWRVJTQUxTOlxuICAgICAgc3dpdGNoIChncm91cEtleSkge1xuICAgICAgICBjYXNlIE9wdGlvblBpY2tlclJldmVyc2FsRmlsdGVyLkNPTlRJTlVPVVM6XG4gICAgICAgICAgcmV0dXJuIFwiQ29udGludW91c1wiO1xuICAgICAgICBjYXNlIE9wdGlvblBpY2tlclJldmVyc2FsRmlsdGVyLk9ORV9SRVZFUlNBTDpcbiAgICAgICAgICByZXR1cm4gXCJPbmUgUmV2ZXJzYWxcIjtcbiAgICAgICAgY2FzZSBPcHRpb25QaWNrZXJSZXZlcnNhbEZpbHRlci5UV09fUkVWRVJTQUxTOlxuICAgICAgICAgIHJldHVybiBcIlR3byBSZXZlcnNhbHNcIjtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZXR1cm4gU3RyaW5nKGdyb3VwS2V5KTtcbiAgICAgIH1cbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIFN0cmluZyhncm91cEtleSk7XG4gIH1cbn1cblxuLyoqXG4gKiBHZXQgc3VtbWFyeSBzdGF0aXN0aWNzIGZvciBvcHRpb25zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRPcHRpb25zU3VtbWFyeShvcHRpb25zOiBQaWN0b2dyYXBoRGF0YVtdKToge1xuICB0b3RhbDogbnVtYmVyO1xuICBieVR5cGU6IFJlY29yZDxzdHJpbmcsIG51bWJlcj47XG4gIGJ5RW5kUG9zaXRpb246IFJlY29yZDxzdHJpbmcsIG51bWJlcj47XG59IHtcbiAgY29uc3Qgc3VtbWFyeSA9IHtcbiAgICB0b3RhbDogb3B0aW9ucy5sZW5ndGgsXG4gICAgYnlUeXBlOiB7fSBhcyBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+LFxuICAgIGJ5RW5kUG9zaXRpb246IHt9IGFzIFJlY29yZDxzdHJpbmcsIG51bWJlcj4sXG4gIH07XG5cbiAgb3B0aW9ucy5mb3JFYWNoKChvcHRpb24pID0+IHtcbiAgICAvLyBDb3VudCBieSB0eXBlXG4gICAgY29uc3QgdHlwZSA9IGdldExldHRlclR5cGUob3B0aW9uLmxldHRlciB8fCBMZXR0ZXIuQSk7XG4gICAgc3VtbWFyeS5ieVR5cGVbdHlwZV0gPSAoc3VtbWFyeS5ieVR5cGVbdHlwZV0gfHwgMCkgKyAxO1xuXG4gICAgLy8gQ291bnQgYnkgZW5kIHBvc2l0aW9uXG4gICAgY29uc3QgZW5kUG9zID0gU3RyaW5nKGdldEVuZFBvc2l0aW9uKG9wdGlvbikgfHwgXCJVbmtub3duXCIpO1xuICAgIHN1bW1hcnkuYnlFbmRQb3NpdGlvbltlbmRQb3NdID0gKHN1bW1hcnkuYnlFbmRQb3NpdGlvbltlbmRQb3NdIHx8IDApICsgMTtcbiAgfSk7XG5cbiAgcmV0dXJuIHN1bW1hcnk7XG59XG4iXSwKICAibWFwcGluZ3MiOiAiQUFPQTtBQUFBLEVBQ0U7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FB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
