export class SequenceCardCacheService {
  imageCache = /* @__PURE__ */ new Map();
  dataCache = /* @__PURE__ */ new Map();
  hitCount = 0;
  missCount = 0;
  lastCleanup = /* @__PURE__ */ new Date();
  // Cache configuration
  maxCacheSize = 100 * 1024 * 1024;
  // 100MB
  maxEntries = 1e3;
  maxAge = 24 * 60 * 60 * 1e3;
  // 24 hours
  /**
   * Store image in cache
   */
  async storeImage(sequenceId, imageBlob, options) {
    try {
      const cacheKey = this.generateImageCacheKey(sequenceId, options);
      const entry = {
        data: imageBlob,
        timestamp: /* @__PURE__ */ new Date(),
        size: imageBlob.size,
        accessCount: 0,
        lastAccessed: /* @__PURE__ */ new Date(),
        options
      };
      await this.ensureCacheSpace(entry.size);
      this.imageCache.set(cacheKey, entry);
      console.log(
        `üì¶ Cached image for sequence ${sequenceId} (${imageBlob.size} bytes)`
      );
    } catch (error) {
      console.error("Failed to store image in cache:", error);
    }
  }
  /**
   * Retrieve image from cache
   */
  async retrieveImage(sequenceId, options) {
    try {
      const cacheKey = this.generateImageCacheKey(sequenceId, options);
      const entry = this.imageCache.get(cacheKey);
      if (!entry) {
        this.missCount++;
        return null;
      }
      if (this.isExpired(entry)) {
        this.imageCache.delete(cacheKey);
        this.missCount++;
        return null;
      }
      entry.accessCount++;
      entry.lastAccessed = /* @__PURE__ */ new Date();
      this.hitCount++;
      console.log(`üéØ Cache hit for sequence ${sequenceId}`);
      return entry.data;
    } catch (error) {
      console.error("Failed to retrieve image from cache:", error);
      this.missCount++;
      return null;
    }
  }
  /**
   * Store sequence data in cache
   */
  async storeSequenceData(sequenceId, data) {
    try {
      const dataSize = this.estimateSequenceDataSize(data);
      const entry = {
        data,
        timestamp: /* @__PURE__ */ new Date(),
        size: dataSize,
        accessCount: 0,
        lastAccessed: /* @__PURE__ */ new Date()
      };
      await this.ensureCacheSpace(entry.size);
      this.dataCache.set(sequenceId, entry);
      console.log(
        `üì¶ Cached sequence data for ${sequenceId} (${dataSize} bytes)`
      );
    } catch (error) {
      console.error("Failed to store sequence data in cache:", error);
    }
  }
  /**
   * Retrieve sequence data from cache
   */
  async retrieveSequenceData(sequenceId) {
    try {
      const entry = this.dataCache.get(sequenceId);
      if (!entry) {
        this.missCount++;
        return null;
      }
      if (this.isExpired(entry)) {
        this.dataCache.delete(sequenceId);
        this.missCount++;
        return null;
      }
      entry.accessCount++;
      entry.lastAccessed = /* @__PURE__ */ new Date();
      this.hitCount++;
      return entry.data;
    } catch (error) {
      console.error("Failed to retrieve sequence data from cache:", error);
      this.missCount++;
      return null;
    }
  }
  /**
   * Clear all cached data
   */
  async clearCache() {
    try {
      this.imageCache.clear();
      this.dataCache.clear();
      this.hitCount = 0;
      this.missCount = 0;
      this.lastCleanup = /* @__PURE__ */ new Date();
      console.log("üßπ Cache cleared");
    } catch (error) {
      console.error("Failed to clear cache:", error);
    }
  }
  /**
   * Get cache statistics
   */
  getCacheStats() {
    const totalRequests = this.hitCount + this.missCount;
    const hitRate = totalRequests > 0 ? this.hitCount / totalRequests : 0;
    const totalSize = this.calculateTotalCacheSize();
    const entryCount = this.imageCache.size + this.dataCache.size;
    return {
      entryCount,
      totalSize,
      hitRate,
      lastCleanup: this.lastCleanup
    };
  }
  /**
   * Cleanup expired cache entries
   */
  async cleanup() {
    try {
      const now = /* @__PURE__ */ new Date();
      let removedCount = 0;
      let freedSpace = 0;
      for (const [key, entry] of this.imageCache.entries()) {
        if (this.isExpired(entry)) {
          freedSpace += entry.size;
          this.imageCache.delete(key);
          removedCount++;
        }
      }
      for (const [key, entry] of this.dataCache.entries()) {
        if (this.isExpired(entry)) {
          freedSpace += entry.size;
          this.dataCache.delete(key);
          removedCount++;
        }
      }
      this.lastCleanup = now;
      console.log(
        `üßπ Cache cleanup: removed ${removedCount} entries, freed ${this.formatBytes(freedSpace)}`
      );
    } catch (error) {
      console.error("Cache cleanup failed:", error);
    }
  }
  // ============================================================================
  // PRIVATE METHODS
  // ============================================================================
  generateImageCacheKey(sequenceId, options) {
    if (!options) {
      return sequenceId;
    }
    const optionsParts = [
      options.quality || "default",
      options.format || "PNG",
      options.resolution || "300"
    ];
    return `${sequenceId}_${optionsParts.join("_")}`;
  }
  isExpired(entry) {
    const age = Date.now() - entry.timestamp.getTime();
    return age > this.maxAge;
  }
  estimateSequenceDataSize(data) {
    const jsonString = JSON.stringify(data);
    return new Blob([jsonString]).size;
  }
  calculateTotalCacheSize() {
    let totalSize = 0;
    for (const entry of this.imageCache.values()) {
      totalSize += entry.size;
    }
    for (const entry of this.dataCache.values()) {
      totalSize += entry.size;
    }
    return totalSize;
  }
  async ensureCacheSpace(requiredSpace) {
    const currentSize = this.calculateTotalCacheSize();
    const totalEntries = this.imageCache.size + this.dataCache.size;
    if (currentSize + requiredSpace > this.maxCacheSize || totalEntries >= this.maxEntries) {
      await this.freeUpSpace(requiredSpace);
    }
  }
  async freeUpSpace(requiredSpace) {
    await this.cleanup();
    const currentSize = this.calculateTotalCacheSize();
    if (currentSize + requiredSpace > this.maxCacheSize) {
      await this.evictLeastRecentlyUsed(requiredSpace);
    }
  }
  async evictLeastRecentlyUsed(requiredSpace) {
    const allEntries = [];
    for (const [key, entry] of this.imageCache.entries()) {
      allEntries.push({ key, entry, type: "image" });
    }
    for (const [key, entry] of this.dataCache.entries()) {
      allEntries.push({ key, entry, type: "data" });
    }
    allEntries.sort(
      (a, b) => a.entry.lastAccessed.getTime() - b.entry.lastAccessed.getTime()
    );
    let freedSpace = 0;
    let removedCount = 0;
    for (const { key, entry, type } of allEntries) {
      if (freedSpace >= requiredSpace) {
        break;
      }
      if (type === "image") {
        this.imageCache.delete(key);
      } else {
        this.dataCache.delete(key);
      }
      freedSpace += entry.size;
      removedCount++;
    }
    console.log(
      `üóëÔ∏è Evicted ${removedCount} cache entries, freed ${this.formatBytes(freedSpace)}`
    );
  }
  formatBytes(bytes) {
    const sizes = ["Bytes", "KB", "MB", "GB"];
    if (bytes === 0) return "0 Bytes";
    const i = Math.floor(Math.log(bytes) / Math.log(1024));
    return Math.round(bytes / Math.pow(1024, i) * 100) / 100 + " " + sizes[i];
  }
}
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiQzovVEtBL3dlYi9zcmMvbGliL3NlcnZpY2VzL2ltcGxlbWVudGF0aW9ucy9leHBvcnQvc2VxdWVuY2UtY2FyZC9TZXF1ZW5jZUNhcmRDYWNoZVNlcnZpY2UudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIi8qKlxuICogU2VxdWVuY2UgQ2FyZCBDYWNoZSBTZXJ2aWNlXG4gKlxuICogSGFuZGxlcyBjYWNoaW5nIG9mIHNlcXVlbmNlIGNhcmQgaW1hZ2VzIGFuZCBkYXRhLlxuICogU2luZ2xlIHJlc3BvbnNpYmlsaXR5OiBDYWNoZSBzdG9yYWdlIGFuZCByZXRyaWV2YWwuXG4gKi9cblxuaW1wb3J0IHR5cGUge1xuICBFeHBvcnRPcHRpb25zLFxuICBTZXF1ZW5jZURhdGEsXG59IGZyb20gXCIuLi8uLi8uLi9pbnRlcmZhY2VzL2RvbWFpbi10eXBlc1wiO1xuaW1wb3J0IHR5cGUgeyBJU2VxdWVuY2VDYXJkQ2FjaGVTZXJ2aWNlIH0gZnJvbSBcIi4uLy4uLy4uL2ludGVyZmFjZXMvc2VxdWVuY2UtY2FyZC1leHBvcnQtaW50ZXJmYWNlc1wiO1xuXG5pbnRlcmZhY2UgQ2FjaGVFbnRyeSB7XG4gIGRhdGE6IEJsb2IgfCBTZXF1ZW5jZURhdGE7XG4gIHRpbWVzdGFtcDogRGF0ZTtcbiAgc2l6ZTogbnVtYmVyO1xuICBhY2Nlc3NDb3VudDogbnVtYmVyO1xuICBsYXN0QWNjZXNzZWQ6IERhdGU7XG4gIG9wdGlvbnM/OiBFeHBvcnRPcHRpb25zO1xufVxuXG5pbnRlcmZhY2UgQ2FjaGVTdGF0cyB7XG4gIGVudHJ5Q291bnQ6IG51bWJlcjtcbiAgdG90YWxTaXplOiBudW1iZXI7XG4gIGhpdFJhdGU6IG51bWJlcjtcbiAgbGFzdENsZWFudXA6IERhdGU7XG59XG5cbmV4cG9ydCBjbGFzcyBTZXF1ZW5jZUNhcmRDYWNoZVNlcnZpY2UgaW1wbGVtZW50cyBJU2VxdWVuY2VDYXJkQ2FjaGVTZXJ2aWNlIHtcbiAgcHJpdmF0ZSBpbWFnZUNhY2hlID0gbmV3IE1hcDxzdHJpbmcsIENhY2hlRW50cnk+KCk7XG4gIHByaXZhdGUgZGF0YUNhY2hlID0gbmV3IE1hcDxzdHJpbmcsIENhY2hlRW50cnk+KCk7XG4gIHByaXZhdGUgaGl0Q291bnQgPSAwO1xuICBwcml2YXRlIG1pc3NDb3VudCA9IDA7XG4gIHByaXZhdGUgbGFzdENsZWFudXAgPSBuZXcgRGF0ZSgpO1xuXG4gIC8vIENhY2hlIGNvbmZpZ3VyYXRpb25cbiAgcHJpdmF0ZSByZWFkb25seSBtYXhDYWNoZVNpemUgPSAxMDAgKiAxMDI0ICogMTAyNDsgLy8gMTAwTUJcbiAgcHJpdmF0ZSByZWFkb25seSBtYXhFbnRyaWVzID0gMTAwMDtcbiAgcHJpdmF0ZSByZWFkb25seSBtYXhBZ2UgPSAyNCAqIDYwICogNjAgKiAxMDAwOyAvLyAyNCBob3Vyc1xuXG4gIC8qKlxuICAgKiBTdG9yZSBpbWFnZSBpbiBjYWNoZVxuICAgKi9cbiAgYXN5bmMgc3RvcmVJbWFnZShcbiAgICBzZXF1ZW5jZUlkOiBzdHJpbmcsXG4gICAgaW1hZ2VCbG9iOiBCbG9iLFxuICAgIG9wdGlvbnM/OiBFeHBvcnRPcHRpb25zXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjYWNoZUtleSA9IHRoaXMuZ2VuZXJhdGVJbWFnZUNhY2hlS2V5KHNlcXVlbmNlSWQsIG9wdGlvbnMpO1xuICAgICAgY29uc3QgZW50cnk6IENhY2hlRW50cnkgPSB7XG4gICAgICAgIGRhdGE6IGltYWdlQmxvYixcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgICBzaXplOiBpbWFnZUJsb2Iuc2l6ZSxcbiAgICAgICAgYWNjZXNzQ291bnQ6IDAsXG4gICAgICAgIGxhc3RBY2Nlc3NlZDogbmV3IERhdGUoKSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgIH07XG5cbiAgICAgIC8vIENoZWNrIGlmIHdlIG5lZWQgdG8gY2xlYW51cCBiZWZvcmUgYWRkaW5nXG4gICAgICBhd2FpdCB0aGlzLmVuc3VyZUNhY2hlU3BhY2UoZW50cnkuc2l6ZSk7XG5cbiAgICAgIHRoaXMuaW1hZ2VDYWNoZS5zZXQoY2FjaGVLZXksIGVudHJ5KTtcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBg8J+TpiBDYWNoZWQgaW1hZ2UgZm9yIHNlcXVlbmNlICR7c2VxdWVuY2VJZH0gKCR7aW1hZ2VCbG9iLnNpemV9IGJ5dGVzKWBcbiAgICAgICk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gc3RvcmUgaW1hZ2UgaW4gY2FjaGU6XCIsIGVycm9yKTtcbiAgICAgIC8vIERvbid0IHRocm93IC0gY2FjaGluZyBmYWlsdXJlcyBzaG91bGQgbm90IGJyZWFrIHRoZSBtYWluIGZsb3dcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmUgaW1hZ2UgZnJvbSBjYWNoZVxuICAgKi9cbiAgYXN5bmMgcmV0cmlldmVJbWFnZShcbiAgICBzZXF1ZW5jZUlkOiBzdHJpbmcsXG4gICAgb3B0aW9ucz86IEV4cG9ydE9wdGlvbnNcbiAgKTogUHJvbWlzZTxCbG9iIHwgbnVsbD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjYWNoZUtleSA9IHRoaXMuZ2VuZXJhdGVJbWFnZUNhY2hlS2V5KHNlcXVlbmNlSWQsIG9wdGlvbnMpO1xuICAgICAgY29uc3QgZW50cnkgPSB0aGlzLmltYWdlQ2FjaGUuZ2V0KGNhY2hlS2V5KTtcblxuICAgICAgaWYgKCFlbnRyeSkge1xuICAgICAgICB0aGlzLm1pc3NDb3VudCsrO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgaWYgZW50cnkgaXMgZXhwaXJlZFxuICAgICAgaWYgKHRoaXMuaXNFeHBpcmVkKGVudHJ5KSkge1xuICAgICAgICB0aGlzLmltYWdlQ2FjaGUuZGVsZXRlKGNhY2hlS2V5KTtcbiAgICAgICAgdGhpcy5taXNzQ291bnQrKztcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIC8vIFVwZGF0ZSBhY2Nlc3Mgc3RhdHNcbiAgICAgIGVudHJ5LmFjY2Vzc0NvdW50Kys7XG4gICAgICBlbnRyeS5sYXN0QWNjZXNzZWQgPSBuZXcgRGF0ZSgpO1xuICAgICAgdGhpcy5oaXRDb3VudCsrO1xuXG4gICAgICBjb25zb2xlLmxvZyhg8J+OryBDYWNoZSBoaXQgZm9yIHNlcXVlbmNlICR7c2VxdWVuY2VJZH1gKTtcbiAgICAgIHJldHVybiBlbnRyeS5kYXRhIGFzIEJsb2I7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gcmV0cmlldmUgaW1hZ2UgZnJvbSBjYWNoZTpcIiwgZXJyb3IpO1xuICAgICAgdGhpcy5taXNzQ291bnQrKztcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTdG9yZSBzZXF1ZW5jZSBkYXRhIGluIGNhY2hlXG4gICAqL1xuICBhc3luYyBzdG9yZVNlcXVlbmNlRGF0YShcbiAgICBzZXF1ZW5jZUlkOiBzdHJpbmcsXG4gICAgZGF0YTogU2VxdWVuY2VEYXRhXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBkYXRhU2l6ZSA9IHRoaXMuZXN0aW1hdGVTZXF1ZW5jZURhdGFTaXplKGRhdGEpO1xuICAgICAgY29uc3QgZW50cnk6IENhY2hlRW50cnkgPSB7XG4gICAgICAgIGRhdGEsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgICAgc2l6ZTogZGF0YVNpemUsXG4gICAgICAgIGFjY2Vzc0NvdW50OiAwLFxuICAgICAgICBsYXN0QWNjZXNzZWQ6IG5ldyBEYXRlKCksXG4gICAgICB9O1xuXG4gICAgICAvLyBDaGVjayBpZiB3ZSBuZWVkIHRvIGNsZWFudXAgYmVmb3JlIGFkZGluZ1xuICAgICAgYXdhaXQgdGhpcy5lbnN1cmVDYWNoZVNwYWNlKGVudHJ5LnNpemUpO1xuXG4gICAgICB0aGlzLmRhdGFDYWNoZS5zZXQoc2VxdWVuY2VJZCwgZW50cnkpO1xuICAgICAgY29uc29sZS5sb2coXG4gICAgICAgIGDwn5OmIENhY2hlZCBzZXF1ZW5jZSBkYXRhIGZvciAke3NlcXVlbmNlSWR9ICgke2RhdGFTaXplfSBieXRlcylgXG4gICAgICApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIHN0b3JlIHNlcXVlbmNlIGRhdGEgaW4gY2FjaGU6XCIsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmUgc2VxdWVuY2UgZGF0YSBmcm9tIGNhY2hlXG4gICAqL1xuICBhc3luYyByZXRyaWV2ZVNlcXVlbmNlRGF0YShzZXF1ZW5jZUlkOiBzdHJpbmcpOiBQcm9taXNlPFNlcXVlbmNlRGF0YSB8IG51bGw+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZW50cnkgPSB0aGlzLmRhdGFDYWNoZS5nZXQoc2VxdWVuY2VJZCk7XG5cbiAgICAgIGlmICghZW50cnkpIHtcbiAgICAgICAgdGhpcy5taXNzQ291bnQrKztcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIC8vIENoZWNrIGlmIGVudHJ5IGlzIGV4cGlyZWRcbiAgICAgIGlmICh0aGlzLmlzRXhwaXJlZChlbnRyeSkpIHtcbiAgICAgICAgdGhpcy5kYXRhQ2FjaGUuZGVsZXRlKHNlcXVlbmNlSWQpO1xuICAgICAgICB0aGlzLm1pc3NDb3VudCsrO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgLy8gVXBkYXRlIGFjY2VzcyBzdGF0c1xuICAgICAgZW50cnkuYWNjZXNzQ291bnQrKztcbiAgICAgIGVudHJ5Lmxhc3RBY2Nlc3NlZCA9IG5ldyBEYXRlKCk7XG4gICAgICB0aGlzLmhpdENvdW50Kys7XG5cbiAgICAgIHJldHVybiBlbnRyeS5kYXRhIGFzIFNlcXVlbmNlRGF0YTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byByZXRyaWV2ZSBzZXF1ZW5jZSBkYXRhIGZyb20gY2FjaGU6XCIsIGVycm9yKTtcbiAgICAgIHRoaXMubWlzc0NvdW50Kys7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXIgYWxsIGNhY2hlZCBkYXRhXG4gICAqL1xuICBhc3luYyBjbGVhckNhY2hlKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICB0aGlzLmltYWdlQ2FjaGUuY2xlYXIoKTtcbiAgICAgIHRoaXMuZGF0YUNhY2hlLmNsZWFyKCk7XG4gICAgICB0aGlzLmhpdENvdW50ID0gMDtcbiAgICAgIHRoaXMubWlzc0NvdW50ID0gMDtcbiAgICAgIHRoaXMubGFzdENsZWFudXAgPSBuZXcgRGF0ZSgpO1xuICAgICAgY29uc29sZS5sb2coXCLwn6e5IENhY2hlIGNsZWFyZWRcIik7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gY2xlYXIgY2FjaGU6XCIsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IGNhY2hlIHN0YXRpc3RpY3NcbiAgICovXG4gIGdldENhY2hlU3RhdHMoKTogQ2FjaGVTdGF0cyB7XG4gICAgY29uc3QgdG90YWxSZXF1ZXN0cyA9IHRoaXMuaGl0Q291bnQgKyB0aGlzLm1pc3NDb3VudDtcbiAgICBjb25zdCBoaXRSYXRlID0gdG90YWxSZXF1ZXN0cyA+IDAgPyB0aGlzLmhpdENvdW50IC8gdG90YWxSZXF1ZXN0cyA6IDA7XG5cbiAgICBjb25zdCB0b3RhbFNpemUgPSB0aGlzLmNhbGN1bGF0ZVRvdGFsQ2FjaGVTaXplKCk7XG4gICAgY29uc3QgZW50cnlDb3VudCA9IHRoaXMuaW1hZ2VDYWNoZS5zaXplICsgdGhpcy5kYXRhQ2FjaGUuc2l6ZTtcblxuICAgIHJldHVybiB7XG4gICAgICBlbnRyeUNvdW50LFxuICAgICAgdG90YWxTaXplLFxuICAgICAgaGl0UmF0ZSxcbiAgICAgIGxhc3RDbGVhbnVwOiB0aGlzLmxhc3RDbGVhbnVwLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogQ2xlYW51cCBleHBpcmVkIGNhY2hlIGVudHJpZXNcbiAgICovXG4gIGFzeW5jIGNsZWFudXAoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICBsZXQgcmVtb3ZlZENvdW50ID0gMDtcbiAgICAgIGxldCBmcmVlZFNwYWNlID0gMDtcblxuICAgICAgLy8gQ2xlYW4gdXAgaW1hZ2UgY2FjaGVcbiAgICAgIGZvciAoY29uc3QgW2tleSwgZW50cnldIG9mIHRoaXMuaW1hZ2VDYWNoZS5lbnRyaWVzKCkpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNFeHBpcmVkKGVudHJ5KSkge1xuICAgICAgICAgIGZyZWVkU3BhY2UgKz0gZW50cnkuc2l6ZTtcbiAgICAgICAgICB0aGlzLmltYWdlQ2FjaGUuZGVsZXRlKGtleSk7XG4gICAgICAgICAgcmVtb3ZlZENvdW50Kys7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gQ2xlYW4gdXAgZGF0YSBjYWNoZVxuICAgICAgZm9yIChjb25zdCBba2V5LCBlbnRyeV0gb2YgdGhpcy5kYXRhQ2FjaGUuZW50cmllcygpKSB7XG4gICAgICAgIGlmICh0aGlzLmlzRXhwaXJlZChlbnRyeSkpIHtcbiAgICAgICAgICBmcmVlZFNwYWNlICs9IGVudHJ5LnNpemU7XG4gICAgICAgICAgdGhpcy5kYXRhQ2FjaGUuZGVsZXRlKGtleSk7XG4gICAgICAgICAgcmVtb3ZlZENvdW50Kys7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5sYXN0Q2xlYW51cCA9IG5vdztcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBg8J+nuSBDYWNoZSBjbGVhbnVwOiByZW1vdmVkICR7cmVtb3ZlZENvdW50fSBlbnRyaWVzLCBmcmVlZCAke3RoaXMuZm9ybWF0Qnl0ZXMoZnJlZWRTcGFjZSl9YFxuICAgICAgKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkNhY2hlIGNsZWFudXAgZmFpbGVkOlwiLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBQUklWQVRFIE1FVEhPRFNcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIHByaXZhdGUgZ2VuZXJhdGVJbWFnZUNhY2hlS2V5KFxuICAgIHNlcXVlbmNlSWQ6IHN0cmluZyxcbiAgICBvcHRpb25zPzogRXhwb3J0T3B0aW9uc1xuICApOiBzdHJpbmcge1xuICAgIGlmICghb3B0aW9ucykge1xuICAgICAgcmV0dXJuIHNlcXVlbmNlSWQ7XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIGEgY29uc2lzdGVudCBjYWNoZSBrZXkgYmFzZWQgb24gc2VxdWVuY2UgSUQgYW5kIGV4cG9ydCBvcHRpb25zXG4gICAgY29uc3Qgb3B0aW9uc1BhcnRzID0gW1xuICAgICAgb3B0aW9ucy5xdWFsaXR5IHx8IFwiZGVmYXVsdFwiLFxuICAgICAgb3B0aW9ucy5mb3JtYXQgfHwgXCJQTkdcIixcbiAgICAgIG9wdGlvbnMucmVzb2x1dGlvbiB8fCBcIjMwMFwiLFxuICAgIF07XG5cbiAgICByZXR1cm4gYCR7c2VxdWVuY2VJZH1fJHtvcHRpb25zUGFydHMuam9pbihcIl9cIil9YDtcbiAgfVxuXG4gIHByaXZhdGUgaXNFeHBpcmVkKGVudHJ5OiBDYWNoZUVudHJ5KTogYm9vbGVhbiB7XG4gICAgY29uc3QgYWdlID0gRGF0ZS5ub3coKSAtIGVudHJ5LnRpbWVzdGFtcC5nZXRUaW1lKCk7XG4gICAgcmV0dXJuIGFnZSA+IHRoaXMubWF4QWdlO1xuICB9XG5cbiAgcHJpdmF0ZSBlc3RpbWF0ZVNlcXVlbmNlRGF0YVNpemUoZGF0YTogU2VxdWVuY2VEYXRhKTogbnVtYmVyIHtcbiAgICAvLyBSb3VnaCBlc3RpbWF0aW9uIG9mIHNlcXVlbmNlIGRhdGEgc2l6ZSBpbiBieXRlc1xuICAgIGNvbnN0IGpzb25TdHJpbmcgPSBKU09OLnN0cmluZ2lmeShkYXRhKTtcbiAgICByZXR1cm4gbmV3IEJsb2IoW2pzb25TdHJpbmddKS5zaXplO1xuICB9XG5cbiAgcHJpdmF0ZSBjYWxjdWxhdGVUb3RhbENhY2hlU2l6ZSgpOiBudW1iZXIge1xuICAgIGxldCB0b3RhbFNpemUgPSAwO1xuXG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiB0aGlzLmltYWdlQ2FjaGUudmFsdWVzKCkpIHtcbiAgICAgIHRvdGFsU2l6ZSArPSBlbnRyeS5zaXplO1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgZW50cnkgb2YgdGhpcy5kYXRhQ2FjaGUudmFsdWVzKCkpIHtcbiAgICAgIHRvdGFsU2l6ZSArPSBlbnRyeS5zaXplO1xuICAgIH1cblxuICAgIHJldHVybiB0b3RhbFNpemU7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGVuc3VyZUNhY2hlU3BhY2UocmVxdWlyZWRTcGFjZTogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgY3VycmVudFNpemUgPSB0aGlzLmNhbGN1bGF0ZVRvdGFsQ2FjaGVTaXplKCk7XG4gICAgY29uc3QgdG90YWxFbnRyaWVzID0gdGhpcy5pbWFnZUNhY2hlLnNpemUgKyB0aGlzLmRhdGFDYWNoZS5zaXplO1xuXG4gICAgLy8gQ2hlY2sgaWYgd2UgbmVlZCB0byBmcmVlIHNwYWNlXG4gICAgaWYgKFxuICAgICAgY3VycmVudFNpemUgKyByZXF1aXJlZFNwYWNlID4gdGhpcy5tYXhDYWNoZVNpemUgfHxcbiAgICAgIHRvdGFsRW50cmllcyA+PSB0aGlzLm1heEVudHJpZXNcbiAgICApIHtcbiAgICAgIGF3YWl0IHRoaXMuZnJlZVVwU3BhY2UocmVxdWlyZWRTcGFjZSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBmcmVlVXBTcGFjZShyZXF1aXJlZFNwYWNlOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBGaXJzdCwgdHJ5IGNsZWFuaW5nIHVwIGV4cGlyZWQgZW50cmllc1xuICAgIGF3YWl0IHRoaXMuY2xlYW51cCgpO1xuXG4gICAgY29uc3QgY3VycmVudFNpemUgPSB0aGlzLmNhbGN1bGF0ZVRvdGFsQ2FjaGVTaXplKCk7XG5cbiAgICAvLyBJZiBzdGlsbCBuZWVkIHNwYWNlLCByZW1vdmUgbGVhc3QgcmVjZW50bHkgdXNlZCBlbnRyaWVzXG4gICAgaWYgKGN1cnJlbnRTaXplICsgcmVxdWlyZWRTcGFjZSA+IHRoaXMubWF4Q2FjaGVTaXplKSB7XG4gICAgICBhd2FpdCB0aGlzLmV2aWN0TGVhc3RSZWNlbnRseVVzZWQocmVxdWlyZWRTcGFjZSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBldmljdExlYXN0UmVjZW50bHlVc2VkKHJlcXVpcmVkU3BhY2U6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGFsbEVudHJpZXM6IEFycmF5PHtcbiAgICAgIGtleTogc3RyaW5nO1xuICAgICAgZW50cnk6IENhY2hlRW50cnk7XG4gICAgICB0eXBlOiBcImltYWdlXCIgfCBcImRhdGFcIjtcbiAgICB9PiA9IFtdO1xuXG4gICAgLy8gQ29sbGVjdCBhbGwgZW50cmllcyB3aXRoIHRoZWlyIGtleXMgYW5kIHR5cGVzXG4gICAgZm9yIChjb25zdCBba2V5LCBlbnRyeV0gb2YgdGhpcy5pbWFnZUNhY2hlLmVudHJpZXMoKSkge1xuICAgICAgYWxsRW50cmllcy5wdXNoKHsga2V5LCBlbnRyeSwgdHlwZTogXCJpbWFnZVwiIH0pO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IFtrZXksIGVudHJ5XSBvZiB0aGlzLmRhdGFDYWNoZS5lbnRyaWVzKCkpIHtcbiAgICAgIGFsbEVudHJpZXMucHVzaCh7IGtleSwgZW50cnksIHR5cGU6IFwiZGF0YVwiIH0pO1xuICAgIH1cblxuICAgIC8vIFNvcnQgYnkgbGFzdCBhY2Nlc3NlZCB0aW1lIChvbGRlc3QgZmlyc3QpXG4gICAgYWxsRW50cmllcy5zb3J0KFxuICAgICAgKGEsIGIpID0+IGEuZW50cnkubGFzdEFjY2Vzc2VkLmdldFRpbWUoKSAtIGIuZW50cnkubGFzdEFjY2Vzc2VkLmdldFRpbWUoKVxuICAgICk7XG5cbiAgICBsZXQgZnJlZWRTcGFjZSA9IDA7XG4gICAgbGV0IHJlbW92ZWRDb3VudCA9IDA7XG5cbiAgICBmb3IgKGNvbnN0IHsga2V5LCBlbnRyeSwgdHlwZSB9IG9mIGFsbEVudHJpZXMpIHtcbiAgICAgIGlmIChmcmVlZFNwYWNlID49IHJlcXVpcmVkU3BhY2UpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlID09PSBcImltYWdlXCIpIHtcbiAgICAgICAgdGhpcy5pbWFnZUNhY2hlLmRlbGV0ZShrZXkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5kYXRhQ2FjaGUuZGVsZXRlKGtleSk7XG4gICAgICB9XG5cbiAgICAgIGZyZWVkU3BhY2UgKz0gZW50cnkuc2l6ZTtcbiAgICAgIHJlbW92ZWRDb3VudCsrO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKFxuICAgICAgYPCfl5HvuI8gRXZpY3RlZCAke3JlbW92ZWRDb3VudH0gY2FjaGUgZW50cmllcywgZnJlZWQgJHt0aGlzLmZvcm1hdEJ5dGVzKGZyZWVkU3BhY2UpfWBcbiAgICApO1xuICB9XG5cbiAgcHJpdmF0ZSBmb3JtYXRCeXRlcyhieXRlczogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBjb25zdCBzaXplcyA9IFtcIkJ5dGVzXCIsIFwiS0JcIiwgXCJNQlwiLCBcIkdCXCJdO1xuICAgIGlmIChieXRlcyA9PT0gMCkgcmV0dXJuIFwiMCBCeXRlc1wiO1xuICAgIGNvbnN0IGkgPSBNYXRoLmZsb29yKE1hdGgubG9nKGJ5dGVzKSAvIE1hdGgubG9nKDEwMjQpKTtcbiAgICByZXR1cm4gTWF0aC5yb3VuZCgoYnl0ZXMgLyBNYXRoLnBvdygxMDI0LCBpKSkgKiAxMDApIC8gMTAwICsgXCIgXCIgKyBzaXplc1tpXTtcbiAgfVxufVxuIl0sCiAgIm1hcHBpbmdzIjogIkFBNkJPLGFBQU0seUJBQThEO0FBQUEsRUFDakUsYUFBYSxvQkFBSSxJQUF3QjtBQUFBLEVBQ3pDLFlBQVksb0JBQUksSUFBd0I7QUFBQSxFQUN4QyxXQUFXO0FBQUEsRUFDWCxZQUFZO0FBQUEsRUFDWixjQUFjLG9CQUFJLEtBQUs7QUFBQTtBQUFBLEVBR2QsZUFBZSxNQUFNLE9BQU87QUFBQTtBQUFBLEVBQzVCLGFBQWE7QUFBQSxFQUNiLFNBQVMsS0FBSyxLQUFLLEtBQUs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS3pDLE1BQU0sV0FDSixZQUNBLFdBQ0EsU0FDZTtBQUNmLFFBQUk7QUFDRixZQUFNLFdBQVcsS0FBSyxzQkFBc0IsWUFBWSxPQUFPO0FBQy9ELFlBQU0sUUFBb0I7QUFBQSxRQUN4QixNQUFNO0FBQUEsUUFDTixXQUFXLG9CQUFJLEtBQUs7QUFBQSxRQUNwQixNQUFNLFVBQVU7QUFBQSxRQUNoQixhQUFhO0FBQUEsUUFDYixjQUFjLG9CQUFJLEtBQUs7QUFBQSxRQUN2QjtBQUFBLE1BQ0Y7QUFHQSxZQUFNLEtBQUssaUJBQWlCLE1BQU0sSUFBSTtBQUV0QyxXQUFLLFdBQVcsSUFBSSxVQUFVLEtBQUs7QUFDbkMsY0FBUTtBQUFBLFFBQ04sZ0NBQWdDLFVBQVUsS0FBSyxVQUFVLElBQUk7QUFBQSxNQUMvRDtBQUFBLElBQ0YsU0FBUyxPQUFPO0FBQ2QsY0FBUSxNQUFNLG1DQUFtQyxLQUFLO0FBQUEsSUFFeEQ7QUFBQSxFQUNGO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxNQUFNLGNBQ0osWUFDQSxTQUNzQjtBQUN0QixRQUFJO0FBQ0YsWUFBTSxXQUFXLEtBQUssc0JBQXNCLFlBQVksT0FBTztBQUMvRCxZQUFNLFFBQVEsS0FBSyxXQUFX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
