import { IBeatFrameServiceInterface } from "/src/lib/services/di/interfaces/beat-frame-interfaces.ts";
import { ILetterQueryServiceInterface } from "/src/lib/services/di/interfaces/codex-interfaces.ts";
import {
  IApplicationInitializationServiceInterface,
  IArrowRenderingServiceInterface,
  IBeatFallbackRenderingServiceInterface,
  IBeatGridServiceInterface,
  IConstructTabCoordinationServiceInterface,
  IDataTransformationServiceInterface,
  IDeviceDetectionServiceInterface,
  IExportServiceInterface,
  IGridRenderingServiceInterface,
  IImageFormatConverterServiceInterface,
  IOrientationCalculationServiceInterface,
  IOverlayRenderingServiceInterface,
  IPageFactoryServiceInterface,
  IPageImageExportServiceInterface,
  IPanelManagementServiceInterface,
  IPersistenceServiceInterface,
  IPictographServiceInterface,
  IPrintablePageLayoutServiceInterface,
  IPropCoordinatorServiceInterface,
  ISequenceCardExportIntegrationServiceInterface,
  ISequenceDeletionServiceInterface,
  ISequenceDomainServiceInterface,
  ISequenceGenerationServiceInterface,
  ISequenceImportServiceInterface,
  ISequenceServiceInterface,
  ISettingsServiceInterface,
  IStartPositionSelectionServiceInterface,
  IStartPositionServiceInterface,
  ISvgConfigurationInterface,
  ISVGToCanvasConverterServiceInterface,
  ISvgUtilityServiceInterface,
  IWorkbenchBeatOperationsServiceInterface
} from "/src/lib/services/di/interfaces/core-interfaces.ts";
import { ISequenceStateServiceInterface } from "/src/lib/services/di/interfaces/sequence-state-interfaces.ts";
import {
  IWorkbenchCoordinationServiceInterface,
  IWorkbenchServiceInterface
} from "/src/lib/services/di/interfaces/workbench-interfaces.ts";
import { ApplicationInitializationService } from "/src/lib/services/implementations/application/ApplicationInitializationService.ts";
import { ConstructTabCoordinationService } from "/src/lib/services/implementations/construct/ConstructTabCoordinationService.ts";
import { SequenceGenerationService } from "/src/lib/services/implementations/generation/SequenceGenerationService.ts";
import { SequenceDeletionService } from "/src/lib/services/implementations/sequence/SequenceDeletionService.ts";
import { SequenceImportService } from "/src/lib/services/implementations/sequence/SequenceImportService.ts";
import { SequenceService } from "/src/lib/services/implementations/sequence/SequenceService.ts";
import { WorkbenchBeatOperationsService } from "/src/lib/services/implementations/sequence/WorkbenchBeatOperationsService.ts";
export async function registerCoreServices(container) {
  container.registerSingletonClass(ISequenceDomainServiceInterface);
  container.registerSingletonClass(IPersistenceServiceInterface);
  container.registerSingletonClass(ISettingsServiceInterface);
  container.registerSingletonClass(IDeviceDetectionServiceInterface);
  container.registerSingletonClass(IPanelManagementServiceInterface);
  container.registerSingletonClass(IBeatFrameServiceInterface);
  container.registerSingletonClass(ISequenceStateServiceInterface);
  container.registerSingletonClass(IWorkbenchServiceInterface);
  container.registerSingletonClass(IWorkbenchCoordinationServiceInterface);
  container.registerSingletonClass(IStartPositionServiceInterface);
  container.registerSingletonClass(IStartPositionSelectionServiceInterface);
  container.registerSingletonClass(ISvgConfigurationInterface);
  container.registerSingletonClass(ISvgUtilityServiceInterface);
  container.registerSingletonClass(IDataTransformationServiceInterface);
  container.registerSingletonClass(IGridRenderingServiceInterface);
  container.registerSingletonClass(IArrowRenderingServiceInterface);
  container.registerSingletonClass(IOverlayRenderingServiceInterface);
  container.registerSingletonClass(IPropCoordinatorServiceInterface);
  container.registerFactory(ISequenceImportServiceInterface, () => {
    return new SequenceImportService();
  });
  container.registerFactory(ISequenceDeletionServiceInterface, () => {
    const sequenceService = container.resolve(ISequenceServiceInterface);
    const persistenceService = container.resolve(IPersistenceServiceInterface);
    return new SequenceDeletionService(sequenceService, persistenceService);
  });
  container.registerFactory(IWorkbenchBeatOperationsServiceInterface, () => {
    const sequenceService = container.resolve(ISequenceServiceInterface);
    const persistenceService = container.resolve(IPersistenceServiceInterface);
    return new WorkbenchBeatOperationsService(
      sequenceService,
      persistenceService
    );
  });
  container.registerFactory(ISequenceServiceInterface, () => {
    const sequenceDomainService = container.resolve(
      ISequenceDomainServiceInterface
    );
    const persistenceService = container.resolve(IPersistenceServiceInterface);
    const sequenceImportService = container.resolve(
      ISequenceImportServiceInterface
    );
    return new SequenceService(
      sequenceDomainService,
      persistenceService,
      sequenceImportService
    );
  });
  container.registerFactory(IConstructTabCoordinationServiceInterface, () => {
    const sequenceService = container.resolve(ISequenceServiceInterface);
    const startPositionService = container.resolve(
      IStartPositionServiceInterface
    );
    const workbenchBeatOperations = container.resolve(
      IWorkbenchBeatOperationsServiceInterface
    );
    return new ConstructTabCoordinationService(
      sequenceService,
      startPositionService,
      workbenchBeatOperations
    );
  });
  container.registerSingletonClass(IPictographServiceInterface);
  container.registerSingletonClass(IExportServiceInterface);
  container.registerSingletonClass(IOrientationCalculationServiceInterface);
  container.registerFactory(ISequenceGenerationServiceInterface, () => {
    const letterQueryService = container.resolve(ILetterQueryServiceInterface);
    const orientationCalculationService = container.resolve(
      IOrientationCalculationServiceInterface
    );
    return new SequenceGenerationService(
      letterQueryService,
      orientationCalculationService
    );
  });
  container.registerSingletonClass(IPrintablePageLayoutServiceInterface);
  container.registerSingletonClass(IPageImageExportServiceInterface);
  container.registerFactory(IPageFactoryServiceInterface, () => {
    const layoutService = container.resolve(
      IPrintablePageLayoutServiceInterface
    );
    return new IPageFactoryServiceInterface.implementation(layoutService);
  });
  container.registerFactory(
    ISequenceCardExportIntegrationServiceInterface,
    () => {
      const pageImageExportService = container.resolve(
        IPageImageExportServiceInterface
      );
      return new ISequenceCardExportIntegrationServiceInterface.implementation(
        pageImageExportService
      );
    }
  );
  container.registerFactory(IApplicationInitializationServiceInterface, () => {
    const settingsService = container.resolve(ISettingsServiceInterface);
    const persistenceService = container.resolve(IPersistenceServiceInterface);
    return new ApplicationInitializationService(
      settingsService,
      persistenceService
    );
  });
  container.registerSingletonClass(ISVGToCanvasConverterServiceInterface);
  container.registerSingletonClass(IImageFormatConverterServiceInterface);
  container.registerSingletonClass(IBeatGridServiceInterface);
  container.registerSingletonClass(IBeatFallbackRenderingServiceInterface);
}
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiQzovVEtBL3dlYi9zcmMvbGliL3NlcnZpY2VzL2RpL3JlZ2lzdHJhdGlvbi9jb3JlLXNlcnZpY2VzLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyIvKipcbiAqIENvcmUgU2VydmljZXMgUmVnaXN0cmF0aW9uXG4gKiBIYW5kbGVzIHJlZ2lzdHJhdGlvbiBvZiBjb3JlIGJ1c2luZXNzIGxvZ2ljIGFuZCBpbmZyYXN0cnVjdHVyZSBzZXJ2aWNlc1xuICovXG5cbmltcG9ydCB0eXBlIHsgU2VydmljZUNvbnRhaW5lciB9IGZyb20gXCIuLi9TZXJ2aWNlQ29udGFpbmVyXCI7XG5pbXBvcnQgeyBJQmVhdEZyYW1lU2VydmljZUludGVyZmFjZSB9IGZyb20gXCIuLi9pbnRlcmZhY2VzL2JlYXQtZnJhbWUtaW50ZXJmYWNlc1wiO1xuaW1wb3J0IHsgSUxldHRlclF1ZXJ5U2VydmljZUludGVyZmFjZSB9IGZyb20gXCIuLi9pbnRlcmZhY2VzL2NvZGV4LWludGVyZmFjZXNcIjtcbmltcG9ydCB7XG4gIElBcHBsaWNhdGlvbkluaXRpYWxpemF0aW9uU2VydmljZUludGVyZmFjZSxcbiAgSUFycm93UmVuZGVyaW5nU2VydmljZUludGVyZmFjZSxcbiAgSUJlYXRGYWxsYmFja1JlbmRlcmluZ1NlcnZpY2VJbnRlcmZhY2UsXG4gIElCZWF0R3JpZFNlcnZpY2VJbnRlcmZhY2UsXG4gIElDb25zdHJ1Y3RUYWJDb29yZGluYXRpb25TZXJ2aWNlSW50ZXJmYWNlLFxuICBJRGF0YVRyYW5zZm9ybWF0aW9uU2VydmljZUludGVyZmFjZSxcbiAgSURldmljZURldGVjdGlvblNlcnZpY2VJbnRlcmZhY2UsXG4gIElFeHBvcnRTZXJ2aWNlSW50ZXJmYWNlLFxuICBJR3JpZFJlbmRlcmluZ1NlcnZpY2VJbnRlcmZhY2UsXG4gIElJbWFnZUZvcm1hdENvbnZlcnRlclNlcnZpY2VJbnRlcmZhY2UsXG4gIElPcmllbnRhdGlvbkNhbGN1bGF0aW9uU2VydmljZUludGVyZmFjZSxcbiAgSU92ZXJsYXlSZW5kZXJpbmdTZXJ2aWNlSW50ZXJmYWNlLFxuICBJUGFnZUZhY3RvcnlTZXJ2aWNlSW50ZXJmYWNlLFxuICBJUGFnZUltYWdlRXhwb3J0U2VydmljZUludGVyZmFjZSxcbiAgSVBhbmVsTWFuYWdlbWVudFNlcnZpY2VJbnRlcmZhY2UsXG4gIElQZXJzaXN0ZW5jZVNlcnZpY2VJbnRlcmZhY2UsXG4gIElQaWN0b2dyYXBoU2VydmljZUludGVyZmFjZSxcbiAgSVByaW50YWJsZVBhZ2VMYXlvdXRTZXJ2aWNlSW50ZXJmYWNlLFxuICAvLyDinIUgUkVNT1ZFRDogUHJvcFJlbmRlcmluZ1NlcnZpY2UgaXMgZGVwcmVjYXRlZFxuICBJUHJvcENvb3JkaW5hdG9yU2VydmljZUludGVyZmFjZSxcbiAgSVNlcXVlbmNlQ2FyZEV4cG9ydEludGVncmF0aW9uU2VydmljZUludGVyZmFjZSxcbiAgSVNlcXVlbmNlRGVsZXRpb25TZXJ2aWNlSW50ZXJmYWNlLFxuICBJU2VxdWVuY2VEb21haW5TZXJ2aWNlSW50ZXJmYWNlLFxuICBJU2VxdWVuY2VHZW5lcmF0aW9uU2VydmljZUludGVyZmFjZSxcbiAgSVNlcXVlbmNlSW1wb3J0U2VydmljZUludGVyZmFjZSxcbiAgSVNlcXVlbmNlU2VydmljZUludGVyZmFjZSxcbiAgSVNldHRpbmdzU2VydmljZUludGVyZmFjZSxcbiAgSVN0YXJ0UG9zaXRpb25TZWxlY3Rpb25TZXJ2aWNlSW50ZXJmYWNlLFxuICBJU3RhcnRQb3NpdGlvblNlcnZpY2VJbnRlcmZhY2UsXG4gIElTdmdDb25maWd1cmF0aW9uSW50ZXJmYWNlLFxuICAvLyBOZXcgY29udmVyc2lvbiBhbmQgcmVuZGVyaW5nIG1pY3Jvc2VydmljZXNcbiAgSVNWR1RvQ2FudmFzQ29udmVydGVyU2VydmljZUludGVyZmFjZSxcbiAgSVN2Z1V0aWxpdHlTZXJ2aWNlSW50ZXJmYWNlLFxuICBJV29ya2JlbmNoQmVhdE9wZXJhdGlvbnNTZXJ2aWNlSW50ZXJmYWNlLFxufSBmcm9tIFwiLi4vaW50ZXJmYWNlcy9jb3JlLWludGVyZmFjZXNcIjtcbmltcG9ydCB7IElTZXF1ZW5jZVN0YXRlU2VydmljZUludGVyZmFjZSB9IGZyb20gXCIuLi9pbnRlcmZhY2VzL3NlcXVlbmNlLXN0YXRlLWludGVyZmFjZXNcIjtcbmltcG9ydCB7XG4gIElXb3JrYmVuY2hDb29yZGluYXRpb25TZXJ2aWNlSW50ZXJmYWNlLFxuICBJV29ya2JlbmNoU2VydmljZUludGVyZmFjZSxcbn0gZnJvbSBcIi4uL2ludGVyZmFjZXMvd29ya2JlbmNoLWludGVyZmFjZXNcIjtcblxuaW1wb3J0IHsgQXBwbGljYXRpb25Jbml0aWFsaXphdGlvblNlcnZpY2UgfSBmcm9tIFwiLi4vLi4vaW1wbGVtZW50YXRpb25zL2FwcGxpY2F0aW9uL0FwcGxpY2F0aW9uSW5pdGlhbGl6YXRpb25TZXJ2aWNlXCI7XG5pbXBvcnQgeyBDb25zdHJ1Y3RUYWJDb29yZGluYXRpb25TZXJ2aWNlIH0gZnJvbSBcIi4uLy4uL2ltcGxlbWVudGF0aW9ucy9jb25zdHJ1Y3QvQ29uc3RydWN0VGFiQ29vcmRpbmF0aW9uU2VydmljZVwiO1xuaW1wb3J0IHsgU2VxdWVuY2VHZW5lcmF0aW9uU2VydmljZSB9IGZyb20gXCIuLi8uLi9pbXBsZW1lbnRhdGlvbnMvZ2VuZXJhdGlvbi9TZXF1ZW5jZUdlbmVyYXRpb25TZXJ2aWNlXCI7XG5pbXBvcnQgeyBTZXF1ZW5jZURlbGV0aW9uU2VydmljZSB9IGZyb20gXCIuLi8uLi9pbXBsZW1lbnRhdGlvbnMvc2VxdWVuY2UvU2VxdWVuY2VEZWxldGlvblNlcnZpY2VcIjtcbmltcG9ydCB7IFNlcXVlbmNlSW1wb3J0U2VydmljZSB9IGZyb20gXCIuLi8uLi9pbXBsZW1lbnRhdGlvbnMvc2VxdWVuY2UvU2VxdWVuY2VJbXBvcnRTZXJ2aWNlXCI7XG5pbXBvcnQgeyBTZXF1ZW5jZVNlcnZpY2UgfSBmcm9tIFwiLi4vLi4vaW1wbGVtZW50YXRpb25zL3NlcXVlbmNlL1NlcXVlbmNlU2VydmljZVwiO1xuaW1wb3J0IHsgV29ya2JlbmNoQmVhdE9wZXJhdGlvbnNTZXJ2aWNlIH0gZnJvbSBcIi4uLy4uL2ltcGxlbWVudGF0aW9ucy9zZXF1ZW5jZS9Xb3JrYmVuY2hCZWF0T3BlcmF0aW9uc1NlcnZpY2VcIjtcblxuLy8gVE9ETzogVGVtcG9yYXJpbHkgZGlzYWJsZWQgZHVlIHRvIGNpcmN1bGFyIGRlcGVuZGVuY3lcbi8vIGltcG9ydCB7IElBcnJvd1Bvc2l0aW9uaW5nT3JjaGVzdHJhdG9ySW50ZXJmYWNlIH0gZnJvbSBcIi4uL2ludGVyZmFjZXMvcG9zaXRpb25pbmctaW50ZXJmYWNlc1wiO1xuXG4vKipcbiAqIFJlZ2lzdGVyIGFsbCBjb3JlIHNlcnZpY2VzIHdpdGggdGhlaXIgZGVwZW5kZW5jaWVzXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWdpc3RlckNvcmVTZXJ2aWNlcyhcbiAgY29udGFpbmVyOiBTZXJ2aWNlQ29udGFpbmVyXG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgLy8gUmVnaXN0ZXIgZG9tYWluIHNlcnZpY2VzIChubyBkZXBlbmRlbmNpZXMpXG4gIGNvbnRhaW5lci5yZWdpc3RlclNpbmdsZXRvbkNsYXNzKElTZXF1ZW5jZURvbWFpblNlcnZpY2VJbnRlcmZhY2UpO1xuXG4gIC8vIFJlZ2lzdGVyIGluZnJhc3RydWN0dXJlIHNlcnZpY2VzXG4gIGNvbnRhaW5lci5yZWdpc3RlclNpbmdsZXRvbkNsYXNzKElQZXJzaXN0ZW5jZVNlcnZpY2VJbnRlcmZhY2UpO1xuICBjb250YWluZXIucmVnaXN0ZXJTaW5nbGV0b25DbGFzcyhJU2V0dGluZ3NTZXJ2aWNlSW50ZXJmYWNlKTtcbiAgY29udGFpbmVyLnJlZ2lzdGVyU2luZ2xldG9uQ2xhc3MoSURldmljZURldGVjdGlvblNlcnZpY2VJbnRlcmZhY2UpO1xuICBjb250YWluZXIucmVnaXN0ZXJTaW5nbGV0b25DbGFzcyhJUGFuZWxNYW5hZ2VtZW50U2VydmljZUludGVyZmFjZSk7XG5cbiAgLy8gUmVnaXN0ZXIgbGF5b3V0IHNlcnZpY2VzXG4gIGNvbnRhaW5lci5yZWdpc3RlclNpbmdsZXRvbkNsYXNzKElCZWF0RnJhbWVTZXJ2aWNlSW50ZXJmYWNlKTtcblxuICAvLyBSZWdpc3RlciBzZXF1ZW5jZSBzdGF0ZSBzZXJ2aWNlc1xuICBjb250YWluZXIucmVnaXN0ZXJTaW5nbGV0b25DbGFzcyhJU2VxdWVuY2VTdGF0ZVNlcnZpY2VJbnRlcmZhY2UpO1xuXG4gIC8vIFJlZ2lzdGVyIHdvcmtiZW5jaCBzZXJ2aWNlc1xuICBjb250YWluZXIucmVnaXN0ZXJTaW5nbGV0b25DbGFzcyhJV29ya2JlbmNoU2VydmljZUludGVyZmFjZSk7XG4gIGNvbnRhaW5lci5yZWdpc3RlclNpbmdsZXRvbkNsYXNzKElXb3JrYmVuY2hDb29yZGluYXRpb25TZXJ2aWNlSW50ZXJmYWNlKTtcblxuICAvLyBSZWdpc3RlciBjb25zdHJ1Y3QgdGFiIHNlcnZpY2VzXG4gIGNvbnRhaW5lci5yZWdpc3RlclNpbmdsZXRvbkNsYXNzKElTdGFydFBvc2l0aW9uU2VydmljZUludGVyZmFjZSk7XG4gIGNvbnRhaW5lci5yZWdpc3RlclNpbmdsZXRvbkNsYXNzKElTdGFydFBvc2l0aW9uU2VsZWN0aW9uU2VydmljZUludGVyZmFjZSk7XG5cbiAgLy8gUmVnaXN0ZXIgcmVuZGVyaW5nIG1pY3Jvc2VydmljZXMgKGluIGRlcGVuZGVuY3kgb3JkZXIpXG4gIGNvbnRhaW5lci5yZWdpc3RlclNpbmdsZXRvbkNsYXNzKElTdmdDb25maWd1cmF0aW9uSW50ZXJmYWNlKTtcbiAgY29udGFpbmVyLnJlZ2lzdGVyU2luZ2xldG9uQ2xhc3MoSVN2Z1V0aWxpdHlTZXJ2aWNlSW50ZXJmYWNlKTtcbiAgY29udGFpbmVyLnJlZ2lzdGVyU2luZ2xldG9uQ2xhc3MoSURhdGFUcmFuc2Zvcm1hdGlvblNlcnZpY2VJbnRlcmZhY2UpO1xuICBjb250YWluZXIucmVnaXN0ZXJTaW5nbGV0b25DbGFzcyhJR3JpZFJlbmRlcmluZ1NlcnZpY2VJbnRlcmZhY2UpO1xuICBjb250YWluZXIucmVnaXN0ZXJTaW5nbGV0b25DbGFzcyhJQXJyb3dSZW5kZXJpbmdTZXJ2aWNlSW50ZXJmYWNlKTtcbiAgY29udGFpbmVyLnJlZ2lzdGVyU2luZ2xldG9uQ2xhc3MoSU92ZXJsYXlSZW5kZXJpbmdTZXJ2aWNlSW50ZXJmYWNlKTtcblxuICAvLyBSZWdpc3RlciBtYWluIHJlbmRlcmluZyBzZXJ2aWNlc1xuICAvLyDinIUgUkVNT1ZFRDogUHJvcFJlbmRlcmluZ1NlcnZpY2UgaXMgZGVwcmVjYXRlZFxuICBjb250YWluZXIucmVnaXN0ZXJTaW5nbGV0b25DbGFzcyhJUHJvcENvb3JkaW5hdG9yU2VydmljZUludGVyZmFjZSk7XG5cbiAgLy8gUmVnaXN0ZXIgc2VxdWVuY2Ugc2VydmljZXNcbiAgY29udGFpbmVyLnJlZ2lzdGVyRmFjdG9yeShJU2VxdWVuY2VJbXBvcnRTZXJ2aWNlSW50ZXJmYWNlLCAoKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBTZXF1ZW5jZUltcG9ydFNlcnZpY2UoKTtcbiAgfSk7XG5cbiAgY29udGFpbmVyLnJlZ2lzdGVyRmFjdG9yeShJU2VxdWVuY2VEZWxldGlvblNlcnZpY2VJbnRlcmZhY2UsICgpID0+IHtcbiAgICBjb25zdCBzZXF1ZW5jZVNlcnZpY2UgPSBjb250YWluZXIucmVzb2x2ZShJU2VxdWVuY2VTZXJ2aWNlSW50ZXJmYWNlKTtcbiAgICBjb25zdCBwZXJzaXN0ZW5jZVNlcnZpY2UgPSBjb250YWluZXIucmVzb2x2ZShJUGVyc2lzdGVuY2VTZXJ2aWNlSW50ZXJmYWNlKTtcbiAgICByZXR1cm4gbmV3IFNlcXVlbmNlRGVsZXRpb25TZXJ2aWNlKHNlcXVlbmNlU2VydmljZSwgcGVyc2lzdGVuY2VTZXJ2aWNlKTtcbiAgfSk7XG5cbiAgY29udGFpbmVyLnJlZ2lzdGVyRmFjdG9yeShJV29ya2JlbmNoQmVhdE9wZXJhdGlvbnNTZXJ2aWNlSW50ZXJmYWNlLCAoKSA9PiB7XG4gICAgY29uc3Qgc2VxdWVuY2VTZXJ2aWNlID0gY29udGFpbmVyLnJlc29sdmUoSVNlcXVlbmNlU2VydmljZUludGVyZmFjZSk7XG4gICAgY29uc3QgcGVyc2lzdGVuY2VTZXJ2aWNlID0gY29udGFpbmVyLnJlc29sdmUoSVBlcnNpc3RlbmNlU2VydmljZUludGVyZmFjZSk7XG4gICAgcmV0dXJuIG5ldyBXb3JrYmVuY2hCZWF0T3BlcmF0aW9uc1NlcnZpY2UoXG4gICAgICBzZXF1ZW5jZVNlcnZpY2UsXG4gICAgICBwZXJzaXN0ZW5jZVNlcnZpY2VcbiAgICApO1xuICB9KTtcblxuICBjb250YWluZXIucmVnaXN0ZXJGYWN0b3J5KElTZXF1ZW5jZVNlcnZpY2VJbnRlcmZhY2UsICgpID0+IHtcbiAgICBjb25zdCBzZXF1ZW5jZURvbWFpblNlcnZpY2UgPSBjb250YWluZXIucmVzb2x2ZShcbiAgICAgIElTZXF1ZW5jZURvbWFpblNlcnZpY2VJbnRlcmZhY2VcbiAgICApO1xuICAgIGNvbnN0IHBlcnNpc3RlbmNlU2VydmljZSA9IGNvbnRhaW5lci5yZXNvbHZlKElQZXJzaXN0ZW5jZVNlcnZpY2VJbnRlcmZhY2UpO1xuICAgIGNvbnN0IHNlcXVlbmNlSW1wb3J0U2VydmljZSA9IGNvbnRhaW5lci5yZXNvbHZlKFxuICAgICAgSVNlcXVlbmNlSW1wb3J0U2VydmljZUludGVyZmFjZVxuICAgICk7XG4gICAgcmV0dXJuIG5ldyBTZXF1ZW5jZVNlcnZpY2UoXG4gICAgICBzZXF1ZW5jZURvbWFpblNlcnZpY2UsXG4gICAgICBwZXJzaXN0ZW5jZVNlcnZpY2UsXG4gICAgICBzZXF1ZW5jZUltcG9ydFNlcnZpY2VcbiAgICApO1xuICB9KTtcblxuICBjb250YWluZXIucmVnaXN0ZXJGYWN0b3J5KElDb25zdHJ1Y3RUYWJDb29yZGluYXRpb25TZXJ2aWNlSW50ZXJmYWNlLCAoKSA9PiB7XG4gICAgY29uc3Qgc2VxdWVuY2VTZXJ2aWNlID0gY29udGFpbmVyLnJlc29sdmUoSVNlcXVlbmNlU2VydmljZUludGVyZmFjZSk7XG4gICAgY29uc3Qgc3RhcnRQb3NpdGlvblNlcnZpY2UgPSBjb250YWluZXIucmVzb2x2ZShcbiAgICAgIElTdGFydFBvc2l0aW9uU2VydmljZUludGVyZmFjZVxuICAgICk7XG4gICAgY29uc3Qgd29ya2JlbmNoQmVhdE9wZXJhdGlvbnMgPSBjb250YWluZXIucmVzb2x2ZShcbiAgICAgIElXb3JrYmVuY2hCZWF0T3BlcmF0aW9uc1NlcnZpY2VJbnRlcmZhY2VcbiAgICApO1xuICAgIHJldHVybiBuZXcgQ29uc3RydWN0VGFiQ29vcmRpbmF0aW9uU2VydmljZShcbiAgICAgIHNlcXVlbmNlU2VydmljZSxcbiAgICAgIHN0YXJ0UG9zaXRpb25TZXJ2aWNlLFxuICAgICAgd29ya2JlbmNoQmVhdE9wZXJhdGlvbnNcbiAgICApO1xuICB9KTtcblxuICAvLyBUT0RPOiBUZW1wb3JhcmlseSBkaXNhYmxlZCBkdWUgdG8gY2lyY3VsYXIgZGVwZW5kZW5jeVxuICAvLyBSZWdpc3RlciBwaWN0b2dyYXBoIHJlbmRlcmluZyBzZXJ2aWNlIChkZXBlbmRzIG9uIHBvc2l0aW9uaW5nIGFuZCBtaWNyb3NlcnZpY2VzKVxuICAvLyBjb250YWluZXIucmVnaXN0ZXJGYWN0b3J5KElQaWN0b2dyYXBoUmVuZGVyaW5nU2VydmljZUludGVyZmFjZSwgKCkgPT4ge1xuICAvLyAgIGNvbnN0IGFycm93UG9zaXRpb25pbmcgPSBjb250YWluZXIucmVzb2x2ZShcbiAgLy8gICAgIElBcnJvd1Bvc2l0aW9uaW5nT3JjaGVzdHJhdG9ySW50ZXJmYWNlXG4gIC8vICAgKSBhcyBJQXJyb3dQb3NpdGlvbmluZ09yY2hlc3RyYXRvcjtcbiAgLy8gICAvLyDinIUgUkVNT1ZFRDogUHJvcFJlbmRlcmluZ1NlcnZpY2UgaXMgZGVwcmVjYXRlZFxuICAvLyAgIGNvbnN0IHN2Z1V0aWxpdHkgPSBjb250YWluZXIucmVzb2x2ZShJU3ZnVXRpbGl0eVNlcnZpY2VJbnRlcmZhY2UpO1xuICAvLyAgIGNvbnN0IGdyaWRSZW5kZXJpbmcgPSBjb250YWluZXIucmVzb2x2ZShJR3JpZFJlbmRlcmluZ1NlcnZpY2VJbnRlcmZhY2UpO1xuICAvLyAgIGNvbnN0IGFycm93UmVuZGVyaW5nID0gY29udGFpbmVyLnJlc29sdmUoSUFycm93UmVuZGVyaW5nU2VydmljZUludGVyZmFjZSk7XG4gIC8vICAgY29uc3Qgb3ZlcmxheVJlbmRlcmluZyA9IGNvbnRhaW5lci5yZXNvbHZlKFxuICAvLyAgICAgSU92ZXJsYXlSZW5kZXJpbmdTZXJ2aWNlSW50ZXJmYWNlXG4gIC8vICAgKTtcbiAgLy8gICBjb25zdCBkYXRhVHJhbnNmb3JtYXRpb24gPSBjb250YWluZXIucmVzb2x2ZShcbiAgLy8gICAgIElEYXRhVHJhbnNmb3JtYXRpb25TZXJ2aWNlSW50ZXJmYWNlXG4gIC8vICAgKTtcbiAgLy8gICByZXR1cm4gbmV3IFBpY3RvZ3JhcGhSZW5kZXJpbmdTZXJ2aWNlKFxuICAvLyAgICAgYXJyb3dQb3NpdGlvbmluZyxcbiAgLy8gICAgIG51bGwsIC8vIOKchSBGSVhFRDogUHJvcFJlbmRlcmluZ1NlcnZpY2UgaXMgZGVwcmVjYXRlZCwgcGFzcyBudWxsXG4gIC8vICAgICBzdmdVdGlsaXR5LFxuICAvLyAgICAgZ3JpZFJlbmRlcmluZyxcbiAgLy8gICAgIGFycm93UmVuZGVyaW5nLFxuICAvLyAgICAgb3ZlcmxheVJlbmRlcmluZyxcbiAgLy8gICAgIGRhdGFUcmFuc2Zvcm1hdGlvblxuICAvLyAgICk7XG4gIC8vIH0pO1xuXG4gIC8vIFJlZ2lzdGVyIHBpY3RvZ3JhcGggc2VydmljZSAobm8gZGVwZW5kZW5jaWVzIGFmdGVyIHJlbmRlcmluZyBpcyByZWdpc3RlcmVkKVxuICBjb250YWluZXIucmVnaXN0ZXJTaW5nbGV0b25DbGFzcyhJUGljdG9ncmFwaFNlcnZpY2VJbnRlcmZhY2UpO1xuXG4gIC8vIFJlZ2lzdGVyIGV4cG9ydCBzZXJ2aWNlXG4gIGNvbnRhaW5lci5yZWdpc3RlclNpbmdsZXRvbkNsYXNzKElFeHBvcnRTZXJ2aWNlSW50ZXJmYWNlKTtcblxuICAvLyBSZWdpc3RlciBnZW5lcmF0aW9uIHNlcnZpY2VzXG4gIGNvbnRhaW5lci5yZWdpc3RlclNpbmdsZXRvbkNsYXNzKElPcmllbnRhdGlvbkNhbGN1bGF0aW9uU2VydmljZUludGVyZmFjZSk7XG5cbiAgLy8gUmVnaXN0ZXIgc2VxdWVuY2UgZ2VuZXJhdGlvbiBzZXJ2aWNlIHdpdGggZGVwZW5kZW5jaWVzXG4gIGNvbnRhaW5lci5yZWdpc3RlckZhY3RvcnkoSVNlcXVlbmNlR2VuZXJhdGlvblNlcnZpY2VJbnRlcmZhY2UsICgpID0+IHtcbiAgICBjb25zdCBsZXR0ZXJRdWVyeVNlcnZpY2UgPSBjb250YWluZXIucmVzb2x2ZShJTGV0dGVyUXVlcnlTZXJ2aWNlSW50ZXJmYWNlKTtcbiAgICBjb25zdCBvcmllbnRhdGlvbkNhbGN1bGF0aW9uU2VydmljZSA9IGNvbnRhaW5lci5yZXNvbHZlKFxuICAgICAgSU9yaWVudGF0aW9uQ2FsY3VsYXRpb25TZXJ2aWNlSW50ZXJmYWNlXG4gICAgKTtcbiAgICByZXR1cm4gbmV3IFNlcXVlbmNlR2VuZXJhdGlvblNlcnZpY2UoXG4gICAgICBsZXR0ZXJRdWVyeVNlcnZpY2UsXG4gICAgICBvcmllbnRhdGlvbkNhbGN1bGF0aW9uU2VydmljZVxuICAgICk7XG4gIH0pO1xuXG4gIC8vIFJlZ2lzdGVyIHBhZ2UgbGF5b3V0IGFuZCBleHBvcnQgc2VydmljZXNcbiAgY29udGFpbmVyLnJlZ2lzdGVyU2luZ2xldG9uQ2xhc3MoSVByaW50YWJsZVBhZ2VMYXlvdXRTZXJ2aWNlSW50ZXJmYWNlKTtcbiAgY29udGFpbmVyLnJlZ2lzdGVyU2luZ2xldG9uQ2xhc3MoSVBhZ2VJbWFnZUV4cG9ydFNlcnZpY2VJbnRlcmZhY2UpO1xuXG4gIC8vIFJlZ2lzdGVyIHBhZ2UgZmFjdG9yeSBzZXJ2aWNlIHdpdGggZGVwZW5kZW5jeVxuICBjb250YWluZXIucmVnaXN0ZXJGYWN0b3J5KElQYWdlRmFjdG9yeVNlcnZpY2VJbnRlcmZhY2UsICgpID0+IHtcbiAgICBjb25zdCBsYXlvdXRTZXJ2aWNlID0gY29udGFpbmVyLnJlc29sdmUoXG4gICAgICBJUHJpbnRhYmxlUGFnZUxheW91dFNlcnZpY2VJbnRlcmZhY2VcbiAgICApO1xuICAgIHJldHVybiBuZXcgSVBhZ2VGYWN0b3J5U2VydmljZUludGVyZmFjZS5pbXBsZW1lbnRhdGlvbihsYXlvdXRTZXJ2aWNlKTtcbiAgfSk7XG5cbiAgLy8gUmVnaXN0ZXIgZXhwb3J0IGludGVncmF0aW9uIHNlcnZpY2Ugd2l0aCBkZXBlbmRlbmN5XG4gIGNvbnRhaW5lci5yZWdpc3RlckZhY3RvcnkoXG4gICAgSVNlcXVlbmNlQ2FyZEV4cG9ydEludGVncmF0aW9uU2VydmljZUludGVyZmFjZSxcbiAgICAoKSA9PiB7XG4gICAgICBjb25zdCBwYWdlSW1hZ2VFeHBvcnRTZXJ2aWNlID0gY29udGFpbmVyLnJlc29sdmUoXG4gICAgICAgIElQYWdlSW1hZ2VFeHBvcnRTZXJ2aWNlSW50ZXJmYWNlXG4gICAgICApO1xuICAgICAgcmV0dXJuIG5ldyBJU2VxdWVuY2VDYXJkRXhwb3J0SW50ZWdyYXRpb25TZXJ2aWNlSW50ZXJmYWNlLmltcGxlbWVudGF0aW9uKFxuICAgICAgICBwYWdlSW1hZ2VFeHBvcnRTZXJ2aWNlXG4gICAgICApO1xuICAgIH1cbiAgKTtcblxuICAvLyBSZWdpc3RlciBhcHBsaWNhdGlvbiBpbml0aWFsaXphdGlvbiBzZXJ2aWNlIHdpdGggZmFjdG9yeVxuICBjb250YWluZXIucmVnaXN0ZXJGYWN0b3J5KElBcHBsaWNhdGlvbkluaXRpYWxpemF0aW9uU2VydmljZUludGVyZmFjZSwgKCkgPT4ge1xuICAgIGNvbnN0IHNldHRpbmdzU2VydmljZSA9IGNvbnRhaW5lci5yZXNvbHZlKElTZXR0aW5nc1NlcnZpY2VJbnRlcmZhY2UpO1xuICAgIGNvbnN0IHBlcnNpc3RlbmNlU2VydmljZSA9IGNvbnRhaW5lci5yZXNvbHZlKElQZXJzaXN0ZW5jZVNlcnZpY2VJbnRlcmZhY2UpO1xuICAgIHJldHVybiBuZXcgQXBwbGljYXRpb25Jbml0aWFsaXphdGlvblNlcnZpY2UoXG4gICAgICBzZXR0aW5nc1NlcnZpY2UsXG4gICAgICBwZXJzaXN0ZW5jZVNlcnZpY2VcbiAgICApO1xuICB9KTtcblxuICAvLyBSZWdpc3RlciBuZXcgY29udmVyc2lvbiBhbmQgcmVuZGVyaW5nIG1pY3Jvc2VydmljZXNcbiAgY29udGFpbmVyLnJlZ2lzdGVyU2luZ2xldG9uQ2xhc3MoSVNWR1RvQ2FudmFzQ29udmVydGVyU2VydmljZUludGVyZmFjZSk7XG4gIGNvbnRhaW5lci5yZWdpc3RlclNpbmdsZXRvbkNsYXNzKElJbWFnZUZvcm1hdENvbnZlcnRlclNlcnZpY2VJbnRlcmZhY2UpO1xuICBjb250YWluZXIucmVnaXN0ZXJTaW5nbGV0b25DbGFzcyhJQmVhdEdyaWRTZXJ2aWNlSW50ZXJmYWNlKTtcblxuICAvLyBSZWdpc3RlciBiZWF0IGZhbGxiYWNrIHNlcnZpY2UgKG5vIGRlcGVuZGVuY2llcyBuZWVkZWQpXG4gIGNvbnRhaW5lci5yZWdpc3RlclNpbmdsZXRvbkNsYXNzKElCZWF0RmFsbGJhY2tSZW5kZXJpbmdTZXJ2aWNlSW50ZXJmYWNlKTtcbn1cbiJdLAogICJtYXBwaW5ncyI6ICJBQU1BLFNBQVMsa0NBQWtDO0FBQzNDLFNBQVMsb0NBQW9DO0FBQzdDO0FBQUEsRUFDRTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFFQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUVBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxPQUNLO0FBQ1AsU0FBUyxzQ0FBc0M7QUFDL0M7QUFBQSxFQUNFO0FBQUEsRUFDQTtBQUFBLE9BQ0s7QUFFUCxTQUFTLHdDQUF3QztBQUNq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
