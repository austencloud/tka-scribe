import { createHotContext as __vite__createHotContext } from "/@vite/client";import.meta.hot = __vite__createHotContext("/src/lib/components/SettingsDialog.svelte");import "/node_modules/.vite/deps/svelte_internal_disclose-version.js?v=474c1bba";

SettingsDialog[$.FILENAME] = 'src/lib/components/SettingsDialog.svelte';

import * as $ from "/node_modules/.vite/deps/svelte_internal_client.js?v=474c1bba";
import { BackgroundType } from "/src/lib/components/backgrounds/types/types.ts";

import {
	getSettings,
	getShowSettings,
	hideSettingsDialog,
	updateSettings
} from "/src/lib/state/appState.svelte.ts";

import SettingsSidebar from "/src/lib/components/settings/SettingsSidebar.svelte";
import BackgroundTab from "/src/lib/components/settings/tabs/BackgroundTab.svelte";
import CodexExporterTab from "/src/lib/components/settings/tabs/CodexExporterTab.svelte";
import GeneralTab from "/src/lib/components/settings/tabs/GeneralTab.svelte";
import PropTypeTab from "/src/lib/components/settings/tabs/PropTypeTab.svelte";
import VisibilityTab from "/src/lib/components/settings/tabs/VisibilityTab.svelte";

function handleApply(_, settings) {
	console.log(...$.log_if_contains_state('log', "\u2705 Settings applied:", $.get(settings)));
	hideSettingsDialog();
}

function handleBackdropClick(event, handleClose) {
	if ($.strict_equals(event.target, event.currentTarget)) {
		handleClose();
	}
}

function handleBackdropKeyDown(event, handleClose) {
	if ($.strict_equals(event.key, "Escape")) {
		handleClose();
	}
}

var root = $.add_locations($.from_html(`<div class="settings-overlay s-eEuhDtpkIRkR" role="dialog" aria-modal="true" aria-labelledby="settings-title" tabindex="-1"><div class="settings-dialog s-eEuhDtpkIRkR"><div class="dialog-header s-eEuhDtpkIRkR"><h2 id="settings-title" class="s-eEuhDtpkIRkR">Settings</h2> <button class="close-button s-eEuhDtpkIRkR" aria-label="Close settings"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" class="s-eEuhDtpkIRkR"><path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="s-eEuhDtpkIRkR"></path></svg></button></div> <div class="dialog-content s-eEuhDtpkIRkR"><!> <main class="settings-content s-eEuhDtpkIRkR"><!></main></div> <div class="dialog-footer s-eEuhDtpkIRkR"><button class="cancel-button s-eEuhDtpkIRkR">Cancel</button> <button class="apply-button s-eEuhDtpkIRkR">Apply Settings</button></div></div></div>`), SettingsDialog[$.FILENAME], [
	[
		71,
		0,

		[
			[
				80,
				2,

				[
					[82, 4, [[83, 6], [84, 6, [[89, 8, [[90, 10]]]]]]],
					[101, 4, [[106, 6]]],
					[129, 4, [[130, 6], [131, 6]]]
				]
			]
		]
	]
]);

function SettingsDialog($$anchor, $$props) {
	$.check_target(new.target);
	$.push($$props, true, SettingsDialog);

	let settings = $.tag($.state($.proxy(getSettings())), 'settings');
	let activeTab = $.tag($.state("General"), 'activeTab');

	const backgroundSettings = $.tag(
		$.derived(() => () => ({
			backgroundType: $.get(settings).backgroundType || BackgroundType.NIGHT_SKY
		})),
		'backgroundSettings'
	);

	const tabs = [
		{ id: "General", label: "General", icon: "\u2699\uFE0F" },
		{ id: "PropType", label: "Prop Type", icon: "\u{1F3F7}\uFE0F" },

		{
			id: "Visibility",
			label: "Visibility",
			icon: "\u{1F441}\uFE0F"
		},

		{ id: "Background", label: "Background", icon: "\u{1F30C}" },

		{
			id: "CodexExporter",
			label: "Codex Exporter",
			icon: "\u{1F4E4}"
		}
	];

	function switchTab(tabId) {
		$.set(activeTab, tabId, true);
	}

	function handleSettingsUpdate(event) {
		const { key, value } = event.detail;
		const newSettings = { ...$.get(settings), [key]: value };

		updateSettings(newSettings);
		$.set(settings, newSettings, true);
	}

	function handlePropUpdate(event) {
		console.log(...$.log_if_contains_state('log', "\u{1F527} SettingsDialog handlePropUpdate called:", event));

		const newSettings = { ...$.get(settings), [event.key]: event.value };

		console.log(...$.log_if_contains_state('log', "\u{1F527} About to call updateSettings with:", newSettings));
		updateSettings(newSettings);
		$.set(settings, newSettings, true);
		console.log(...$.log_if_contains_state('log', "\u{1F527} Settings updated locally in dialog:", $.get(settings)));
	}

	function handlePropExport() {
		handleCodexExport(new CustomEvent("export"));
	}

	function handleCodexExport(event) {
		const config = event.detail;

		console.log(...$.log_if_contains_state('log', "\u{1F680} Codex export requested with config:", config));
	}

	function handleClose() {
		hideSettingsDialog();
	}

	var div = root();

	div.__click = [handleBackdropClick, handleClose];
	div.__keydown = [handleBackdropKeyDown, handleClose];

	var div_1 = $.child(div);
	var div_2 = $.child(div_1);
	var button = $.sibling($.child(div_2), 2);

	button.__click = handleClose;
	$.reset(div_2);

	var div_3 = $.sibling(div_2, 2);
	var node = $.child(div_3);

	$.add_svelte_meta(
		() => SettingsSidebar(node, {
			get tabs() {
				return tabs;
			},

			get activeTab() {
				return $.get(activeTab);
			},

			onTabSelect: switchTab
		}),
		'component',
		SettingsDialog,
		103,
		6,
		{ componentTag: 'SettingsSidebar' }
	);

	var main = $.sibling(node, 2);
	var node_1 = $.child(main);

	{
		var consequent = ($$anchor) => {
			var fragment = $.comment();
			var node_2 = $.first_child(fragment);

			$.add_svelte_meta(
				() => GeneralTab(node_2, {
					get settings() {
						return $.get(settings);
					},

					onupdate: handlePropUpdate
				}),
				'component',
				SettingsDialog,
				108,
				10,
				{ componentTag: 'GeneralTab' }
			);

			$.append($$anchor, fragment);
		};

		var alternate_3 = ($$anchor) => {
			var fragment_1 = $.comment();
			var node_3 = $.first_child(fragment_1);

			{
				var consequent_1 = ($$anchor) => {
					var fragment_2 = $.comment();
					var node_4 = $.first_child(fragment_2);

					$.add_svelte_meta(
						() => PropTypeTab(node_4, {
							get settings() {
								return $.get(settings);
							},

							onUpdate: handlePropUpdate
						}),
						'component',
						SettingsDialog,
						110,
						10,
						{ componentTag: 'PropTypeTab' }
					);

					$.append($$anchor, fragment_2);
				};

				var alternate_2 = ($$anchor) => {
					var fragment_3 = $.comment();
					var node_5 = $.first_child(fragment_3);

					{
						var consequent_2 = ($$anchor) => {
							var fragment_4 = $.comment();
							var node_6 = $.first_child(fragment_4);

							$.add_svelte_meta(
								() => VisibilityTab(node_6, {
									get settings() {
										return $.get(settings);
									},

									onUpdate: handlePropUpdate
								}),
								'component',
								SettingsDialog,
								112,
								10,
								{ componentTag: 'VisibilityTab' }
							);

							$.append($$anchor, fragment_4);
						};

						var alternate_1 = ($$anchor) => {
							var fragment_5 = $.comment();
							var node_7 = $.first_child(fragment_5);

							{
								var consequent_3 = ($$anchor) => {
									var fragment_6 = $.comment();
									var node_8 = $.first_child(fragment_6);

									{
										let $0 = $.derived(() => $.get(backgroundSettings)());

										$.add_svelte_meta(
											() => BackgroundTab(node_8, {
												get settings() {
													return $.get($0);
												},

												onupdate: handlePropUpdate
											}),
											'component',
											SettingsDialog,
											114,
											10,
											{ componentTag: 'BackgroundTab' }
										);
									}

									$.append($$anchor, fragment_6);
								};

								var alternate = ($$anchor) => {
									var fragment_7 = $.comment();
									var node_9 = $.first_child(fragment_7);

									{
										var consequent_4 = ($$anchor) => {
											var fragment_8 = $.comment();
											var node_10 = $.first_child(fragment_8);

											$.add_svelte_meta(
												() => CodexExporterTab(node_10, {
													get settings() {
														return $.get(settings);
													},

													onUpdate: handlePropUpdate,
													onExport: handlePropExport
												}),
												'component',
												SettingsDialog,
												119,
												10,
												{ componentTag: 'CodexExporterTab' }
											);

											$.append($$anchor, fragment_8);
										};

										$.add_svelte_meta(
											() => $.if(
												node_9,
												($$render) => {
													if ($.strict_equals($.get(activeTab), "CodexExporter")) $$render(consequent_4);
												},
												true
											),
											'if',
											SettingsDialog,
											118,
											8
										);
									}

									$.append($$anchor, fragment_7);
								};

								$.add_svelte_meta(
									() => $.if(
										node_7,
										($$render) => {
											if ($.strict_equals($.get(activeTab), "Background")) $$render(consequent_3); else $$render(alternate, false);
										},
										true
									),
									'if',
									SettingsDialog,
									113,
									8
								);
							}

							$.append($$anchor, fragment_5);
						};

						$.add_svelte_meta(
							() => $.if(
								node_5,
								($$render) => {
									if ($.strict_equals($.get(activeTab), "Visibility")) $$render(consequent_2); else $$render(alternate_1, false);
								},
								true
							),
							'if',
							SettingsDialog,
							111,
							8
						);
					}

					$.append($$anchor, fragment_3);
				};

				$.add_svelte_meta(
					() => $.if(
						node_3,
						($$render) => {
							if ($.strict_equals($.get(activeTab), "PropType")) $$render(consequent_1); else $$render(alternate_2, false);
						},
						true
					),
					'if',
					SettingsDialog,
					109,
					8
				);
			}

			$.append($$anchor, fragment_1);
		};

		$.add_svelte_meta(
			() => $.if(node_1, ($$render) => {
				if ($.strict_equals($.get(activeTab), "General")) $$render(consequent); else $$render(alternate_3, false);
			}),
			'if',
			SettingsDialog,
			107,
			8
		);
	}

	$.reset(main);
	$.reset(div_3);

	var div_4 = $.sibling(div_3, 2);
	var button_1 = $.child(div_4);

	button_1.__click = handleClose;

	var button_2 = $.sibling(button_1, 2);

	button_2.__click = [handleApply, settings];
	$.reset(div_4);
	$.reset(div_1);
	$.reset(div);
	$.append($$anchor, div);

	return $.pop({ ...$.legacy_api() });
}

if (import.meta.hot) {
	SettingsDialog = $.hmr(SettingsDialog, () => SettingsDialog[$.HMR].source);

	import.meta.hot.acceptExports(["default"],(module) => {
		$.cleanup_styles('s-eEuhDtpkIRkR');
		module.default[$.HMR].source = SettingsDialog[$.HMR].source;
		$.set(SettingsDialog[$.HMR].source, module.default[$.HMR].original);
	});
}

export default SettingsDialog;

$.delegate(['click', 'keydown']);
import "/src/lib/components/SettingsDialog.svelte?svelte&type=style&lang.css";

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJtYXBwaW5ncyI6Ijs7Ozs7U0FHRTs7O0NBRUU7Q0FDQTtDQUNBO0NBQUE7T0FFSzs7T0FDQSxxQkFBbUI7T0FDbkI7T0FDQSxzQkFBZ0I7T0FDaEIsZ0JBQWlCO09BQ2pCLGlCQUFtQjtPQUd0QixtQkFBa0I7O1NBK0V2QjtDQUNDLFFBQU8sd0VBQWdCO0NBQ3ZCO0FBQ0E7O1NBUU8sb0JBQXFCO3FCQUN2QixNQUFPLFFBQVMsTUFBTyxnQkFBWTtFQUNwQztDQUNOO0FBQ0E7O1NBR1Msc0JBQXVCLG9CQUF1QjtxQkFDdkQsTUFBVztFQUNYO0NBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzsyQ0F0SEEsQ0FBQzs7OztLQXNCRyxpQ0FBZ0I7S0FDaEI7O09BS007O0dBQ0osc0JBQUksVUFBcUIsa0JBQWMsZUFBTTs7Ozs7T0FNakQ7SUFDRSxlQUFZO0lBQ2Q7OztHQUdBLElBQVM7R0FBQSxPQUFxQjtHQUFvQjs7O0lBQ2hELElBQVEsY0FBVyxPQUFVOzs7R0FDN0IsSUFBTTtHQUFtQjtHQUF1Qjs7OztVQU16QyxpQkFBeUQ7UUFDaEUsV0FBWTtDQUNaOztVQUdBLHFCQUFXO1VBQ0gsS0FBSTtRQUNkOztFQUdBLGVBQVMsV0FBbUI7UUFDMUI7Q0FDRjs7VUFLVSxpQkFBSSxPQUEwQztFQUV4RDs7UUFHUyx5QkFBYzs7RUFDckIsUUFBUSxzQ0FBSSxnREFBK0I7RUFDM0MsMEJBQW1CO1FBQ3JCO0VBR0EsUUFBUyw2RkFBYztDQUNyQjs7VUFLSSxtQkFBdUI7RUFDekIsc0JBQVk7Q0FDZDs7VUFLSSxrQkFBYyxPQUFVO1FBQzFCLFNBQVk7O0VBQ2Q7Q0FFRjs7VUFTSyxjQUFZO0VBQ2pCO0NBQ0Y7Ozs7O2tCQXFCUyxxQkFBaUI7Ozs7OztrQkFZZixXQUFlOzs7Ozs7Ozs7Ozs7Ozs7O2dCQWlCSTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7ZUFLekI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztpQkFFQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O21CQUVhOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O3lDQUdQOzs7Ozs7OztzQkFDQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozt1QkFLUSxnQkFBTTt1QkFDVjs7Ozs7Ozs7Ozs7Ozs7Ozt1Q0FKSixTQUFhLEdBQUk7Ozs7Ozs7Ozs7Ozs7Ozs7OztxQ0FMcEI7Ozs7Ozs7Ozs7Ozs7Ozs7OzttQ0FGRSxTQUFROzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzhCQUpiOzs7Ozs7Ozs7Ozs7Ozs7b0JBdUJzQyxXQUFXOzs7O3FCQUN6Qzs7Ozs7OztDQS9EZiIsIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZXMiOlsiU2V0dGluZ3NEaWFsb2cuc3ZlbHRlIl0sInNvdXJjZXNDb250ZW50IjpbIjwhLS0gU2V0dGluZ3NEaWFsb2cuc3ZlbHRlIC0gU2ltcGxpZmllZCBtYWluIHNldHRpbmdzIGRpYWxvZyAtLT5cbjxzY3JpcHQgbGFuZz1cInRzXCI+XG4gIGltcG9ydCB7IEJhY2tncm91bmRUeXBlIH0gZnJvbSBcIiRsaWIvY29tcG9uZW50cy9iYWNrZ3JvdW5kcy90eXBlcy90eXBlc1wiO1xuICBpbXBvcnQge1xuICAgIGdldFNldHRpbmdzLFxuICAgIGdldFNob3dTZXR0aW5ncyxcbiAgICBoaWRlU2V0dGluZ3NEaWFsb2csXG4gICAgdXBkYXRlU2V0dGluZ3MsXG4gIH0gZnJvbSBcIiRsaWIvc3RhdGUvYXBwU3RhdGUuc3ZlbHRlXCI7XG4gIGltcG9ydCBTZXR0aW5nc1NpZGViYXIgZnJvbSBcIi4vc2V0dGluZ3MvU2V0dGluZ3NTaWRlYmFyLnN2ZWx0ZVwiO1xuICBpbXBvcnQgQmFja2dyb3VuZFRhYiBmcm9tIFwiLi9zZXR0aW5ncy90YWJzL0JhY2tncm91bmRUYWIuc3ZlbHRlXCI7XG4gIGltcG9ydCBDb2RleEV4cG9ydGVyVGFiIGZyb20gXCIuL3NldHRpbmdzL3RhYnMvQ29kZXhFeHBvcnRlclRhYi5zdmVsdGVcIjtcbiAgaW1wb3J0IEdlbmVyYWxUYWIgZnJvbSBcIi4vc2V0dGluZ3MvdGFicy9HZW5lcmFsVGFiLnN2ZWx0ZVwiO1xuICBpbXBvcnQgUHJvcFR5cGVUYWIgZnJvbSBcIi4vc2V0dGluZ3MvdGFicy9Qcm9wVHlwZVRhYi5zdmVsdGVcIjtcbiAgaW1wb3J0IFZpc2liaWxpdHlUYWIgZnJvbSBcIi4vc2V0dGluZ3MvdGFicy9WaXNpYmlsaXR5VGFiLnN2ZWx0ZVwiO1xuXG4gIC8vIEN1cnJlbnQgc2V0dGluZ3Mgc3RhdGVcbiAgbGV0IHNldHRpbmdzID0gJHN0YXRlKGdldFNldHRpbmdzKCkpO1xuICBsZXQgYWN0aXZlVGFiID0gJHN0YXRlKFwiR2VuZXJhbFwiKTtcblxuICAvLyBTaW1wbGlmaWVkIGJhY2tncm91bmQgc2V0dGluZ3MgZm9yIG5ldyBCYWNrZ3JvdW5kVGFiXG4gIGNvbnN0IGJhY2tncm91bmRTZXR0aW5ncyA9ICRkZXJpdmVkKCgpID0+ICh7XG4gICAgYmFja2dyb3VuZFR5cGU6IHNldHRpbmdzLmJhY2tncm91bmRUeXBlIHx8IEJhY2tncm91bmRUeXBlLk5JR0hUX1NLWSxcbiAgfSkpO1xuXG4gIC8vIFNpbXBsaWZpZWQgdGFiIGNvbmZpZ3VyYXRpb25cbiAgY29uc3QgdGFicyA9IFtcbiAgICB7IGlkOiBcIkdlbmVyYWxcIiwgbGFiZWw6IFwiR2VuZXJhbFwiLCBpY29uOiBcIuKame+4j1wiIH0sXG4gICAgeyBpZDogXCJQcm9wVHlwZVwiLCBsYWJlbDogXCJQcm9wIFR5cGVcIiwgaWNvbjogXCLwn4+377iPXCIgfSxcbiAgICB7IGlkOiBcIlZpc2liaWxpdHlcIiwgbGFiZWw6IFwiVmlzaWJpbGl0eVwiLCBpY29uOiBcIvCfkYHvuI9cIiB9LFxuICAgIHsgaWQ6IFwiQmFja2dyb3VuZFwiLCBsYWJlbDogXCJCYWNrZ3JvdW5kXCIsIGljb246IFwi8J+MjFwiIH0sXG4gICAgeyBpZDogXCJDb2RleEV4cG9ydGVyXCIsIGxhYmVsOiBcIkNvZGV4IEV4cG9ydGVyXCIsIGljb246IFwi8J+TpFwiIH0sXG4gIF07XG5cbiAgLy8gSGFuZGxlIHRhYiBzd2l0Y2hpbmdcbiAgZnVuY3Rpb24gc3dpdGNoVGFiKHRhYklkOiBzdHJpbmcpIHtcbiAgICBhY3RpdmVUYWIgPSB0YWJJZDtcbiAgfVxuXG4gIC8vIEhhbmRsZSBzZXR0aW5ncyB1cGRhdGVzIGZyb20gdGFic1xuICBmdW5jdGlvbiBoYW5kbGVTZXR0aW5nc1VwZGF0ZShldmVudDogQ3VzdG9tRXZlbnQpIHtcbiAgICBjb25zdCB7IGtleSwgdmFsdWUgfSA9IGV2ZW50LmRldGFpbDtcbiAgICBjb25zdCBuZXdTZXR0aW5ncyA9IHsgLi4uc2V0dGluZ3MsIFtrZXldOiB2YWx1ZSB9O1xuICAgIHVwZGF0ZVNldHRpbmdzKG5ld1NldHRpbmdzKTtcbiAgICBzZXR0aW5ncyA9IG5ld1NldHRpbmdzO1xuICB9XG5cbiAgLy8gQWRhcHRlciBmb3IgbW9kZXJuIHByb3AtYmFzZWQgdXBkYXRlc1xuICBmdW5jdGlvbiBoYW5kbGVQcm9wVXBkYXRlKGV2ZW50OiB7IGtleTogc3RyaW5nOyB2YWx1ZTogdW5rbm93biB9KSB7XG4gICAgY29uc29sZS5sb2coXCLwn5SnIFNldHRpbmdzRGlhbG9nIGhhbmRsZVByb3BVcGRhdGUgY2FsbGVkOlwiLCBldmVudCk7XG4gICAgY29uc3QgbmV3U2V0dGluZ3MgPSB7IC4uLnNldHRpbmdzLCBbZXZlbnQua2V5XTogZXZlbnQudmFsdWUgfTtcbiAgICBjb25zb2xlLmxvZyhcIvCflKcgQWJvdXQgdG8gY2FsbCB1cGRhdGVTZXR0aW5ncyB3aXRoOlwiLCBuZXdTZXR0aW5ncyk7XG4gICAgdXBkYXRlU2V0dGluZ3MobmV3U2V0dGluZ3MpO1xuICAgIHNldHRpbmdzID0gbmV3U2V0dGluZ3M7XG4gICAgY29uc29sZS5sb2coXCLwn5SnIFNldHRpbmdzIHVwZGF0ZWQgbG9jYWxseSBpbiBkaWFsb2c6XCIsIHNldHRpbmdzKTtcbiAgfVxuXG4gIC8vIEFkYXB0ZXIgZm9yIGV4cG9ydCBoYW5kbGVyXG4gIGZ1bmN0aW9uIGhhbmRsZVByb3BFeHBvcnQoKSB7XG4gICAgaGFuZGxlQ29kZXhFeHBvcnQobmV3IEN1c3RvbUV2ZW50KFwiZXhwb3J0XCIpKTtcbiAgfVxuXG4gIC8vIEhhbmRsZSBjb2RleCBleHBvcnQgcmVxdWVzdFxuICBmdW5jdGlvbiBoYW5kbGVDb2RleEV4cG9ydChldmVudDogQ3VzdG9tRXZlbnQpIHtcbiAgICBjb25zdCBjb25maWcgPSBldmVudC5kZXRhaWw7XG4gICAgY29uc29sZS5sb2coXCLwn5qAIENvZGV4IGV4cG9ydCByZXF1ZXN0ZWQgd2l0aCBjb25maWc6XCIsIGNvbmZpZyk7XG4gICAgLy8gVE9ETzogSW1wbGVtZW50IGFjdHVhbCBleHBvcnQgc2VydmljZSBjYWxsXG4gIH1cblxuICAvLyBIYW5kbGUgYXBwbHkvc2F2ZVxuICBmdW5jdGlvbiBoYW5kbGVBcHBseSgpIHtcbiAgICBjb25zb2xlLmxvZyhcIuKchSBTZXR0aW5ncyBhcHBsaWVkOlwiLCBzZXR0aW5ncyk7XG4gICAgaGlkZVNldHRpbmdzRGlhbG9nKCk7XG4gIH1cblxuICAvLyBIYW5kbGUgY2xvc2UvY2FuY2VsXG4gIGZ1bmN0aW9uIGhhbmRsZUNsb3NlKCkge1xuICAgIGhpZGVTZXR0aW5nc0RpYWxvZygpO1xuICB9XG5cbiAgLy8gSGFuZGxlIG91dHNpZGUgY2xpY2sgdG8gY2xvc2VcbiAgZnVuY3Rpb24gaGFuZGxlQmFja2Ryb3BDbGljayhldmVudDogTW91c2VFdmVudCkge1xuICAgIGlmIChldmVudC50YXJnZXQgPT09IGV2ZW50LmN1cnJlbnRUYXJnZXQpIHtcbiAgICAgIGhhbmRsZUNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgLy8gSGFuZGxlIGtleWJvYXJkIGV2ZW50cyBmb3IgYmFja2Ryb3BcbiAgZnVuY3Rpb24gaGFuZGxlQmFja2Ryb3BLZXlEb3duKGV2ZW50OiBLZXlib2FyZEV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgaGFuZGxlQ2xvc2UoKTtcbiAgICB9XG4gIH1cbjwvc2NyaXB0PlxuXG48IS0tIFNldHRpbmdzIERpYWxvZyBPdmVybGF5IC0tPlxuPGRpdlxuICBjbGFzcz1cInNldHRpbmdzLW92ZXJsYXlcIlxuICBvbmNsaWNrPXtoYW5kbGVCYWNrZHJvcENsaWNrfVxuICBvbmtleWRvd249e2hhbmRsZUJhY2tkcm9wS2V5RG93bn1cbiAgcm9sZT1cImRpYWxvZ1wiXG4gIGFyaWEtbW9kYWw9XCJ0cnVlXCJcbiAgYXJpYS1sYWJlbGxlZGJ5PVwic2V0dGluZ3MtdGl0bGVcIlxuICB0YWJpbmRleD1cIi0xXCJcbj5cbiAgPGRpdiBjbGFzcz1cInNldHRpbmdzLWRpYWxvZ1wiPlxuICAgIDwhLS0gRGlhbG9nIEhlYWRlciAtLT5cbiAgICA8ZGl2IGNsYXNzPVwiZGlhbG9nLWhlYWRlclwiPlxuICAgICAgPGgyIGlkPVwic2V0dGluZ3MtdGl0bGVcIj5TZXR0aW5nczwvaDI+XG4gICAgICA8YnV0dG9uXG4gICAgICAgIGNsYXNzPVwiY2xvc2UtYnV0dG9uXCJcbiAgICAgICAgb25jbGljaz17aGFuZGxlQ2xvc2V9XG4gICAgICAgIGFyaWEtbGFiZWw9XCJDbG9zZSBzZXR0aW5nc1wiXG4gICAgICA+XG4gICAgICAgIDxzdmcgd2lkdGg9XCIyMFwiIGhlaWdodD1cIjIwXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCJub25lXCI+XG4gICAgICAgICAgPHBhdGhcbiAgICAgICAgICAgIGQ9XCJNMTggNkw2IDE4TTYgNmwxMiAxMlwiXG4gICAgICAgICAgICBzdHJva2U9XCJjdXJyZW50Q29sb3JcIlxuICAgICAgICAgICAgc3Ryb2tlLXdpZHRoPVwiMlwiXG4gICAgICAgICAgICBzdHJva2UtbGluZWNhcD1cInJvdW5kXCJcbiAgICAgICAgICAvPlxuICAgICAgICA8L3N2Zz5cbiAgICAgIDwvYnV0dG9uPlxuICAgIDwvZGl2PlxuXG4gICAgPCEtLSBEaWFsb2cgQ29udGVudCAtLT5cbiAgICA8ZGl2IGNsYXNzPVwiZGlhbG9nLWNvbnRlbnRcIj5cbiAgICAgIDwhLS0gU2lkZWJhciBOYXZpZ2F0aW9uIC0tPlxuICAgICAgPFNldHRpbmdzU2lkZWJhciB7dGFic30ge2FjdGl2ZVRhYn0gb25UYWJTZWxlY3Q9e3N3aXRjaFRhYn0gLz5cblxuICAgICAgPCEtLSBDb250ZW50IEFyZWEgLS0+XG4gICAgICA8bWFpbiBjbGFzcz1cInNldHRpbmdzLWNvbnRlbnRcIj5cbiAgICAgICAgeyNpZiBhY3RpdmVUYWIgPT09IFwiR2VuZXJhbFwifVxuICAgICAgICAgIDxHZW5lcmFsVGFiIHtzZXR0aW5nc30gb251cGRhdGU9e2hhbmRsZVByb3BVcGRhdGV9IC8+XG4gICAgICAgIHs6ZWxzZSBpZiBhY3RpdmVUYWIgPT09IFwiUHJvcFR5cGVcIn1cbiAgICAgICAgICA8UHJvcFR5cGVUYWIge3NldHRpbmdzfSBvblVwZGF0ZT17aGFuZGxlUHJvcFVwZGF0ZX0gLz5cbiAgICAgICAgezplbHNlIGlmIGFjdGl2ZVRhYiA9PT0gXCJWaXNpYmlsaXR5XCJ9XG4gICAgICAgICAgPFZpc2liaWxpdHlUYWIge3NldHRpbmdzfSBvblVwZGF0ZT17aGFuZGxlUHJvcFVwZGF0ZX0gLz5cbiAgICAgICAgezplbHNlIGlmIGFjdGl2ZVRhYiA9PT0gXCJCYWNrZ3JvdW5kXCJ9XG4gICAgICAgICAgPEJhY2tncm91bmRUYWJcbiAgICAgICAgICAgIHNldHRpbmdzPXtiYWNrZ3JvdW5kU2V0dGluZ3MoKX1cbiAgICAgICAgICAgIG9udXBkYXRlPXtoYW5kbGVQcm9wVXBkYXRlfVxuICAgICAgICAgIC8+XG4gICAgICAgIHs6ZWxzZSBpZiBhY3RpdmVUYWIgPT09IFwiQ29kZXhFeHBvcnRlclwifVxuICAgICAgICAgIDxDb2RleEV4cG9ydGVyVGFiXG4gICAgICAgICAgICB7c2V0dGluZ3N9XG4gICAgICAgICAgICBvblVwZGF0ZT17aGFuZGxlUHJvcFVwZGF0ZX1cbiAgICAgICAgICAgIG9uRXhwb3J0PXtoYW5kbGVQcm9wRXhwb3J0fVxuICAgICAgICAgIC8+XG4gICAgICAgIHsvaWZ9XG4gICAgICA8L21haW4+XG4gICAgPC9kaXY+XG5cbiAgICA8IS0tIERpYWxvZyBGb290ZXIgLS0+XG4gICAgPGRpdiBjbGFzcz1cImRpYWxvZy1mb290ZXJcIj5cbiAgICAgIDxidXR0b24gY2xhc3M9XCJjYW5jZWwtYnV0dG9uXCIgb25jbGljaz17aGFuZGxlQ2xvc2V9PkNhbmNlbDwvYnV0dG9uPlxuICAgICAgPGJ1dHRvbiBjbGFzcz1cImFwcGx5LWJ1dHRvblwiIG9uY2xpY2s9e2hhbmRsZUFwcGx5fT5BcHBseSBTZXR0aW5nczwvYnV0dG9uPlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbjwvZGl2PlxuXG48c3R5bGU+XG4gIC5zZXR0aW5ncy1vdmVybGF5IHtcbiAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgdG9wOiAwO1xuICAgIGxlZnQ6IDA7XG4gICAgcmlnaHQ6IDA7XG4gICAgYm90dG9tOiAwO1xuICAgIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC43KTtcbiAgICBiYWNrZHJvcC1maWx0ZXI6IGJsdXIoOHB4KTtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgei1pbmRleDogMTAwMDtcbiAgICBwYWRkaW5nOiB2YXIoLS1zcGFjaW5nLWxnKTtcbiAgfVxuXG4gIC5zZXR0aW5ncy1kaWFsb2cge1xuICAgIHdpZHRoOiBtaW4oXG4gICAgICA5MHZ3LFxuICAgICAgMTQwMHB4XG4gICAgKTsgLyogSW5jcmVhc2VkIGZyb20gODAwcHggdG8gMTQwMHB4IGZvciBtdWNoIGxhcmdlciBkaWFsb2cgKi9cbiAgICBoZWlnaHQ6IG1pbihcbiAgICAgIDkwdmgsXG4gICAgICA5MDBweFxuICAgICk7IC8qIEluY3JlYXNlZCB0byA5MHZoIGFuZCA5MDBweCBmb3IgbXVjaCB0YWxsZXIgZGlhbG9nICovXG4gICAgYmFja2dyb3VuZDogcmdiYSg0MCwgNDQsIDUyLCAwLjk1KTtcbiAgICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMik7XG4gICAgYm9yZGVyLXJhZGl1czogMTJweDtcbiAgICBiYWNrZHJvcC1maWx0ZXI6IGJsdXIoMjBweCk7XG4gICAgYm94LXNoYWRvdzogMCAyMHB4IDQwcHggcmdiYSgwLCAwLCAwLCAwLjYpO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgIGNvbnRhaW5lci10eXBlOiBpbmxpbmUtc2l6ZTtcblxuICAgIC8qIENTUyBDdXN0b20gUHJvcGVydGllcyBmb3IgcmVzcG9uc2l2ZSBzaXppbmcgKi9cbiAgICAtLWRpYWxvZy13aWR0aDogbWluKDkwdncsIDE0MDBweCk7XG4gICAgLS1kaWFsb2ctaGVpZ2h0OiBtaW4oOTB2aCwgOTAwcHgpO1xuICAgIC0tc2lkZWJhci13aWR0aDogY2xhbXAoMTUwcHgsIDE1dncsIDI1MHB4KTtcbiAgICAtLWNvbnRlbnQtd2lkdGg6IGNhbGModmFyKC0tZGlhbG9nLXdpZHRoKSAtIHZhcigtLXNpZGViYXItd2lkdGgpKTtcbiAgICAtLWNvbnRlbnQtcGFkZGluZzogY2xhbXAoMTZweCwgMnZ3LCAzMnB4KTtcbiAgICAtLXJlc3BvbnNpdmUtY29sdW1uczogMTtcbiAgICAtLW1heC1jb250ZW50LXdpZHRoOiBub25lO1xuICB9XG5cbiAgLyogRGlhbG9nIEhlYWRlciAqL1xuICAuZGlhbG9nLWhlYWRlciB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICBwYWRkaW5nOiBjbGFtcCgxNnB4LCAydncsIDMycHgpO1xuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMTUpO1xuICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4wNSk7XG4gIH1cblxuICAuZGlhbG9nLWhlYWRlciBoMiB7XG4gICAgbWFyZ2luOiAwO1xuICAgIGZvbnQtc2l6ZTogY2xhbXAoMTZweCwgMnZ3LCAyNHB4KTtcbiAgICBmb250LXdlaWdodDogNjAwO1xuICAgIGNvbG9yOiAjZmZmZmZmO1xuICB9XG5cbiAgLmNsb3NlLWJ1dHRvbiB7XG4gICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gICAgYm9yZGVyOiBub25lO1xuICAgIGNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNyk7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIHBhZGRpbmc6IGNsYW1wKDhweCwgMXZ3LCAxMnB4KTtcbiAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgdHJhbnNpdGlvbjogYWxsIHZhcigtLXRyYW5zaXRpb24tZmFzdCk7XG4gICAgbWluLXdpZHRoOiBjbGFtcCgzMnB4LCA0dncsIDQ0cHgpO1xuICAgIG1pbi1oZWlnaHQ6IGNsYW1wKDMycHgsIDR2dywgNDRweCk7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICB9XG5cbiAgLmNsb3NlLWJ1dHRvbjpob3ZlciB7XG4gICAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjEpO1xuICAgIGNvbG9yOiAjZmZmZmZmO1xuICB9XG5cbiAgLyogRGlhbG9nIENvbnRlbnQgTGF5b3V0ICovXG4gIC5kaWFsb2ctY29udGVudCB7XG4gICAgZmxleDogMTtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgbWluLWhlaWdodDogMDtcbiAgfVxuXG4gIC8qIENvbnRlbnQgQXJlYSAqL1xuICAuc2V0dGluZ3MtY29udGVudCB7XG4gICAgZmxleDogMTtcbiAgICBvdmVyZmxvdy15OiBhdXRvO1xuICAgIHBhZGRpbmc6IHZhcigtLWNvbnRlbnQtcGFkZGluZyk7XG4gICAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjAyKTtcbiAgICBjb250YWluZXItdHlwZTogaW5saW5lLXNpemU7XG4gIH1cblxuICAvKiBDb250YWluZXIgUXVlcmllcyBmb3IgUmVzcG9uc2l2ZSBMYXlvdXQgKi9cbiAgQGNvbnRhaW5lciAobWluLXdpZHRoOiA0MDBweCkge1xuICAgIC5zZXR0aW5ncy1kaWFsb2cge1xuICAgICAgLS1yZXNwb25zaXZlLWNvbHVtbnM6IDE7XG4gICAgICAtLW1heC1jb250ZW50LXdpZHRoOiAxMDAlO1xuICAgIH1cbiAgfVxuXG4gIEBjb250YWluZXIgKG1pbi13aWR0aDogNjAwcHgpIHtcbiAgICAuc2V0dGluZ3MtZGlhbG9nIHtcbiAgICAgIC0tcmVzcG9uc2l2ZS1jb2x1bW5zOiAxO1xuICAgICAgLS1tYXgtY29udGVudC13aWR0aDogOTAlO1xuICAgIH1cbiAgfVxuXG4gIEBjb250YWluZXIgKG1pbi13aWR0aDogODAwcHgpIHtcbiAgICAuc2V0dGluZ3MtZGlhbG9nIHtcbiAgICAgIC0tcmVzcG9uc2l2ZS1jb2x1bW5zOiAyO1xuICAgICAgLS1tYXgtY29udGVudC13aWR0aDogODUlO1xuICAgIH1cbiAgfVxuXG4gIEBjb250YWluZXIgKG1pbi13aWR0aDogMTAwMHB4KSB7XG4gICAgLnNldHRpbmdzLWRpYWxvZyB7XG4gICAgICAtLXJlc3BvbnNpdmUtY29sdW1uczogMjtcbiAgICAgIC0tbWF4LWNvbnRlbnQtd2lkdGg6IDgwJTtcbiAgICAgIC0tY29udGVudC1wYWRkaW5nOiBjbGFtcCgyNHB4LCAzdncsIDQ4cHgpO1xuICAgIH1cbiAgfVxuXG4gIEBjb250YWluZXIgKG1pbi13aWR0aDogMTIwMHB4KSB7XG4gICAgLnNldHRpbmdzLWRpYWxvZyB7XG4gICAgICAtLXJlc3BvbnNpdmUtY29sdW1uczogMztcbiAgICAgIC0tbWF4LWNvbnRlbnQtd2lkdGg6IDc1JTtcbiAgICAgIC0tY29udGVudC1wYWRkaW5nOiBjbGFtcCgzMnB4LCA0dncsIDY0cHgpO1xuICAgIH1cbiAgfVxuXG4gIC8qIERpYWxvZyBGb290ZXIgKi9cbiAgLmRpYWxvZy1mb290ZXIge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDtcbiAgICBnYXA6IGNsYW1wKDEycHgsIDEuNXZ3LCAyNHB4KTtcbiAgICBwYWRkaW5nOiBjbGFtcCgxNnB4LCAydncsIDMycHgpO1xuICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMTUpO1xuICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4wNSk7XG4gICAgZmxleC13cmFwOiB3cmFwO1xuICB9XG5cbiAgLmNhbmNlbC1idXR0b24sXG4gIC5hcHBseS1idXR0b24ge1xuICAgIHBhZGRpbmc6IGNsYW1wKDhweCwgMXZ3LCAxMnB4KSBjbGFtcCgxNnB4LCAydncsIDMycHgpO1xuICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICBmb250LXNpemU6IGNsYW1wKDEycHgsIDEuMnZ3LCAxNnB4KTtcbiAgICBmb250LXdlaWdodDogNTAwO1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICB0cmFuc2l0aW9uOiBhbGwgdmFyKC0tdHJhbnNpdGlvbi1mYXN0KTtcbiAgICBtaW4td2lkdGg6IGNsYW1wKDgwcHgsIDEwdncsIDEyMHB4KTtcbiAgfVxuXG4gIC5jYW5jZWwtYnV0dG9uIHtcbiAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMyk7XG4gICAgY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC44KTtcbiAgfVxuXG4gIC5jYW5jZWwtYnV0dG9uOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDgpO1xuICAgIGNvbG9yOiAjZmZmZmZmO1xuICB9XG5cbiAgLmFwcGx5LWJ1dHRvbiB7XG4gICAgYmFja2dyb3VuZDogIzYzNjZmMTtcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjNjM2NmYxO1xuICAgIGNvbG9yOiB3aGl0ZTtcbiAgfVxuXG4gIC5hcHBseS1idXR0b246aG92ZXIge1xuICAgIGJhY2tncm91bmQ6ICM1ODU1ZWI7XG4gICAgYm9yZGVyLWNvbG9yOiAjNTg1NWViO1xuICB9XG5cbiAgLyogUmVzcG9uc2l2ZSBEZXNpZ24gKi9cbiAgQG1lZGlhIChtYXgtd2lkdGg6IDEwMjRweCkge1xuICAgIC5zZXR0aW5ncy1kaWFsb2cge1xuICAgICAgLS1zaWRlYmFyLXdpZHRoOiBjbGFtcCgxMjBweCwgMTJ2dywgMTgwcHgpO1xuICAgIH1cbiAgfVxuXG4gIEBtZWRpYSAobWF4LXdpZHRoOiA3NjhweCkge1xuICAgIC5zZXR0aW5ncy1vdmVybGF5IHtcbiAgICAgIHBhZGRpbmc6IGNsYW1wKDhweCwgMnZ3LCAxNnB4KTtcbiAgICB9XG5cbiAgICAuc2V0dGluZ3MtZGlhbG9nIHtcbiAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgbWF4LWhlaWdodDogbm9uZTtcbiAgICAgIGJvcmRlci1yYWRpdXM6IDA7XG4gICAgICAtLXNpZGViYXItd2lkdGg6IDEwMCU7XG4gICAgICAtLWNvbnRlbnQtcGFkZGluZzogY2xhbXAoMTJweCwgM3Z3LCAyNHB4KTtcbiAgICB9XG5cbiAgICAuZGlhbG9nLWNvbnRlbnQge1xuICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICB9XG4gIH1cblxuICBAbWVkaWEgKG1heC13aWR0aDogNDgwcHgpIHtcbiAgICAuc2V0dGluZ3MtZGlhbG9nIHtcbiAgICAgIC0tY29udGVudC1wYWRkaW5nOiBjbGFtcCg4cHgsIDJ2dywgMTZweCk7XG4gICAgfVxuICB9XG5cbiAgLyogSGlnaCBEUEkgLyBSZXRpbmEgRGlzcGxheSBTdXBwb3J0ICovXG4gIEBtZWRpYSAoLXdlYmtpdC1taW4tZGV2aWNlLXBpeGVsLXJhdGlvOiAyKSwgKG1pbi1yZXNvbHV0aW9uOiAxOTJkcGkpIHtcbiAgICAuc2V0dGluZ3MtZGlhbG9nIHtcbiAgICAgIGJvcmRlci13aWR0aDogMC41cHg7XG4gICAgfVxuICB9XG48L3N0eWxlPlxuIl0sImZpbGUiOiJDOi9US0Evd2ViL3NyYy9saWIvY29tcG9uZW50cy9TZXR0aW5nc0RpYWxvZy5zdmVsdGUifQ==