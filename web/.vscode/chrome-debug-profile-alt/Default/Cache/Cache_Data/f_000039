export class LocalStoragePersistenceService {
  CACHE_VERSION = "v2.1";
  // âœ… ROBUST: Cache versioning
  SEQUENCES_KEY = `tka-${this.CACHE_VERSION}-sequences`;
  SEQUENCE_PREFIX = `tka-${this.CACHE_VERSION}-sequence-`;
  /**
   * Validate sequence data before storage operations
   */
  isValidSequence(sequence) {
    const name = sequence.name || sequence.word || sequence.id || "";
    return name.length > 0 && name.length <= 100 && // Reasonable name length limit
    !name.includes("__") && // No double underscores
    !name.includes("test");
  }
  /**
   * Save a sequence to localStorage
   */
  async saveSequence(sequence) {
    try {
      if (!this.isValidSequence(sequence)) {
        return;
      }
      const sequenceKey = `${this.SEQUENCE_PREFIX}${sequence.id}`;
      localStorage.setItem(sequenceKey, JSON.stringify(sequence));
      await this.updateSequenceIndex(sequence);
    } catch (error) {
      console.error("Failed to save sequence:", error);
      throw new Error(
        `Failed to save sequence: ${error instanceof Error ? error.message : "Unknown error"}`
      );
    }
  }
  /**
   * Load a sequence by ID
   */
  async loadSequence(id) {
    try {
      const sequenceKey = `${this.SEQUENCE_PREFIX}${id}`;
      const data = localStorage.getItem(sequenceKey);
      if (!data) {
        return null;
      }
      const sequence = JSON.parse(data);
      return this.validateSequenceData(sequence);
    } catch (error) {
      console.error(`Failed to load sequence ${id}:`, error);
      return null;
    }
  }
  /**
   * Load all sequences
   */
  async loadAllSequences() {
    try {
      const indexData = localStorage.getItem(this.SEQUENCES_KEY);
      if (!indexData) {
        return [];
      }
      const sequenceIds = JSON.parse(indexData);
      const sequences = [];
      for (const id of sequenceIds) {
        const sequence = await this.loadSequence(id);
        if (sequence && this.isValidSequence(sequence)) {
          sequences.push(sequence);
        }
      }
      return sequences.sort((a, b) => {
        const aDate = new Date(a.metadata?.saved_at || 0).getTime();
        const bDate = new Date(b.metadata?.saved_at || 0).getTime();
        return bDate - aDate;
      });
    } catch (error) {
      console.error("Failed to load sequences:", error);
      return [];
    }
  }
  /**
   * Delete a sequence
   */
  async deleteSequence(id) {
    try {
      const sequenceKey = `${this.SEQUENCE_PREFIX}${id}`;
      localStorage.removeItem(sequenceKey);
      await this.removeFromSequenceIndex(id);
    } catch (error) {
      console.error(`Failed to delete sequence ${id}:`, error);
      throw new Error(
        `Failed to delete sequence: ${error instanceof Error ? error.message : "Unknown error"}`
      );
    }
  }
  /**
   * Update the sequence index with a new or updated sequence
   */
  async updateSequenceIndex(sequence) {
    try {
      const indexData = localStorage.getItem(this.SEQUENCES_KEY);
      const sequenceIds = indexData ? JSON.parse(indexData) : [];
      if (!sequenceIds.includes(sequence.id)) {
        sequenceIds.push(sequence.id);
        localStorage.setItem(this.SEQUENCES_KEY, JSON.stringify(sequenceIds));
      }
    } catch (error) {
      console.error("Failed to update sequence index:", error);
    }
  }
  /**
   * Remove a sequence ID from the index
   */
  async removeFromSequenceIndex(id) {
    try {
      const indexData = localStorage.getItem(this.SEQUENCES_KEY);
      if (!indexData) return;
      const sequenceIds = JSON.parse(indexData);
      const filteredIds = sequenceIds.filter((existingId) => existingId !== id);
      localStorage.setItem(this.SEQUENCES_KEY, JSON.stringify(filteredIds));
    } catch (error) {
      console.error("Failed to remove from sequence index:", error);
    }
  }
  /**
   * Validate sequence data structure
   */
  validateSequenceData(raw) {
    const data = raw || {};
    if (typeof data.id !== "string" || typeof data.name !== "string" || !Array.isArray(data.beats)) {
      throw new Error("Invalid sequence data structure");
    }
    const nowIso = (/* @__PURE__ */ new Date()).toISOString();
    const existingMeta = data.metadata || {};
    const metadata = {
      ...existingMeta,
      saved_at: typeof existingMeta.saved_at === "string" ? existingMeta.saved_at : nowIso,
      updated_at: nowIso
    };
    const beatsArray = Array.isArray(data.beats) ? data.beats : [];
    const beats = beatsArray.filter((b) => {
      if (b == null || typeof b !== "object") return false;
      const candidate = b;
      return "beatNumber" in candidate;
    });
    const result = {
      id: data.id,
      name: data.name,
      beats,
      word: data.word || "",
      thumbnails: data.thumbnails || [],
      is_favorite: Boolean(data.is_favorite),
      is_circular: Boolean(data.is_circular),
      tags: data.tags || [],
      metadata,
      // **CRITICAL: Include startPosition field if it exists**
      ...data.startPosition ? { startPosition: data.startPosition } : {}
    };
    return result;
  }
  /**
   * Get storage usage statistics
   */
  getStorageInfo() {
    try {
      let used = 0;
      for (let i = 0; i < localStorage.length; i++) {
        const key = localStorage.key(i);
        if (key?.startsWith(`tka-${this.CACHE_VERSION}-`)) {
          const value = localStorage.getItem(key);
          used += (key.length + (value?.length || 0)) * 2;
        }
      }
      const indexData = localStorage.getItem(this.SEQUENCES_KEY);
      const sequenceCount = indexData ? JSON.parse(indexData).length : 0;
      return {
        used: Math.round(used / 1024),
        // KB
        available: 5120,
        // Rough estimate of 5MB localStorage limit
        sequences: sequenceCount
      };
    } catch {
      return { used: 0, available: 5120, sequences: 0 };
    }
  }
  /**
   * Clear old cached data and malformed sequences
   */
  async clearLegacyCache() {
    try {
      const preserveKeys = [
        "tka-app-tab-state-v2",
        "tka-modern-web-settings",
        "tka-browse-state-v2",
        "tka-browse-filter-v2",
        "tka-browse-sort-v2",
        "tka-browse-view-v2",
        "tka-browse-scroll-v2",
        "tka-browse-selection-v2"
      ];
      const keysToRemove = [];
      for (let i = 0; i < localStorage.length; i++) {
        const key = localStorage.key(i);
        if (key?.startsWith("tka-") && !key.startsWith(`tka-${this.CACHE_VERSION}-`) && !preserveKeys.includes(key)) {
          keysToRemove.push(key);
        }
      }
      keysToRemove.forEach((key) => {
        localStorage.removeItem(key);
      });
      const sessionKeysToRemove = [];
      for (let i = 0; i < sessionStorage.length; i++) {
        const key = sessionStorage.key(i);
        if (key?.startsWith("tka-")) {
          sessionKeysToRemove.push(key);
        }
      }
      sessionKeysToRemove.forEach((key) => {
        sessionStorage.removeItem(key);
      });
    } catch (error) {
      console.error("Failed to clear legacy cache:", error);
    }
  }
}
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiQzovVEtBL3dlYi9zcmMvbGliL3NlcnZpY2VzL2ltcGxlbWVudGF0aW9ucy9wZXJzaXN0ZW5jZS9Mb2NhbFN0b3JhZ2VQZXJzaXN0ZW5jZVNlcnZpY2UudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIi8qKlxuICogTG9jYWwgU3RvcmFnZSBQZXJzaXN0ZW5jZSBTZXJ2aWNlXG4gKlxuICogSGFuZGxlcyBkYXRhIHBlcnNpc3RlbmNlIHVzaW5nIGJyb3dzZXIgbG9jYWxTdG9yYWdlLlxuICogVGhpcyBwcm92aWRlcyBhIHNpbXBsZSBwZXJzaXN0ZW5jZSBsYXllciBmb3Igc2VxdWVuY2VzIGFuZCBzZXR0aW5ncy5cbiAqL1xuXG5pbXBvcnQgdHlwZSB7IEJlYXREYXRhLCBTZXF1ZW5jZURhdGEgfSBmcm9tIFwiJGxpYi9kb21haW5cIjtcbmltcG9ydCB0eXBlIHsgSVBlcnNpc3RlbmNlU2VydmljZSB9IGZyb20gXCIuLi8uLi9pbnRlcmZhY2VzL3NlcXVlbmNlLWludGVyZmFjZXNcIjtcblxuZXhwb3J0IGNsYXNzIExvY2FsU3RvcmFnZVBlcnNpc3RlbmNlU2VydmljZSBpbXBsZW1lbnRzIElQZXJzaXN0ZW5jZVNlcnZpY2Uge1xuICBwcml2YXRlIHJlYWRvbmx5IENBQ0hFX1ZFUlNJT04gPSBcInYyLjFcIjsgLy8g4pyFIFJPQlVTVDogQ2FjaGUgdmVyc2lvbmluZ1xuICBwcml2YXRlIHJlYWRvbmx5IFNFUVVFTkNFU19LRVkgPSBgdGthLSR7dGhpcy5DQUNIRV9WRVJTSU9OfS1zZXF1ZW5jZXNgO1xuICBwcml2YXRlIHJlYWRvbmx5IFNFUVVFTkNFX1BSRUZJWCA9IGB0a2EtJHt0aGlzLkNBQ0hFX1ZFUlNJT059LXNlcXVlbmNlLWA7XG5cbiAgLyoqXG4gICAqIFZhbGlkYXRlIHNlcXVlbmNlIGRhdGEgYmVmb3JlIHN0b3JhZ2Ugb3BlcmF0aW9uc1xuICAgKi9cbiAgcHJpdmF0ZSBpc1ZhbGlkU2VxdWVuY2Uoc2VxdWVuY2U6IFNlcXVlbmNlRGF0YSk6IGJvb2xlYW4ge1xuICAgIC8vIOKchSBQRVJNQU5FTlQ6IFZhbGlkYXRlIHNlcXVlbmNlIG5hbWVzIHRvIHByZXZlbnQgbWFsZm9ybWVkIGRhdGFcbiAgICBjb25zdCBuYW1lID0gc2VxdWVuY2UubmFtZSB8fCBzZXF1ZW5jZS53b3JkIHx8IHNlcXVlbmNlLmlkIHx8IFwiXCI7XG5cbiAgICByZXR1cm4gKFxuICAgICAgbmFtZS5sZW5ndGggPiAwICYmXG4gICAgICBuYW1lLmxlbmd0aCA8PSAxMDAgJiYgLy8gUmVhc29uYWJsZSBuYW1lIGxlbmd0aCBsaW1pdFxuICAgICAgIW5hbWUuaW5jbHVkZXMoXCJfX1wiKSAmJiAvLyBObyBkb3VibGUgdW5kZXJzY29yZXNcbiAgICAgICFuYW1lLmluY2x1ZGVzKFwidGVzdFwiKSAvLyBObyB0ZXN0IHNlcXVlbmNlc1xuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogU2F2ZSBhIHNlcXVlbmNlIHRvIGxvY2FsU3RvcmFnZVxuICAgKi9cbiAgYXN5bmMgc2F2ZVNlcXVlbmNlKHNlcXVlbmNlOiBTZXF1ZW5jZURhdGEpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgLy8g4pyFIFBFUk1BTkVOVDogVmFsaWRhdGUgYmVmb3JlIHNhdmluZ1xuICAgICAgaWYgKCF0aGlzLmlzVmFsaWRTZXF1ZW5jZShzZXF1ZW5jZSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBTYXZlIGluZGl2aWR1YWwgc2VxdWVuY2VcbiAgICAgIGNvbnN0IHNlcXVlbmNlS2V5ID0gYCR7dGhpcy5TRVFVRU5DRV9QUkVGSVh9JHtzZXF1ZW5jZS5pZH1gO1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oc2VxdWVuY2VLZXksIEpTT04uc3RyaW5naWZ5KHNlcXVlbmNlKSk7XG5cbiAgICAgIC8vIFVwZGF0ZSBzZXF1ZW5jZSBpbmRleFxuICAgICAgYXdhaXQgdGhpcy51cGRhdGVTZXF1ZW5jZUluZGV4KHNlcXVlbmNlKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBzYXZlIHNlcXVlbmNlOlwiLCBlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBGYWlsZWQgdG8gc2F2ZSBzZXF1ZW5jZTogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwiVW5rbm93biBlcnJvclwifWBcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIExvYWQgYSBzZXF1ZW5jZSBieSBJRFxuICAgKi9cbiAgYXN5bmMgbG9hZFNlcXVlbmNlKGlkOiBzdHJpbmcpOiBQcm9taXNlPFNlcXVlbmNlRGF0YSB8IG51bGw+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc2VxdWVuY2VLZXkgPSBgJHt0aGlzLlNFUVVFTkNFX1BSRUZJWH0ke2lkfWA7XG4gICAgICBjb25zdCBkYXRhID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oc2VxdWVuY2VLZXkpO1xuXG4gICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHNlcXVlbmNlID0gSlNPTi5wYXJzZShkYXRhKSBhcyBTZXF1ZW5jZURhdGE7XG4gICAgICByZXR1cm4gdGhpcy52YWxpZGF0ZVNlcXVlbmNlRGF0YShzZXF1ZW5jZSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBsb2FkIHNlcXVlbmNlICR7aWR9OmAsIGVycm9yKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBMb2FkIGFsbCBzZXF1ZW5jZXNcbiAgICovXG4gIGFzeW5jIGxvYWRBbGxTZXF1ZW5jZXMoKTogUHJvbWlzZTxTZXF1ZW5jZURhdGFbXT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBpbmRleERhdGEgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSh0aGlzLlNFUVVFTkNFU19LRVkpO1xuICAgICAgaWYgKCFpbmRleERhdGEpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBzZXF1ZW5jZUlkcyA9IEpTT04ucGFyc2UoaW5kZXhEYXRhKSBhcyBzdHJpbmdbXTtcbiAgICAgIGNvbnN0IHNlcXVlbmNlczogU2VxdWVuY2VEYXRhW10gPSBbXTtcblxuICAgICAgZm9yIChjb25zdCBpZCBvZiBzZXF1ZW5jZUlkcykge1xuICAgICAgICBjb25zdCBzZXF1ZW5jZSA9IGF3YWl0IHRoaXMubG9hZFNlcXVlbmNlKGlkKTtcbiAgICAgICAgaWYgKHNlcXVlbmNlICYmIHRoaXMuaXNWYWxpZFNlcXVlbmNlKHNlcXVlbmNlKSkge1xuICAgICAgICAgIC8vIOKchSBQRVJNQU5FTlQ6IEZpbHRlciBvdXQgaW52YWxpZCBzZXF1ZW5jZXMgZHVyaW5nIGxvYWRcbiAgICAgICAgICBzZXF1ZW5jZXMucHVzaChzZXF1ZW5jZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlcXVlbmNlcy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgIC8vIFNvcnQgYnkgc3RvcmVkIHRpbWVzdGFtcCBpbiBtZXRhZGF0YSBpZiBhdmFpbGFibGVcbiAgICAgICAgY29uc3QgYURhdGUgPSBuZXcgRGF0ZSgoYS5tZXRhZGF0YT8uc2F2ZWRfYXQgYXMgc3RyaW5nKSB8fCAwKS5nZXRUaW1lKCk7XG4gICAgICAgIGNvbnN0IGJEYXRlID0gbmV3IERhdGUoKGIubWV0YWRhdGE/LnNhdmVkX2F0IGFzIHN0cmluZykgfHwgMCkuZ2V0VGltZSgpO1xuICAgICAgICByZXR1cm4gYkRhdGUgLSBhRGF0ZTtcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGxvYWQgc2VxdWVuY2VzOlwiLCBlcnJvcik7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIERlbGV0ZSBhIHNlcXVlbmNlXG4gICAqL1xuICBhc3luYyBkZWxldGVTZXF1ZW5jZShpZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFJlbW92ZSBpbmRpdmlkdWFsIHNlcXVlbmNlXG4gICAgICBjb25zdCBzZXF1ZW5jZUtleSA9IGAke3RoaXMuU0VRVUVOQ0VfUFJFRklYfSR7aWR9YDtcbiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKHNlcXVlbmNlS2V5KTtcblxuICAgICAgLy8gVXBkYXRlIHNlcXVlbmNlIGluZGV4XG4gICAgICBhd2FpdCB0aGlzLnJlbW92ZUZyb21TZXF1ZW5jZUluZGV4KGlkKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGRlbGV0ZSBzZXF1ZW5jZSAke2lkfTpgLCBlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBGYWlsZWQgdG8gZGVsZXRlIHNlcXVlbmNlOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCJVbmtub3duIGVycm9yXCJ9YFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIHRoZSBzZXF1ZW5jZSBpbmRleCB3aXRoIGEgbmV3IG9yIHVwZGF0ZWQgc2VxdWVuY2VcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgdXBkYXRlU2VxdWVuY2VJbmRleChzZXF1ZW5jZTogU2VxdWVuY2VEYXRhKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGluZGV4RGF0YSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKHRoaXMuU0VRVUVOQ0VTX0tFWSk7XG4gICAgICBjb25zdCBzZXF1ZW5jZUlkcyA9IGluZGV4RGF0YSA/IChKU09OLnBhcnNlKGluZGV4RGF0YSkgYXMgc3RyaW5nW10pIDogW107XG5cbiAgICAgIC8vIEFkZCBzZXF1ZW5jZSBJRCBpZiBub3QgYWxyZWFkeSBwcmVzZW50XG4gICAgICBpZiAoIXNlcXVlbmNlSWRzLmluY2x1ZGVzKHNlcXVlbmNlLmlkKSkge1xuICAgICAgICBzZXF1ZW5jZUlkcy5wdXNoKHNlcXVlbmNlLmlkKTtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0odGhpcy5TRVFVRU5DRVNfS0VZLCBKU09OLnN0cmluZ2lmeShzZXF1ZW5jZUlkcykpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIHVwZGF0ZSBzZXF1ZW5jZSBpbmRleDpcIiwgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYSBzZXF1ZW5jZSBJRCBmcm9tIHRoZSBpbmRleFxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyByZW1vdmVGcm9tU2VxdWVuY2VJbmRleChpZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGluZGV4RGF0YSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKHRoaXMuU0VRVUVOQ0VTX0tFWSk7XG4gICAgICBpZiAoIWluZGV4RGF0YSkgcmV0dXJuO1xuXG4gICAgICBjb25zdCBzZXF1ZW5jZUlkcyA9IEpTT04ucGFyc2UoaW5kZXhEYXRhKSBhcyBzdHJpbmdbXTtcbiAgICAgIGNvbnN0IGZpbHRlcmVkSWRzID0gc2VxdWVuY2VJZHMuZmlsdGVyKChleGlzdGluZ0lkKSA9PiBleGlzdGluZ0lkICE9PSBpZCk7XG5cbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHRoaXMuU0VRVUVOQ0VTX0tFWSwgSlNPTi5zdHJpbmdpZnkoZmlsdGVyZWRJZHMpKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byByZW1vdmUgZnJvbSBzZXF1ZW5jZSBpbmRleDpcIiwgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBWYWxpZGF0ZSBzZXF1ZW5jZSBkYXRhIHN0cnVjdHVyZVxuICAgKi9cbiAgcHJpdmF0ZSB2YWxpZGF0ZVNlcXVlbmNlRGF0YShyYXc6IHVua25vd24pOiBTZXF1ZW5jZURhdGEge1xuICAgIGNvbnN0IGRhdGEgPSAocmF3IGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+KSB8fCB7fTtcbiAgICAvLyBCYXNpYyB2YWxpZGF0aW9uIC0gZW5zdXJlIHJlcXVpcmVkIGZpZWxkcyBleGlzdFxuICAgIGlmIChcbiAgICAgIHR5cGVvZiBkYXRhLmlkICE9PSBcInN0cmluZ1wiIHx8XG4gICAgICB0eXBlb2YgZGF0YS5uYW1lICE9PSBcInN0cmluZ1wiIHx8XG4gICAgICAhQXJyYXkuaXNBcnJheShkYXRhLmJlYXRzKVxuICAgICkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBzZXF1ZW5jZSBkYXRhIHN0cnVjdHVyZVwiKTtcbiAgICB9XG5cbiAgICAvLyBFbnN1cmUgYWxsIHJlcXVpcmVkIGZpZWxkcyBoYXZlIGRlZmF1bHRzXG4gICAgY29uc3Qgbm93SXNvID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICAgIGNvbnN0IGV4aXN0aW5nTWV0YSA9IChkYXRhLm1ldGFkYXRhIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+KSB8fCB7fTtcbiAgICBjb25zdCBtZXRhZGF0YSA9IHtcbiAgICAgIC4uLmV4aXN0aW5nTWV0YSxcbiAgICAgIHNhdmVkX2F0OlxuICAgICAgICB0eXBlb2YgZXhpc3RpbmdNZXRhLnNhdmVkX2F0ID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgPyBleGlzdGluZ01ldGEuc2F2ZWRfYXRcbiAgICAgICAgICA6IG5vd0lzbyxcbiAgICAgIHVwZGF0ZWRfYXQ6IG5vd0lzbyxcbiAgICB9O1xuICAgIGNvbnN0IGJlYXRzQXJyYXkgPSBBcnJheS5pc0FycmF5KGRhdGEuYmVhdHMpXG4gICAgICA/IChkYXRhLmJlYXRzIGFzIHVua25vd25bXSlcbiAgICAgIDogW107XG4gICAgY29uc3QgYmVhdHM6IEJlYXREYXRhW10gPSBiZWF0c0FycmF5LmZpbHRlcigoYik6IGIgaXMgQmVhdERhdGEgPT4ge1xuICAgICAgaWYgKGIgPT0gbnVsbCB8fCB0eXBlb2YgYiAhPT0gXCJvYmplY3RcIikgcmV0dXJuIGZhbHNlO1xuICAgICAgY29uc3QgY2FuZGlkYXRlID0gYiBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPjtcbiAgICAgIHJldHVybiBcImJlYXROdW1iZXJcIiBpbiBjYW5kaWRhdGU7XG4gICAgfSk7XG4gICAgY29uc3QgcmVzdWx0OiBTZXF1ZW5jZURhdGEgPSB7XG4gICAgICBpZDogZGF0YS5pZCBhcyBzdHJpbmcsXG4gICAgICBuYW1lOiBkYXRhLm5hbWUgYXMgc3RyaW5nLFxuICAgICAgYmVhdHMsXG4gICAgICB3b3JkOiAoZGF0YS53b3JkIGFzIHN0cmluZykgfHwgXCJcIixcbiAgICAgIHRodW1ibmFpbHM6IChkYXRhLnRodW1ibmFpbHMgYXMgc3RyaW5nW10pIHx8IFtdLFxuICAgICAgaXNfZmF2b3JpdGU6IEJvb2xlYW4oZGF0YS5pc19mYXZvcml0ZSksXG4gICAgICBpc19jaXJjdWxhcjogQm9vbGVhbihkYXRhLmlzX2NpcmN1bGFyKSxcbiAgICAgIHRhZ3M6IChkYXRhLnRhZ3MgYXMgc3RyaW5nW10pIHx8IFtdLFxuICAgICAgbWV0YWRhdGEsXG4gICAgICAvLyAqKkNSSVRJQ0FMOiBJbmNsdWRlIHN0YXJ0UG9zaXRpb24gZmllbGQgaWYgaXQgZXhpc3RzKipcbiAgICAgIC4uLihkYXRhLnN0YXJ0UG9zaXRpb25cbiAgICAgICAgPyB7IHN0YXJ0UG9zaXRpb246IGRhdGEuc3RhcnRQb3NpdGlvbiBhcyBCZWF0RGF0YSB9XG4gICAgICAgIDoge30pLFxuICAgIH07XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBzdG9yYWdlIHVzYWdlIHN0YXRpc3RpY3NcbiAgICovXG4gIGdldFN0b3JhZ2VJbmZvKCk6IHsgdXNlZDogbnVtYmVyOyBhdmFpbGFibGU6IG51bWJlcjsgc2VxdWVuY2VzOiBudW1iZXIgfSB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIENhbGN1bGF0ZSB1c2VkIHN0b3JhZ2UgKHJvdWdoIGVzdGltYXRlKVxuICAgICAgbGV0IHVzZWQgPSAwO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsb2NhbFN0b3JhZ2UubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3Qga2V5ID0gbG9jYWxTdG9yYWdlLmtleShpKTtcbiAgICAgICAgaWYgKGtleT8uc3RhcnRzV2l0aChgdGthLSR7dGhpcy5DQUNIRV9WRVJTSU9OfS1gKSkge1xuICAgICAgICAgIC8vIOKchSBST0JVU1Q6IE9ubHkgY291bnQgY3VycmVudCB2ZXJzaW9uIHN0b3JhZ2VcbiAgICAgICAgICBjb25zdCB2YWx1ZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7XG4gICAgICAgICAgdXNlZCArPSAoa2V5Lmxlbmd0aCArICh2YWx1ZT8ubGVuZ3RoIHx8IDApKSAqIDI7IC8vIFVURi0xNiBlbmNvZGluZ1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEdldCBzZXF1ZW5jZSBjb3VudFxuICAgICAgY29uc3QgaW5kZXhEYXRhID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0odGhpcy5TRVFVRU5DRVNfS0VZKTtcbiAgICAgIGNvbnN0IHNlcXVlbmNlQ291bnQgPSBpbmRleERhdGEgPyBKU09OLnBhcnNlKGluZGV4RGF0YSkubGVuZ3RoIDogMDtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdXNlZDogTWF0aC5yb3VuZCh1c2VkIC8gMTAyNCksIC8vIEtCXG4gICAgICAgIGF2YWlsYWJsZTogNTEyMCwgLy8gUm91Z2ggZXN0aW1hdGUgb2YgNU1CIGxvY2FsU3RvcmFnZSBsaW1pdFxuICAgICAgICBzZXF1ZW5jZXM6IHNlcXVlbmNlQ291bnQsXG4gICAgICB9O1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIHsgdXNlZDogMCwgYXZhaWxhYmxlOiA1MTIwLCBzZXF1ZW5jZXM6IDAgfTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXIgb2xkIGNhY2hlZCBkYXRhIGFuZCBtYWxmb3JtZWQgc2VxdWVuY2VzXG4gICAqL1xuICBhc3luYyBjbGVhckxlZ2FjeUNhY2hlKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBLZXlzIHRvIHByZXNlcnZlIChkb24ndCByZW1vdmUgdGhlc2UgaW1wb3J0YW50IHN0YXRlIGtleXMpXG4gICAgICBjb25zdCBwcmVzZXJ2ZUtleXMgPSBbXG4gICAgICAgIFwidGthLWFwcC10YWItc3RhdGUtdjJcIixcbiAgICAgICAgXCJ0a2EtbW9kZXJuLXdlYi1zZXR0aW5nc1wiLFxuICAgICAgICBcInRrYS1icm93c2Utc3RhdGUtdjJcIixcbiAgICAgICAgXCJ0a2EtYnJvd3NlLWZpbHRlci12MlwiLFxuICAgICAgICBcInRrYS1icm93c2Utc29ydC12MlwiLFxuICAgICAgICBcInRrYS1icm93c2Utdmlldy12MlwiLFxuICAgICAgICBcInRrYS1icm93c2Utc2Nyb2xsLXYyXCIsXG4gICAgICAgIFwidGthLWJyb3dzZS1zZWxlY3Rpb24tdjJcIixcbiAgICAgIF07XG5cbiAgICAgIC8vIENsZWFyIGFsbCBvbGQgVEtBIHN0b3JhZ2Uga2V5cyBleGNlcHQgcHJlc2VydmVkIG9uZXNcbiAgICAgIGNvbnN0IGtleXNUb1JlbW92ZTogc3RyaW5nW10gPSBbXTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbG9jYWxTdG9yYWdlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IGxvY2FsU3RvcmFnZS5rZXkoaSk7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBrZXk/LnN0YXJ0c1dpdGgoXCJ0a2EtXCIpICYmXG4gICAgICAgICAgIWtleS5zdGFydHNXaXRoKGB0a2EtJHt0aGlzLkNBQ0hFX1ZFUlNJT059LWApICYmXG4gICAgICAgICAgIXByZXNlcnZlS2V5cy5pbmNsdWRlcyhrZXkpXG4gICAgICAgICkge1xuICAgICAgICAgIGtleXNUb1JlbW92ZS5wdXNoKGtleSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gUmVtb3ZlIG9sZCBrZXlzXG4gICAgICBrZXlzVG9SZW1vdmUuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XG4gICAgICB9KTtcblxuICAgICAgLy8gQ2xlYXIgc2Vzc2lvbiBzdG9yYWdlIGFzIHdlbGxcbiAgICAgIGNvbnN0IHNlc3Npb25LZXlzVG9SZW1vdmU6IHN0cmluZ1tdID0gW107XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlc3Npb25TdG9yYWdlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IHNlc3Npb25TdG9yYWdlLmtleShpKTtcbiAgICAgICAgaWYgKGtleT8uc3RhcnRzV2l0aChcInRrYS1cIikpIHtcbiAgICAgICAgICBzZXNzaW9uS2V5c1RvUmVtb3ZlLnB1c2goa2V5KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBzZXNzaW9uS2V5c1RvUmVtb3ZlLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBjbGVhciBsZWdhY3kgY2FjaGU6XCIsIGVycm9yKTtcbiAgICB9XG4gIH1cbn1cbiJdLAogICJtYXBwaW5ncyI6ICJBQVVPLGFBQU0sK0JBQThEO0FBQUEsRUFDeEQsZ0JBQWdCO0FBQUE7QUFBQSxFQUNoQixnQkFBZ0IsT0FBTyxLQUFLLGFBQWE7QUFBQSxFQUN6QyxrQkFBa0IsT0FBTyxLQUFLLGFBQWE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtwRCxnQkFBZ0IsVUFBaUM7QUFFdkQsVUFBTSxPQUFPLFNBQVMsUUFBUSxTQUFTLFFBQVEsU0FBUyxNQUFNO0FBRTlELFdBQ0UsS0FBSyxTQUFTLEtB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
