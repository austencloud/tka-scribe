import {
  IApplicationInitializationServiceInterface,
  IArrowRenderingServiceInterface,
  IConstructTabCoordinationServiceInterface,
  IDeviceDetectionServiceInterface,
  IExportServiceInterface,
  IGridRenderingServiceInterface,
  IMotionGenerationServiceInterface,
  IOrientationCalculationServiceInterface,
  IOverlayRenderingServiceInterface,
  IPanelManagementServiceInterface,
  IPersistenceServiceInterface,
  IPictographRenderingServiceInterface,
  IPictographServiceInterface,
  IPropRenderingServiceInterface,
  IPropCoordinatorServiceInterface,
  ISequenceDomainServiceInterface,
  ISequenceGenerationServiceInterface,
  ISequenceServiceInterface,
  ISettingsServiceInterface,
  IStartPositionServiceInterface,
  ISvgConfigurationInterface,
  ISvgUtilityServiceInterface,
  IPrintablePageLayoutServiceInterface,
  IPageFactoryServiceInterface,
  IPageImageExportServiceInterface,
  ISequenceCardExportIntegrationServiceInterface,
  IDataTransformationServiceInterface,
  IStartPositionSelectionServiceInterface
} from "/src/lib/services/di/interfaces/core-interfaces.ts?t=1755799252292";
import { ILetterQueryServiceInterface } from "/src/lib/services/di/interfaces/codex-interfaces.ts";
import { ApplicationInitializationService } from "/src/lib/services/implementations/application/ApplicationInitializationService.ts";
import { ConstructTabCoordinationService } from "/src/lib/services/implementations/construct/ConstructTabCoordinationService.ts";
import { PictographRenderingService } from "/src/lib/services/implementations/rendering/PictographRenderingService.ts";
import { SequenceService } from "/src/lib/services/implementations/sequence/SequenceService.ts";
import { SequenceGenerationService } from "/src/lib/services/implementations/generation/SequenceGenerationService.ts";
import { IArrowPositioningOrchestratorInterface } from "/src/lib/services/di/interfaces/positioning-interfaces.ts";
export async function registerCoreServices(container) {
  container.registerSingletonClass(ISequenceDomainServiceInterface);
  container.registerSingletonClass(IPersistenceServiceInterface);
  container.registerSingletonClass(ISettingsServiceInterface);
  container.registerSingletonClass(IDeviceDetectionServiceInterface);
  container.registerSingletonClass(IPanelManagementServiceInterface);
  container.registerSingletonClass(IStartPositionServiceInterface);
  container.registerSingletonClass(IStartPositionSelectionServiceInterface);
  container.registerSingletonClass(ISvgConfigurationInterface);
  container.registerSingletonClass(ISvgUtilityServiceInterface);
  container.registerSingletonClass(IDataTransformationServiceInterface);
  container.registerSingletonClass(IGridRenderingServiceInterface);
  container.registerSingletonClass(IArrowRenderingServiceInterface);
  container.registerSingletonClass(IOverlayRenderingServiceInterface);
  container.registerSingletonClass(IPropRenderingServiceInterface);
  container.registerSingletonClass(IPropCoordinatorServiceInterface);
  container.registerFactory(ISequenceServiceInterface, () => {
    const sequenceDomainService = container.resolve(
      ISequenceDomainServiceInterface
    );
    const persistenceService = container.resolve(IPersistenceServiceInterface);
    return new SequenceService(sequenceDomainService, persistenceService);
  });
  container.registerFactory(IConstructTabCoordinationServiceInterface, () => {
    const sequenceService = container.resolve(ISequenceServiceInterface);
    const startPositionService = container.resolve(
      IStartPositionServiceInterface
    );
    return new ConstructTabCoordinationService(
      sequenceService,
      startPositionService
    );
  });
  container.registerFactory(IPictographRenderingServiceInterface, () => {
    const arrowPositioning = container.resolve(
      IArrowPositioningOrchestratorInterface
    );
    const propRendering = container.resolve(IPropRenderingServiceInterface);
    const svgUtility = container.resolve(ISvgUtilityServiceInterface);
    const gridRendering = container.resolve(IGridRenderingServiceInterface);
    const arrowRendering = container.resolve(IArrowRenderingServiceInterface);
    const overlayRendering = container.resolve(
      IOverlayRenderingServiceInterface
    );
    const dataTransformation = container.resolve(
      IDataTransformationServiceInterface
    );
    return new PictographRenderingService(
      arrowPositioning,
      propRendering,
      svgUtility,
      gridRendering,
      arrowRendering,
      overlayRendering,
      dataTransformation
    );
  });
  container.registerSingletonClass(IPictographServiceInterface);
  container.registerSingletonClass(IExportServiceInterface);
  container.registerSingletonClass(IMotionGenerationServiceInterface);
  container.registerSingletonClass(IOrientationCalculationServiceInterface);
  container.registerFactory(ISequenceGenerationServiceInterface, () => {
    const letterQueryService = container.resolve(ILetterQueryServiceInterface);
    const orientationCalculationService = container.resolve(
      IOrientationCalculationServiceInterface
    );
    return new SequenceGenerationService(
      letterQueryService,
      orientationCalculationService
    );
  });
  container.registerSingletonClass(IPrintablePageLayoutServiceInterface);
  container.registerSingletonClass(IPageImageExportServiceInterface);
  container.registerFactory(IPageFactoryServiceInterface, () => {
    const layoutService = container.resolve(
      IPrintablePageLayoutServiceInterface
    );
    return new IPageFactoryServiceInterface.implementation(layoutService);
  });
  container.registerFactory(
    ISequenceCardExportIntegrationServiceInterface,
    () => {
      const pageImageExportService = container.resolve(
        IPageImageExportServiceInterface
      );
      return new ISequenceCardExportIntegrationServiceInterface.implementation(
        pageImageExportService
      );
    }
  );
  container.registerFactory(IApplicationInitializationServiceInterface, () => {
    const settingsService = container.resolve(ISettingsServiceInterface);
    const persistenceService = container.resolve(IPersistenceServiceInterface);
    return new ApplicationInitializationService(
      settingsService,
      persistenceService
    );
  });
}
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiQzovVEtBL3dlYi9zcmMvbGliL3NlcnZpY2VzL2RpL3JlZ2lzdHJhdGlvbi9jb3JlLXNlcnZpY2VzLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyIvKipcbiAqIENvcmUgU2VydmljZXMgUmVnaXN0cmF0aW9uXG4gKiBIYW5kbGVzIHJlZ2lzdHJhdGlvbiBvZiBjb3JlIGJ1c2luZXNzIGxvZ2ljIGFuZCBpbmZyYXN0cnVjdHVyZSBzZXJ2aWNlc1xuICovXG5cbmltcG9ydCB0eXBlIHsgU2VydmljZUNvbnRhaW5lciB9IGZyb20gXCIuLi9TZXJ2aWNlQ29udGFpbmVyXCI7XG5pbXBvcnQge1xuICBJQXBwbGljYXRpb25Jbml0aWFsaXphdGlvblNlcnZpY2VJbnRlcmZhY2UsXG4gIElBcnJvd1JlbmRlcmluZ1NlcnZpY2VJbnRlcmZhY2UsXG4gIElDb25zdHJ1Y3RUYWJDb29yZGluYXRpb25TZXJ2aWNlSW50ZXJmYWNlLFxuICBJRGV2aWNlRGV0ZWN0aW9uU2VydmljZUludGVyZmFjZSxcbiAgSUV4cG9ydFNlcnZpY2VJbnRlcmZhY2UsXG4gIElHcmlkUmVuZGVyaW5nU2VydmljZUludGVyZmFjZSxcbiAgSU1vdGlvbkdlbmVyYXRpb25TZXJ2aWNlSW50ZXJmYWNlLFxuICBJT3JpZW50YXRpb25DYWxjdWxhdGlvblNlcnZpY2VJbnRlcmZhY2UsXG4gIElPdmVybGF5UmVuZGVyaW5nU2VydmljZUludGVyZmFjZSxcbiAgSVBhbmVsTWFuYWdlbWVudFNlcnZpY2VJbnRlcmZhY2UsXG4gIElQZXJzaXN0ZW5jZVNlcnZpY2VJbnRlcmZhY2UsXG4gIElQaWN0b2dyYXBoUmVuZGVyaW5nU2VydmljZUludGVyZmFjZSxcbiAgSVBpY3RvZ3JhcGhTZXJ2aWNlSW50ZXJmYWNlLFxuICBJUHJvcFJlbmRlcmluZ1NlcnZpY2VJbnRlcmZhY2UsXG4gIElQcm9wQ29vcmRpbmF0b3JTZXJ2aWNlSW50ZXJmYWNlLFxuICBJU2VxdWVuY2VEb21haW5TZXJ2aWNlSW50ZXJmYWNlLFxuICBJU2VxdWVuY2VHZW5lcmF0aW9uU2VydmljZUludGVyZmFjZSxcbiAgSVNlcXVlbmNlU2VydmljZUludGVyZmFjZSxcbiAgSVNldHRpbmdzU2VydmljZUludGVyZmFjZSxcbiAgSVN0YXJ0UG9zaXRpb25TZXJ2aWNlSW50ZXJmYWNlLFxuICBJU3ZnQ29uZmlndXJhdGlvbkludGVyZmFjZSxcbiAgSVN2Z1V0aWxpdHlTZXJ2aWNlSW50ZXJmYWNlLFxuICBJUHJpbnRhYmxlUGFnZUxheW91dFNlcnZpY2VJbnRlcmZhY2UsXG4gIElQYWdlRmFjdG9yeVNlcnZpY2VJbnRlcmZhY2UsXG4gIElQYWdlSW1hZ2VFeHBvcnRTZXJ2aWNlSW50ZXJmYWNlLFxuICBJU2VxdWVuY2VDYXJkRXhwb3J0SW50ZWdyYXRpb25TZXJ2aWNlSW50ZXJmYWNlLFxuICBJRGF0YVRyYW5zZm9ybWF0aW9uU2VydmljZUludGVyZmFjZSxcbiAgSVN0YXJ0UG9zaXRpb25TZWxlY3Rpb25TZXJ2aWNlSW50ZXJmYWNlLFxufSBmcm9tIFwiLi4vaW50ZXJmYWNlcy9jb3JlLWludGVyZmFjZXNcIjtcbmltcG9ydCB7IElMZXR0ZXJRdWVyeVNlcnZpY2VJbnRlcmZhY2UgfSBmcm9tIFwiLi4vaW50ZXJmYWNlcy9jb2RleC1pbnRlcmZhY2VzXCI7XG5cbmltcG9ydCB7IEFwcGxpY2F0aW9uSW5pdGlhbGl6YXRpb25TZXJ2aWNlIH0gZnJvbSBcIi4uLy4uL2ltcGxlbWVudGF0aW9ucy9hcHBsaWNhdGlvbi9BcHBsaWNhdGlvbkluaXRpYWxpemF0aW9uU2VydmljZVwiO1xuaW1wb3J0IHsgQ29uc3RydWN0VGFiQ29vcmRpbmF0aW9uU2VydmljZSB9IGZyb20gXCIuLi8uLi9pbXBsZW1lbnRhdGlvbnMvY29uc3RydWN0L0NvbnN0cnVjdFRhYkNvb3JkaW5hdGlvblNlcnZpY2VcIjtcbmltcG9ydCB7IFBpY3RvZ3JhcGhSZW5kZXJpbmdTZXJ2aWNlIH0gZnJvbSBcIi4uLy4uL2ltcGxlbWVudGF0aW9ucy9yZW5kZXJpbmcvUGljdG9ncmFwaFJlbmRlcmluZ1NlcnZpY2VcIjtcbmltcG9ydCB7IFNlcXVlbmNlU2VydmljZSB9IGZyb20gXCIuLi8uLi9pbXBsZW1lbnRhdGlvbnMvc2VxdWVuY2UvU2VxdWVuY2VTZXJ2aWNlXCI7XG5pbXBvcnQgeyBTZXF1ZW5jZUdlbmVyYXRpb25TZXJ2aWNlIH0gZnJvbSBcIi4uLy4uL2ltcGxlbWVudGF0aW9ucy9nZW5lcmF0aW9uL1NlcXVlbmNlR2VuZXJhdGlvblNlcnZpY2VcIjtcblxuaW1wb3J0IHsgSUFycm93UG9zaXRpb25pbmdPcmNoZXN0cmF0b3JJbnRlcmZhY2UgfSBmcm9tIFwiLi4vaW50ZXJmYWNlcy9wb3NpdGlvbmluZy1pbnRlcmZhY2VzXCI7XG5pbXBvcnQgdHlwZSB7IElBcnJvd1Bvc2l0aW9uaW5nT3JjaGVzdHJhdG9yIH0gZnJvbSBcIi4uLy4uL3Bvc2l0aW9uaW5nL2NvcmUtc2VydmljZXNcIjtcblxuLyoqXG4gKiBSZWdpc3RlciBhbGwgY29yZSBzZXJ2aWNlcyB3aXRoIHRoZWlyIGRlcGVuZGVuY2llc1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVnaXN0ZXJDb3JlU2VydmljZXMoXG4gIGNvbnRhaW5lcjogU2VydmljZUNvbnRhaW5lclxuKTogUHJvbWlzZTx2b2lkPiB7XG4gIC8vIFJlZ2lzdGVyIGRvbWFpbiBzZXJ2aWNlcyAobm8gZGVwZW5kZW5jaWVzKVxuICBjb250YWluZXIucmVnaXN0ZXJTaW5nbGV0b25DbGFzcyhJU2VxdWVuY2VEb21haW5TZXJ2aWNlSW50ZXJmYWNlKTtcblxuICAvLyBSZWdpc3RlciBpbmZyYXN0cnVjdHVyZSBzZXJ2aWNlc1xuICBjb250YWluZXIucmVnaXN0ZXJTaW5nbGV0b25DbGFzcyhJUGVyc2lzdGVuY2VTZXJ2aWNlSW50ZXJmYWNlKTtcbiAgY29udGFpbmVyLnJlZ2lzdGVyU2luZ2xldG9uQ2xhc3MoSVNldHRpbmdzU2VydmljZUludGVyZmFjZSk7XG4gIGNvbnRhaW5lci5yZWdpc3RlclNpbmdsZXRvbkNsYXNzKElEZXZpY2VEZXRlY3Rpb25TZXJ2aWNlSW50ZXJmYWNlKTtcbiAgY29udGFpbmVyLnJlZ2lzdGVyU2luZ2xldG9uQ2xhc3MoSVBhbmVsTWFuYWdlbWVudFNlcnZpY2VJbnRlcmZhY2UpO1xuXG4gIC8vIFJlZ2lzdGVyIGNvbnN0cnVjdCB0YWIgc2VydmljZXNcbiAgY29udGFpbmVyLnJlZ2lzdGVyU2luZ2xldG9uQ2xhc3MoSVN0YXJ0UG9zaXRpb25TZXJ2aWNlSW50ZXJmYWNlKTtcbiAgY29udGFpbmVyLnJlZ2lzdGVyU2luZ2xldG9uQ2xhc3MoSVN0YXJ0UG9zaXRpb25TZWxlY3Rpb25TZXJ2aWNlSW50ZXJmYWNlKTtcblxuICAvLyBSZWdpc3RlciByZW5kZXJpbmcgbWljcm9zZXJ2aWNlcyAoaW4gZGVwZW5kZW5jeSBvcmRlcilcbiAgY29udGFpbmVyLnJlZ2lzdGVyU2luZ2xldG9uQ2xhc3MoSVN2Z0NvbmZpZ3VyYXRpb25JbnRlcmZhY2UpO1xuICBjb250YWluZXIucmVnaXN0ZXJTaW5nbGV0b25DbGFzcyhJU3ZnVXRpbGl0eVNlcnZpY2VJbnRlcmZhY2UpO1xuICBjb250YWluZXIucmVnaXN0ZXJTaW5nbGV0b25DbGFzcyhJRGF0YVRyYW5zZm9ybWF0aW9uU2VydmljZUludGVyZmFjZSk7XG4gIGNvbnRhaW5lci5yZWdpc3RlclNpbmdsZXRvbkNsYXNzKElHcmlkUmVuZGVyaW5nU2VydmljZUludGVyZmFjZSk7XG4gIGNvbnRhaW5lci5yZWdpc3RlclNpbmdsZXRvbkNsYXNzKElBcnJvd1JlbmRlcmluZ1NlcnZpY2VJbnRlcmZhY2UpO1xuICBjb250YWluZXIucmVnaXN0ZXJTaW5nbGV0b25DbGFzcyhJT3ZlcmxheVJlbmRlcmluZ1NlcnZpY2VJbnRlcmZhY2UpO1xuXG4gIC8vIFJlZ2lzdGVyIG1haW4gcmVuZGVyaW5nIHNlcnZpY2VzXG4gIGNvbnRhaW5lci5yZWdpc3RlclNpbmdsZXRvbkNsYXNzKElQcm9wUmVuZGVyaW5nU2VydmljZUludGVyZmFjZSk7XG4gIGNvbnRhaW5lci5yZWdpc3RlclNpbmdsZXRvbkNsYXNzKElQcm9wQ29vcmRpbmF0b3JTZXJ2aWNlSW50ZXJmYWNlKTtcblxuICAvLyBSZWdpc3RlciBzZXJ2aWNlcyB3aXRoIGRlcGVuZGVuY2llcyB1c2luZyBmYWN0b3JpZXNcbiAgY29udGFpbmVyLnJlZ2lzdGVyRmFjdG9yeShJU2VxdWVuY2VTZXJ2aWNlSW50ZXJmYWNlLCAoKSA9PiB7XG4gICAgY29uc3Qgc2VxdWVuY2VEb21haW5TZXJ2aWNlID0gY29udGFpbmVyLnJlc29sdmUoXG4gICAgICBJU2VxdWVuY2VEb21haW5TZXJ2aWNlSW50ZXJmYWNlXG4gICAgKTtcbiAgICBjb25zdCBwZXJzaXN0ZW5jZVNlcnZpY2UgPSBjb250YWluZXIucmVzb2x2ZShJUGVyc2lzdGVuY2VTZXJ2aWNlSW50ZXJmYWNlKTtcbiAgICByZXR1cm4gbmV3IFNlcXVlbmNlU2VydmljZShzZXF1ZW5jZURvbWFpblNlcnZpY2UsIHBlcnNpc3RlbmNlU2VydmljZSk7XG4gIH0pO1xuXG4gIGNvbnRhaW5lci5yZWdpc3RlckZhY3RvcnkoSUNvbnN0cnVjdFRhYkNvb3JkaW5hdGlvblNlcnZpY2VJbnRlcmZhY2UsICgpID0+IHtcbiAgICBjb25zdCBzZXF1ZW5jZVNlcnZpY2UgPSBjb250YWluZXIucmVzb2x2ZShJU2VxdWVuY2VTZXJ2aWNlSW50ZXJmYWNlKTtcbiAgICBjb25zdCBzdGFydFBvc2l0aW9uU2VydmljZSA9IGNvbnRhaW5lci5yZXNvbHZlKFxuICAgICAgSVN0YXJ0UG9zaXRpb25TZXJ2aWNlSW50ZXJmYWNlXG4gICAgKTtcbiAgICByZXR1cm4gbmV3IENvbnN0cnVjdFRhYkNvb3JkaW5hdGlvblNlcnZpY2UoXG4gICAgICBzZXF1ZW5jZVNlcnZpY2UsXG4gICAgICBzdGFydFBvc2l0aW9uU2VydmljZVxuICAgICk7XG4gIH0pO1xuXG4gIC8vIFJlZ2lzdGVyIHBpY3RvZ3JhcGggcmVuZGVyaW5nIHNlcnZpY2UgKGRlcGVuZHMgb24gcG9zaXRpb25pbmcgYW5kIG1pY3Jvc2VydmljZXMpXG4gIGNvbnRhaW5lci5yZWdpc3RlckZhY3RvcnkoSVBpY3RvZ3JhcGhSZW5kZXJpbmdTZXJ2aWNlSW50ZXJmYWNlLCAoKSA9PiB7XG4gICAgY29uc3QgYXJyb3dQb3NpdGlvbmluZyA9IGNvbnRhaW5lci5yZXNvbHZlKFxuICAgICAgSUFycm93UG9zaXRpb25pbmdPcmNoZXN0cmF0b3JJbnRlcmZhY2VcbiAgICApIGFzIElBcnJvd1Bvc2l0aW9uaW5nT3JjaGVzdHJhdG9yO1xuICAgIGNvbnN0IHByb3BSZW5kZXJpbmcgPSBjb250YWluZXIucmVzb2x2ZShJUHJvcFJlbmRlcmluZ1NlcnZpY2VJbnRlcmZhY2UpO1xuICAgIGNvbnN0IHN2Z1V0aWxpdHkgPSBjb250YWluZXIucmVzb2x2ZShJU3ZnVXRpbGl0eVNlcnZpY2VJbnRlcmZhY2UpO1xuICAgIGNvbnN0IGdyaWRSZW5kZXJpbmcgPSBjb250YWluZXIucmVzb2x2ZShJR3JpZFJlbmRlcmluZ1NlcnZpY2VJbnRlcmZhY2UpO1xuICAgIGNvbnN0IGFycm93UmVuZGVyaW5nID0gY29udGFpbmVyLnJlc29sdmUoSUFycm93UmVuZGVyaW5nU2VydmljZUludGVyZmFjZSk7XG4gICAgY29uc3Qgb3ZlcmxheVJlbmRlcmluZyA9IGNvbnRhaW5lci5yZXNvbHZlKFxuICAgICAgSU92ZXJsYXlSZW5kZXJpbmdTZXJ2aWNlSW50ZXJmYWNlXG4gICAgKTtcbiAgICBjb25zdCBkYXRhVHJhbnNmb3JtYXRpb24gPSBjb250YWluZXIucmVzb2x2ZShcbiAgICAgIElEYXRhVHJhbnNmb3JtYXRpb25TZXJ2aWNlSW50ZXJmYWNlXG4gICAgKTtcbiAgICByZXR1cm4gbmV3IFBpY3RvZ3JhcGhSZW5kZXJpbmdTZXJ2aWNlKFxuICAgICAgYXJyb3dQb3NpdGlvbmluZyxcbiAgICAgIHByb3BSZW5kZXJpbmcsXG4gICAgICBzdmdVdGlsaXR5LFxuICAgICAgZ3JpZFJlbmRlcmluZyxcbiAgICAgIGFycm93UmVuZGVyaW5nLFxuICAgICAgb3ZlcmxheVJlbmRlcmluZyxcbiAgICAgIGRhdGFUcmFuc2Zvcm1hdGlvblxuICAgICk7XG4gIH0pO1xuXG4gIC8vIFJlZ2lzdGVyIHBpY3RvZ3JhcGggc2VydmljZSAobm8gZGVwZW5kZW5jaWVzIGFmdGVyIHJlbmRlcmluZyBpcyByZWdpc3RlcmVkKVxuICBjb250YWluZXIucmVnaXN0ZXJTaW5nbGV0b25DbGFzcyhJUGljdG9ncmFwaFNlcnZpY2VJbnRlcmZhY2UpO1xuXG4gIC8vIFJlZ2lzdGVyIGV4cG9ydCBzZXJ2aWNlXG4gIGNvbnRhaW5lci5yZWdpc3RlclNpbmdsZXRvbkNsYXNzKElFeHBvcnRTZXJ2aWNlSW50ZXJmYWNlKTtcblxuICAvLyBSZWdpc3RlciBnZW5lcmF0aW9uIHNlcnZpY2VzXG4gIGNvbnRhaW5lci5yZWdpc3RlclNpbmdsZXRvbkNsYXNzKElNb3Rpb25HZW5lcmF0aW9uU2VydmljZUludGVyZmFjZSk7XG4gIGNvbnRhaW5lci5yZWdpc3RlclNpbmdsZXRvbkNsYXNzKElPcmllbnRhdGlvbkNhbGN1bGF0aW9uU2VydmljZUludGVyZmFjZSk7XG5cbiAgLy8gUmVnaXN0ZXIgc2VxdWVuY2UgZ2VuZXJhdGlvbiBzZXJ2aWNlIHdpdGggZGVwZW5kZW5jaWVzXG4gIGNvbnRhaW5lci5yZWdpc3RlckZhY3RvcnkoSVNlcXVlbmNlR2VuZXJhdGlvblNlcnZpY2VJbnRlcmZhY2UsICgpID0+IHtcbiAgICBjb25zdCBsZXR0ZXJRdWVyeVNlcnZpY2UgPSBjb250YWluZXIucmVzb2x2ZShJTGV0dGVyUXVlcnlTZXJ2aWNlSW50ZXJmYWNlKTtcbiAgICBjb25zdCBvcmllbnRhdGlvbkNhbGN1bGF0aW9uU2VydmljZSA9IGNvbnRhaW5lci5yZXNvbHZlKFxuICAgICAgSU9yaWVudGF0aW9uQ2FsY3VsYXRpb25TZXJ2aWNlSW50ZXJmYWNlXG4gICAgKTtcbiAgICByZXR1cm4gbmV3IFNlcXVlbmNlR2VuZXJhdGlvblNlcnZpY2UoXG4gICAgICBsZXR0ZXJRdWVyeVNlcnZpY2UsXG4gICAgICBvcmllbnRhdGlvbkNhbGN1bGF0aW9uU2VydmljZVxuICAgICk7XG4gIH0pO1xuXG4gIC8vIFJlZ2lzdGVyIHBhZ2UgbGF5b3V0IGFuZCBleHBvcnQgc2VydmljZXNcbiAgY29udGFpbmVyLnJlZ2lzdGVyU2luZ2xldG9uQ2xhc3MoSVByaW50YWJsZVBhZ2VMYXlvdXRTZXJ2aWNlSW50ZXJmYWNlKTtcbiAgY29udGFpbmVyLnJlZ2lzdGVyU2luZ2xldG9uQ2xhc3MoSVBhZ2VJbWFnZUV4cG9ydFNlcnZpY2VJbnRlcmZhY2UpO1xuXG4gIC8vIFJlZ2lzdGVyIHBhZ2UgZmFjdG9yeSBzZXJ2aWNlIHdpdGggZGVwZW5kZW5jeVxuICBjb250YWluZXIucmVnaXN0ZXJGYWN0b3J5KElQYWdlRmFjdG9yeVNlcnZpY2VJbnRlcmZhY2UsICgpID0+IHtcbiAgICBjb25zdCBsYXlvdXRTZXJ2aWNlID0gY29udGFpbmVyLnJlc29sdmUoXG4gICAgICBJUHJpbnRhYmxlUGFnZUxheW91dFNlcnZpY2VJbnRlcmZhY2VcbiAgICApO1xuICAgIHJldHVybiBuZXcgSVBhZ2VGYWN0b3J5U2VydmljZUludGVyZmFjZS5pbXBsZW1lbnRhdGlvbihsYXlvdXRTZXJ2aWNlKTtcbiAgfSk7XG5cbiAgLy8gUmVnaXN0ZXIgZXhwb3J0IGludGVncmF0aW9uIHNlcnZpY2Ugd2l0aCBkZXBlbmRlbmN5XG4gIGNvbnRhaW5lci5yZWdpc3RlckZhY3RvcnkoXG4gICAgSVNlcXVlbmNlQ2FyZEV4cG9ydEludGVncmF0aW9uU2VydmljZUludGVyZmFjZSxcbiAgICAoKSA9PiB7XG4gICAgICBjb25zdCBwYWdlSW1hZ2VFeHBvcnRTZXJ2aWNlID0gY29udGFpbmVyLnJlc29sdmUoXG4gICAgICAgIElQYWdlSW1hZ2VFeHBvcnRTZXJ2aWNlSW50ZXJmYWNlXG4gICAgICApO1xuICAgICAgcmV0dXJuIG5ldyBJU2VxdWVuY2VDYXJkRXhwb3J0SW50ZWdyYXRpb25TZXJ2aWNlSW50ZXJmYWNlLmltcGxlbWVudGF0aW9uKFxuICAgICAgICBwYWdlSW1hZ2VFeHBvcnRTZXJ2aWNlXG4gICAgICApO1xuICAgIH1cbiAgKTtcblxuICAvLyBSZWdpc3RlciBhcHBsaWNhdGlvbiBpbml0aWFsaXphdGlvbiBzZXJ2aWNlIHdpdGggZmFjdG9yeVxuICBjb250YWluZXIucmVnaXN0ZXJGYWN0b3J5KElBcHBsaWNhdGlvbkluaXRpYWxpemF0aW9uU2VydmljZUludGVyZmFjZSwgKCkgPT4ge1xuICAgIGNvbnN0IHNldHRpbmdzU2VydmljZSA9IGNvbnRhaW5lci5yZXNvbHZlKElTZXR0aW5nc1NlcnZpY2VJbnRlcmZhY2UpO1xuICAgIGNvbnN0IHBlcnNpc3RlbmNlU2VydmljZSA9IGNvbnRhaW5lci5yZXNvbHZlKElQZXJzaXN0ZW5jZVNlcnZpY2VJbnRlcmZhY2UpO1xuICAgIHJldHVybiBuZXcgQXBwbGljYXRpb25Jbml0aWFsaXphdGlvblNlcnZpY2UoXG4gICAgICBzZXR0aW5nc1NlcnZpY2UsXG4gICAgICBwZXJzaXN0ZW5jZVNlcnZpY2VcbiAgICApO1xuICB9KTtcbn1cbiJdLAogICJtYXBwaW5ncyI6ICJBQU1BO0FBQUEsRUFDRTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLE9BQ0s7QUFDUCxTQUFTLG9DQUFvQztBQUU3QyxTQUFTLHdDQUF3QztBQUNqRCxTQUFTLHVDQUF1QztBQUNoRCxTQUFTLGtDQUFrQztBQUMzQyxTQUFTLHVCQUF1QjtBQUNoQyxTQUFTLGlDQUFpQztBQUUxQyxTQUFTLDhDQUE4QztBQU12RCxzQkFB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
