export class NavigationService {
  async generateNavigationSections(sequences, favorites) {
    const sections = [
      await this.generateFavoritesSection(sequences, favorites),
      await this.generateDateSection(sequences),
      await this.generateLengthSection(sequences),
      await this.generateLetterSection(sequences),
      await this.generateLevelSection(sequences),
      await this.generateAuthorSection(sequences)
    ];
    return sections;
  }
  toggleSectionExpansion(sectionId, sections) {
    return sections.map((section) => ({
      ...section,
      isExpanded: section.id === sectionId ? !section.isExpanded : section.isExpanded
    }));
  }
  setActiveItem(sectionId, itemId, sections) {
    return sections.map((section) => ({
      ...section,
      items: section.items.map((item) => ({
        ...item,
        isActive: section.id === sectionId && item.id === itemId
      }))
    }));
  }
  clearActiveStates(sections) {
    return sections.map((section) => ({
      ...section,
      items: section.items.map((item) => ({
        ...item,
        isActive: false
      }))
    }));
  }
  getSequencesForNavigationItem(item, sectionType, allSequences) {
    switch (sectionType) {
      case "length": {
        const length = parseInt(item.value);
        return allSequences.filter((seq) => seq.sequenceLength === length);
      }
      case "letter":
        return allSequences.filter(
          (seq) => seq.word.startsWith(item.value)
        );
      case "level":
        return allSequences.filter((seq) => seq.difficultyLevel === item.value);
      case "author":
        return allSequences.filter((seq) => seq.author === item.value);
      case "date":
        return allSequences.filter((seq) => {
          if (!seq.dateAdded) return false;
          const itemDate = new Date(item.value);
          const seqDate = new Date(seq.dateAdded);
          return seqDate.toDateString() === itemDate.toDateString();
        });
      case "favorites":
        return allSequences;
      default:
        return allSequences;
    }
  }
  updateSectionCounts(sections, sequences, favorites) {
    return sections.map((section) => ({
      ...section,
      totalCount: this.calculateSectionCount(section, sequences, favorites),
      items: section.items.map((item) => ({
        ...item,
        count: this.getSequencesForNavigationItem(item, section.type, sequences).length
      }))
    }));
  }
  // Private helper methods
  async generateFavoritesSection(sequences, favorites) {
    const favoriteSequences = sequences.filter(
      (seq) => favorites.includes(seq.id)
    );
    return {
      id: "favorites",
      title: "â­ Favorites",
      type: "favorites",
      items: [
        {
          id: "all-favorites",
          label: "All Favorites",
          value: "favorites",
          count: favoriteSequences.length,
          isActive: false,
          sequences: favoriteSequences
        }
      ],
      isExpanded: false,
      totalCount: favoriteSequences.length
    };
  }
  async generateDateSection(sequences) {
    const dateGroups = /* @__PURE__ */ new Map();
    sequences.forEach((seq) => {
      if (seq.dateAdded) {
        const date = new Date(seq.dateAdded);
        const dateKey = date.toDateString();
        if (!dateGroups.has(dateKey)) {
          dateGroups.set(dateKey, []);
        }
        const group = dateGroups.get(dateKey);
        if (group) {
          group.push(seq);
        }
      }
    });
    const items = Array.from(dateGroups.entries()).sort(([a], [b]) => new Date(b).getTime() - new Date(a).getTime()).slice(0, 10).map(([date, seqs]) => ({
      id: `date-${date}`,
      label: this.formatDateLabel(new Date(date)),
      value: date,
      count: seqs.length,
      isActive: false,
      sequences: seqs
    }));
    return {
      id: "date",
      title: "ðŸ“… Recently Added",
      type: "date",
      items,
      isExpanded: false,
      totalCount: sequences.filter((seq) => seq.dateAdded).length
    };
  }
  async generateLengthSection(sequences) {
    const lengthGroups = /* @__PURE__ */ new Map();
    sequences.forEach((seq) => {
      const length = seq.sequenceLength || seq.word.length;
      if (!lengthGroups.has(length)) {
        lengthGroups.set(length, []);
      }
      const group = lengthGroups.get(length);
      if (group) {
        group.push(seq);
      }
    });
    const items = Array.from(lengthGroups.entries()).sort(([a], [b]) => a - b).map(([length, seqs]) => ({
      id: `length-${length}`,
      label: `${length} beats`,
      value: length,
      count: seqs.length,
      isActive: false,
      sequences: seqs
    }));
    return {
      id: "length",
      title: "ðŸ“ Length",
      type: "length",
      items,
      isExpanded: false,
      totalCount: sequences.length
    };
  }
  async generateLetterSection(sequences) {
    const letterGroups = /* @__PURE__ */ new Map();
    sequences.forEach((seq) => {
      const firstLetter = seq.word.charAt(0).toUpperCase();
      if (!letterGroups.has(firstLetter)) {
        letterGroups.set(firstLetter, []);
      }
      const group = letterGroups.get(firstLetter);
      if (group) {
        group.push(seq);
      }
    });
    const items = Array.from(letterGroups.entries()).sort(([a], [b]) => a.localeCompare(b)).map(([letter, seqs]) => ({
      id: `letter-${letter}`,
      label: letter,
      value: letter,
      count: seqs.length,
      isActive: false,
      sequences: seqs
    }));
    return {
      id: "letter",
      title: "ðŸ”¤ Starting Letter",
      type: "letter",
      items,
      isExpanded: true,
      // Default expanded like desktop
      totalCount: sequences.length
    };
  }
  async generateLevelSection(sequences) {
    const levelGroups = /* @__PURE__ */ new Map();
    sequences.forEach((seq) => {
      const level = seq.difficultyLevel || "unknown";
      if (!levelGroups.has(level)) {
        levelGroups.set(level, []);
      }
      const group = levelGroups.get(level);
      if (group) {
        group.push(seq);
      }
    });
    const levelOrder = ["beginner", "intermediate", "advanced", "unknown"];
    const items = levelOrder.filter((level) => levelGroups.has(level)).map((level) => ({
      id: `level-${level}`,
      label: level.charAt(0).toUpperCase() + level.slice(1),
      value: level,
      count: levelGroups.get(level)?.length || 0,
      isActive: false,
      sequences: levelGroups.get(level) ?? []
    }));
    return {
      id: "level",
      title: "ðŸ“Š Difficulty",
      type: "level",
      items,
      isExpanded: false,
      totalCount: sequences.length
    };
  }
  async generateAuthorSection(sequences) {
    const authorGroups = /* @__PURE__ */ new Map();
    sequences.forEach((seq) => {
      const author = seq.author || "Unknown";
      if (!authorGroups.has(author)) {
        authorGroups.set(author, []);
      }
      const group = authorGroups.get(author);
      if (group) {
        group.push(seq);
      }
    });
    const items = Array.from(authorGroups.entries()).sort(([a], [b]) => a.localeCompare(b)).map(([author, seqs]) => ({
      id: `author-${author}`,
      label: author,
      value: author,
      count: seqs.length,
      isActive: false,
      sequences: seqs
    }));
    return {
      id: "author",
      title: "ðŸ‘¤ Author",
      type: "author",
      items,
      isExpanded: false,
      totalCount: sequences.length
    };
  }
  calculateSectionCount(section, sequences, favorites) {
    switch (section.type) {
      case "favorites":
        return sequences.filter((seq) => favorites.includes(seq.id)).length;
      default:
        return sequences.length;
    }
  }
  formatDateLabel(date) {
    const now = /* @__PURE__ */ new Date();
    const diffTime = now.getTime() - date.getTime();
    const diffDays = Math.floor(diffTime / (1e3 * 60 * 60 * 24));
    if (diffDays === 0) return "Today";
    if (diffDays === 1) return "Yesterday";
    if (diffDays < 7) return `${diffDays} days ago`;
    if (diffDays < 30) return `${Math.floor(diffDays / 7)} weeks ago`;
    return date.toLocaleDateString();
  }
  // Additional methods required by browse-interfaces.ts
  async buildNavigationStructure(sequences) {
    return this.generateNavigationSections(sequences, []);
  }
  async getNavigationItem(_sectionId, _itemId) {
    return null;
  }
}
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiQzovVEtBL3dlYi9zcmMvbGliL3NlcnZpY2VzL2ltcGxlbWVudGF0aW9ucy9uYXZpZ2F0aW9uL05hdmlnYXRpb25TZXJ2aWNlLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyIvKipcbiAqIE5hdmlnYXRpb24gU2VydmljZSAtIE1hbmFnZXMgYnJvd3NlIHRhYiBuYXZpZ2F0aW9uXG4gKlxuICogSGFuZGxlcyBzaWRlYmFyIG5hdmlnYXRpb24gc2VjdGlvbnMsIG9yZ2FuaXphdGlvbiwgYW5kIHN0YXRlIG1hbmFnZW1lbnRcbiAqIGZvbGxvd2luZyB0aGUgbWljcm9zZXJ2aWNlcyBhcmNoaXRlY3R1cmUgcGF0dGVybi5cbiAqL1xuXG5pbXBvcnQgdHlwZSB7IEJyb3dzZVNlcXVlbmNlTWV0YWRhdGEgfSBmcm9tIFwiLi4vLi4vaW50ZXJmYWNlcy9kb21haW4tdHlwZXNcIjtcblxuZXhwb3J0IGludGVyZmFjZSBOYXZpZ2F0aW9uU2VjdGlvbiB7XG4gIGlkOiBzdHJpbmc7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIHR5cGU6IFwiZGF0ZVwiIHwgXCJsZW5ndGhcIiB8IFwibGV0dGVyXCIgfCBcImxldmVsXCIgfCBcImF1dGhvclwiIHwgXCJmYXZvcml0ZXNcIjtcbiAgaXRlbXM6IE5hdmlnYXRpb25JdGVtW107XG4gIGlzRXhwYW5kZWQ6IGJvb2xlYW47XG4gIHRvdGFsQ291bnQ6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBOYXZpZ2F0aW9uSXRlbSB7XG4gIGlkOiBzdHJpbmc7XG4gIGxhYmVsOiBzdHJpbmc7XG4gIHZhbHVlOiBzdHJpbmcgfCBudW1iZXI7XG4gIGNvdW50OiBudW1iZXI7XG4gIGlzQWN0aXZlOiBib29sZWFuO1xuICBzZXF1ZW5jZXM6IEJyb3dzZVNlcXVlbmNlTWV0YWRhdGFbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJTmF2aWdhdGlvblNlcnZpY2Uge1xuICAvKiogR2VuZXJhdGUgbmF2aWdhdGlvbiBzZWN0aW9ucyBmcm9tIHNlcXVlbmNlcyAqL1xuICBnZW5lcmF0ZU5hdmlnYXRpb25TZWN0aW9ucyhcbiAgICBzZXF1ZW5jZXM6IEJyb3dzZVNlcXVlbmNlTWV0YWRhdGFbXSxcbiAgICBmYXZvcml0ZXM6IHN0cmluZ1tdXG4gICk6IFByb21pc2U8TmF2aWdhdGlvblNlY3Rpb25bXT47XG5cbiAgLyoqIFRvZ2dsZSBzZWN0aW9uIGV4cGFuc2lvbiBzdGF0ZSAqL1xuICB0b2dnbGVTZWN0aW9uRXhwYW5zaW9uKFxuICAgIHNlY3Rpb25JZDogc3RyaW5nLFxuICAgIHNlY3Rpb25zOiBOYXZpZ2F0aW9uU2VjdGlvbltdXG4gICk6IE5hdmlnYXRpb25TZWN0aW9uW107XG5cbiAgLyoqIFNldCBhY3RpdmUgbmF2aWdhdGlvbiBpdGVtICovXG4gIHNldEFjdGl2ZUl0ZW0oXG4gICAgc2VjdGlvbklkOiBzdHJpbmcsXG4gICAgaXRlbUlkOiBzdHJpbmcsXG4gICAgc2VjdGlvbnM6IE5hdmlnYXRpb25TZWN0aW9uW11cbiAgKTogTmF2aWdhdGlvblNlY3Rpb25bXTtcblxuICAvKiogQ2xlYXIgYWxsIGFjdGl2ZSBzdGF0ZXMgKi9cbiAgY2xlYXJBY3RpdmVTdGF0ZXMoc2VjdGlvbnM6IE5hdmlnYXRpb25TZWN0aW9uW10pOiBOYXZpZ2F0aW9uU2VjdGlvbltdO1xuXG4gIC8qKiBHZXQgc2VxdWVuY2VzIGZvciBuYXZpZ2F0aW9uIGl0ZW0gKi9cbiAgZ2V0U2VxdWVuY2VzRm9yTmF2aWdhdGlvbkl0ZW0oXG4gICAgaXRlbTogTmF2aWdhdGlvbkl0ZW0sXG4gICAgc2VjdGlvblR5cGU6IE5hdmlnYXRpb25TZWN0aW9uW1widHlwZVwiXSxcbiAgICBhbGxTZXF1ZW5jZXM6IEJyb3dzZVNlcXVlbmNlTWV0YWRhdGFbXVxuICApOiBCcm93c2VTZXF1ZW5jZU1ldGFkYXRhW107XG5cbiAgLyoqIFVwZGF0ZSBzZWN0aW9uIGNvdW50cyBiYXNlZCBvbiBjdXJyZW50IHNlcXVlbmNlcyAqL1xuICB1cGRhdGVTZWN0aW9uQ291bnRzKFxuICAgIHNlY3Rpb25zOiBOYXZpZ2F0aW9uU2VjdGlvbltdLFxuICAgIHNlcXVlbmNlczogQnJvd3NlU2VxdWVuY2VNZXRhZGF0YVtdLFxuICAgIGZhdm9yaXRlczogc3RyaW5nW11cbiAgKTogTmF2aWdhdGlvblNlY3Rpb25bXTtcbn1cblxuZXhwb3J0IGNsYXNzIE5hdmlnYXRpb25TZXJ2aWNlIGltcGxlbWVudHMgSU5hdmlnYXRpb25TZXJ2aWNlIHtcbiAgYXN5bmMgZ2VuZXJhdGVOYXZpZ2F0aW9uU2VjdGlvbnMoXG4gICAgc2VxdWVuY2VzOiBCcm93c2VTZXF1ZW5jZU1ldGFkYXRhW10sXG4gICAgZmF2b3JpdGVzOiBzdHJpbmdbXVxuICApOiBQcm9taXNlPE5hdmlnYXRpb25TZWN0aW9uW10+IHtcbiAgICBjb25zdCBzZWN0aW9uczogTmF2aWdhdGlvblNlY3Rpb25bXSA9IFtcbiAgICAgIGF3YWl0IHRoaXMuZ2VuZXJhdGVGYXZvcml0ZXNTZWN0aW9uKHNlcXVlbmNlcywgZmF2b3JpdGVzKSxcbiAgICAgIGF3YWl0IHRoaXMuZ2VuZXJhdGVEYXRlU2VjdGlvbihzZXF1ZW5jZXMpLFxuICAgICAgYXdhaXQgdGhpcy5nZW5lcmF0ZUxlbmd0aFNlY3Rpb24oc2VxdWVuY2VzKSxcbiAgICAgIGF3YWl0IHRoaXMuZ2VuZXJhdGVMZXR0ZXJTZWN0aW9uKHNlcXVlbmNlcyksXG4gICAgICBhd2FpdCB0aGlzLmdlbmVyYXRlTGV2ZWxTZWN0aW9uKHNlcXVlbmNlcyksXG4gICAgICBhd2FpdCB0aGlzLmdlbmVyYXRlQXV0aG9yU2VjdGlvbihzZXF1ZW5jZXMpLFxuICAgIF07XG5cbiAgICByZXR1cm4gc2VjdGlvbnM7XG4gIH1cblxuICB0b2dnbGVTZWN0aW9uRXhwYW5zaW9uKFxuICAgIHNlY3Rpb25JZDogc3RyaW5nLFxuICAgIHNlY3Rpb25zOiBOYXZpZ2F0aW9uU2VjdGlvbltdXG4gICk6IE5hdmlnYXRpb25TZWN0aW9uW10ge1xuICAgIHJldHVybiBzZWN0aW9ucy5tYXAoKHNlY3Rpb24pID0+ICh7XG4gICAgICAuLi5zZWN0aW9uLFxuICAgICAgaXNFeHBhbmRlZDpcbiAgICAgICAgc2VjdGlvbi5pZCA9PT0gc2VjdGlvbklkID8gIXNlY3Rpb24uaXNFeHBhbmRlZCA6IHNlY3Rpb24uaXNFeHBhbmRlZCxcbiAgICB9KSk7XG4gIH1cblxuICBzZXRBY3RpdmVJdGVtKFxuICAgIHNlY3Rpb25JZDogc3RyaW5nLFxuICAgIGl0ZW1JZDogc3RyaW5nLFxuICAgIHNlY3Rpb25zOiBOYXZpZ2F0aW9uU2VjdGlvbltdXG4gICk6IE5hdmlnYXRpb25TZWN0aW9uW10ge1xuICAgIHJldHVybiBzZWN0aW9ucy5tYXAoKHNlY3Rpb24pID0+ICh7XG4gICAgICAuLi5zZWN0aW9uLFxuICAgICAgaXRlbXM6IHNlY3Rpb24uaXRlbXMubWFwKChpdGVtKSA9PiAoe1xuICAgICAgICAuLi5pdGVtLFxuICAgICAgICBpc0FjdGl2ZTogc2VjdGlvbi5pZCA9PT0gc2VjdGlvbklkICYmIGl0ZW0uaWQgPT09IGl0ZW1JZCxcbiAgICAgIH0pKSxcbiAgICB9KSk7XG4gIH1cblxuICBjbGVhckFjdGl2ZVN0YXRlcyhzZWN0aW9uczogTmF2aWdhdGlvblNlY3Rpb25bXSk6IE5hdmlnYXRpb25TZWN0aW9uW10ge1xuICAgIHJldHVybiBzZWN0aW9ucy5tYXAoKHNlY3Rpb24pID0+ICh7XG4gICAgICAuLi5zZWN0aW9uLFxuICAgICAgaXRlbXM6IHNlY3Rpb24uaXRlbXMubWFwKChpdGVtKSA9PiAoe1xuICAgICAgICAuLi5pdGVtLFxuICAgICAgICBpc0FjdGl2ZTogZmFsc2UsXG4gICAgICB9KSksXG4gICAgfSkpO1xuICB9XG5cbiAgZ2V0U2VxdWVuY2VzRm9yTmF2aWdhdGlvbkl0ZW0oXG4gICAgaXRlbTogTmF2aWdhdGlvbkl0ZW0sXG4gICAgc2VjdGlvblR5cGU6IE5hdmlnYXRpb25TZWN0aW9uW1widHlwZVwiXSxcbiAgICBhbGxTZXF1ZW5jZXM6IEJyb3dzZVNlcXVlbmNlTWV0YWRhdGFbXVxuICApOiBCcm93c2VTZXF1ZW5jZU1ldGFkYXRhW10ge1xuICAgIHN3aXRjaCAoc2VjdGlvblR5cGUpIHtcbiAgICAgIGNhc2UgXCJsZW5ndGhcIjoge1xuICAgICAgICBjb25zdCBsZW5ndGggPSBwYXJzZUludChpdGVtLnZhbHVlIGFzIHN0cmluZyk7XG4gICAgICAgIHJldHVybiBhbGxTZXF1ZW5jZXMuZmlsdGVyKChzZXEpID0+IHNlcS5zZXF1ZW5jZUxlbmd0aCA9PT0gbGVuZ3RoKTtcbiAgICAgIH1cblxuICAgICAgY2FzZSBcImxldHRlclwiOlxuICAgICAgICByZXR1cm4gYWxsU2VxdWVuY2VzLmZpbHRlcigoc2VxKSA9PlxuICAgICAgICAgIHNlcS53b3JkLnN0YXJ0c1dpdGgoaXRlbS52YWx1ZSBhcyBzdHJpbmcpXG4gICAgICAgICk7XG5cbiAgICAgIGNhc2UgXCJsZXZlbFwiOlxuICAgICAgICByZXR1cm4gYWxsU2VxdWVuY2VzLmZpbHRlcigoc2VxKSA9PiBzZXEuZGlmZmljdWx0eUxldmVsID09PSBpdGVtLnZhbHVlKTtcblxuICAgICAgY2FzZSBcImF1dGhvclwiOlxuICAgICAgICByZXR1cm4gYWxsU2VxdWVuY2VzLmZpbHRlcigoc2VxKSA9PiBzZXEuYXV0aG9yID09PSBpdGVtLnZhbHVlKTtcblxuICAgICAgY2FzZSBcImRhdGVcIjpcbiAgICAgICAgLy8gSW1wbGVtZW50YXRpb24gZGVwZW5kcyBvbiBkYXRlIGZvcm1hdFxuICAgICAgICByZXR1cm4gYWxsU2VxdWVuY2VzLmZpbHRlcigoc2VxKSA9PiB7XG4gICAgICAgICAgaWYgKCFzZXEuZGF0ZUFkZGVkKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgY29uc3QgaXRlbURhdGUgPSBuZXcgRGF0ZShpdGVtLnZhbHVlIGFzIHN0cmluZyk7XG4gICAgICAgICAgY29uc3Qgc2VxRGF0ZSA9IG5ldyBEYXRlKHNlcS5kYXRlQWRkZWQpO1xuICAgICAgICAgIHJldHVybiBzZXFEYXRlLnRvRGF0ZVN0cmluZygpID09PSBpdGVtRGF0ZS50b0RhdGVTdHJpbmcoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgIGNhc2UgXCJmYXZvcml0ZXNcIjpcbiAgICAgICAgLy8gV2lsbCBiZSBoYW5kbGVkIGJ5IGZhdm9yaXRlcyBmaWx0ZXJcbiAgICAgICAgcmV0dXJuIGFsbFNlcXVlbmNlcztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGFsbFNlcXVlbmNlcztcbiAgICB9XG4gIH1cblxuICB1cGRhdGVTZWN0aW9uQ291bnRzKFxuICAgIHNlY3Rpb25zOiBOYXZpZ2F0aW9uU2VjdGlvbltdLFxuICAgIHNlcXVlbmNlczogQnJvd3NlU2VxdWVuY2VNZXRhZGF0YVtdLFxuICAgIGZhdm9yaXRlczogc3RyaW5nW11cbiAgKTogTmF2aWdhdGlvblNlY3Rpb25bXSB7XG4gICAgcmV0dXJuIHNlY3Rpb25zLm1hcCgoc2VjdGlvbikgPT4gKHtcbiAgICAgIC4uLnNlY3Rpb24sXG4gICAgICB0b3RhbENvdW50OiB0aGlzLmNhbGN1bGF0ZVNlY3Rpb25Db3VudChzZWN0aW9uLCBzZXF1ZW5jZXMsIGZhdm9yaXRlcyksXG4gICAgICBpdGVtczogc2VjdGlvbi5pdGVtcy5tYXAoKGl0ZW0pID0+ICh7XG4gICAgICAgIC4uLml0ZW0sXG4gICAgICAgIGNvdW50OiB0aGlzLmdldFNlcXVlbmNlc0Zvck5hdmlnYXRpb25JdGVtKGl0ZW0sIHNlY3Rpb24udHlwZSwgc2VxdWVuY2VzKVxuICAgICAgICAgIC5sZW5ndGgsXG4gICAgICB9KSksXG4gICAgfSkpO1xuICB9XG5cbiAgLy8gUHJpdmF0ZSBoZWxwZXIgbWV0aG9kc1xuICBwcml2YXRlIGFzeW5jIGdlbmVyYXRlRmF2b3JpdGVzU2VjdGlvbihcbiAgICBzZXF1ZW5jZXM6IEJyb3dzZVNlcXVlbmNlTWV0YWRhdGFbXSxcbiAgICBmYXZvcml0ZXM6IHN0cmluZ1tdXG4gICk6IFByb21pc2U8TmF2aWdhdGlvblNlY3Rpb24+IHtcbiAgICBjb25zdCBmYXZvcml0ZVNlcXVlbmNlcyA9IHNlcXVlbmNlcy5maWx0ZXIoKHNlcSkgPT5cbiAgICAgIGZhdm9yaXRlcy5pbmNsdWRlcyhzZXEuaWQpXG4gICAgKTtcblxuICAgIHJldHVybiB7XG4gICAgICBpZDogXCJmYXZvcml0ZXNcIixcbiAgICAgIHRpdGxlOiBcIuKtkCBGYXZvcml0ZXNcIixcbiAgICAgIHR5cGU6IFwiZmF2b3JpdGVzXCIsXG4gICAgICBpdGVtczogW1xuICAgICAgICB7XG4gICAgICAgICAgaWQ6IFwiYWxsLWZhdm9yaXRlc1wiLFxuICAgICAgICAgIGxhYmVsOiBcIkFsbCBGYXZvcml0ZXNcIixcbiAgICAgICAgICB2YWx1ZTogXCJmYXZvcml0ZXNcIixcbiAgICAgICAgICBjb3VudDogZmF2b3JpdGVTZXF1ZW5jZXMubGVuZ3RoLFxuICAgICAgICAgIGlzQWN0aXZlOiBmYWxzZSxcbiAgICAgICAgICBzZXF1ZW5jZXM6IGZhdm9yaXRlU2VxdWVuY2VzLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICAgIGlzRXhwYW5kZWQ6IGZhbHNlLFxuICAgICAgdG90YWxDb3VudDogZmF2b3JpdGVTZXF1ZW5jZXMubGVuZ3RoLFxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGdlbmVyYXRlRGF0ZVNlY3Rpb24oXG4gICAgc2VxdWVuY2VzOiBCcm93c2VTZXF1ZW5jZU1ldGFkYXRhW11cbiAgKTogUHJvbWlzZTxOYXZpZ2F0aW9uU2VjdGlvbj4ge1xuICAgIGNvbnN0IGRhdGVHcm91cHMgPSBuZXcgTWFwPHN0cmluZywgQnJvd3NlU2VxdWVuY2VNZXRhZGF0YVtdPigpO1xuXG4gICAgc2VxdWVuY2VzLmZvckVhY2goKHNlcSkgPT4ge1xuICAgICAgaWYgKHNlcS5kYXRlQWRkZWQpIHtcbiAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHNlcS5kYXRlQWRkZWQpO1xuICAgICAgICBjb25zdCBkYXRlS2V5ID0gZGF0ZS50b0RhdGVTdHJpbmcoKTtcbiAgICAgICAgaWYgKCFkYXRlR3JvdXBzLmhhcyhkYXRlS2V5KSkge1xuICAgICAgICAgIGRhdGVHcm91cHMuc2V0KGRhdGVLZXksIFtdKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBncm91cCA9IGRhdGVHcm91cHMuZ2V0KGRhdGVLZXkpO1xuICAgICAgICBpZiAoZ3JvdXApIHtcbiAgICAgICAgICBncm91cC5wdXNoKHNlcSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGNvbnN0IGl0ZW1zOiBOYXZpZ2F0aW9uSXRlbVtdID0gQXJyYXkuZnJvbShkYXRlR3JvdXBzLmVudHJpZXMoKSlcbiAgICAgIC5zb3J0KChbYV0sIFtiXSkgPT4gbmV3IERhdGUoYikuZ2V0VGltZSgpIC0gbmV3IERhdGUoYSkuZ2V0VGltZSgpKVxuICAgICAgLnNsaWNlKDAsIDEwKSAvLyBTaG93IGxhc3QgMTAgZGF0ZXNcbiAgICAgIC5tYXAoKFtkYXRlLCBzZXFzXSkgPT4gKHtcbiAgICAgICAgaWQ6IGBkYXRlLSR7ZGF0ZX1gLFxuICAgICAgICBsYWJlbDogdGhpcy5mb3JtYXREYXRlTGFiZWwobmV3IERhdGUoZGF0ZSkpLFxuICAgICAgICB2YWx1ZTogZGF0ZSxcbiAgICAgICAgY291bnQ6IHNlcXMubGVuZ3RoLFxuICAgICAgICBpc0FjdGl2ZTogZmFsc2UsXG4gICAgICAgIHNlcXVlbmNlczogc2VxcyxcbiAgICAgIH0pKTtcblxuICAgIHJldHVybiB7XG4gICAgICBpZDogXCJkYXRlXCIsXG4gICAgICB0aXRsZTogXCLwn5OFIFJlY2VudGx5IEFkZGVkXCIsXG4gICAgICB0eXBlOiBcImRhdGVcIixcbiAgICAgIGl0ZW1zLFxuICAgICAgaXNFeHBhbmRlZDogZmFsc2UsXG4gICAgICB0b3RhbENvdW50OiBzZXF1ZW5jZXMuZmlsdGVyKChzZXEpID0+IHNlcS5kYXRlQWRkZWQpLmxlbmd0aCxcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZW5lcmF0ZUxlbmd0aFNlY3Rpb24oXG4gICAgc2VxdWVuY2VzOiBCcm93c2VTZXF1ZW5jZU1ldGFkYXRhW11cbiAgKTogUHJvbWlzZTxOYXZpZ2F0aW9uU2VjdGlvbj4ge1xuICAgIGNvbnN0IGxlbmd0aEdyb3VwcyA9IG5ldyBNYXA8bnVtYmVyLCBCcm93c2VTZXF1ZW5jZU1ldGFkYXRhW10+KCk7XG5cbiAgICBzZXF1ZW5jZXMuZm9yRWFjaCgoc2VxKSA9PiB7XG4gICAgICBjb25zdCBsZW5ndGggPSBzZXEuc2VxdWVuY2VMZW5ndGggfHwgc2VxLndvcmQubGVuZ3RoO1xuICAgICAgaWYgKCFsZW5ndGhHcm91cHMuaGFzKGxlbmd0aCkpIHtcbiAgICAgICAgbGVuZ3RoR3JvdXBzLnNldChsZW5ndGgsIFtdKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGdyb3VwID0gbGVuZ3RoR3JvdXBzLmdldChsZW5ndGgpO1xuICAgICAgaWYgKGdyb3VwKSB7XG4gICAgICAgIGdyb3VwLnB1c2goc2VxKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGNvbnN0IGl0ZW1zOiBOYXZpZ2F0aW9uSXRlbVtdID0gQXJyYXkuZnJvbShsZW5ndGhHcm91cHMuZW50cmllcygpKVxuICAgICAgLnNvcnQoKFthXSwgW2JdKSA9PiBhIC0gYilcbiAgICAgIC5tYXAoKFtsZW5ndGgsIHNlcXNdKSA9PiAoe1xuICAgICAgICBpZDogYGxlbmd0aC0ke2xlbmd0aH1gLFxuICAgICAgICBsYWJlbDogYCR7bGVuZ3RofSBiZWF0c2AsXG4gICAgICAgIHZhbHVlOiBsZW5ndGgsXG4gICAgICAgIGNvdW50OiBzZXFzLmxlbmd0aCxcbiAgICAgICAgaXNBY3RpdmU6IGZhbHNlLFxuICAgICAgICBzZXF1ZW5jZXM6IHNlcXMsXG4gICAgICB9KSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IFwibGVuZ3RoXCIsXG4gICAgICB0aXRsZTogXCLwn5OPIExlbmd0aFwiLFxuICAgICAgdHlwZTogXCJsZW5ndGhcIixcbiAgICAgIGl0ZW1zLFxuICAgICAgaXNFeHBhbmRlZDogZmFsc2UsXG4gICAgICB0b3RhbENvdW50OiBzZXF1ZW5jZXMubGVuZ3RoLFxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGdlbmVyYXRlTGV0dGVyU2VjdGlvbihcbiAgICBzZXF1ZW5jZXM6IEJyb3dzZVNlcXVlbmNlTWV0YWRhdGFbXVxuICApOiBQcm9taXNlPE5hdmlnYXRpb25TZWN0aW9uPiB7XG4gICAgY29uc3QgbGV0dGVyR3JvdXBzID0gbmV3IE1hcDxzdHJpbmcsIEJyb3dzZVNlcXVlbmNlTWV0YWRhdGFbXT4oKTtcblxuICAgIHNlcXVlbmNlcy5mb3JFYWNoKChzZXEpID0+IHtcbiAgICAgIGNvbnN0IGZpcnN0TGV0dGVyID0gc2VxLndvcmQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCk7XG4gICAgICBpZiAoIWxldHRlckdyb3Vwcy5oYXMoZmlyc3RMZXR0ZXIpKSB7XG4gICAgICAgIGxldHRlckdyb3Vwcy5zZXQoZmlyc3RMZXR0ZXIsIFtdKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGdyb3VwID0gbGV0dGVyR3JvdXBzLmdldChmaXJzdExldHRlcik7XG4gICAgICBpZiAoZ3JvdXApIHtcbiAgICAgICAgZ3JvdXAucHVzaChzZXEpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgY29uc3QgaXRlbXM6IE5hdmlnYXRpb25JdGVtW10gPSBBcnJheS5mcm9tKGxldHRlckdyb3Vwcy5lbnRyaWVzKCkpXG4gICAgICAuc29ydCgoW2FdLCBbYl0pID0+IGEubG9jYWxlQ29tcGFyZShiKSlcbiAgICAgIC5tYXAoKFtsZXR0ZXIsIHNlcXNdKSA9PiAoe1xuICAgICAgICBpZDogYGxldHRlci0ke2xldHRlcn1gLFxuICAgICAgICBsYWJlbDogbGV0dGVyLFxuICAgICAgICB2YWx1ZTogbGV0dGVyLFxuICAgICAgICBjb3VudDogc2Vxcy5sZW5ndGgsXG4gICAgICAgIGlzQWN0aXZlOiBmYWxzZSxcbiAgICAgICAgc2VxdWVuY2VzOiBzZXFzLFxuICAgICAgfSkpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBcImxldHRlclwiLFxuICAgICAgdGl0bGU6IFwi8J+UpCBTdGFydGluZyBMZXR0ZXJcIixcbiAgICAgIHR5cGU6IFwibGV0dGVyXCIsXG4gICAgICBpdGVtcyxcbiAgICAgIGlzRXhwYW5kZWQ6IHRydWUsIC8vIERlZmF1bHQgZXhwYW5kZWQgbGlrZSBkZXNrdG9wXG4gICAgICB0b3RhbENvdW50OiBzZXF1ZW5jZXMubGVuZ3RoLFxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGdlbmVyYXRlTGV2ZWxTZWN0aW9uKFxuICAgIHNlcXVlbmNlczogQnJvd3NlU2VxdWVuY2VNZXRhZGF0YVtdXG4gICk6IFByb21pc2U8TmF2aWdhdGlvblNlY3Rpb24+IHtcbiAgICBjb25zdCBsZXZlbEdyb3VwcyA9IG5ldyBNYXA8c3RyaW5nLCBCcm93c2VTZXF1ZW5jZU1ldGFkYXRhW10+KCk7XG5cbiAgICBzZXF1ZW5jZXMuZm9yRWFjaCgoc2VxKSA9PiB7XG4gICAgICBjb25zdCBsZXZlbCA9IHNlcS5kaWZmaWN1bHR5TGV2ZWwgfHwgXCJ1bmtub3duXCI7XG4gICAgICBpZiAoIWxldmVsR3JvdXBzLmhhcyhsZXZlbCkpIHtcbiAgICAgICAgbGV2ZWxHcm91cHMuc2V0KGxldmVsLCBbXSk7XG4gICAgICB9XG4gICAgICBjb25zdCBncm91cCA9IGxldmVsR3JvdXBzLmdldChsZXZlbCk7XG4gICAgICBpZiAoZ3JvdXApIHtcbiAgICAgICAgZ3JvdXAucHVzaChzZXEpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgY29uc3QgbGV2ZWxPcmRlciA9IFtcImJlZ2lubmVyXCIsIFwiaW50ZXJtZWRpYXRlXCIsIFwiYWR2YW5jZWRcIiwgXCJ1bmtub3duXCJdO1xuICAgIGNvbnN0IGl0ZW1zOiBOYXZpZ2F0aW9uSXRlbVtdID0gbGV2ZWxPcmRlclxuICAgICAgLmZpbHRlcigobGV2ZWwpID0+IGxldmVsR3JvdXBzLmhhcyhsZXZlbCkpXG4gICAgICAubWFwKChsZXZlbCkgPT4gKHtcbiAgICAgICAgaWQ6IGBsZXZlbC0ke2xldmVsfWAsXG4gICAgICAgIGxhYmVsOiBsZXZlbC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGxldmVsLnNsaWNlKDEpLFxuICAgICAgICB2YWx1ZTogbGV2ZWwsXG4gICAgICAgIGNvdW50OiBsZXZlbEdyb3Vwcy5nZXQobGV2ZWwpPy5sZW5ndGggfHwgMCxcbiAgICAgICAgaXNBY3RpdmU6IGZhbHNlLFxuICAgICAgICBzZXF1ZW5jZXM6IGxldmVsR3JvdXBzLmdldChsZXZlbCkgPz8gW10sXG4gICAgICB9KSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IFwibGV2ZWxcIixcbiAgICAgIHRpdGxlOiBcIvCfk4ogRGlmZmljdWx0eVwiLFxuICAgICAgdHlwZTogXCJsZXZlbFwiLFxuICAgICAgaXRlbXMsXG4gICAgICBpc0V4cGFuZGVkOiBmYWxzZSxcbiAgICAgIHRvdGFsQ291bnQ6IHNlcXVlbmNlcy5sZW5ndGgsXG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZ2VuZXJhdGVBdXRob3JTZWN0aW9uKFxuICAgIHNlcXVlbmNlczogQnJvd3NlU2VxdWVuY2VNZXRhZGF0YVtdXG4gICk6IFByb21pc2U8TmF2aWdhdGlvblNlY3Rpb24+IHtcbiAgICBjb25zdCBhdXRob3JHcm91cHMgPSBuZXcgTWFwPHN0cmluZywgQnJvd3NlU2VxdWVuY2VNZXRhZGF0YVtdPigpO1xuXG4gICAgc2VxdWVuY2VzLmZvckVhY2goKHNlcSkgPT4ge1xuICAgICAgY29uc3QgYXV0aG9yID0gc2VxLmF1dGhvciB8fCBcIlVua25vd25cIjtcbiAgICAgIGlmICghYXV0aG9yR3JvdXBzLmhhcyhhdXRob3IpKSB7XG4gICAgICAgIGF1dGhvckdyb3Vwcy5zZXQoYXV0aG9yLCBbXSk7XG4gICAgICB9XG4gICAgICBjb25zdCBncm91cCA9IGF1dGhvckdyb3Vwcy5nZXQoYXV0aG9yKTtcbiAgICAgIGlmIChncm91cCkge1xuICAgICAgICBncm91cC5wdXNoKHNlcSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBjb25zdCBpdGVtczogTmF2aWdhdGlvbkl0ZW1bXSA9IEFycmF5LmZyb20oYXV0aG9yR3JvdXBzLmVudHJpZXMoKSlcbiAgICAgIC5zb3J0KChbYV0sIFtiXSkgPT4gYS5sb2NhbGVDb21wYXJlKGIpKVxuICAgICAgLm1hcCgoW2F1dGhvciwgc2Vxc10pID0+ICh7XG4gICAgICAgIGlkOiBgYXV0aG9yLSR7YXV0aG9yfWAsXG4gICAgICAgIGxhYmVsOiBhdXRob3IsXG4gICAgICAgIHZhbHVlOiBhdXRob3IsXG4gICAgICAgIGNvdW50OiBzZXFzLmxlbmd0aCxcbiAgICAgICAgaXNBY3RpdmU6IGZhbHNlLFxuICAgICAgICBzZXF1ZW5jZXM6IHNlcXMsXG4gICAgICB9KSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IFwiYXV0aG9yXCIsXG4gICAgICB0aXRsZTogXCLwn5GkIEF1dGhvclwiLFxuICAgICAgdHlwZTogXCJhdXRob3JcIixcbiAgICAgIGl0ZW1zLFxuICAgICAgaXNFeHBhbmRlZDogZmFsc2UsXG4gICAgICB0b3RhbENvdW50OiBzZXF1ZW5jZXMubGVuZ3RoLFxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGNhbGN1bGF0ZVNlY3Rpb25Db3VudChcbiAgICBzZWN0aW9uOiBOYXZpZ2F0aW9uU2VjdGlvbixcbiAgICBzZXF1ZW5jZXM6IEJyb3dzZVNlcXVlbmNlTWV0YWRhdGFbXSxcbiAgICBmYXZvcml0ZXM6IHN0cmluZ1tdXG4gICk6IG51bWJlciB7XG4gICAgc3dpdGNoIChzZWN0aW9uLnR5cGUpIHtcbiAgICAgIGNhc2UgXCJmYXZvcml0ZXNcIjpcbiAgICAgICAgcmV0dXJuIHNlcXVlbmNlcy5maWx0ZXIoKHNlcSkgPT4gZmF2b3JpdGVzLmluY2x1ZGVzKHNlcS5pZCkpLmxlbmd0aDtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBzZXF1ZW5jZXMubGVuZ3RoO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZm9ybWF0RGF0ZUxhYmVsKGRhdGU6IERhdGUpOiBzdHJpbmcge1xuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgY29uc3QgZGlmZlRpbWUgPSBub3cuZ2V0VGltZSgpIC0gZGF0ZS5nZXRUaW1lKCk7XG4gICAgY29uc3QgZGlmZkRheXMgPSBNYXRoLmZsb29yKGRpZmZUaW1lIC8gKDEwMDAgKiA2MCAqIDYwICogMjQpKTtcblxuICAgIGlmIChkaWZmRGF5cyA9PT0gMCkgcmV0dXJuIFwiVG9kYXlcIjtcbiAgICBpZiAoZGlmZkRheXMgPT09IDEpIHJldHVybiBcIlllc3RlcmRheVwiO1xuICAgIGlmIChkaWZmRGF5cyA8IDcpIHJldHVybiBgJHtkaWZmRGF5c30gZGF5cyBhZ29gO1xuICAgIGlmIChkaWZmRGF5cyA8IDMwKSByZXR1cm4gYCR7TWF0aC5mbG9vcihkaWZmRGF5cyAvIDcpfSB3ZWVrcyBhZ29gO1xuXG4gICAgcmV0dXJuIGRhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCk7XG4gIH1cblxuICAvLyBBZGRpdGlvbmFsIG1ldGhvZHMgcmVxdWlyZWQgYnkgYnJvd3NlLWludGVyZmFjZXMudHNcbiAgYXN5bmMgYnVpbGROYXZpZ2F0aW9uU3RydWN0dXJlKFxuICAgIHNlcXVlbmNlczogQnJvd3NlU2VxdWVuY2VNZXRhZGF0YVtdXG4gICk6IFByb21pc2U8TmF2aWdhdGlvblNlY3Rpb25bXT4ge1xuICAgIC8vIFVzZSB0aGUgZXhpc3RpbmcgZ2VuZXJhdGVOYXZpZ2F0aW9uU2VjdGlvbnMgbWV0aG9kXG4gICAgcmV0dXJuIHRoaXMuZ2VuZXJhdGVOYXZpZ2F0aW9uU2VjdGlvbnMoc2VxdWVuY2VzLCBbXSk7XG4gIH1cblxuICBhc3luYyBnZXROYXZpZ2F0aW9uSXRlbShcbiAgICBfc2VjdGlvbklkOiBzdHJpbmcsXG4gICAgX2l0ZW1JZDogc3RyaW5nXG4gICk6IFByb21pc2U8TmF2aWdhdGlvbkl0ZW0gfCBudWxsPiB7XG4gICAgLy8gVGhpcyB3b3VsZCBuZWVkIHRvIGJlIGltcGxlbWVudGVkIGJhc2VkIG9uIHRoZSBjdXJyZW50IG5hdmlnYXRpb24gc3RhdGVcbiAgICAvLyBGb3Igbm93LCByZXR1cm4gbnVsbCBhcyBhIHBsYWNlaG9sZGVyXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cbiJdLAogICJtYXBwaW5ncyI6ICJBQWlFTyxhQUFNLGtCQUFnRDtBQUFBLEVBQzNELE1BQU0sMkJBQ0osV0FDQSxXQUM4QjtBQUM5QixVQUFNLFdBQWdDO0FBQUEsTUFDcEMsTUFBTSxLQUFLLHlCQUF5QixXQUFXLFNBQVM7QUFBQSxNQUN4RCxNQUFNLEtBQUssb0JBQW9CLFNBQVM7QUFBQSxNQUN4QyxNQUFNLEtBQUssc0JBQXNCLFNBQVM7QUFBQSxNQUMxQyxNQUFNLEtBQUssc0JBQXNCLFNBQVM7QUFBQSxNQUMxQyxNQUFNLEtBQUsscUJBQXFCLFNBQVM7QUFBQSxNQUN6QyxNQUFNLEtBQUssc0JBQXNCLFNBQVM7QUFBQSxJQUM1QztBQUVBLFdBQU87QUFBQSxFQUNUO0FBQUEsRUFFQSx1QkFDRSxXQUNBLFVBQ3FCO0FBQ3JCLFdBQU8sU0FBUyxJQUFJLENBQUMsYUFBYTtBQUFBLE1BQ2hDLEdBQUc7QUFBQSxNQUNILFlBQ0UsUUFBUSxPQUFPLFlBQVksQ0FBQyxRQUFRLGFBQWEsUUFBUTtBQUFBLElBQzdELEVBQUU7QUFBQSxFQUNKO0FBQUEsRUFFQSxjQUNFLFdBQ0EsUUFDQSxVQUNxQjtBQUNyQixXQUFPLFNBQVMsSUFBSSxDQUFDLGFBQWE7QUFBQSxNQUNoQyxHQUFHO0FBQUEsTUFDSCxPQUFPLFFBQVEsTUFBTSxJQUFJLENBQUMsVUFBVTtBQUFBLFFBQ2xDLEdBQUc7QUFBQSxRQUNILFVBQVUsUUFBUSxPQUFPLGFBQWEsS0FBSyxPQUFPO0FBQUEsTUFDcEQsRUFBRTtBQUFBLElBQ0osRUFBRTtBQUFBLEVBQ0o7QUFBQSxFQUVBLGtCQUFrQixVQUFvRDtBQUNwRSxXQUFPLFNBQVMsSUFBSSxDQUFDLGFBQWE7QUFBQSxNQUNoQyxHQUFHO0FBQUEsTUFDSCxPQUFPLFFBQVEsTUFBTSxJQUFJLENBQUMsVUFBVTtBQUFBLFFBQ2xDLEdBQUc7QUFBQSxRQUNILFVBQVU7QUFBQSxNQUNaLEVBQUU7QUFB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VCxjQUFNLEtBQUssR0FBRztBQUFBLE1BQ2hCO0FBQUEsSUFDRixDQUFDO0FBRUQsVUFBTSxRQUEwQixNQUFNLEtBQUssYUFBYSxRQUFRLENBQUMsRUFDOUQsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLEVBQUUsY0FBYyxDQUFDLENBQUMsRUFDckMsSUFBSSxDQUFDLENBQUMsUUFBUSxJQUFJLE9BQU87QUFBQSxNQUN4QixJQUFJLFVBQVUsTUFBTTtBQUFBLE1BQ3BCLE9BQU87QUFBQSxNQUNQLE9BQU87QUFBQSxNQUNQLE9BQU8sS0FBSztBQUFBLE1BQ1osVUFBVTtBQUFBLE1BQ1YsV0FBVztBQUFBLElBQ2IsRUFBRTtBQUVKLFdBQU87QUFBQSxNQUNMLElBQUk7QUFBQSxNQUNKLE9BQU87QUFBQSxNQUNQLE1BQU07QUFBQSxNQUNOO0FBQUEsTUFDQSxZQUFZO0FBQUEsTUFDWixZQUFZLFVBQVU7QUFBQSxJQUN4QjtBQUFBLEVBQ0Y7QUFBQSxFQUVRLHNCQUNOLFNBQ0EsV0FDQSxXQUNRO0FBQ1IsWUFBUSxRQUFRLE1BQU07QUFBQSxNQUNwQixLQUFLO0FBQ0gsZUFBTyxVQUFVLE9BQU8sQ0FBQyxRQUFRLFVBQVUsU0FBUyxJQUFJLEVBQUUsQ0FBQyxFQUFFO0FBQUEsTUFDL0Q7QUFDRSxlQUFPLFVBQVU7QUFBQSxJQUNyQjtBQUFBLEVBQ0Y7QUFBQSxFQUVRLGdCQUFnQixNQUFvQjtBQUMxQyxVQUFNLE1BQU0sb0JBQUksS0FBSztBQUNyQixVQUFNLFdBQVcsSUFBSSxRQUFRLElBQUksS0FBSyxRQUFRO0FBQzlDLFVBQU0sV0FBVyxLQUFLLE1BQU0sWUFBWSxNQUFPLEtBQUssS0FBSyxHQUFHO0FBRTVELFFBQUksYUFBYSxFQUFHLFFBQU87QUFDM0IsUUFBSSxhQUFhLEVBQUcsUUFBTztBQUMzQixRQUFJLFdBQVcsRUFBRyxRQUFPLEdBQUcsUUFBUTtBQUNwQyxRQUFJLFdBQVcsR0FBSSxRQUFPLEdBQUcsS0FBSyxNQUFNLFdBQVcsQ0FBQyxDQUFDO0FBRXJELFdBQU8sS0FBSyxtQkFBbUI7QUFBQSxFQUNqQztBQUFBO0FBQUEsRUFHQSxNQUFNLHlCQUNKLFdBQzhCO0FBRTlCLFdBQU8sS0FBSywyQkFBMkIsV0FBVyxDQUFDLENBQUM7QUFBQSxFQUN0RDtBQUFBLEVBRUEsTUFBTSxrQkFDSixZQUNBLFNBQ2dDO0FBR2hDLFdBQU87QUFBQSxFQUNUO0FBQ0Y7IiwKICAibmFtZXMiOiBbXQp9Cg==
