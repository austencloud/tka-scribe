export class DeviceDetectionService {
  capabilities = null;
  listeners = [];
  resizeObserver = null;
  constructor() {
    this.detectCapabilities();
    this.setupListeners();
  }
  getCapabilities() {
    if (!this.capabilities) {
      this.detectCapabilities();
    }
    if (!this.capabilities) {
      throw new Error("Failed to detect device capabilities");
    }
    return this.capabilities;
  }
  getResponsiveSettings() {
    const caps = this.getCapabilities();
    const minTouchTarget = caps.primaryInput === "touch" ? 48 : 32;
    const elementSpacing = caps.primaryInput === "touch" ? 16 : 8;
    const allowScrolling = caps.screenSize === "mobile" || caps.screenSize === "tablet";
    let layoutDensity = "comfortable";
    if (caps.screenSize === "mobile") {
      layoutDensity = "comfortable";
    } else if (caps.screenSize === "desktop" && caps.primaryInput === "mouse") {
      layoutDensity = "compact";
    } else {
      layoutDensity = "spacious";
    }
    const fontScaling = caps.screenSize === "mobile" ? 1.1 : 1;
    return {
      minTouchTarget,
      elementSpacing,
      allowScrolling,
      layoutDensity,
      fontScaling
    };
  }
  isTouchPrimary() {
    return this.getCapabilities().primaryInput === "touch";
  }
  shouldOptimizeForTouch() {
    const caps = this.getCapabilities();
    return caps.primaryInput === "touch" || caps.primaryInput === "hybrid";
  }
  getCurrentBreakpoint() {
    const { width } = this.getCapabilities().viewport;
    if (width < 768) return "mobile";
    if (width < 1024) return "tablet";
    if (width < 1440) return "desktop";
    return "large-desktop";
  }
  onCapabilitiesChanged(callback) {
    this.listeners.push(callback);
    return () => {
      const index = this.listeners.indexOf(callback);
      if (index > -1) {
        this.listeners.splice(index, 1);
      }
    };
  }
  detectCapabilities() {
    const viewport = {
      width: window.innerWidth,
      height: window.innerHeight
    };
    const hasTouch = this.detectTouch();
    const hasPrecisePointer = this.detectPrecisePointer();
    const hasKeyboard = this.detectKeyboard();
    const screenSize = this.determineScreenSize(viewport.width);
    const primaryInput = this.determinePrimaryInput(
      hasTouch,
      hasPrecisePointer,
      screenSize
    );
    this.capabilities = {
      primaryInput,
      screenSize,
      hasTouch,
      hasPrecisePointer,
      hasKeyboard,
      viewport,
      pixelRatio: window.devicePixelRatio || 1,
      colorDepth: screen.colorDepth || 24,
      supportsHDR: this.detectHDRSupport(),
      hardwareConcurrency: navigator.hardwareConcurrency || 4,
      memoryEstimate: this.estimateMemory(),
      connectionSpeed: this.detectConnectionSpeed()
    };
    this.updateCSSProperties();
  }
  detectTouch() {
    return "ontouchstart" in window || navigator.maxTouchPoints > 0 || // Legacy IE support
    (navigator.msMaxTouchPoints ?? 0) > 0;
  }
  detectPrecisePointer() {
    return window.matchMedia("(pointer: fine)").matches;
  }
  detectKeyboard() {
    return window.matchMedia("(pointer: fine)").matches;
  }
  determineScreenSize(width) {
    if (width < 768) return "mobile";
    if (width < 1024) return "tablet";
    return "desktop";
  }
  determinePrimaryInput(hasTouch, hasPrecisePointer, screenSize) {
    if (screenSize === "mobile") return "touch";
    if (screenSize === "desktop" && !hasTouch) return "mouse";
    if (screenSize === "desktop" && hasTouch && hasPrecisePointer)
      return "hybrid";
    if (screenSize === "tablet") {
      return hasPrecisePointer ? "hybrid" : "touch";
    }
    return hasTouch ? "touch" : "mouse";
  }
  updateCSSProperties() {
    if (!this.capabilities) return;
    const settings = this.getResponsiveSettings();
    document.documentElement.style.setProperty(
      "--min-touch-target",
      `${settings.minTouchTarget}px`
    );
    document.documentElement.style.setProperty(
      "--element-spacing",
      `${settings.elementSpacing}px`
    );
    document.documentElement.style.setProperty(
      "--font-scaling",
      settings.fontScaling.toString()
    );
    document.documentElement.setAttribute(
      "data-device-type",
      this.capabilities.primaryInput
    );
    document.documentElement.setAttribute(
      "data-screen-size",
      this.capabilities.screenSize
    );
    document.documentElement.setAttribute(
      "data-layout-density",
      settings.layoutDensity
    );
  }
  setupListeners() {
    const handleResize = () => {
      const oldCapabilities = this.capabilities;
      this.detectCapabilities();
      if (this.hasCapabilitiesChanged(oldCapabilities, this.capabilities)) {
        this.notifyListeners();
      }
    };
    const handleOrientationChange = () => {
      setTimeout(handleResize, 100);
    };
    window.addEventListener("resize", handleResize);
    window.addEventListener("orientationchange", handleOrientationChange);
    if ("ResizeObserver" in window) {
      this.resizeObserver = new ResizeObserver(handleResize);
      this.resizeObserver.observe(document.documentElement);
    }
    let hasDetectedMouse = false;
    const handleMouseMove = () => {
      if (!hasDetectedMouse) {
        hasDetectedMouse = true;
        const oldCapabilities = this.capabilities;
        this.detectCapabilities();
        if (this.hasCapabilitiesChanged(oldCapabilities, this.capabilities)) {
          this.notifyListeners();
        }
      }
    };
    window.addEventListener("mousemove", handleMouseMove, { once: true });
  }
  hasCapabilitiesChanged(old, current) {
    if (!old || !current) return true;
    return old.primaryInput !== current.primaryInput || old.screenSize !== current.screenSize || old.viewport.width !== current.viewport.width || old.viewport.height !== current.viewport.height;
  }
  notifyListeners() {
    if (this.capabilities) {
      const capabilities = this.capabilities;
      this.listeners.forEach((callback) => callback(capabilities));
    }
  }
  // Cleanup method for proper disposal
  dispose() {
    this.listeners = [];
    if (this.resizeObserver) {
      this.resizeObserver.disconnect();
      this.resizeObserver = null;
    }
  }
  detectHDRSupport() {
    if (typeof window !== "undefined" && window.matchMedia) {
      return window.matchMedia("(dynamic-range: high)").matches || window.matchMedia("(color-gamut: p3)").matches;
    }
    return false;
  }
  estimateMemory() {
    if ("deviceMemory" in navigator) {
      return navigator.deviceMemory * 1024;
    }
    const hardwareConcurrency = navigator.hardwareConcurrency || 4;
    if (hardwareConcurrency >= 8) return 8192;
    if (hardwareConcurrency >= 4) return 4096;
    return 2048;
  }
  detectConnectionSpeed() {
    if ("connection" in navigator) {
      const connection = navigator.connection;
      if (connection.effectiveType) {
        switch (connection.effectiveType) {
          case "slow-2g":
          case "2g":
            return "slow";
          case "3g":
            return "medium";
          case "4g":
          default:
            return "fast";
        }
      }
    }
    return void 0;
  }
}
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiQzovVEtBL3dlYi9zcmMvbGliL3NlcnZpY2VzL2ltcGxlbWVudGF0aW9ucy9hcHBsaWNhdGlvbi9EZXZpY2VEZXRlY3Rpb25TZXJ2aWNlLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyIvKipcbiAqIERldmljZSBEZXRlY3Rpb24gU2VydmljZSBJbXBsZW1lbnRhdGlvblxuICogVXNlcyBtb2Rlcm4gZGV0ZWN0aW9uIG1ldGhvZHMgYmFzZWQgb24gcmVzZWFyY2ggZnJvbSBXM0MsIE1hdGVyaWFsIERlc2lnbiwgYW5kIGlPUyBndWlkZWxpbmVzXG4gKi9cblxuaW1wb3J0IHR5cGUgeyBEZXZpY2VDYXBhYmlsaXRpZXMgfSBmcm9tIFwiLi4vLi4vaW50ZXJmYWNlcy9kb21haW4tdHlwZXNcIjtcbmltcG9ydCB0eXBlIHtcbiAgSURldmljZURldGVjdGlvblNlcnZpY2UsXG4gIFJlc3BvbnNpdmVTZXR0aW5ncyxcbn0gZnJvbSBcIi4uLy4uL2ludGVyZmFjZXMvZGV2aWNlLWludGVyZmFjZXNcIjtcblxuZXhwb3J0IGNsYXNzIERldmljZURldGVjdGlvblNlcnZpY2UgaW1wbGVtZW50cyBJRGV2aWNlRGV0ZWN0aW9uU2VydmljZSB7XG4gIHByaXZhdGUgY2FwYWJpbGl0aWVzOiBEZXZpY2VDYXBhYmlsaXRpZXMgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBsaXN0ZW5lcnM6IEFycmF5PChjYXBhYmlsaXRpZXM6IERldmljZUNhcGFiaWxpdGllcykgPT4gdm9pZD4gPSBbXTtcbiAgcHJpdmF0ZSByZXNpemVPYnNlcnZlcjogUmVzaXplT2JzZXJ2ZXIgfCBudWxsID0gbnVsbDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmRldGVjdENhcGFiaWxpdGllcygpO1xuICAgIHRoaXMuc2V0dXBMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIGdldENhcGFiaWxpdGllcygpOiBEZXZpY2VDYXBhYmlsaXRpZXMge1xuICAgIGlmICghdGhpcy5jYXBhYmlsaXRpZXMpIHtcbiAgICAgIHRoaXMuZGV0ZWN0Q2FwYWJpbGl0aWVzKCk7XG4gICAgfVxuICAgIGlmICghdGhpcy5jYXBhYmlsaXRpZXMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBkZXRlY3QgZGV2aWNlIGNhcGFiaWxpdGllc1wiKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuY2FwYWJpbGl0aWVzO1xuICB9XG5cbiAgZ2V0UmVzcG9uc2l2ZVNldHRpbmdzKCk6IFJlc3BvbnNpdmVTZXR0aW5ncyB7XG4gICAgY29uc3QgY2FwcyA9IHRoaXMuZ2V0Q2FwYWJpbGl0aWVzKCk7XG5cbiAgICAvLyBCYXNlZCBvbiByZXNlYXJjaDogbW9iaWxlIG5lZWRzIDQ0LTQ4cHgsIGRlc2t0b3AgY2FuIGJlIHNtYWxsZXJcbiAgICBjb25zdCBtaW5Ub3VjaFRhcmdldCA9IGNhcHMucHJpbWFyeUlucHV0ID09PSBcInRvdWNoXCIgPyA0OCA6IDMyO1xuICAgIGNvbnN0IGVsZW1lbnRTcGFjaW5nID0gY2Fwcy5wcmltYXJ5SW5wdXQgPT09IFwidG91Y2hcIiA/IDE2IDogODtcblxuICAgIC8vIE1vYmlsZSB1c2VycyBleHBlY3Qgc2Nyb2xsaW5nLCBkZXNrdG9wIHNob3VsZCBmaXQgd2hlbiBwb3NzaWJsZVxuICAgIGNvbnN0IGFsbG93U2Nyb2xsaW5nID1cbiAgICAgIGNhcHMuc2NyZWVuU2l6ZSA9PT0gXCJtb2JpbGVcIiB8fCBjYXBzLnNjcmVlblNpemUgPT09IFwidGFibGV0XCI7XG5cbiAgICAvLyBMYXlvdXQgZGVuc2l0eSBiYXNlZCBvbiBzY3JlZW4gcmVhbCBlc3RhdGUgYW5kIGlucHV0IG1ldGhvZFxuICAgIGxldCBsYXlvdXREZW5zaXR5OiBcImNvbXBhY3RcIiB8IFwiY29tZm9ydGFibGVcIiB8IFwic3BhY2lvdXNcIiA9IFwiY29tZm9ydGFibGVcIjtcbiAgICBpZiAoY2Fwcy5zY3JlZW5TaXplID09PSBcIm1vYmlsZVwiKSB7XG4gICAgICBsYXlvdXREZW5zaXR5ID0gXCJjb21mb3J0YWJsZVwiOyAvLyBNb2JpbGUgbmVlZHMgc3BhY2UgZm9yIHRvdWNoXG4gICAgfSBlbHNlIGlmIChjYXBzLnNjcmVlblNpemUgPT09IFwiZGVza3RvcFwiICYmIGNhcHMucHJpbWFyeUlucHV0ID09PSBcIm1vdXNlXCIpIHtcbiAgICAgIGxheW91dERlbnNpdHkgPSBcImNvbXBhY3RcIjsgLy8gRGVza3RvcCB3aXRoIG1vdXNlIGNhbiBiZSBkZW5zZXJcbiAgICB9IGVsc2Uge1xuICAgICAgbGF5b3V0RGVuc2l0eSA9IFwic3BhY2lvdXNcIjsgLy8gSHlicmlkIGRldmljZXMgZ2V0IHNwYWNpb3VzXG4gICAgfVxuXG4gICAgY29uc3QgZm9udFNjYWxpbmcgPSBjYXBzLnNjcmVlblNpemUgPT09IFwibW9iaWxlXCIgPyAxLjEgOiAxLjA7XG5cbiAgICByZXR1cm4ge1xuICAgICAgbWluVG91Y2hUYXJnZXQsXG4gICAgICBlbGVtZW50U3BhY2luZyxcbiAgICAgIGFsbG93U2Nyb2xsaW5nLFxuICAgICAgbGF5b3V0RGVuc2l0eSxcbiAgICAgIGZvbnRTY2FsaW5nLFxuICAgIH07XG4gIH1cblxuICBpc1RvdWNoUHJpbWFyeSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5nZXRDYXBhYmlsaXRpZXMoKS5wcmltYXJ5SW5wdXQgPT09IFwidG91Y2hcIjtcbiAgfVxuXG4gIHNob3VsZE9wdGltaXplRm9yVG91Y2goKTogYm9vbGVhbiB7XG4gICAgY29uc3QgY2FwcyA9IHRoaXMuZ2V0Q2FwYWJpbGl0aWVzKCk7XG4gICAgcmV0dXJuIGNhcHMucHJpbWFyeUlucHV0ID09PSBcInRvdWNoXCIgfHwgY2Fwcy5wcmltYXJ5SW5wdXQgPT09IFwiaHlicmlkXCI7XG4gIH1cblxuICBnZXRDdXJyZW50QnJlYWtwb2ludCgpOiBcIm1vYmlsZVwiIHwgXCJ0YWJsZXRcIiB8IFwiZGVza3RvcFwiIHwgXCJsYXJnZS1kZXNrdG9wXCIge1xuICAgIGNvbnN0IHsgd2lkdGggfSA9IHRoaXMuZ2V0Q2FwYWJpbGl0aWVzKCkudmlld3BvcnQ7XG5cbiAgICAvLyBTdGFuZGFyZCBicmVha3BvaW50cyBiYXNlZCBvbiByZXNlYXJjaFxuICAgIGlmICh3aWR0aCA8IDc2OCkgcmV0dXJuIFwibW9iaWxlXCI7XG4gICAgaWYgKHdpZHRoIDwgMTAyNCkgcmV0dXJuIFwidGFibGV0XCI7XG4gICAgaWYgKHdpZHRoIDwgMTQ0MCkgcmV0dXJuIFwiZGVza3RvcFwiO1xuICAgIHJldHVybiBcImxhcmdlLWRlc2t0b3BcIjtcbiAgfVxuXG4gIG9uQ2FwYWJpbGl0aWVzQ2hhbmdlZChcbiAgICBjYWxsYmFjazogKGNhcGFiaWxpdGllczogRGV2aWNlQ2FwYWJpbGl0aWVzKSA9PiB2b2lkXG4gICk6ICgpID0+IHZvaWQge1xuICAgIHRoaXMubGlzdGVuZXJzLnB1c2goY2FsbGJhY2spO1xuXG4gICAgLy8gUmV0dXJuIGNsZWFudXAgZnVuY3Rpb25cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmxpc3RlbmVycy5pbmRleE9mKGNhbGxiYWNrKTtcbiAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgIHRoaXMubGlzdGVuZXJzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgZGV0ZWN0Q2FwYWJpbGl0aWVzKCk6IHZvaWQge1xuICAgIGNvbnN0IHZpZXdwb3J0ID0ge1xuICAgICAgd2lkdGg6IHdpbmRvdy5pbm5lcldpZHRoLFxuICAgICAgaGVpZ2h0OiB3aW5kb3cuaW5uZXJIZWlnaHQsXG4gICAgfTtcblxuICAgIC8vIFRvdWNoIGRldGVjdGlvbiB1c2luZyBtdWx0aXBsZSBtZXRob2RzIGZvciByZWxpYWJpbGl0eVxuICAgIGNvbnN0IGhhc1RvdWNoID0gdGhpcy5kZXRlY3RUb3VjaCgpO1xuXG4gICAgLy8gUHJlY2lzZSBwb2ludGVyIGRldGVjdGlvbiAobW91c2UvdHJhY2twYWQpXG4gICAgY29uc3QgaGFzUHJlY2lzZVBvaW50ZXIgPSB0aGlzLmRldGVjdFByZWNpc2VQb2ludGVyKCk7XG5cbiAgICAvLyBLZXlib2FyZCBkZXRlY3Rpb24gKGJlc3QgZWZmb3J0KVxuICAgIGNvbnN0IGhhc0tleWJvYXJkID0gdGhpcy5kZXRlY3RLZXlib2FyZCgpO1xuXG4gICAgLy8gU2NyZWVuIHNpemUgY2F0ZWdvcnlcbiAgICBjb25zdCBzY3JlZW5TaXplID0gdGhpcy5kZXRlcm1pbmVTY3JlZW5TaXplKHZpZXdwb3J0LndpZHRoKTtcblxuICAgIC8vIFByaW1hcnkgaW5wdXQgbWV0aG9kIGRldGVybWluYXRpb25cbiAgICBjb25zdCBwcmltYXJ5SW5wdXQgPSB0aGlzLmRldGVybWluZVByaW1hcnlJbnB1dChcbiAgICAgIGhhc1RvdWNoLFxuICAgICAgaGFzUHJlY2lzZVBvaW50ZXIsXG4gICAgICBzY3JlZW5TaXplXG4gICAgKTtcblxuICAgIHRoaXMuY2FwYWJpbGl0aWVzID0ge1xuICAgICAgcHJpbWFyeUlucHV0LFxuICAgICAgc2NyZWVuU2l6ZSxcbiAgICAgIGhhc1RvdWNoLFxuICAgICAgaGFzUHJlY2lzZVBvaW50ZXIsXG4gICAgICBoYXNLZXlib2FyZCxcbiAgICAgIHZpZXdwb3J0LFxuICAgICAgcGl4ZWxSYXRpbzogd2luZG93LmRldmljZVBpeGVsUmF0aW8gfHwgMSxcbiAgICAgIGNvbG9yRGVwdGg6IHNjcmVlbi5jb2xvckRlcHRoIHx8IDI0LFxuICAgICAgc3VwcG9ydHNIRFI6IHRoaXMuZGV0ZWN0SERSU3VwcG9ydCgpLFxuICAgICAgaGFyZHdhcmVDb25jdXJyZW5jeTogbmF2aWdhdG9yLmhhcmR3YXJlQ29uY3VycmVuY3kgfHwgNCxcbiAgICAgIG1lbW9yeUVzdGltYXRlOiB0aGlzLmVzdGltYXRlTWVtb3J5KCksXG4gICAgICBjb25uZWN0aW9uU3BlZWQ6IHRoaXMuZGV0ZWN0Q29ubmVjdGlvblNwZWVkKCksXG4gICAgfTtcblxuICAgIC8vIFVwZGF0ZSBDU1MgY3VzdG9tIHByb3BlcnRpZXNcbiAgICB0aGlzLnVwZGF0ZUNTU1Byb3BlcnRpZXMoKTtcbiAgfVxuXG4gIHByaXZhdGUgZGV0ZWN0VG91Y2goKTogYm9vbGVhbiB7XG4gICAgLy8gTXVsdGktbWV0aG9kIGFwcHJvYWNoIGJhc2VkIG9uIHJlc2VhcmNoXG4gICAgcmV0dXJuIChcbiAgICAgIFwib250b3VjaHN0YXJ0XCIgaW4gd2luZG93IHx8XG4gICAgICBuYXZpZ2F0b3IubWF4VG91Y2hQb2ludHMgPiAwIHx8XG4gICAgICAvLyBMZWdhY3kgSUUgc3VwcG9ydFxuICAgICAgKChuYXZpZ2F0b3IgYXMgTmF2aWdhdG9yICYgeyBtc01heFRvdWNoUG9pbnRzPzogbnVtYmVyIH0pXG4gICAgICAgIC5tc01heFRvdWNoUG9pbnRzID8/IDApID4gMFxuICAgICk7XG4gIH1cblxuICBwcml2YXRlIGRldGVjdFByZWNpc2VQb2ludGVyKCk6IGJvb2xlYW4ge1xuICAgIC8vIFVzZSBDU1MgbWVkaWEgcXVlcnkgZm9yIHByZWNpc2UgcG9pbnRlciBkZXRlY3Rpb25cbiAgICByZXR1cm4gd2luZG93Lm1hdGNoTWVkaWEoXCIocG9pbnRlcjogZmluZSlcIikubWF0Y2hlcztcbiAgfVxuXG4gIHByaXZhdGUgZGV0ZWN0S2V5Ym9hcmQoKTogYm9vbGVhbiB7XG4gICAgLy8gVGhpcyBpcyBoYXJkIHRvIGRldGVjdCByZWxpYWJseSB3aXRob3V0IHVzZXIgaW50ZXJhY3Rpb25cbiAgICAvLyBGb3Igbm93LCBhc3N1bWUgZGVza3RvcC9sYXB0b3AgZGV2aWNlcyBoYXZlIGtleWJvYXJkc1xuICAgIC8vIENvdWxkIGJlIGVuaGFuY2VkIHdpdGggYWN0dWFsIGtleSBldmVudCBkZXRlY3Rpb25cbiAgICByZXR1cm4gd2luZG93Lm1hdGNoTWVkaWEoXCIocG9pbnRlcjogZmluZSlcIikubWF0Y2hlcztcbiAgfVxuXG4gIHByaXZhdGUgZGV0ZXJtaW5lU2NyZWVuU2l6ZSh3aWR0aDogbnVtYmVyKTogXCJtb2JpbGVcIiB8IFwidGFibGV0XCIgfCBcImRlc2t0b3BcIiB7XG4gICAgaWYgKHdpZHRoIDwgNzY4KSByZXR1cm4gXCJtb2JpbGVcIjtcbiAgICBpZiAod2lkdGggPCAxMDI0KSByZXR1cm4gXCJ0YWJsZXRcIjtcbiAgICByZXR1cm4gXCJkZXNrdG9wXCI7XG4gIH1cblxuICBwcml2YXRlIGRldGVybWluZVByaW1hcnlJbnB1dChcbiAgICBoYXNUb3VjaDogYm9vbGVhbixcbiAgICBoYXNQcmVjaXNlUG9pbnRlcjogYm9vbGVhbixcbiAgICBzY3JlZW5TaXplOiBcIm1vYmlsZVwiIHwgXCJ0YWJsZXRcIiB8IFwiZGVza3RvcFwiXG4gICk6IFwidG91Y2hcIiB8IFwibW91c2VcIiB8IFwiaHlicmlkXCIge1xuICAgIC8vIE1vYmlsZSBkZXZpY2VzIGFyZSBwcmltYXJpbHkgdG91Y2hcbiAgICBpZiAoc2NyZWVuU2l6ZSA9PT0gXCJtb2JpbGVcIikgcmV0dXJuIFwidG91Y2hcIjtcblxuICAgIC8vIERlc2t0b3Agd2l0aG91dCB0b3VjaCBpcyBtb3VzZVxuICAgIGlmIChzY3JlZW5TaXplID09PSBcImRlc2t0b3BcIiAmJiAhaGFzVG91Y2gpIHJldHVybiBcIm1vdXNlXCI7XG5cbiAgICAvLyBEZXNrdG9wIHdpdGggdG91Y2ggY2FwYWJpbGl0aWVzIChXaW5kb3dzIHRhYmxldHMsIHRvdWNoc2NyZWVuIGxhcHRvcHMpXG4gICAgaWYgKHNjcmVlblNpemUgPT09IFwiZGVza3RvcFwiICYmIGhhc1RvdWNoICYmIGhhc1ByZWNpc2VQb2ludGVyKVxuICAgICAgcmV0dXJuIFwiaHlicmlkXCI7XG5cbiAgICAvLyBUYWJsZXQgbG9naWNcbiAgICBpZiAoc2NyZWVuU2l6ZSA9PT0gXCJ0YWJsZXRcIikge1xuICAgICAgcmV0dXJuIGhhc1ByZWNpc2VQb2ludGVyID8gXCJoeWJyaWRcIiA6IFwidG91Y2hcIjtcbiAgICB9XG5cbiAgICAvLyBGYWxsYmFja1xuICAgIHJldHVybiBoYXNUb3VjaCA/IFwidG91Y2hcIiA6IFwibW91c2VcIjtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlQ1NTUHJvcGVydGllcygpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuY2FwYWJpbGl0aWVzKSByZXR1cm47XG5cbiAgICBjb25zdCBzZXR0aW5ncyA9IHRoaXMuZ2V0UmVzcG9uc2l2ZVNldHRpbmdzKCk7XG5cbiAgICAvLyBVcGRhdGUgQ1NTIGN1c3RvbSBwcm9wZXJ0aWVzIGZvciBnbG9iYWwgdXNlXG4gICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KFxuICAgICAgXCItLW1pbi10b3VjaC10YXJnZXRcIixcbiAgICAgIGAke3NldHRpbmdzLm1pblRvdWNoVGFyZ2V0fXB4YFxuICAgICk7XG4gICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KFxuICAgICAgXCItLWVsZW1lbnQtc3BhY2luZ1wiLFxuICAgICAgYCR7c2V0dGluZ3MuZWxlbWVudFNwYWNpbmd9cHhgXG4gICAgKTtcbiAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoXG4gICAgICBcIi0tZm9udC1zY2FsaW5nXCIsXG4gICAgICBzZXR0aW5ncy5mb250U2NhbGluZy50b1N0cmluZygpXG4gICAgKTtcblxuICAgIC8vIFNldCBkYXRhIGF0dHJpYnV0ZXMgZm9yIENTUyB0YXJnZXRpbmdcbiAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2V0QXR0cmlidXRlKFxuICAgICAgXCJkYXRhLWRldmljZS10eXBlXCIsXG4gICAgICB0aGlzLmNhcGFiaWxpdGllcy5wcmltYXJ5SW5wdXRcbiAgICApO1xuICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zZXRBdHRyaWJ1dGUoXG4gICAgICBcImRhdGEtc2NyZWVuLXNpemVcIixcbiAgICAgIHRoaXMuY2FwYWJpbGl0aWVzLnNjcmVlblNpemVcbiAgICApO1xuICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zZXRBdHRyaWJ1dGUoXG4gICAgICBcImRhdGEtbGF5b3V0LWRlbnNpdHlcIixcbiAgICAgIHNldHRpbmdzLmxheW91dERlbnNpdHlcbiAgICApO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXR1cExpc3RlbmVycygpOiB2b2lkIHtcbiAgICAvLyBMaXN0ZW4gZm9yIHZpZXdwb3J0IGNoYW5nZXNcbiAgICBjb25zdCBoYW5kbGVSZXNpemUgPSAoKSA9PiB7XG4gICAgICBjb25zdCBvbGRDYXBhYmlsaXRpZXMgPSB0aGlzLmNhcGFiaWxpdGllcztcbiAgICAgIHRoaXMuZGV0ZWN0Q2FwYWJpbGl0aWVzKCk7XG5cbiAgICAgIC8vIE9ubHkgbm90aWZ5IGlmIGNhcGFiaWxpdGllcyBhY3R1YWxseSBjaGFuZ2VkXG4gICAgICBpZiAodGhpcy5oYXNDYXBhYmlsaXRpZXNDaGFuZ2VkKG9sZENhcGFiaWxpdGllcywgdGhpcy5jYXBhYmlsaXRpZXMpKSB7XG4gICAgICAgIHRoaXMubm90aWZ5TGlzdGVuZXJzKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8vIExpc3RlbiBmb3Igb3JpZW50YXRpb24gY2hhbmdlcyBvbiBtb2JpbGVcbiAgICBjb25zdCBoYW5kbGVPcmllbnRhdGlvbkNoYW5nZSA9ICgpID0+IHtcbiAgICAgIC8vIFNtYWxsIGRlbGF5IHRvIGVuc3VyZSB2aWV3cG9ydCBpcyB1cGRhdGVkXG4gICAgICBzZXRUaW1lb3V0KGhhbmRsZVJlc2l6ZSwgMTAwKTtcbiAgICB9O1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgaGFuZGxlUmVzaXplKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm9yaWVudGF0aW9uY2hhbmdlXCIsIGhhbmRsZU9yaWVudGF0aW9uQ2hhbmdlKTtcblxuICAgIC8vIE1vZGVybiBSZXNpemVPYnNlcnZlciBmb3IgbW9yZSByZXNwb25zaXZlIHVwZGF0ZXNcbiAgICBpZiAoXCJSZXNpemVPYnNlcnZlclwiIGluIHdpbmRvdykge1xuICAgICAgdGhpcy5yZXNpemVPYnNlcnZlciA9IG5ldyBSZXNpemVPYnNlcnZlcihoYW5kbGVSZXNpemUpO1xuICAgICAgdGhpcy5yZXNpemVPYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCk7XG4gICAgfVxuXG4gICAgLy8gRGV0ZWN0IGlmIHVzZXIgc3dpdGNoZXMgZnJvbSB0b3VjaCB0byBtb3VzZSAob3IgdmljZSB2ZXJzYSlcbiAgICBsZXQgaGFzRGV0ZWN0ZWRNb3VzZSA9IGZhbHNlO1xuICAgIGNvbnN0IGhhbmRsZU1vdXNlTW92ZSA9ICgpID0+IHtcbiAgICAgIGlmICghaGFzRGV0ZWN0ZWRNb3VzZSkge1xuICAgICAgICBoYXNEZXRlY3RlZE1vdXNlID0gdHJ1ZTtcbiAgICAgICAgLy8gUmUtZXZhbHVhdGUgY2FwYWJpbGl0aWVzIGlmIHdlIGRldGVjdCBtb3VzZSBvbiBhIHRvdWNoIGRldmljZVxuICAgICAgICBjb25zdCBvbGRDYXBhYmlsaXRpZXMgPSB0aGlzLmNhcGFiaWxpdGllcztcbiAgICAgICAgdGhpcy5kZXRlY3RDYXBhYmlsaXRpZXMoKTtcbiAgICAgICAgaWYgKHRoaXMuaGFzQ2FwYWJpbGl0aWVzQ2hhbmdlZChvbGRDYXBhYmlsaXRpZXMsIHRoaXMuY2FwYWJpbGl0aWVzKSkge1xuICAgICAgICAgIHRoaXMubm90aWZ5TGlzdGVuZXJzKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgaGFuZGxlTW91c2VNb3ZlLCB7IG9uY2U6IHRydWUgfSk7XG4gIH1cblxuICBwcml2YXRlIGhhc0NhcGFiaWxpdGllc0NoYW5nZWQoXG4gICAgb2xkOiBEZXZpY2VDYXBhYmlsaXRpZXMgfCBudWxsLFxuICAgIGN1cnJlbnQ6IERldmljZUNhcGFiaWxpdGllcyB8IG51bGxcbiAgKTogYm9vbGVhbiB7XG4gICAgaWYgKCFvbGQgfHwgIWN1cnJlbnQpIHJldHVybiB0cnVlO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIG9sZC5wcmltYXJ5SW5wdXQgIT09IGN1cnJlbnQucHJpbWFyeUlucHV0IHx8XG4gICAgICBvbGQuc2NyZWVuU2l6ZSAhPT0gY3VycmVudC5zY3JlZW5TaXplIHx8XG4gICAgICBvbGQudmlld3BvcnQud2lkdGggIT09IGN1cnJlbnQudmlld3BvcnQud2lkdGggfHxcbiAgICAgIG9sZC52aWV3cG9ydC5oZWlnaHQgIT09IGN1cnJlbnQudmlld3BvcnQuaGVpZ2h0XG4gICAgKTtcbiAgfVxuXG4gIHByaXZhdGUgbm90aWZ5TGlzdGVuZXJzKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmNhcGFiaWxpdGllcykge1xuICAgICAgY29uc3QgY2FwYWJpbGl0aWVzID0gdGhpcy5jYXBhYmlsaXRpZXM7IC8vIENhcHR1cmUgZm9yIGNsb3N1cmVcbiAgICAgIHRoaXMubGlzdGVuZXJzLmZvckVhY2goKGNhbGxiYWNrKSA9PiBjYWxsYmFjayhjYXBhYmlsaXRpZXMpKTtcbiAgICB9XG4gIH1cblxuICAvLyBDbGVhbnVwIG1ldGhvZCBmb3IgcHJvcGVyIGRpc3Bvc2FsXG4gIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xuICAgIHRoaXMubGlzdGVuZXJzID0gW107XG4gICAgaWYgKHRoaXMucmVzaXplT2JzZXJ2ZXIpIHtcbiAgICAgIHRoaXMucmVzaXplT2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgICAgdGhpcy5yZXNpemVPYnNlcnZlciA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBkZXRlY3RIRFJTdXBwb3J0KCk6IGJvb2xlYW4ge1xuICAgIC8vIENoZWNrIGZvciBIRFIgc3VwcG9ydCB1c2luZyBtZWRpYSBxdWVyaWVzXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93Lm1hdGNoTWVkaWEpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIHdpbmRvdy5tYXRjaE1lZGlhKFwiKGR5bmFtaWMtcmFuZ2U6IGhpZ2gpXCIpLm1hdGNoZXMgfHxcbiAgICAgICAgd2luZG93Lm1hdGNoTWVkaWEoXCIoY29sb3ItZ2FtdXQ6IHAzKVwiKS5tYXRjaGVzXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBwcml2YXRlIGVzdGltYXRlTWVtb3J5KCk6IG51bWJlciB8IHVuZGVmaW5lZCB7XG4gICAgLy8gVXNlIG5hdmlnYXRvci5kZXZpY2VNZW1vcnkgaWYgYXZhaWxhYmxlIChDaHJvbWUpXG4gICAgaWYgKFwiZGV2aWNlTWVtb3J5XCIgaW4gbmF2aWdhdG9yKSB7XG4gICAgICByZXR1cm4gKG5hdmlnYXRvciBhcyB7IGRldmljZU1lbW9yeTogbnVtYmVyIH0pLmRldmljZU1lbW9yeSAqIDEwMjQ7IC8vIENvbnZlcnQgR0IgdG8gTUJcbiAgICB9XG5cbiAgICAvLyBGYWxsYmFjayBlc3RpbWF0aW9uIGJhc2VkIG9uIG90aGVyIGZhY3RvcnNcbiAgICBjb25zdCBoYXJkd2FyZUNvbmN1cnJlbmN5ID0gbmF2aWdhdG9yLmhhcmR3YXJlQ29uY3VycmVuY3kgfHwgNDtcbiAgICBpZiAoaGFyZHdhcmVDb25jdXJyZW5jeSA+PSA4KSByZXR1cm4gODE5MjsgLy8gOEdCXG4gICAgaWYgKGhhcmR3YXJlQ29uY3VycmVuY3kgPj0gNCkgcmV0dXJuIDQwOTY7IC8vIDRHQlxuICAgIHJldHVybiAyMDQ4OyAvLyAyR0IgZmFsbGJhY2tcbiAgfVxuXG4gIHByaXZhdGUgZGV0ZWN0Q29ubmVjdGlvblNwZWVkKCk6IFwic2xvd1wiIHwgXCJtZWRpdW1cIiB8IFwiZmFzdFwiIHwgdW5kZWZpbmVkIHtcbiAgICAvLyBVc2UgbmF2aWdhdG9yLmNvbm5lY3Rpb24gaWYgYXZhaWxhYmxlXG4gICAgaWYgKFwiY29ubmVjdGlvblwiIGluIG5hdmlnYXRvcikge1xuICAgICAgY29uc3QgY29ubmVjdGlvbiA9IChcbiAgICAgICAgbmF2aWdhdG9yIGFzIHsgY29ubmVjdGlvbjogeyBlZmZlY3RpdmVUeXBlPzogc3RyaW5nIH0gfVxuICAgICAgKS5jb25uZWN0aW9uO1xuICAgICAgaWYgKGNvbm5lY3Rpb24uZWZmZWN0aXZlVHlwZSkge1xuICAgICAgICBzd2l0Y2ggKGNvbm5lY3Rpb24uZWZmZWN0aXZlVHlwZSkge1xuICAgICAgICAgIGNhc2UgXCJzbG93LTJnXCI6XG4gICAgICAgICAgY2FzZSBcIjJnXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJzbG93XCI7XG4gICAgICAgICAgY2FzZSBcIjNnXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJtZWRpdW1cIjtcbiAgICAgICAgICBjYXNlIFwiNGdcIjpcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIFwiZmFzdFwiO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbn1cbiJdLAogICJtYXBwaW5ncyI6ICJBQVdPLGFBQU0sdUJBQTBEO0FBQUEsRUFDN0QsZUFBMEM7QUFBQSxFQUMxQyxZQUErRCxDQUFDO0FBQUEsRUFDaEUsaUJBQXdDO0FBQUEsRUFFaEQsY0FBYztBQUNaLFNBQUssbUJBQW1CO0FBQ3hCLFNBQUssZUFBZTtBQUFBLEVBQ3RCO0FBQUEsRUFFQSxrQkFBc0M7QUFDcEMsUUFBSSxDQUFDLEtBQUssY0FBYztBQUN0QixXQUFLLG1CQUFtQjtBQUFBLElBQzFCO0FBQ0EsUUFBSSxDQUFDLEtBQUssY0FBYztBQUN0QixZQUFNLElBQUksTUFBTSxzQ0FBc0M7QUFBQSxJQUN4RDtBQUNBLFdBQU8sS0FBSztBQUFBLEVBQ2Q7QUFBQSxFQUVBLHdCQUE0QztBQUMxQyxVQUFNLE9BQU8sS0FBSyxnQkFBZ0I7QUFHbEMsVUFBTSxpQkFBaUIsS0FBSyxpQkFBaUIsVUFBVSxLQUFLO0FBQzVELFVBQU0saUJBQWlCLEtBQUssaUJBQWlCLFVBQVUsS0FBSztBQUc1RCxVQUFNLGlCQUNKLEtBQUssZUFBZSxZQUFZLEtBQUssZUFBZTtBQUd0RCxRQUFJLGdCQUF3RDtBQUM1RCxRQUFJLEtBQUssZUFBZSxVQUFVO0FBQ2hDLHNCQUFnQjtBQUFBLElBQ2xCLFdBQVcsS0FBSyxlQUFlLGFB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
