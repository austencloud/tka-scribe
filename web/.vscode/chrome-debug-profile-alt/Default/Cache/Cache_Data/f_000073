import { getOptimizedConfig } from "/src/lib/components/backgrounds/config.ts";
import { NightSkyConfig } from "/src/lib/components/backgrounds/config/nightSky.ts";
import { drawBackgroundGradient } from "/src/lib/components/backgrounds/snowfall/utils/backgroundUtils.ts";
import { createShootingStarSystem } from "/src/lib/components/backgrounds/systems/ShootingStarSystem.ts";
import { ParallaxStarSystem } from "/src/lib/components/backgrounds/systems/nightSky/ParallaxStarSystem.ts";
import { NebulaSystem } from "/src/lib/components/backgrounds/systems/nightSky/NebulaSystem.ts";
import { ConstellationSystem } from "/src/lib/components/backgrounds/systems/nightSky/ConstellationSystem.ts";
import { CelestialBodySystem } from "/src/lib/components/backgrounds/systems/nightSky/CelestialBodySystem.ts";
import { SpaceshipSystem } from "/src/lib/components/backgrounds/systems/nightSky/SpaceshipSystem.ts";
import { CometSystem } from "/src/lib/components/backgrounds/systems/nightSky/CometSystem.ts";
export class NightSkyBackgroundSystem {
  // core state -------------------------------------------------------------
  quality = "medium";
  // Modular systems
  parallaxStarSystem;
  nebulaSystem;
  constellationSystem;
  celestialBodySystem;
  spaceshipSystem;
  cometSystem;
  shootingStarSystem = createShootingStarSystem();
  shootingStarState;
  // config handles ---------------------------------------------------------
  cfg = getOptimizedConfig(this.quality).config.nightSky;
  Q = getOptimizedConfig(this.quality).qualitySettings;
  a11y = {
    reducedMotion: false,
    highContrast: false,
    visibleParticleSize: 2
  };
  constructor() {
    this.shootingStarState = this.shootingStarSystem.initialState;
    this.parallaxStarSystem = new ParallaxStarSystem(
      this.cfg.parallax,
      this.cfg.stars,
      this.Q
    );
    this.nebulaSystem = new NebulaSystem(this.cfg.nebula);
    this.constellationSystem = new ConstellationSystem(this.cfg.constellations);
    this.celestialBodySystem = new CelestialBodySystem(
      this.cfg.celestialBody,
      this.cfg.background?.gradientStops || [
        { position: 0, color: "#0A0E2C" },
        { position: 1, color: "#4A5490" }
      ]
    );
    this.spaceshipSystem = new SpaceshipSystem(this.cfg.spaceship);
    this.cometSystem = new CometSystem(this.cfg.comet, this.cfg.stars);
  }
  // ------------------------------------------------------------------------
  /* INITIALISE */
  initialize(dim, q) {
    this.setQuality(q);
    this.parallaxStarSystem.initialize(dim, this.a11y);
    this.nebulaSystem.initialize(dim, this.quality);
    this.celestialBodySystem.initialize(dim, this.quality, this.a11y);
  }
  /* UPDATE */
  update(dim) {
    this.parallaxStarSystem.update(dim, this.a11y);
    this.nebulaSystem.update(this.a11y);
    this.constellationSystem.update(
      this.parallaxStarSystem.getNearStars(),
      this.quality,
      this.a11y
    );
    this.celestialBodySystem.update(dim, this.a11y);
    if (this.Q.enableShootingStars)
      this.shootingStarState = this.shootingStarSystem.update(
        this.shootingStarState,
        dim
      );
    this.spaceshipSystem.update(dim, this.a11y, this.quality);
    this.cometSystem.update(dim, this.a11y, this.quality);
  }
  /* DRAW */
  draw(ctx, dim) {
    const gradientStops = this.cfg.background?.gradientStops || [
      { position: 0, color: "#0A0E2C" },
      { position: 1, color: "#4A5490" }
    ];
    drawBackgroundGradient(ctx, dim, gradientStops);
    this.nebulaSystem.draw(ctx, this.a11y);
    this.parallaxStarSystem.draw(ctx, this.a11y);
    this.constellationSystem.draw(ctx, this.a11y);
    this.celestialBodySystem.draw(ctx, this.a11y);
    if (this.Q.enableShootingStars)
      this.shootingStarSystem.draw(this.shootingStarState, ctx);
    this.spaceshipSystem.draw(ctx, this.a11y);
    this.cometSystem.draw(ctx, this.a11y);
  }
  /* QUALITY / A11Y */
  setQuality(q) {
    if (this.quality === q) return;
    this.quality = q;
    const optimized = getOptimizedConfig(q);
    this.cfg = optimized.config.nightSky;
    this.Q = optimized.qualitySettings;
    this.parallaxStarSystem = new ParallaxStarSystem(
      this.cfg.parallax,
      this.cfg.stars,
      this.Q
    );
    this.nebulaSystem = new NebulaSystem(this.cfg.nebula);
    this.constellationSystem = new ConstellationSystem(this.cfg.constellations);
    this.celestialBodySystem = new CelestialBodySystem(
      this.cfg.celestialBody,
      this.cfg.background?.gradientStops || [
        { position: 0, color: "#0A0E2C" },
        { position: 1, color: "#4A5490" }
      ]
    );
    this.spaceshipSystem = new SpaceshipSystem(this.cfg.spaceship);
    this.cometSystem = new CometSystem(this.cfg.comet, this.cfg.stars);
  }
  setAccessibility(s) {
    this.a11y = s;
  }
  /* CLEANUP */
  cleanup() {
    this.parallaxStarSystem.cleanup();
    this.nebulaSystem.cleanup();
    this.constellationSystem.cleanup();
    this.celestialBodySystem.cleanup();
    this.spaceshipSystem.cleanup();
    this.cometSystem.cleanup();
  }
}
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiQzovVEtBL3dlYi9zcmMvbGliL2NvbXBvbmVudHMvYmFja2dyb3VuZHMvbmlnaHRTa3kvTmlnaHRTa3lCYWNrZ3JvdW5kU3lzdGVtLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyIvLyBzcmMvbGliL2NvbXBvbmVudHMvYmFja2dyb3VuZHMvbmlnaHRTa3kvTmlnaHRTa3lCYWNrZ3JvdW5kU3lzdGVtLnRzXG5pbXBvcnQgeyBnZXRPcHRpbWl6ZWRDb25maWcgfSBmcm9tIFwiLi4vY29uZmlnXCI7XG5pbXBvcnQgeyBOaWdodFNreUNvbmZpZyB9IGZyb20gXCIuLi9jb25maWcvbmlnaHRTa3kuanNcIjtcbmltcG9ydCB7IGRyYXdCYWNrZ3JvdW5kR3JhZGllbnQgfSBmcm9tIFwiLi4vc25vd2ZhbGwvdXRpbHMvYmFja2dyb3VuZFV0aWxzXCI7XG5pbXBvcnQgeyBjcmVhdGVTaG9vdGluZ1N0YXJTeXN0ZW0gfSBmcm9tIFwiLi4vc3lzdGVtcy9TaG9vdGluZ1N0YXJTeXN0ZW1cIjtcblxuLy8gSW1wb3J0IG91ciBuZXcgbW9kdWxhciBzeXN0ZW1zXG5pbXBvcnQgeyBQYXJhbGxheFN0YXJTeXN0ZW0gfSBmcm9tIFwiLi4vc3lzdGVtcy9uaWdodFNreS9QYXJhbGxheFN0YXJTeXN0ZW1cIjtcbmltcG9ydCB7IE5lYnVsYVN5c3RlbSB9IGZyb20gXCIuLi9zeXN0ZW1zL25pZ2h0U2t5L05lYnVsYVN5c3RlbVwiO1xuaW1wb3J0IHsgQ29uc3RlbGxhdGlvblN5c3RlbSB9IGZyb20gXCIuLi9zeXN0ZW1zL25pZ2h0U2t5L0NvbnN0ZWxsYXRpb25TeXN0ZW1cIjtcbmltcG9ydCB7IENlbGVzdGlhbEJvZHlTeXN0ZW0gfSBmcm9tIFwiLi4vc3lzdGVtcy9uaWdodFNreS9DZWxlc3RpYWxCb2R5U3lzdGVtXCI7XG5pbXBvcnQgeyBTcGFjZXNoaXBTeXN0ZW0gfSBmcm9tIFwiLi4vc3lzdGVtcy9uaWdodFNreS9TcGFjZXNoaXBTeXN0ZW1cIjtcbmltcG9ydCB7IENvbWV0U3lzdGVtIH0gZnJvbSBcIi4uL3N5c3RlbXMvbmlnaHRTa3kvQ29tZXRTeXN0ZW1cIjtcblxuaW1wb3J0IHR5cGUge1xuICBBY2Nlc3NpYmlsaXR5U2V0dGluZ3MsXG4gIEJhY2tncm91bmRTeXN0ZW0sXG4gIERpbWVuc2lvbnMsXG4gIFF1YWxpdHlMZXZlbCxcbiAgU2hvb3RpbmdTdGFyU3RhdGUsXG59IGZyb20gXCIuLi90eXBlcy90eXBlc1wiO1xuXG5leHBvcnQgY2xhc3MgTmlnaHRTa3lCYWNrZ3JvdW5kU3lzdGVtIGltcGxlbWVudHMgQmFja2dyb3VuZFN5c3RlbSB7XG4gIC8vIGNvcmUgc3RhdGUgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBwcml2YXRlIHF1YWxpdHk6IFF1YWxpdHlMZXZlbCA9IFwibWVkaXVtXCI7XG5cbiAgLy8gTW9kdWxhciBzeXN0ZW1zXG4gIHByaXZhdGUgcGFyYWxsYXhTdGFyU3lzdGVtOiBQYXJhbGxheFN0YXJTeXN0ZW07XG4gIHByaXZhdGUgbmVidWxhU3lzdGVtOiBOZWJ1bGFTeXN0ZW07XG4gIHByaXZhdGUgY29uc3RlbGxhdGlvblN5c3RlbTogQ29uc3RlbGxhdGlvblN5c3RlbTtcbiAgcHJpdmF0ZSBjZWxlc3RpYWxCb2R5U3lzdGVtOiBDZWxlc3RpYWxCb2R5U3lzdGVtO1xuICBwcml2YXRlIHNwYWNlc2hpcFN5c3RlbTogU3BhY2VzaGlwU3lzdGVtO1xuICBwcml2YXRlIGNvbWV0U3lzdGVtOiBDb21ldFN5c3RlbTtcbiAgcHJpdmF0ZSBzaG9vdGluZ1N0YXJTeXN0ZW0gPSBjcmVhdGVTaG9vdGluZ1N0YXJTeXN0ZW0oKTtcbiAgcHJpdmF0ZSBzaG9vdGluZ1N0YXJTdGF0ZTogU2hvb3RpbmdTdGFyU3RhdGU7XG5cbiAgLy8gY29uZmlnIGhhbmRsZXMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIHByaXZhdGUgY2ZnOiB0eXBlb2YgTmlnaHRTa3lDb25maWcgPSBnZXRPcHRpbWl6ZWRDb25maWcodGhpcy5xdWFsaXR5KS5jb25maWdcbiAgICAubmlnaHRTa3kgYXMgdHlwZW9mIE5pZ2h0U2t5Q29uZmlnO1xuICBwcml2YXRlIFEgPSBnZXRPcHRpbWl6ZWRDb25maWcodGhpcy5xdWFsaXR5KS5xdWFsaXR5U2V0dGluZ3M7XG4gIHByaXZhdGUgYTExeTogQWNjZXNzaWJpbGl0eVNldHRpbmdzID0ge1xuICAgIHJlZHVjZWRNb3Rpb246IGZhbHNlLFxuICAgIGhpZ2hDb250cmFzdDogZmFsc2UsXG4gICAgdmlzaWJsZVBhcnRpY2xlU2l6ZTogMixcbiAgfTtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnNob290aW5nU3RhclN0YXRlID0gdGhpcy5zaG9vdGluZ1N0YXJTeXN0ZW0uaW5pdGlhbFN0YXRlO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSBhbGwgbW9kdWxhciBzeXN0ZW1zXG4gICAgdGhpcy5wYXJhbGxheFN0YXJTeXN0ZW0gPSBuZXcgUGFyYWxsYXhTdGFyU3lzdGVtKFxuICAgICAgdGhpcy5jZmcucGFyYWxsYXgsXG4gICAgICB0aGlzLmNmZy5zdGFycyxcbiAgICAgIHRoaXMuUVxuICAgICk7XG5cbiAgICB0aGlzLm5lYnVsYVN5c3RlbSA9IG5ldyBOZWJ1bGFTeXN0ZW0odGhpcy5jZmcubmVidWxhKTtcblxuICAgIHRoaXMuY29uc3RlbGxhdGlvblN5c3RlbSA9IG5ldyBDb25zdGVsbGF0aW9uU3lzdGVtKHRoaXMuY2ZnLmNvbnN0ZWxsYXRpb25zKTtcblxuICAgIHRoaXMuY2VsZXN0aWFsQm9keVN5c3RlbSA9IG5ldyBDZWxlc3RpYWxCb2R5U3lzdGVtKFxuICAgICAgdGhpcy5jZmcuY2VsZXN0aWFsQm9keSxcbiAgICAgIHRoaXMuY2ZnLmJhY2tncm91bmQ/LmdyYWRpZW50U3RvcHMgfHwgW1xuICAgICAgICB7IHBvc2l0aW9uOiAwLCBjb2xvcjogXCIjMEEwRTJDXCIgfSxcbiAgICAgICAgeyBwb3NpdGlvbjogMSwgY29sb3I6IFwiIzRBNTQ5MFwiIH0sXG4gICAgICBdXG4gICAgKTtcblxuICAgIHRoaXMuc3BhY2VzaGlwU3lzdGVtID0gbmV3IFNwYWNlc2hpcFN5c3RlbSh0aGlzLmNmZy5zcGFjZXNoaXApO1xuXG4gICAgdGhpcy5jb21ldFN5c3RlbSA9IG5ldyBDb21ldFN5c3RlbSh0aGlzLmNmZy5jb21ldCwgdGhpcy5jZmcuc3RhcnMpO1xuICB9XG5cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8qIElOSVRJQUxJU0UgKi9cbiAgcHVibGljIGluaXRpYWxpemUoZGltOiBEaW1lbnNpb25zLCBxOiBRdWFsaXR5TGV2ZWwpIHtcbiAgICB0aGlzLnNldFF1YWxpdHkocSk7IC8vIFNldHMgdGhpcy5jZmcgYW5kIHRoaXMuUVxuXG4gICAgLy8gSW5pdGlhbGl6ZSBhbGwgbW9kdWxhciBzeXN0ZW1zXG4gICAgdGhpcy5wYXJhbGxheFN0YXJTeXN0ZW0uaW5pdGlhbGl6ZShkaW0sIHRoaXMuYTExeSk7XG4gICAgdGhpcy5uZWJ1bGFTeXN0ZW0uaW5pdGlhbGl6ZShkaW0sIHRoaXMucXVhbGl0eSk7XG4gICAgdGhpcy5jZWxlc3RpYWxCb2R5U3lzdGVtLmluaXRpYWxpemUoZGltLCB0aGlzLnF1YWxpdHksIHRoaXMuYTExeSk7XG4gIH1cblxuICAvKiBVUERBVEUgKi9cbiAgcHVibGljIHVwZGF0ZShkaW06IERpbWVuc2lvbnMpIHtcbiAgICB0aGlzLnBhcmFsbGF4U3RhclN5c3RlbS51cGRhdGUoZGltLCB0aGlzLmExMXkpO1xuICAgIHRoaXMubmVidWxhU3lzdGVtLnVwZGF0ZSh0aGlzLmExMXkpO1xuICAgIHRoaXMuY29uc3RlbGxhdGlvblN5c3RlbS51cGRhdGUoXG4gICAgICB0aGlzLnBhcmFsbGF4U3RhclN5c3RlbS5nZXROZWFyU3RhcnMoKSxcbiAgICAgIHRoaXMucXVhbGl0eSxcbiAgICAgIHRoaXMuYTExeVxuICAgICk7XG4gICAgdGhpcy5jZWxlc3RpYWxCb2R5U3lzdGVtLnVwZGF0ZShkaW0sIHRoaXMuYTExeSk7XG5cbiAgICBpZiAodGhpcy5RLmVuYWJsZVNob290aW5nU3RhcnMpXG4gICAgICB0aGlzLnNob290aW5nU3RhclN0YXRlID0gdGhpcy5zaG9vdGluZ1N0YXJTeXN0ZW0udXBkYXRlKFxuICAgICAgICB0aGlzLnNob290aW5nU3RhclN0YXRlLFxuICAgICAgICBkaW1cbiAgICAgICk7XG5cbiAgICB0aGlzLnNwYWNlc2hpcFN5c3RlbS51cGRhdGUoZGltLCB0aGlzLmExMXksIHRoaXMucXVhbGl0eSk7XG4gICAgdGhpcy5jb21ldFN5c3RlbS51cGRhdGUoZGltLCB0aGlzLmExMXksIHRoaXMucXVhbGl0eSk7XG4gIH1cblxuICAvKiBEUkFXICovXG4gIHB1YmxpYyBkcmF3KGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBkaW06IERpbWVuc2lvbnMpIHtcbiAgICBjb25zdCBncmFkaWVudFN0b3BzID0gdGhpcy5jZmcuYmFja2dyb3VuZD8uZ3JhZGllbnRTdG9wcyB8fCBbXG4gICAgICB7IHBvc2l0aW9uOiAwLCBjb2xvcjogXCIjMEEwRTJDXCIgfSxcbiAgICAgIHsgcG9zaXRpb246IDEsIGNvbG9yOiBcIiM0QTU0OTBcIiB9LFxuICAgIF07XG4gICAgZHJhd0JhY2tncm91bmRHcmFkaWVudChjdHgsIGRpbSwgZ3JhZGllbnRTdG9wcyk7XG5cbiAgICB0aGlzLm5lYnVsYVN5c3RlbS5kcmF3KGN0eCwgdGhpcy5hMTF5KTtcbiAgICB0aGlzLnBhcmFsbGF4U3RhclN5c3RlbS5kcmF3KGN0eCwgdGhpcy5hMTF5KTtcbiAgICB0aGlzLmNvbnN0ZWxsYXRpb25TeXN0ZW0uZHJhdyhjdHgsIHRoaXMuYTExeSk7XG4gICAgdGhpcy5jZWxlc3RpYWxCb2R5U3lzdGVtLmRyYXcoY3R4LCB0aGlzLmExMXkpO1xuXG4gICAgaWYgKHRoaXMuUS5lbmFibGVTaG9vdGluZ1N0YXJzKVxuICAgICAgdGhpcy5zaG9vdGluZ1N0YXJTeXN0ZW0uZHJhdyh0aGlzLnNob290aW5nU3RhclN0YXRlLCBjdHgpO1xuXG4gICAgdGhpcy5zcGFjZXNoaXBTeXN0ZW0uZHJhdyhjdHgsIHRoaXMuYTExeSk7XG4gICAgdGhpcy5jb21ldFN5c3RlbS5kcmF3KGN0eCwgdGhpcy5hMTF5KTtcbiAgfVxuXG4gIC8qIFFVQUxJVFkgLyBBMTFZICovXG4gIHB1YmxpYyBzZXRRdWFsaXR5KHE6IFF1YWxpdHlMZXZlbCkge1xuICAgIGlmICh0aGlzLnF1YWxpdHkgPT09IHEpIHJldHVybjtcbiAgICB0aGlzLnF1YWxpdHkgPSBxO1xuICAgIC8vIFJlLWZldGNoIG9wdGltaXplZCBjb25maWcgd2hlbiBxdWFsaXR5IGNoYW5nZXNcbiAgICBjb25zdCBvcHRpbWl6ZWQgPSBnZXRPcHRpbWl6ZWRDb25maWcocSk7XG4gICAgdGhpcy5jZmcgPSBvcHRpbWl6ZWQuY29uZmlnLm5pZ2h0U2t5IGFzIHR5cGVvZiBOaWdodFNreUNvbmZpZztcbiAgICB0aGlzLlEgPSBvcHRpbWl6ZWQucXVhbGl0eVNldHRpbmdzO1xuXG4gICAgLy8gVXBkYXRlIGFsbCBzeXN0ZW1zIHdpdGggbmV3IGNvbmZpZ1xuICAgIHRoaXMucGFyYWxsYXhTdGFyU3lzdGVtID0gbmV3IFBhcmFsbGF4U3RhclN5c3RlbShcbiAgICAgIHRoaXMuY2ZnLnBhcmFsbGF4LFxuICAgICAgdGhpcy5jZmcuc3RhcnMsXG4gICAgICB0aGlzLlFcbiAgICApO1xuICAgIHRoaXMubmVidWxhU3lzdGVtID0gbmV3IE5lYnVsYVN5c3RlbSh0aGlzLmNmZy5uZWJ1bGEpO1xuICAgIHRoaXMuY29uc3RlbGxhdGlvblN5c3RlbSA9IG5ldyBDb25zdGVsbGF0aW9uU3lzdGVtKHRoaXMuY2ZnLmNvbnN0ZWxsYXRpb25zKTtcbiAgICB0aGlzLmNlbGVzdGlhbEJvZHlTeXN0ZW0gPSBuZXcgQ2VsZXN0aWFsQm9keVN5c3RlbShcbiAgICAgIHRoaXMuY2ZnLmNlbGVzdGlhbEJvZHksXG4gICAgICB0aGlzLmNmZy5iYWNrZ3JvdW5kPy5ncmFkaWVudFN0b3BzIHx8IFtcbiAgICAgICAgeyBwb3NpdGlvbjogMCwgY29sb3I6IFwiIzBBMEUyQ1wiIH0sXG4gICAgICAgIHsgcG9zaXRpb246IDEsIGNvbG9yOiBcIiM0QTU0OTBcIiB9LFxuICAgICAgXVxuICAgICk7XG4gICAgdGhpcy5zcGFjZXNoaXBTeXN0ZW0gPSBuZXcgU3BhY2VzaGlwU3lzdGVtKHRoaXMuY2ZnLnNwYWNlc2hpcCk7XG4gICAgdGhpcy5jb21ldFN5c3RlbSA9IG5ldyBDb21ldFN5c3RlbSh0aGlzLmNmZy5jb21ldCwgdGhpcy5jZmcuc3RhcnMpO1xuICB9XG5cbiAgcHVibGljIHNldEFjY2Vzc2liaWxpdHkoczogQWNjZXNzaWJpbGl0eVNldHRpbmdzKSB7XG4gICAgdGhpcy5hMTF5ID0gcztcbiAgICAvLyBBY2Nlc3NpYmlsaXR5IHNldHRpbmdzIGFyZSBwYXNzZWQgdG8gc3lzdGVtcyBkdXJpbmcgdXBkYXRlL2RyYXcgY2FsbHNcbiAgfVxuXG4gIC8qIENMRUFOVVAgKi9cbiAgcHVibGljIGNsZWFudXAoKSB7XG4gICAgdGhpcy5wYXJhbGxheFN0YXJTeXN0ZW0uY2xlYW51cCgpO1xuICAgIHRoaXMubmVidWxhU3lzdGVtLmNsZWFudXAoKTtcbiAgICB0aGlzLmNvbnN0ZWxsYXRpb25TeXN0ZW0uY2xlYW51cCgpO1xuICAgIHRoaXMuY2VsZXN0aWFsQm9keVN5c3RlbS5jbGVhbnVwKCk7XG4gICAgdGhpcy5zcGFjZXNoaXBTeXN0ZW0uY2xlYW51cCgpO1xuICAgIHRoaXMuY29tZXRTeXN0ZW0uY2xlYW51cCgpO1xuICB9XG59XG4iXSwKICAibWFwcGluZ3MiOiAiQUFDQSxTQUFTLDBCQUEwQjtBQUNuQyxTQUFTLHNCQUFzQjtBQUMvQixTQUFTLDhCQUE4QjtBQUN2QyxTQUFTLGdDQUFnQztBQUd6QyxTQUFTLDBCQUEwQjtBQUNuQyxTQUFTLG9CQUFvQjtBQUM3QixTQUFTLDJCQUEy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
