import { Location } from "/src/lib/domain/index.ts";
import { ArrowQuadrantCalculator } from "/src/lib/services/positioning/arrows/orchestration/ArrowQuadrantCalculator.ts";
export class DirectionalTupleCalculator {
  /**
   * Calculator for directional tuples used in arrow positioning.
   */
  calculateDirectionalTuple(_motion, _location) {
    return [0, 0];
  }
  generateDirectionalTuples(motion, baseX, baseY) {
    const mt = String(motion.motionType).toLowerCase();
    const rot = String(motion.rotationDirection).toLowerCase();
    const NE = Location.NORTHEAST;
    const SE = Location.SOUTHEAST;
    const SW = Location.SOUTHWEST;
    const NW = Location.NORTHWEST;
    const N = Location.NORTH;
    const E = Location.EAST;
    const S = Location.SOUTH;
    const W = Location.WEST;
    const cardinalSet = /* @__PURE__ */ new Set([N, E, S, W]);
    const gridIsDiamond = cardinalSet.has(motion.startLocation) || cardinalSet.has(motion.endLocation);
    const isCW = rot === "clockwise" || rot === "cw";
    const isCCW = rot === "counter_clockwise" || rot === "ccw";
    const isNoRot = rot === "noRotation";
    const tuple = (a, b) => [a, b];
    const shiftDiamond = () => {
      if (mt === "float") {
        const order = [NE, SE, SW, NW];
        const idxStart = order.indexOf(motion.startLocation);
        const idxEnd = order.indexOf(motion.endLocation);
        const cwStep = (idxStart + 1) % 4 === idxEnd;
        if (cwStep) {
          return [
            tuple(baseX, baseY),
            tuple(-baseY, baseX),
            tuple(-baseX, -baseY),
            tuple(baseY, -baseX)
          ];
        } else {
          return [
            tuple(-baseY, -baseX),
            tuple(baseX, -baseY),
            tuple(baseY, baseX),
            tuple(-baseX, baseY)
          ];
        }
      }
      if (mt === "pro" && isCW)
        return [
          tuple(baseX, baseY),
          tuple(-baseY, baseX),
          tuple(-baseX, -baseY),
          tuple(baseY, -baseX)
        ];
      if (mt === "pro" && isCCW)
        return [
          tuple(-baseY, -baseX),
          tuple(baseX, -baseY),
          tuple(baseY, baseX),
          tuple(-baseX, baseY)
        ];
      if (mt === "anti" && isCW)
        return [
          tuple(-baseY, -baseX),
          tuple(baseX, -baseY),
          tuple(baseY, baseX),
          tuple(-baseX, baseY)
        ];
      if (mt === "anti" && isCCW)
        return [
          tuple(baseX, baseY),
          tuple(-baseY, baseX),
          tuple(-baseX, -baseY),
          tuple(baseY, -baseX)
        ];
      return [
        tuple(baseX, baseY),
        tuple(baseX, baseY),
        tuple(baseX, baseY),
        tuple(baseX, baseY)
      ];
    };
    const shiftBox = () => {
      if (mt === "float") {
        const order = [N, E, S, W];
        const idxStart = order.indexOf(motion.startLocation);
        const idxEnd = order.indexOf(motion.endLocation);
        const cwStep = (idxStart + 1) % 4 === idxEnd;
        if (cwStep) {
          return [
            tuple(baseX, baseY),
            tuple(-baseY, baseX),
            tuple(-baseX, -baseY),
            tuple(baseY, -baseX)
          ];
        } else {
          return [
            tuple(-baseY, -baseX),
            tuple(baseX, -baseY),
            tuple(baseY, baseX),
            tuple(-baseX, baseY)
          ];
        }
      }
      if (mt === "pro" && isCW)
        return [
          tuple(-baseX, baseY),
          tuple(-baseY, -baseX),
          tuple(baseX, -baseY),
          tuple(baseY, baseX)
        ];
      if (mt === "pro" && isCCW)
        return [
          tuple(baseX, baseY),
          tuple(-baseY, baseX),
          tuple(-baseX, -baseY),
          tuple(baseY, -baseX)
        ];
      if (mt === "anti" && isCW)
        return [
          tuple(-baseX, baseY),
          tuple(-baseY, -baseX),
          tuple(baseX, -baseY),
          tuple(baseY, baseX)
        ];
      if (mt === "anti" && isCCW)
        return [
          tuple(baseX, baseY),
          tuple(-baseY, baseX),
          tuple(-baseX, -baseY),
          tuple(baseY, -baseX)
        ];
      return [
        tuple(baseX, baseY),
        tuple(baseX, baseY),
        tuple(baseX, baseY),
        tuple(baseX, baseY)
      ];
    };
    const dashDiamond = () => {
      if (isCW)
        return [
          tuple(baseX, -baseY),
          tuple(baseY, baseX),
          tuple(-baseX, baseY),
          tuple(-baseY, -baseX)
        ];
      if (isCCW)
        return [
          tuple(-baseX, -baseY),
          tuple(baseY, -baseX),
          tuple(baseX, baseY),
          tuple(-baseY, baseX)
        ];
      if (isNoRot)
        return [
          tuple(baseX, baseY),
          tuple(-baseY, -baseX),
          tuple(baseX, -baseY),
          tuple(baseY, baseX)
        ];
      return [
        tuple(baseX, baseY),
        tuple(baseX, baseY),
        tuple(baseX, baseY),
        tuple(baseX, baseY)
      ];
    };
    const dashBox = () => {
      if (isCW)
        return [
          tuple(-baseY, baseX),
          tuple(-baseX, -baseY),
          tuple(baseY, -baseX),
          tuple(baseX, baseY)
        ];
      if (isCCW)
        return [
          tuple(-baseX, baseY),
          tuple(-baseY, -baseX),
          tuple(baseX, -baseY),
          tuple(baseY, baseX)
        ];
      if (isNoRot)
        return [
          tuple(baseX, baseY),
          tuple(-baseY, baseX),
          tuple(-baseX, -baseY),
          tuple(baseY, -baseX)
        ];
      return [
        tuple(baseX, baseY),
        tuple(baseX, baseY),
        tuple(baseX, baseY),
        tuple(baseX, baseY)
      ];
    };
    const staticDiamond = () => {
      if (isCW)
        return [
          tuple(baseX, -baseY),
          tuple(baseY, baseX),
          tuple(-baseX, baseY),
          tuple(-baseY, -baseX)
        ];
      if (isCCW)
        return [
          tuple(-baseX, -baseY),
          tuple(baseY, -baseX),
          tuple(baseX, baseY),
          tuple(-baseY, baseX)
        ];
      return [
        tuple(baseX, baseY),
        tuple(-baseX, -baseY),
        tuple(-baseY, baseX),
        tuple(baseY, -baseX)
      ];
    };
    const staticBox = () => {
      if (isCW)
        return [
          tuple(baseX, baseY),
          tuple(-baseY, baseX),
          tuple(-baseX, -baseY),
          tuple(baseY, -baseX)
        ];
      if (isCCW)
        return [
          tuple(-baseY, -baseX),
          tuple(baseX, -baseY),
          tuple(baseY, baseX),
          tuple(-baseX, baseY)
        ];
      return [
        tuple(baseX, baseY),
        tuple(-baseY, baseX),
        tuple(-baseX, -baseY),
        tuple(baseY, -baseX)
      ];
    };
    if (mt === "dash") return gridIsDiamond ? dashDiamond() : dashBox();
    if (mt === "static") return gridIsDiamond ? staticDiamond() : staticBox();
    return gridIsDiamond ? shiftDiamond() : shiftBox();
  }
}
export class QuadrantIndexCalculator {
  /**
   * Wrapper around ArrowQuadrantCalculator to maintain interface compatibility.
   * Delegates to the centralized quadrant calculation logic.
   */
  quadrantCalculator;
  constructor() {
    this.quadrantCalculator = new ArrowQuadrantCalculator();
  }
  calculateQuadrantIndex(motion, location) {
    return this.quadrantCalculator.calculateQuadrantIndex(motion, location);
  }
}
export class DirectionalTupleProcessor {
  /**
   * Processor for applying directional tuple adjustments to arrow positioning.
   */
  constructor(directionalTupleService, quadrantIndexService) {
    this.directionalTupleService = directionalTupleService;
    this.quadrantIndexService = quadrantIndexService;
  }
  processDirectionalTuples(baseAdjustment, _motion, location) {
    try {
      const directionalTuples = this.directionalTupleService.generateDirectionalTuples(
        _motion,
        baseAdjustment.x,
        baseAdjustment.y
      );
      const quadrantIndex = this.quadrantIndexService.calculateQuadrantIndex(
        _motion,
        location
      );
      const selectedTuple = directionalTuples[quadrantIndex] || [0, 0];
      return { x: selectedTuple[0], y: selectedTuple[1] };
    } catch (error) {
      console.warn(
        "Directional tuple processing failed, using base adjustment:",
        error
      );
      return baseAdjustment;
    }
  }
}
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiQzovVEtBL3dlYi9zcmMvbGliL3NlcnZpY2VzL3Bvc2l0aW9uaW5nL2Fycm93cy9wcm9jZXNzb3JzL0RpcmVjdGlvbmFsVHVwbGVQcm9jZXNzb3IudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIi8qKlxuICogRGlyZWN0aW9uYWwgVHVwbGUgUHJvY2Vzc29yXG4gKlxuICogSGFuZGxlcyBjb21wbGV4IGRpcmVjdGlvbmFsIHR1cGxlIHByb2Nlc3NpbmcgZm9yIGFycm93IHBvc2l0aW9uaW5nIGFkanVzdG1lbnRzLlxuICogRGlyZWN0IFR5cGVTY3JpcHQgcG9ydCBvZiB0aGUgUHl0aG9uIERpcmVjdGlvbmFsVHVwbGVQcm9jZXNzb3IuXG4gKlxuICogVGhpcyBzZXJ2aWNlIGhhbmRsZXM6XG4gKiAtIERpcmVjdGlvbmFsIHR1cGxlIGdlbmVyYXRpb24gYmFzZWQgb24gbW90aW9uIGRhdGFcbiAqIC0gQ29tcGxleCBhZGp1c3RtZW50IHByb2Nlc3NpbmcgZm9yIGRpZmZlcmVudCBtb3Rpb24gdHlwZXNcbiAqXG4gKiBOb3RlOiBVc2VzIEFycm93UXVhZHJhbnRDYWxjdWxhdG9yIGZvciBxdWFkcmFudCBpbmRleCBjYWxjdWxhdGlvbnMgdG8gYXZvaWQgZHVwbGljYXRpb24uXG4gKi9cblxuaW1wb3J0IHR5cGUgeyBNb3Rpb25EYXRhIH0gZnJvbSBcIiRsaWIvZG9tYWluXCI7XG5pbXBvcnQgeyBMb2NhdGlvbiB9IGZyb20gXCIkbGliL2RvbWFpblwiO1xuaW1wb3J0IHR5cGUgeyBQb2ludCB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgQXJyb3dRdWFkcmFudENhbGN1bGF0b3IgfSBmcm9tIFwiLi4vb3JjaGVzdHJhdGlvbi9BcnJvd1F1YWRyYW50Q2FsY3VsYXRvclwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIElEaXJlY3Rpb25hbFR1cGxlQ2FsY3VsYXRvciB7XG4gIGNhbGN1bGF0ZURpcmVjdGlvbmFsVHVwbGUoXG4gICAgbW90aW9uOiBNb3Rpb25EYXRhLFxuICAgIGxvY2F0aW9uOiBMb2NhdGlvblxuICApOiBbbnVtYmVyLCBudW1iZXJdO1xuICBnZW5lcmF0ZURpcmVjdGlvbmFsVHVwbGVzKFxuICAgIG1vdGlvbjogTW90aW9uRGF0YSxcbiAgICBiYXNlWDogbnVtYmVyLFxuICAgIGJhc2VZOiBudW1iZXJcbiAgKTogQXJyYXk8W251bWJlciwgbnVtYmVyXT47XG59XG5cbi8vIFVzaW5nIEFycm93UXVhZHJhbnRDYWxjdWxhdG9yIGZyb20gb3JjaGVzdHJhdGlvbiBpbnN0ZWFkIG9mIGR1cGxpY2F0ZSBpbnRlcmZhY2VcblxuZXhwb3J0IGludGVyZmFjZSBJRGlyZWN0aW9uYWxUdXBsZVByb2Nlc3NvciB7XG4gIHByb2Nlc3NEaXJlY3Rpb25hbFR1cGxlcyhcbiAgICBiYXNlQWRqdXN0bWVudDogUG9pbnQsXG4gICAgX21vdGlvbjogTW90aW9uRGF0YSxcbiAgICBsb2NhdGlvbjogTG9jYXRpb25cbiAgKTogUG9pbnQ7XG59XG5cbmV4cG9ydCBjbGFzcyBEaXJlY3Rpb25hbFR1cGxlQ2FsY3VsYXRvciBpbXBsZW1lbnRzIElEaXJlY3Rpb25hbFR1cGxlQ2FsY3VsYXRvciB7XG4gIC8qKlxuICAgKiBDYWxjdWxhdG9yIGZvciBkaXJlY3Rpb25hbCB0dXBsZXMgdXNlZCBpbiBhcnJvdyBwb3NpdGlvbmluZy5cbiAgICovXG5cbiAgY2FsY3VsYXRlRGlyZWN0aW9uYWxUdXBsZShcbiAgICBfbW90aW9uOiBNb3Rpb25EYXRhLFxuICAgIF9sb2NhdGlvbjogTG9jYXRpb25cbiAgKTogW251bWJlciwgbnVtYmVyXSB7XG4gICAgLyoqXG4gICAgICogTGVnYWN5IHBhcml0eTogQWRkaXRpb25hbCBkaXJlY3Rpb25hbCB0dXBsZSBpcyBub3Qgc2VwYXJhdGVseSBhZGRlZC5cbiAgICAgKiBUaGUgc2VsZWN0aW9uIGlzIG1hZGUgZGlyZWN0bHkgZnJvbSB0aGUgZ2VuZXJhdGVkIDQtdHVwbGVzLlxuICAgICAqL1xuICAgIHJldHVybiBbMCwgMF07XG4gIH1cblxuICBnZW5lcmF0ZURpcmVjdGlvbmFsVHVwbGVzKFxuICAgIG1vdGlvbjogTW90aW9uRGF0YSxcbiAgICBiYXNlWDogbnVtYmVyLFxuICAgIGJhc2VZOiBudW1iZXJcbiAgKTogQXJyYXk8W251bWJlciwgbnVtYmVyXT4ge1xuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlIGRpcmVjdGlvbmFsIHR1cGxlcyB1c2luZyBsZWdhY3kgbWFwcGluZ3MgYnkgbW90aW9uIHR5cGUsIHJvdGF0aW9uLCBhbmQgaW5mZXJyZWQgZ3JpZC5cbiAgICAgKiBUdXBsZSBvcmRlcjogaW5kaWNlcyAwLi4zIGNvcnJlc3BvbmQgdG8gTkUsIFNFLCBTVywgTlcgcXVhZHJhbnQgbWFwcGluZy5cbiAgICAgKi9cbiAgICBjb25zdCBtdCA9IFN0cmluZyhtb3Rpb24ubW90aW9uVHlwZSkudG9Mb3dlckNhc2UoKTtcbiAgICBjb25zdCByb3QgPSBTdHJpbmcobW90aW9uLnJvdGF0aW9uRGlyZWN0aW9uKS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgY29uc3QgTkUgPSBMb2NhdGlvbi5OT1JUSEVBU1Q7XG4gICAgY29uc3QgU0UgPSBMb2NhdGlvbi5TT1VUSEVBU1Q7XG4gICAgY29uc3QgU1cgPSBMb2NhdGlvbi5TT1VUSFdFU1Q7XG4gICAgY29uc3QgTlcgPSBMb2NhdGlvbi5OT1JUSFdFU1Q7XG4gICAgY29uc3QgTiA9IExvY2F0aW9uLk5PUlRIO1xuICAgIGNvbnN0IEUgPSBMb2NhdGlvbi5FQVNUO1xuICAgIGNvbnN0IFMgPSBMb2NhdGlvbi5TT1VUSDtcbiAgICBjb25zdCBXID0gTG9jYXRpb24uV0VTVDtcblxuICAgIC8vIEluZmVyIGdyaWQgbW9kZSBmcm9tIG1vdGlvbiBsb2NhdGlvbnMgKE5PVCBhcnJvdyBsb2NhdGlvbnMpXG4gICAgLy8gRGlhbW9uZCBtb2RlOiBtb3Rpb24gdXNlcyBjYXJkaW5hbHMgKE4sIEUsIFMsIFcpIOKGkiBhcnJvd3MgcGxhY2VkIGF0IGRpYWdvbmFsc1xuICAgIC8vIEJveCBtb2RlOiBtb3Rpb24gdXNlcyBkaWFnb25hbHMgKE5FLCBTRSwgU1csIE5XKSDihpIgYXJyb3dzIHBsYWNlZCBhdCBjYXJkaW5hbHNcbiAgICBjb25zdCBjYXJkaW5hbFNldCA9IG5ldyBTZXQ8TG9jYXRpb24+KFtOLCBFLCBTLCBXXSk7XG4gICAgY29uc3QgZ3JpZElzRGlhbW9uZCA9XG4gICAgICBjYXJkaW5hbFNldC5oYXMobW90aW9uLnN0YXJ0TG9jYXRpb24pIHx8XG4gICAgICBjYXJkaW5hbFNldC5oYXMobW90aW9uLmVuZExvY2F0aW9uKTtcblxuICAgIC8vIEhlbHBlciB0byBub3JtYWxpemUgcm90YXRpb24ga2V5c1xuICAgIGNvbnN0IGlzQ1cgPSByb3QgPT09IFwiY2xvY2t3aXNlXCIgfHwgcm90ID09PSBcImN3XCI7XG4gICAgY29uc3QgaXNDQ1cgPSByb3QgPT09IFwiY291bnRlcl9jbG9ja3dpc2VcIiB8fCByb3QgPT09IFwiY2N3XCI7XG4gICAgY29uc3QgaXNOb1JvdCA9IHJvdCA9PT0gXCJub1JvdGF0aW9uXCI7XG5cbiAgICAvLyBNYXBwaW5nIGJ1aWxkZXJzXG4gICAgY29uc3QgdHVwbGUgPSAoYTogbnVtYmVyLCBiOiBudW1iZXIpID0+IFthLCBiXSBhcyBbbnVtYmVyLCBudW1iZXJdO1xuXG4gICAgLy8gU0hJRlQgKHByby9hbnRpL2Zsb2F0KVxuICAgIGNvbnN0IHNoaWZ0RGlhbW9uZCA9ICgpID0+IHtcbiAgICAgIGlmIChtdCA9PT0gXCJmbG9hdFwiKSB7XG4gICAgICAgIC8vIEhhbmRwYXRoLWJhc2VkIG1hcHBpbmc7IGFwcHJveGltYXRlIHZpYSBzdGFydC9lbmQgc3RlcCBkaXJlY3Rpb25cbiAgICAgICAgY29uc3Qgb3JkZXIgPSBbTkUsIFNFLCBTVywgTlddO1xuICAgICAgICBjb25zdCBpZHhTdGFydCA9IG9yZGVyLmluZGV4T2YobW90aW9uLnN0YXJ0TG9jYXRpb24gYXMgTG9jYXRpb24pO1xuICAgICAgICBjb25zdCBpZHhFbmQgPSBvcmRlci5pbmRleE9mKG1vdGlvbi5lbmRMb2NhdGlvbiBhcyBMb2NhdGlvbik7XG4gICAgICAgIC8vIERldGVybWluZSBjdyB2cyBjY3cgc3RlcCAoMSBzdGVwIGN3ID0+IGN3OyBlbHNlIGNjdylcbiAgICAgICAgY29uc3QgY3dTdGVwID0gKGlkeFN0YXJ0ICsgMSkgJSA0ID09PSBpZHhFbmQ7XG4gICAgICAgIGlmIChjd1N0ZXApIHtcbiAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgdHVwbGUoYmFzZVgsIGJhc2VZKSxcbiAgICAgICAgICAgIHR1cGxlKC1iYXNlWSwgYmFzZVgpLFxuICAgICAgICAgICAgdHVwbGUoLWJhc2VYLCAtYmFzZVkpLFxuICAgICAgICAgICAgdHVwbGUoYmFzZVksIC1iYXNlWCksXG4gICAgICAgICAgXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgdHVwbGUoLWJhc2VZLCAtYmFzZVgpLFxuICAgICAgICAgICAgdHVwbGUoYmFzZVgsIC1iYXNlWSksXG4gICAgICAgICAgICB0dXBsZShiYXNlWSwgYmFzZVgpLFxuICAgICAgICAgICAgdHVwbGUoLWJhc2VYLCBiYXNlWSksXG4gICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKG10ID09PSBcInByb1wiICYmIGlzQ1cpXG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgdHVwbGUoYmFzZVgsIGJhc2VZKSxcbiAgICAgICAgICB0dXBsZSgtYmFzZVksIGJhc2VYKSxcbiAgICAgICAgICB0dXBsZSgtYmFzZVgsIC1iYXNlWSksXG4gICAgICAgICAgdHVwbGUoYmFzZVksIC1iYXNlWCksXG4gICAgICAgIF07XG4gICAgICBpZiAobXQgPT09IFwicHJvXCIgJiYgaXNDQ1cpXG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgdHVwbGUoLWJhc2VZLCAtYmFzZVgpLFxuICAgICAgICAgIHR1cGxlKGJhc2VYLCAtYmFzZVkpLFxuICAgICAgICAgIHR1cGxlKGJhc2VZLCBiYXNlWCksXG4gICAgICAgICAgdHVwbGUoLWJhc2VYLCBiYXNlWSksXG4gICAgICAgIF07XG4gICAgICBpZiAobXQgPT09IFwiYW50aVwiICYmIGlzQ1cpXG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgdHVwbGUoLWJhc2VZLCAtYmFzZVgpLFxuICAgICAgICAgIHR1cGxlKGJhc2VYLCAtYmFzZVkpLFxuICAgICAgICAgIHR1cGxlKGJhc2VZLCBiYXNlWCksXG4gICAgICAgICAgdHVwbGUoLWJhc2VYLCBiYXNlWSksXG4gICAgICAgIF07XG4gICAgICBpZiAobXQgPT09IFwiYW50aVwiICYmIGlzQ0NXKVxuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgIHR1cGxlKGJhc2VYLCBiYXNlWSksXG4gICAgICAgICAgdHVwbGUoLWJhc2VZLCBiYXNlWCksXG4gICAgICAgICAgdHVwbGUoLWJhc2VYLCAtYmFzZVkpLFxuICAgICAgICAgIHR1cGxlKGJhc2VZLCAtYmFzZVgpLFxuICAgICAgICBdO1xuICAgICAgcmV0dXJuIFtcbiAgICAgICAgdHVwbGUoYmFzZVgsIGJhc2VZKSxcbiAgICAgICAgdHVwbGUoYmFzZVgsIGJhc2VZKSxcbiAgICAgICAgdHVwbGUoYmFzZVgsIGJhc2VZKSxcbiAgICAgICAgdHVwbGUoYmFzZVgsIGJhc2VZKSxcbiAgICAgIF07XG4gICAgfTtcblxuICAgIGNvbnN0IHNoaWZ0Qm94ID0gKCkgPT4ge1xuICAgICAgaWYgKG10ID09PSBcImZsb2F0XCIpIHtcbiAgICAgICAgLy8gVXNlIGJveCBjdy9jY3cgZnJvbSBzdGFydC0+ZW5kIGFyb3VuZCBOLEUsUyxXIG9yZGVyXG4gICAgICAgIGNvbnN0IG9yZGVyID0gW04sIEUsIFMsIFddO1xuICAgICAgICBjb25zdCBpZHhTdGFydCA9IG9yZGVyLmluZGV4T2YobW90aW9uLnN0YXJ0TG9jYXRpb24gYXMgTG9jYXRpb24pO1xuICAgICAgICBjb25zdCBpZHhFbmQgPSBvcmRlci5pbmRleE9mKG1vdGlvbi5lbmRMb2NhdGlvbiBhcyBMb2NhdGlvbik7XG4gICAgICAgIGNvbnN0IGN3U3RlcCA9IChpZHhTdGFydCArIDEpICUgNCA9PT0gaWR4RW5kO1xuICAgICAgICBpZiAoY3dTdGVwKSB7XG4gICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIHR1cGxlKGJhc2VYLCBiYXNlWSksXG4gICAgICAgICAgICB0dXBsZSgtYmFzZVksIGJhc2VYKSxcbiAgICAgICAgICAgIHR1cGxlKC1iYXNlWCwgLWJhc2VZKSxcbiAgICAgICAgICAgIHR1cGxlKGJhc2VZLCAtYmFzZVgpLFxuICAgICAgICAgIF07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIHR1cGxlKC1iYXNlWSwgLWJhc2VYKSxcbiAgICAgICAgICAgIHR1cGxlKGJhc2VYLCAtYmFzZVkpLFxuICAgICAgICAgICAgdHVwbGUoYmFzZVksIGJhc2VYKSxcbiAgICAgICAgICAgIHR1cGxlKC1iYXNlWCwgYmFzZVkpLFxuICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChtdCA9PT0gXCJwcm9cIiAmJiBpc0NXKVxuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgIHR1cGxlKC1iYXNlWCwgYmFzZVkpLFxuICAgICAgICAgIHR1cGxlKC1iYXNlWSwgLWJhc2VYKSxcbiAgICAgICAgICB0dXBsZShiYXNlWCwgLWJhc2VZKSxcbiAgICAgICAgICB0dXBsZShiYXNlWSwgYmFzZVgpLFxuICAgICAgICBdO1xuICAgICAgaWYgKG10ID09PSBcInByb1wiICYmIGlzQ0NXKVxuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgIHR1cGxlKGJhc2VYLCBiYXNlWSksXG4gICAgICAgICAgdHVwbGUoLWJhc2VZLCBiYXNlWCksXG4gICAgICAgICAgdHVwbGUoLWJhc2VYLCAtYmFzZVkpLFxuICAgICAgICAgIHR1cGxlKGJhc2VZLCAtYmFzZVgpLFxuICAgICAgICBdO1xuICAgICAgaWYgKG10ID09PSBcImFudGlcIiAmJiBpc0NXKVxuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgIHR1cGxlKC1iYXNlWCwgYmFzZVkpLFxuICAgICAgICAgIHR1cGxlKC1iYXNlWSwgLWJhc2VYKSxcbiAgICAgICAgICB0dXBsZShiYXNlWCwgLWJhc2VZKSxcbiAgICAgICAgICB0dXBsZShiYXNlWSwgYmFzZVgpLFxuICAgICAgICBdO1xuICAgICAgaWYgKG10ID09PSBcImFudGlcIiAmJiBpc0NDVylcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICB0dXBsZShiYXNlWCwgYmFzZVkpLFxuICAgICAgICAgIHR1cGxlKC1iYXNlWSwgYmFzZVgpLFxuICAgICAgICAgIHR1cGxlKC1iYXNlWCwgLWJhc2VZKSxcbiAgICAgICAgICB0dXBsZShiYXNlWSwgLWJhc2VYKSxcbiAgICAgICAgXTtcbiAgICAgIHJldHVybiBbXG4gICAgICAgIHR1cGxlKGJhc2VYLCBiYXNlWSksXG4gICAgICAgIHR1cGxlKGJhc2VYLCBiYXNlWSksXG4gICAgICAgIHR1cGxlKGJhc2VYLCBiYXNlWSksXG4gICAgICAgIHR1cGxlKGJhc2VYLCBiYXNlWSksXG4gICAgICBdO1xuICAgIH07XG5cbiAgICAvLyBEQVNIXG4gICAgY29uc3QgZGFzaERpYW1vbmQgPSAoKSA9PiB7XG4gICAgICBpZiAoaXNDVylcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICB0dXBsZShiYXNlWCwgLWJhc2VZKSxcbiAgICAgICAgICB0dXBsZShiYXNlWSwgYmFzZVgpLFxuICAgICAgICAgIHR1cGxlKC1iYXNlWCwgYmFzZVkpLFxuICAgICAgICAgIHR1cGxlKC1iYXNlWSwgLWJhc2VYKSxcbiAgICAgICAgXTtcbiAgICAgIGlmIChpc0NDVylcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICB0dXBsZSgtYmFzZVgsIC1iYXNlWSksXG4gICAgICAgICAgdHVwbGUoYmFzZVksIC1iYXNlWCksXG4gICAgICAgICAgdHVwbGUoYmFzZVgsIGJhc2VZKSxcbiAgICAgICAgICB0dXBsZSgtYmFzZVksIGJhc2VYKSxcbiAgICAgICAgXTtcbiAgICAgIGlmIChpc05vUm90KVxuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgIHR1cGxlKGJhc2VYLCBiYXNlWSksXG4gICAgICAgICAgdHVwbGUoLWJhc2VZLCAtYmFzZVgpLFxuICAgICAgICAgIHR1cGxlKGJhc2VYLCAtYmFzZVkpLFxuICAgICAgICAgIHR1cGxlKGJhc2VZLCBiYXNlWCksXG4gICAgICAgIF07XG4gICAgICByZXR1cm4gW1xuICAgICAgICB0dXBsZShiYXNlWCwgYmFzZVkpLFxuICAgICAgICB0dXBsZShiYXNlWCwgYmFzZVkpLFxuICAgICAgICB0dXBsZShiYXNlWCwgYmFzZVkpLFxuICAgICAgICB0dXBsZShiYXNlWCwgYmFzZVkpLFxuICAgICAgXTtcbiAgICB9O1xuXG4gICAgY29uc3QgZGFzaEJveCA9ICgpID0+IHtcbiAgICAgIGlmIChpc0NXKVxuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgIHR1cGxlKC1iYXNlWSwgYmFzZVgpLFxuICAgICAgICAgIHR1cGxlKC1iYXNlWCwgLWJhc2VZKSxcbiAgICAgICAgICB0dXBsZShiYXNlWSwgLWJhc2VYKSxcbiAgICAgICAgICB0dXBsZShiYXNlWCwgYmFzZVkpLFxuICAgICAgICBdO1xuICAgICAgaWYgKGlzQ0NXKVxuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgIHR1cGxlKC1iYXNlWCwgYmFzZVkpLFxuICAgICAgICAgIHR1cGxlKC1iYXNlWSwgLWJhc2VYKSxcbiAgICAgICAgICB0dXBsZShiYXNlWCwgLWJhc2VZKSxcbiAgICAgICAgICB0dXBsZShiYXNlWSwgYmFzZVgpLFxuICAgICAgICBdO1xuICAgICAgaWYgKGlzTm9Sb3QpXG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgdHVwbGUoYmFzZVgsIGJhc2VZKSxcbiAgICAgICAgICB0dXBsZSgtYmFzZVksIGJhc2VYKSxcbiAgICAgICAgICB0dXBsZSgtYmFzZVgsIC1iYXNlWSksXG4gICAgICAgICAgdHVwbGUoYmFzZVksIC1iYXNlWCksXG4gICAgICAgIF07XG4gICAgICByZXR1cm4gW1xuICAgICAgICB0dXBsZShiYXNlWCwgYmFzZVkpLFxuICAgICAgICB0dXBsZShiYXNlWCwgYmFzZVkpLFxuICAgICAgICB0dXBsZShiYXNlWCwgYmFzZVkpLFxuICAgICAgICB0dXBsZShiYXNlWCwgYmFzZVkpLFxuICAgICAgXTtcbiAgICB9O1xuXG4gICAgLy8gU1RBVElDXG4gICAgY29uc3Qgc3RhdGljRGlhbW9uZCA9ICgpID0+IHtcbiAgICAgIGlmIChpc0NXKVxuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgIHR1cGxlKGJhc2VYLCAtYmFzZVkpLFxuICAgICAgICAgIHR1cGxlKGJhc2VZLCBiYXNlWCksXG4gICAgICAgICAgdHVwbGUoLWJhc2VYLCBiYXNlWSksXG4gICAgICAgICAgdHVwbGUoLWJhc2VZLCAtYmFzZVgpLFxuICAgICAgICBdO1xuICAgICAgaWYgKGlzQ0NXKVxuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgIHR1cGxlKC1iYXNlWCwgLWJhc2VZKSxcbiAgICAgICAgICB0dXBsZShiYXNlWSwgLWJhc2VYKSxcbiAgICAgICAgICB0dXBsZShiYXNlWCwgYmFzZVkpLFxuICAgICAgICAgIHR1cGxlKC1iYXNlWSwgYmFzZVgpLFxuICAgICAgICBdO1xuICAgICAgcmV0dXJuIFtcbiAgICAgICAgdHVwbGUoYmFzZVgsIGJhc2VZKSxcbiAgICAgICAgdHVwbGUoLWJhc2VYLCAtYmFzZVkpLFxuICAgICAgICB0dXBsZSgtYmFzZVksIGJhc2VYKSxcbiAgICAgICAgdHVwbGUoYmFzZVksIC1iYXNlWCksXG4gICAgICBdO1xuICAgIH07XG5cbiAgICBjb25zdCBzdGF0aWNCb3ggPSAoKSA9PiB7XG4gICAgICBpZiAoaXNDVylcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICB0dXBsZShiYXNlWCwgYmFzZVkpLFxuICAgICAgICAgIHR1cGxlKC1iYXNlWSwgYmFzZVgpLFxuICAgICAgICAgIHR1cGxlKC1iYXNlWCwgLWJhc2VZKSxcbiAgICAgICAgICB0dXBsZShiYXNlWSwgLWJhc2VYKSxcbiAgICAgICAgXTtcbiAgICAgIGlmIChpc0NDVylcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICB0dXBsZSgtYmFzZVksIC1iYXNlWCksXG4gICAgICAgICAgdHVwbGUoYmFzZVgsIC1iYXNlWSksXG4gICAgICAgICAgdHVwbGUoYmFzZVksIGJhc2VYKSxcbiAgICAgICAgICB0dXBsZSgtYmFzZVgsIGJhc2VZKSxcbiAgICAgICAgXTtcbiAgICAgIHJldHVybiBbXG4gICAgICAgIHR1cGxlKGJhc2VYLCBiYXNlWSksXG4gICAgICAgIHR1cGxlKC1iYXNlWSwgYmFzZVgpLFxuICAgICAgICB0dXBsZSgtYmFzZVgsIC1iYXNlWSksXG4gICAgICAgIHR1cGxlKGJhc2VZLCAtYmFzZVgpLFxuICAgICAgXTtcbiAgICB9O1xuXG4gICAgLy8gRGlzcGF0Y2ggYnkgbW90aW9uIHR5cGUgYW5kIGdyaWRcbiAgICBpZiAobXQgPT09IFwiZGFzaFwiKSByZXR1cm4gZ3JpZElzRGlhbW9uZCA/IGRhc2hEaWFtb25kKCkgOiBkYXNoQm94KCk7XG4gICAgaWYgKG10ID09PSBcInN0YXRpY1wiKSByZXR1cm4gZ3JpZElzRGlhbW9uZCA/IHN0YXRpY0RpYW1vbmQoKSA6IHN0YXRpY0JveCgpO1xuICAgIC8vIHByby9hbnRpL2Zsb2F0XG4gICAgcmV0dXJuIGdyaWRJc0RpYW1vbmQgPyBzaGlmdERpYW1vbmQoKSA6IHNoaWZ0Qm94KCk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFF1YWRyYW50SW5kZXhDYWxjdWxhdG9yIHtcbiAgLyoqXG4gICAqIFdyYXBwZXIgYXJvdW5kIEFycm93UXVhZHJhbnRDYWxjdWxhdG9yIHRvIG1haW50YWluIGludGVyZmFjZSBjb21wYXRpYmlsaXR5LlxuICAgKiBEZWxlZ2F0ZXMgdG8gdGhlIGNlbnRyYWxpemVkIHF1YWRyYW50IGNhbGN1bGF0aW9uIGxvZ2ljLlxuICAgKi9cbiAgcHJpdmF0ZSBxdWFkcmFudENhbGN1bGF0b3I6IEFycm93UXVhZHJhbnRDYWxjdWxhdG9yO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMucXVhZHJhbnRDYWxjdWxhdG9yID0gbmV3IEFycm93UXVhZHJhbnRDYWxjdWxhdG9yKCk7XG4gIH1cblxuICBjYWxjdWxhdGVRdWFkcmFudEluZGV4KG1vdGlvbjogTW90aW9uRGF0YSwgbG9jYXRpb246IExvY2F0aW9uKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5xdWFkcmFudENhbGN1bGF0b3IuY2FsY3VsYXRlUXVhZHJhbnRJbmRleChtb3Rpb24sIGxvY2F0aW9uKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgRGlyZWN0aW9uYWxUdXBsZVByb2Nlc3NvciBpbXBsZW1lbnRzIElEaXJlY3Rpb25hbFR1cGxlUHJvY2Vzc29yIHtcbiAgLyoqXG4gICAqIFByb2Nlc3NvciBmb3IgYXBwbHlpbmcgZGlyZWN0aW9uYWwgdHVwbGUgYWRqdXN0bWVudHMgdG8gYXJyb3cgcG9zaXRpb25pbmcuXG4gICAqL1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgZGlyZWN0aW9uYWxUdXBsZVNlcnZpY2U6IElEaXJlY3Rpb25hbFR1cGxlQ2FsY3VsYXRvcixcbiAgICBwcml2YXRlIHF1YWRyYW50SW5kZXhTZXJ2aWNlOiBRdWFkcmFudEluZGV4Q2FsY3VsYXRvclxuICApIHt9XG5cbiAgcHJvY2Vzc0RpcmVjdGlvbmFsVHVwbGVzKFxuICAgIGJhc2VBZGp1c3RtZW50OiBQb2ludCxcbiAgICBfbW90aW9uOiBNb3Rpb25EYXRhLFxuICAgIGxvY2F0aW9uOiBMb2NhdGlvblxuICApOiBQb2ludCB7XG4gICAgLyoqXG4gICAgICogUHJvY2VzcyBkaXJlY3Rpb25hbCB0dXBsZXMgdG8gY2FsY3VsYXRlIGZpbmFsIGFkanVzdG1lbnQuXG4gICAgICpcbiAgICAgKiBBcmdzOlxuICAgICAqICAgICBiYXNlQWRqdXN0bWVudDogQmFzZSBhZGp1c3RtZW50IGZyb20gcGxhY2VtZW50IHNlcnZpY2VzXG4gICAgICogICAgIG1vdGlvbjogTW90aW9uIGRhdGEgZm9yIGRpcmVjdGlvbmFsIGNhbGN1bGF0aW9uc1xuICAgICAqICAgICBsb2NhdGlvbjogQXJyb3cgbG9jYXRpb24gZm9yIHF1YWRyYW50IHNlbGVjdGlvblxuICAgICAqXG4gICAgICogUmV0dXJuczpcbiAgICAgKiAgICAgRmluYWwgYWRqdXN0bWVudCBwb2ludCBhZnRlciBkaXJlY3Rpb25hbCBwcm9jZXNzaW5nXG4gICAgICovXG4gICAgdHJ5IHtcbiAgICAgIC8vIEdlbmVyYXRlIGRpcmVjdGlvbmFsIHR1cGxlcyBmcm9tIGJhc2UgYWRqdXN0bWVudFxuICAgICAgY29uc3QgZGlyZWN0aW9uYWxUdXBsZXMgPVxuICAgICAgICB0aGlzLmRpcmVjdGlvbmFsVHVwbGVTZXJ2aWNlLmdlbmVyYXRlRGlyZWN0aW9uYWxUdXBsZXMoXG4gICAgICAgICAgX21vdGlvbixcbiAgICAgICAgICBiYXNlQWRqdXN0bWVudC54LFxuICAgICAgICAgIGJhc2VBZGp1c3RtZW50LnlcbiAgICAgICAgKTtcblxuICAgICAgLy8gQ2FsY3VsYXRlIHF1YWRyYW50IGluZGV4IGZvciB0dXBsZSBzZWxlY3Rpb25cbiAgICAgIGNvbnN0IHF1YWRyYW50SW5kZXggPSB0aGlzLnF1YWRyYW50SW5kZXhTZXJ2aWNlLmNhbGN1bGF0ZVF1YWRyYW50SW5kZXgoXG4gICAgICAgIF9tb3Rpb24sXG4gICAgICAgIGxvY2F0aW9uXG4gICAgICApO1xuXG4gICAgICAvLyBTZWxlY3QgdGhlIGFwcHJvcHJpYXRlIHR1cGxlIGJhc2VkIG9uIHF1YWRyYW50IChsZWdhY3kgcGFyaXR5KVxuICAgICAgY29uc3Qgc2VsZWN0ZWRUdXBsZSA9IGRpcmVjdGlvbmFsVHVwbGVzW3F1YWRyYW50SW5kZXhdIHx8IFswLCAwXTtcblxuICAgICAgLy8gRmluYWwgYWRqdXN0bWVudCA9IHNlbGVjdGVkIHR1cGxlIG9ubHkgKGJhc2VBZGp1c3RtZW50IGFscmVhZHkgdXNlZCB0byBidWlsZCB0dXBsZXMpXG4gICAgICByZXR1cm4geyB4OiBzZWxlY3RlZFR1cGxlWzBdLCB5OiBzZWxlY3RlZFR1cGxlWzFdIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgXCJEaXJlY3Rpb25hbCB0dXBsZSBwcm9jZXNzaW5nIGZhaWxlZCwgdXNpbmcgYmFzZSBhZGp1c3RtZW50OlwiLFxuICAgICAgICBlcnJvclxuICAgICAgKTtcbiAgICAgIHJldHVybiBiYXNlQWRqdXN0bWVudDtcbiAgICB9XG4gIH1cbn1cbiJdLAogICJtYXBwaW5ncyI6ICJBQWNBLFNBQVMsZ0JBQWdCO0FBRXpCLFNBQVMsK0JBQStCO0FBd0JqQyxhQUFNLDJCQUFrRTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBSzdFLDBCQUNFLFNBQ0EsV0FDa0I7QUFLbEIsV0FBTyxDQUFDLEdBQUcsQ0FBQztBQUFBLEVBQ2Q7QUFBQSxFQUVBLDBCQUNFLFFBQ0EsT0FDQSxPQUN5QjtBQUt6QixVQUFNLEtBQUssT0FBTyxPQUFPLFVBQVUsRUFBRSxZQUFZO0FBQ2pELFVBQU0sTUFBTSxPQUFPLE9BQU8saUJBQWlCLEVBQUUsWUFBWTtBQUV6RCxVQUFNLEtBQUssU0FBUztBQUNwQixVQUFNLEtBQUssU0FBUztBQUNwQixVQUFNLEtBQUssU0FBUztBQUNwQixVQUFNLEtBQUssU0FBUztBQUNwQixVQUFNLElBQUksU0FBUztBQUNuQixVQUFNLElBQUksU0FBUztBQUNuQixVQUFNLElBQUksU0FBUztBQUNuQixVQUFNLElBQUksU0FBUztBQUtuQixVQUFNLGNBQWMsb0JBQUksSUFBYyxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQztBQUNsRCxVQUFNLGdCQUNKLFlBQVksSUFBSSxPQUFPLGFBQWEsS0FDcEMsWUFBWSxJQUFJLE9BQU8sV0FBVztBQUdwQyxVQUFNLE9BQU8sUUFBUSxlQUFlLFFBQVE7QUFDNUMsVUFBTSxRQUFRLFFBQVEsdUJBQXVC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
