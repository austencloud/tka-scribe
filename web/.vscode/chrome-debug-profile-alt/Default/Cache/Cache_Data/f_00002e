import { createArrowData } from "/src/lib/domain/ArrowData.ts";
import { createGridData } from "/src/lib/domain/GridData.ts";
import { createPropData } from "/src/lib/domain/PropData.ts";
import { getLetterType as getTypeFromLetter } from "/src/lib/domain/Letter.ts";
import { Direction, GridPosition, LetterType, Timing } from "/src/lib/domain/enums.ts";
export function createPictographData(data = {}) {
  const arrows = {
    blue: createArrowData(),
    red: createArrowData(),
    ...data.arrows
  };
  const props = {
    blue: createPropData(),
    red: createPropData(),
    ...data.props
  };
  return {
    id: data.id ?? crypto.randomUUID(),
    gridData: data.gridData ?? createGridData(),
    arrows,
    props,
    motions: data.motions ?? {},
    letter: data.letter ?? null,
    startPosition: data.startPosition ?? null,
    endPosition: data.endPosition ?? null,
    timing: data.timing ?? null,
    direction: data.direction ?? null,
    letterType: data.letterType ?? null,
    isBlank: data.isBlank ?? false,
    isMirrored: data.isMirrored ?? false,
    metadata: data.metadata ?? {}
  };
}
export function updatePictographData(pictograph, updates) {
  return {
    ...pictograph,
    ...updates
  };
}
export function updateArrow(pictograph, color, updates) {
  if (!(color in pictograph.arrows)) {
    throw new Error(`Arrow color '${color}' not found`);
  }
  const currentArrow = pictograph.arrows[color];
  const updatedArrow = { ...currentArrow, ...updates };
  const newArrows = { ...pictograph.arrows, [color]: updatedArrow };
  return { ...pictograph, arrows: newArrows };
}
export function updateProp(pictograph, color, updates) {
  if (!(color in pictograph.props)) {
    throw new Error(`Prop color '${color}' not found`);
  }
  const currentProp = pictograph.props[color];
  const updatedProp = { ...currentProp, ...updates };
  const newProps = { ...pictograph.props, [color]: updatedProp };
  return { ...pictograph, props: newProps };
}
export function getBlueArrow(pictograph) {
  return pictograph.arrows.blue ?? createArrowData();
}
export function getRedArrow(pictograph) {
  return pictograph.arrows.red ?? createArrowData();
}
export function getBlueProp(pictograph) {
  return pictograph.props.blue ?? createPropData();
}
export function getRedProp(pictograph) {
  return pictograph.props.red ?? createPropData();
}
export function getLetterValue(pictograph) {
  return pictograph.letter ?? null;
}
export function getLetterType(pictograph) {
  if (pictograph.letter) {
    return getTypeFromLetter(pictograph.letter) ?? pictograph.letterType ?? null;
  }
  return pictograph.letterType ?? null;
}
export function setLetter(pictograph, letter) {
  return {
    ...pictograph,
    letter,
    // Update legacy letterType for backward compatibility
    letterType: letter ? getTypeFromLetter(letter) : null
  };
}
export function pictographDataToObject(pictograph) {
  return {
    id: pictograph.id,
    gridData: pictograph.gridData,
    arrows: pictograph.arrows,
    props: pictograph.props,
    motions: pictograph.motions,
    letter: pictograph.letter,
    startPosition: pictograph.startPosition,
    endPosition: pictograph.endPosition,
    timing: pictograph.timing,
    direction: pictograph.direction,
    letterType: pictograph.letterType,
    isBlank: pictograph.isBlank,
    isMirrored: pictograph.isMirrored,
    metadata: pictograph.metadata
  };
}
export function pictographDataFromObject(data) {
  const pictographData = {
    ...data.id !== void 0 && { id: data.id },
    ...data.gridData !== void 0 && { gridData: data.gridData },
    ...data.arrows !== void 0 && {
      arrows: data.arrows
    },
    ...data.props !== void 0 && {
      props: data.props
    },
    ...data.motions !== void 0 && {
      motions: data.motions
    },
    ...data.letter !== void 0 && {
      letter: data.letter
    },
    ...data.startPosition !== void 0 && {
      startPosition: data.startPosition
    },
    ...data.endPosition !== void 0 && {
      endPosition: data.endPosition
    },
    ...data.timing !== void 0 && { timing: data.timing },
    ...data.direction !== void 0 && {
      direction: data.direction
    },
    ...data.letterType !== void 0 && {
      letterType: data.letterType
    },
    ...data.isBlank !== void 0 && { isBlank: data.isBlank },
    ...data.isMirrored !== void 0 && {
      isMirrored: data.isMirrored
    },
    ...data.metadata !== void 0 && {
      metadata: data.metadata
    }
  };
  return createPictographData(pictographData);
}
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiQzovVEtBL3dlYi9zcmMvbGliL2RvbWFpbi9QaWN0b2dyYXBoRGF0YS50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiLyoqXG4gKiBQaWN0b2dyYXBoIERvbWFpbiBNb2RlbFxuICpcbiAqIEltbXV0YWJsZSBkYXRhIGZvciBhIGNvbXBsZXRlIHBpY3RvZ3JhcGguXG4gKiBCYXNlZCBvbiBtb2Rlcm4gZGVza3RvcCBhcHAncyBwaWN0b2dyYXBoRGF0YS5weVxuICovXG5cbmltcG9ydCB0eXBlIHsgQXJyb3dEYXRhIH0gZnJvbSBcIi4vQXJyb3dEYXRhXCI7XG5pbXBvcnQgeyBjcmVhdGVBcnJvd0RhdGEgfSBmcm9tIFwiLi9BcnJvd0RhdGFcIjtcbmltcG9ydCB0eXBlIHsgR3JpZERhdGEgfSBmcm9tIFwiLi9HcmlkRGF0YVwiO1xuaW1wb3J0IHsgY3JlYXRlR3JpZERhdGEgfSBmcm9tIFwiLi9HcmlkRGF0YVwiO1xuaW1wb3J0IHR5cGUgeyBNb3Rpb25EYXRhIH0gZnJvbSBcIi4vTW90aW9uRGF0YVwiO1xuaW1wb3J0IHR5cGUgeyBQcm9wRGF0YSB9IGZyb20gXCIuL1Byb3BEYXRhXCI7XG5pbXBvcnQgeyBjcmVhdGVQcm9wRGF0YSB9IGZyb20gXCIuL1Byb3BEYXRhXCI7XG5pbXBvcnQgeyBnZXRMZXR0ZXJUeXBlIGFzIGdldFR5cGVGcm9tTGV0dGVyIH0gZnJvbSBcIi4vTGV0dGVyXCI7XG5pbXBvcnQgeyBEaXJlY3Rpb24sIEdyaWRQb3NpdGlvbiwgTGV0dGVyVHlwZSwgVGltaW5nIH0gZnJvbSBcIi4vZW51bXNcIjtcblxuZXhwb3J0IGludGVyZmFjZSBQaWN0b2dyYXBoRGF0YSB7XG4gIC8vIENvcmUgaWRlbnRpdHlcbiAgcmVhZG9ubHkgaWQ6IHN0cmluZztcblxuICAvLyBHcmlkIGNvbmZpZ3VyYXRpb25cbiAgcmVhZG9ubHkgZ3JpZERhdGE6IEdyaWREYXRhO1xuXG4gIC8vIEFycm93cywgcHJvcHMsIGFuZCBtb3Rpb25zIChjb25zaXN0ZW50IGRpY3Rpb25hcnkgYXBwcm9hY2gpXG4gIHJlYWRvbmx5IGFycm93czogUmVjb3JkPHN0cmluZywgQXJyb3dEYXRhPjsgLy8gXCJibHVlXCIsIFwicmVkXCJcbiAgcmVhZG9ubHkgcHJvcHM6IFJlY29yZDxzdHJpbmcsIFByb3BEYXRhPjsgLy8gXCJibHVlXCIsIFwicmVkXCJcbiAgcmVhZG9ubHkgbW90aW9uczogUmVjb3JkPHN0cmluZywgTW90aW9uRGF0YT47IC8vIFwiYmx1ZVwiLCBcInJlZFwiXG5cbiAgLy8gTGV0dGVyIGRhdGEgLSBzaW1wbGUgc3RyaW5nIGxldHRlciBzeXN0ZW1cbiAgcmVhZG9ubHkgbGV0dGVyPzogc3RyaW5nIHwgbnVsbDtcbiAgcmVhZG9ubHkgc3RhcnRQb3NpdGlvbj86IEdyaWRQb3NpdGlvbiB8IG51bGw7XG4gIHJlYWRvbmx5IGVuZFBvc2l0aW9uPzogR3JpZFBvc2l0aW9uIHwgbnVsbDtcblxuICAvLyBMZWdhY3kgY29tcGF0aWJpbGl0eSBwcm9wZXJ0aWVzXG4gIHJlYWRvbmx5IGdyaWRNb2RlPzogc3RyaW5nIHwgbnVsbDtcblxuICAvLyBMZXR0ZXIgZGV0ZXJtaW5hdGlvbiBmaWVsZHMgKGxlZ2FjeSAtIG5vdyBkZXJpdmVkIGZyb20gbGV0dGVyLnR5cGUpXG4gIHJlYWRvbmx5IHRpbWluZz86IFRpbWluZyB8IG51bGw7XG4gIHJlYWRvbmx5IGRpcmVjdGlvbj86IERpcmVjdGlvbiB8IG51bGw7XG4gIHJlYWRvbmx5IGxldHRlclR5cGU/OiBMZXR0ZXJUeXBlIHwgbnVsbDsgLy8gRGVwcmVjYXRlZDogdXNlIGxldHRlci50eXBlIGluc3RlYWRcblxuICAvLyBWaXN1YWwgc3RhdGVcbiAgcmVhZG9ubHkgaXNCbGFuazogYm9vbGVhbjtcbiAgcmVhZG9ubHkgaXNNaXJyb3JlZDogYm9vbGVhbjtcblxuICAvLyBNZXRhZGF0YVxuICByZWFkb25seSBtZXRhZGF0YTogUmVjb3JkPHN0cmluZywgdW5rbm93bj47XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVQaWN0b2dyYXBoRGF0YShcbiAgZGF0YTogUGFydGlhbDxQaWN0b2dyYXBoRGF0YT4gPSB7fVxuKTogUGljdG9ncmFwaERhdGEge1xuICAvLyBFbnN1cmUgd2UgaGF2ZSBibHVlIGFuZCByZWQgYXJyb3dzXG4gIGNvbnN0IGFycm93cyA9IHtcbiAgICBibHVlOiBjcmVhdGVBcnJvd0RhdGEoKSxcbiAgICByZWQ6IGNyZWF0ZUFycm93RGF0YSgpLFxuICAgIC4uLmRhdGEuYXJyb3dzLFxuICB9O1xuXG4gIC8vIEVuc3VyZSB3ZSBoYXZlIGJsdWUgYW5kIHJlZCBwcm9wc1xuICBjb25zdCBwcm9wcyA9IHtcbiAgICBibHVlOiBjcmVhdGVQcm9wRGF0YSgpLFxuICAgIHJlZDogY3JlYXRlUHJvcERhdGEoKSxcbiAgICAuLi5kYXRhLnByb3BzLFxuICB9O1xuXG4gIHJldHVybiB7XG4gICAgaWQ6IGRhdGEuaWQgPz8gY3J5cHRvLnJhbmRvbVVVSUQoKSxcbiAgICBncmlkRGF0YTogZGF0YS5ncmlkRGF0YSA/PyBjcmVhdGVHcmlkRGF0YSgpLFxuICAgIGFycm93cyxcbiAgICBwcm9wcyxcbiAgICBtb3Rpb25zOiBkYXRhLm1vdGlvbnMgPz8ge30sXG4gICAgbGV0dGVyOiBkYXRhLmxldHRlciA/PyBudWxsLFxuICAgIHN0YXJ0UG9zaXRpb246IGRhdGEuc3RhcnRQb3NpdGlvbiA/PyBudWxsLFxuICAgIGVuZFBvc2l0aW9uOiBkYXRhLmVuZFBvc2l0aW9uID8/IG51bGwsXG4gICAgdGltaW5nOiBkYXRhLnRpbWluZyA/PyBudWxsLFxuICAgIGRpcmVjdGlvbjogZGF0YS5kaXJlY3Rpb24gPz8gbnVsbCxcbiAgICBsZXR0ZXJUeXBlOiBkYXRhLmxldHRlclR5cGUgPz8gbnVsbCxcbiAgICBpc0JsYW5rOiBkYXRhLmlzQmxhbmsgPz8gZmFsc2UsXG4gICAgaXNNaXJyb3JlZDogZGF0YS5pc01pcnJvcmVkID8/IGZhbHNlLFxuICAgIG1ldGFkYXRhOiBkYXRhLm1ldGFkYXRhID8/IHt9LFxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlUGljdG9ncmFwaERhdGEoXG4gIHBpY3RvZ3JhcGg6IFBpY3RvZ3JhcGhEYXRhLFxuICB1cGRhdGVzOiBQYXJ0aWFsPFBpY3RvZ3JhcGhEYXRhPlxuKTogUGljdG9ncmFwaERhdGEge1xuICByZXR1cm4ge1xuICAgIC4uLnBpY3RvZ3JhcGgsXG4gICAgLi4udXBkYXRlcyxcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUFycm93KFxuICBwaWN0b2dyYXBoOiBQaWN0b2dyYXBoRGF0YSxcbiAgY29sb3I6IHN0cmluZyxcbiAgdXBkYXRlczogUGFydGlhbDxBcnJvd0RhdGE+XG4pOiBQaWN0b2dyYXBoRGF0YSB7XG4gIGlmICghKGNvbG9yIGluIHBpY3RvZ3JhcGguYXJyb3dzKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgQXJyb3cgY29sb3IgJyR7Y29sb3J9JyBub3QgZm91bmRgKTtcbiAgfVxuXG4gIGNvbnN0IGN1cnJlbnRBcnJvdyA9IHBpY3RvZ3JhcGguYXJyb3dzW2NvbG9yXTtcbiAgY29uc3QgdXBkYXRlZEFycm93ID0geyAuLi5jdXJyZW50QXJyb3csIC4uLnVwZGF0ZXMgfTtcbiAgY29uc3QgbmV3QXJyb3dzID0geyAuLi5waWN0b2dyYXBoLmFycm93cywgW2NvbG9yXTogdXBkYXRlZEFycm93IH0gYXMgUmVjb3JkPFxuICAgIHN0cmluZyxcbiAgICBBcnJvd0RhdGFcbiAgPjtcbiAgcmV0dXJuIHsgLi4ucGljdG9ncmFwaCwgYXJyb3dzOiBuZXdBcnJvd3MgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVByb3AoXG4gIHBpY3RvZ3JhcGg6IFBpY3RvZ3JhcGhEYXRhLFxuICBjb2xvcjogc3RyaW5nLFxuICB1cGRhdGVzOiBQYXJ0aWFsPFByb3BEYXRhPlxuKTogUGljdG9ncmFwaERhdGEge1xuICBpZiAoIShjb2xvciBpbiBwaWN0b2dyYXBoLnByb3BzKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgUHJvcCBjb2xvciAnJHtjb2xvcn0nIG5vdCBmb3VuZGApO1xuICB9XG5cbiAgY29uc3QgY3VycmVudFByb3AgPSBwaWN0b2dyYXBoLnByb3BzW2NvbG9yXTtcbiAgY29uc3QgdXBkYXRlZFByb3AgPSB7IC4uLmN1cnJlbnRQcm9wLCAuLi51cGRhdGVzIH07XG4gIGNvbnN0IG5ld1Byb3BzID0geyAuLi5waWN0b2dyYXBoLnByb3BzLCBbY29sb3JdOiB1cGRhdGVkUHJvcCB9IGFzIFJlY29yZDxcbiAgICBzdHJpbmcsXG4gICAgUHJvcERhdGFcbiAgPjtcbiAgcmV0dXJuIHsgLi4ucGljdG9ncmFwaCwgcHJvcHM6IG5ld1Byb3BzIH07XG59XG5cbi8vIENvbnZlbmllbmNlIGdldHRlcnNcbmV4cG9ydCBmdW5jdGlvbiBnZXRCbHVlQXJyb3cocGljdG9ncmFwaDogUGljdG9ncmFwaERhdGEpOiBBcnJvd0RhdGEge1xuICByZXR1cm4gcGljdG9ncmFwaC5hcnJvd3MuYmx1ZSA/PyBjcmVhdGVBcnJvd0RhdGEoKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFJlZEFycm93KHBpY3RvZ3JhcGg6IFBpY3RvZ3JhcGhEYXRhKTogQXJyb3dEYXRhIHtcbiAgcmV0dXJuIHBpY3RvZ3JhcGguYXJyb3dzLnJlZCA/PyBjcmVhdGVBcnJvd0RhdGEoKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEJsdWVQcm9wKHBpY3RvZ3JhcGg6IFBpY3RvZ3JhcGhEYXRhKTogUHJvcERhdGEge1xuICByZXR1cm4gcGljdG9ncmFwaC5wcm9wcy5ibHVlID8/IGNyZWF0ZVByb3BEYXRhKCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRSZWRQcm9wKHBpY3RvZ3JhcGg6IFBpY3RvZ3JhcGhEYXRhKTogUHJvcERhdGEge1xuICByZXR1cm4gcGljdG9ncmFwaC5wcm9wcy5yZWQgPz8gY3JlYXRlUHJvcERhdGEoKTtcbn1cblxuLy8gTGV0dGVyIGNvbnZlbmllbmNlIGZ1bmN0aW9uc1xuZXhwb3J0IGZ1bmN0aW9uIGdldExldHRlclZhbHVlKHBpY3RvZ3JhcGg6IFBpY3RvZ3JhcGhEYXRhKTogc3RyaW5nIHwgbnVsbCB7XG4gIHJldHVybiBwaWN0b2dyYXBoLmxldHRlciA/PyBudWxsO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TGV0dGVyVHlwZShwaWN0b2dyYXBoOiBQaWN0b2dyYXBoRGF0YSk6IExldHRlclR5cGUgfCBudWxsIHtcbiAgLy8gR2V0IHR5cGUgZnJvbSBsZXR0ZXIgc3RyaW5nIG9yIGZhbGwgYmFjayB0byBsZWdhY3kgbGV0dGVyVHlwZVxuICBpZiAocGljdG9ncmFwaC5sZXR0ZXIpIHtcbiAgICByZXR1cm4gKFxuICAgICAgZ2V0VHlwZUZyb21MZXR0ZXIocGljdG9ncmFwaC5sZXR0ZXIpID8/IHBpY3RvZ3JhcGgubGV0dGVyVHlwZSA/PyBudWxsXG4gICAgKTtcbiAgfVxuICByZXR1cm4gcGljdG9ncmFwaC5sZXR0ZXJUeXBlID8/IG51bGw7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRMZXR0ZXIoXG4gIHBpY3RvZ3JhcGg6IFBpY3RvZ3JhcGhEYXRhLFxuICBsZXR0ZXI6IHN0cmluZyB8IG51bGxcbik6IFBpY3RvZ3JhcGhEYXRhIHtcbiAgcmV0dXJuIHtcbiAgICAuLi5waWN0b2dyYXBoLFxuICAgIGxldHRlcixcbiAgICAvLyBVcGRhdGUgbGVnYWN5IGxldHRlclR5cGUgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHlcbiAgICBsZXR0ZXJUeXBlOiBsZXR0ZXIgPyBnZXRUeXBlRnJvbUxldHRlcihsZXR0ZXIpIDogbnVsbCxcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBpY3RvZ3JhcGhEYXRhVG9PYmplY3QoXG4gIHBpY3RvZ3JhcGg6IFBpY3RvZ3JhcGhEYXRhXG4pOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB7XG4gIHJldHVybiB7XG4gICAgaWQ6IHBpY3RvZ3JhcGguaWQsXG4gICAgZ3JpZERhdGE6IHBpY3RvZ3JhcGguZ3JpZERhdGEsXG4gICAgYXJyb3dzOiBwaWN0b2dyYXBoLmFycm93cyxcbiAgICBwcm9wczogcGljdG9ncmFwaC5wcm9wcyxcbiAgICBtb3Rpb25zOiBwaWN0b2dyYXBoLm1vdGlvbnMsXG4gICAgbGV0dGVyOiBwaWN0b2dyYXBoLmxldHRlcixcbiAgICBzdGFydFBvc2l0aW9uOiBwaWN0b2dyYXBoLnN0YXJ0UG9zaXRpb24sXG4gICAgZW5kUG9zaXRpb246IHBpY3RvZ3JhcGguZW5kUG9zaXRpb24sXG4gICAgdGltaW5nOiBwaWN0b2dyYXBoLnRpbWluZyxcbiAgICBkaXJlY3Rpb246IHBpY3RvZ3JhcGguZGlyZWN0aW9uLFxuICAgIGxldHRlclR5cGU6IHBpY3RvZ3JhcGgubGV0dGVyVHlwZSxcbiAgICBpc0JsYW5rOiBwaWN0b2dyYXBoLmlzQmxhbmssXG4gICAgaXNNaXJyb3JlZDogcGljdG9ncmFwaC5pc01pcnJvcmVkLFxuICAgIG1ldGFkYXRhOiBwaWN0b2dyYXBoLm1ldGFkYXRhLFxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGljdG9ncmFwaERhdGFGcm9tT2JqZWN0KFxuICBkYXRhOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPlxuKTogUGljdG9ncmFwaERhdGEge1xuICBjb25zdCBwaWN0b2dyYXBoRGF0YTogUGFydGlhbDxQaWN0b2dyYXBoRGF0YT4gPSB7XG4gICAgLi4uKGRhdGEuaWQgIT09IHVuZGVmaW5lZCAmJiB7IGlkOiBkYXRhLmlkIGFzIHN0cmluZyB9KSxcbiAgICAuLi4oZGF0YS5ncmlkRGF0YSAhPT0gdW5kZWZpbmVkICYmIHsgZ3JpZERhdGE6IGRhdGEuZ3JpZERhdGEgYXMgR3JpZERhdGEgfSksXG4gICAgLi4uKGRhdGEuYXJyb3dzICE9PSB1bmRlZmluZWQgJiYge1xuICAgICAgYXJyb3dzOiBkYXRhLmFycm93cyBhcyBSZWNvcmQ8c3RyaW5nLCBBcnJvd0RhdGE+LFxuICAgIH0pLFxuICAgIC4uLihkYXRhLnByb3BzICE9PSB1bmRlZmluZWQgJiYge1xuICAgICAgcHJvcHM6IGRhdGEucHJvcHMgYXMgUmVjb3JkPHN0cmluZywgUHJvcERhdGE+LFxuICAgIH0pLFxuICAgIC4uLihkYXRhLm1vdGlvbnMgIT09IHVuZGVmaW5lZCAmJiB7XG4gICAgICBtb3Rpb25zOiBkYXRhLm1vdGlvbnMgYXMgUmVjb3JkPHN0cmluZywgTW90aW9uRGF0YT4sXG4gICAgfSksXG4gICAgLi4uKGRhdGEubGV0dGVyICE9PSB1bmRlZmluZWQgJiYge1xuICAgICAgbGV0dGVyOiBkYXRhLmxldHRlciBhcyBzdHJpbmcgfCBudWxsLFxuICAgIH0pLFxuICAgIC4uLihkYXRhLnN0YXJ0UG9zaXRpb24gIT09IHVuZGVmaW5lZCAmJiB7XG4gICAgICBzdGFydFBvc2l0aW9uOiBkYXRhLnN0YXJ0UG9zaXRpb24gYXMgR3JpZFBvc2l0aW9uIHwgbnVsbCxcbiAgICB9KSxcbiAgICAuLi4oZGF0YS5lbmRQb3NpdGlvbiAhPT0gdW5kZWZpbmVkICYmIHtcbiAgICAgIGVuZFBvc2l0aW9uOiBkYXRhLmVuZFBvc2l0aW9uIGFzIEdyaWRQb3NpdGlvbiB8IG51bGwsXG4gICAgfSksXG4gICAgLi4uKGRhdGEudGltaW5nICE9PSB1bmRlZmluZWQgJiYgeyB0aW1pbmc6IGRhdGEudGltaW5nIGFzIFRpbWluZyB8IG51bGwgfSksXG4gICAgLi4uKGRhdGEuZGlyZWN0aW9uICE9PSB1bmRlZmluZWQgJiYge1xuICAgICAgZGlyZWN0aW9uOiBkYXRhLmRpcmVjdGlvbiBhcyBEaXJlY3Rpb24gfCBudWxsLFxuICAgIH0pLFxuICAgIC4uLihkYXRhLmxldHRlclR5cGUgIT09IHVuZGVmaW5lZCAmJiB7XG4gICAgICBsZXR0ZXJUeXBlOiBkYXRhLmxldHRlclR5cGUgYXMgTGV0dGVyVHlwZSB8IG51bGwsXG4gICAgfSksXG4gICAgLi4uKGRhdGEuaXNCbGFuayAhPT0gdW5kZWZpbmVkICYmIHsgaXNCbGFuazogZGF0YS5pc0JsYW5rIGFzIGJvb2xlYW4gfSksXG4gICAgLi4uKGRhdGEuaXNNaXJyb3JlZCAhPT0gdW5kZWZpbmVkICYmIHtcbiAgICAgIGlzTWlycm9yZWQ6IGRhdGEuaXNNaXJyb3JlZCBhcyBib29sZWFuLFxuICAgIH0pLFxuICAgIC4uLihkYXRhLm1ldGFkYXRhICE9PSB1bmRlZmluZWQgJiYge1xuICAgICAgbWV0YWRhdGE6IGRhdGEubWV0YWRhdGEgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4sXG4gICAgfSksXG4gIH07XG5cbiAgcmV0dXJuIGNyZWF0ZVBpY3RvZ3JhcGhEYXRhKHBpY3RvZ3JhcGhEYXRhKTtcbn1cbiJdLAogICJtYXBwaW5ncyI6ICJBQVFBLFNBQVMsdUJBQXVCO0FBRWhDLFNBQVMsc0JBQXNCO0FBRy9CLFNBQVMsc0JBQXNCO0FBQy9CLFNBQVMsaUJBQWlCLHlCQUF5QjtBQUNuRCxTQUFTLFdBQVcsY0FBYyxZQUFZLGNBQWM7QUFtQ3JELGdCQUFTLHFCQUNkLE9BQWdDLENBQUMsR0FDakI7QUFFaEIsUUFBTSxTQUFTO0FBQUEsSUFDYixNQUFNLGdCQUFnQjtBQUFBLElBQ3RCLEtBQUssZ0JBQWdCO0FBQUEsSUFDckIsR0FBRyxLQUFLO0FBQUEsRUFDVjtBQUdBLFFBQU0sUUFBUTtBQUFBLElBQ1osTUFBTSxlQUFlO0FBQUEsSUFDckIsS0FBSyxlQUFlO0FBQUEsSUFDcEIsR0FBRyxLQUFLO0FBQUEsRUFDVjtBQUVBLFNBQU87QUFBQSxJQUNMLElBQUksS0FBSyxNQUFNLE9BQU8sV0FBVztBQUFBLElBQ2pDLFVBQVUsS0FBSyxZQUFZLGVBQWU7QUFBQSxJQUMxQztBQUFBLElBQ0E7QUFBQSxJQUNBLFNBQVMsS0FBSyxXQUFXLENBQUM7QUFBQSxJQUMxQixRQUFRLEtBQUssVUFBVTtBQUFBLElBQ3ZCLGVBQWUsS0FBSyxpQkFBaUI7QUFBQSxJQUNyQyxhQUFhLEtBQUssZUFBZTtBQUFBLElBQ2pDLFFBQVEsS0FBSyxVQUFVO0FBQUEsSUFDdkIsV0FBVyxLQUFLLGFBQWE7QUFBQSxJQUM3QixZQUFZLEtBQUssY0FBYztBQUFBLElBQy9CLFNBQVMsS0FBSyxXQUFXO0FBQUEsSUFDekIsWUFBWSxLQUFLLGNBQWM7QUFBQSxJQUMvQixVQUFVLEtB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
